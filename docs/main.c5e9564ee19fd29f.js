"use strict";(self.webpackChunkcopa=self.webpackChunkcopa||[]).push([[179],{2011:(at,Ae,F)=>{F.d(Ae,{Dh:()=>he,GT:()=>fe,cc:()=>Se,hO:()=>je,on:()=>j,pX:()=>ae,xv:()=>pe});var c=F(4650),te=F(127),O=F(5813);at=F.hmd(at);const ue=["ngOnDestroy"],ae=(me,Ye,Je,De={})=>new Proxy(me,{get:(ve,we)=>Je.runOutsideAngular(()=>{var Be;if(me[we])return!(null===(Be=De?.spy)||void 0===Be)&&Be.get&&De.spy.get(we,me[we]),me[we];if(ue.indexOf(we)>-1)return()=>{};const He=Ye.toPromise().then(U=>{const _e=U&&U[we];return"function"==typeof _e?_e.bind(U):_e&&_e.then?_e.then(Z=>Je.run(()=>Z)):Je.run(()=>_e)});return new Proxy(()=>{},{get:(U,_e)=>He[_e],apply:(U,_e,Z)=>He.then(J=>{var oe;const ie=J&&J(...Z);return!(null===(oe=De?.spy)||void 0===oe)&&oe.apply&&De.spy.apply(we,Z,ie),ie})})})}),fe=(me,Ye)=>{Ye.forEach(Je=>{Object.getOwnPropertyNames(Je.prototype||Je).forEach(De=>{Object.defineProperty(me.prototype,De,Object.getOwnPropertyDescriptor(Je.prototype||Je,De))})})};class ne{constructor(Ye){return Ye}}const he=new c.OlP("angularfire2.app.options"),pe=new c.OlP("angularfire2.app.name");function j(me,Ye,Je){const ve="object"==typeof Je&&Je||{};ve.name=ve.name||"string"==typeof Je&&Je||"[DEFAULT]";const Be=te.Z.apps.filter(He=>He&&He.name===ve.name)[0]||Ye.runOutsideAngular(()=>te.Z.initializeApp(me,ve));try{JSON.stringify(me)!==JSON.stringify(Be.options)&&H("error",`${Be.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ne(Be)}const H=(me,...Ye)=>{(0,c.X6Q)()&&typeof console<"u"&&console[me](...Ye)},X={provide:ne,useFactory:j,deps:[he,c.R0b,[new c.FiY,pe]]};let je=(()=>{class me{constructor(Je){te.Z.registerVersion("angularfire",O.q4.full,"core"),te.Z.registerVersion("angularfire",O.q4.full,"app-compat"),te.Z.registerVersion("angular",c.q4F.full,Je.toString())}static initializeApp(Je,De){return{ngModule:me,providers:[{provide:he,useValue:Je},{provide:pe,useValue:De}]}}}return me.\u0275fac=function(Je){return new(Je||me)(c.LFG(c.Lbi))},me.\u0275mod=c.oAB({type:me}),me.\u0275inj=c.cJS({providers:[X]}),me})();function Se(me,Ye,Je,De,ve){const[,we,Be]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===me)||[];if(we)return function Ie(me,Ye){try{return me.toString()===Ye.toString()}catch{return me===Ye}}(ve,Be)||(ge("error",`${Ye} was already initialized on the ${Je} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ve,was:Be})),we;{const He=De();return globalThis.\u0275AngularfireInstanceCache.push([me,He,ve]),He}}const Ge=!!at.hot,ge=(me,...Ye)=>{(0,c.X6Q)()&&typeof console<"u"&&console[me](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Ae,F)=>{F.d(Ae,{q4:()=>pa,iC:()=>Tn,HU:()=>Mf,vb:()=>yo,JM:()=>sc});var c=F(4650),te=F(5867),O=F(5861),ue=F(9681),ae=F(2090),fe=F(4859),ne=F(1877),he=F(8766);const pe="@firebase/installations",j="0.5.12",X=`w:${j}`,je="FIS_v2",Ye=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function De({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function we(D,A){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(D,A){const P=(yield A.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function He({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:A}){const M=He(D);return M.append("Authorization",function oe(D){return`${je} ${D}`}(A)),M}function _e(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(D){const A=yield D();return A.status>=500&&A.status<600?D():A})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function ie(D,A){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:A},{fid:M}){const P=De(D),Q=He(D),se=A.getImmediate({optional:!0});if(se){const Ct=yield se.getHeartbeatsHeader();Ct&&Q.append("x-firebase-client",Ct)}const Ue={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:je,appId:D.appId,sdkVersion:X})},pt=yield _e(()=>fetch(P,Ue));if(pt.ok){const Ct=yield pt.json();return{fid:Ct.fid||M,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:ve(Ct.authToken)}}throw yield we("Create Installation",pt)})).apply(this,arguments)}function Oe(D){return new Promise(A=>{setTimeout(A,D)})}const $t=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function on(D){return function ht(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $t.test(M)?M:""}catch{return""}}function Bn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function Kt(D,A){const M=Bn(D);an(M,A),function Uo(D,A){const M=function Lr(){return!ai&&"BroadcastChannel"in self&&(ai=new BroadcastChannel("[Firebase] FID Change"),ai.onmessage=D=>{an(D.data.key,D.data.fid)}),ai}();M&&M.postMessage({key:D,fid:A}),function qr(){0===Wt.size&&ai&&(ai.close(),ai=null)}()}(M,A)}function an(D,A){const M=Wt.get(D);if(M)for(const P of M)P(A)}let ai=null;const li="firebase-installations-store";let Ni=null;function gt(){return Ni||(Ni=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,A)=>{0===A&&D.createObjectStore(li)}})),Ni}function pn(D,A){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(D,A){const M=Bn(D),Q=(yield gt()).transaction(li,"readwrite"),se=Q.objectStore(li),Te=yield se.get(M);return yield se.put(A,M),yield Q.done,(!Te||Te.fid!==A.fid)&&Kt(D,A.fid),A})).apply(this,arguments)}function Un(D){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(D){const A=Bn(D),P=(yield gt()).transaction(li,"readwrite");yield P.objectStore(li).delete(A),yield P.done})).apply(this,arguments)}function Xi(D,A){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D,A){const M=Bn(D),Q=(yield gt()).transaction(li,"readwrite"),se=Q.objectStore(li),Te=yield se.get(M),Ue=A(Te);return void 0===Ue?yield se.delete(M):yield se.put(Ue,M),yield Q.done,Ue&&(!Te||Te.fid!==Ue.fid)&&Kt(D,Ue.fid),Ue})).apply(this,arguments)}function yn(D){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(D){let A;const M=yield Xi(D.appConfig,P=>{const Q=mn(P),se=it(D,Q);return A=se.registrationPromise,se.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function mn(D){return Xn(D||{fid:qe(),registrationStatus:0})}function it(D,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Ye.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},P=function Ze(D,A){return jo.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:P}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:gr(D)}:{installationEntry:A}}function jo(){return(jo=(0,O.Z)(function*(D,A){try{const M=yield ie(D,A);return pn(D.appConfig,M)}catch(M){throw Je(M)&&409===M.customData.serverCode?yield Un(D.appConfig):yield pn(D.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function gr(D){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(D){let A=yield Lt(D.appConfig);for(;1===A.registrationStatus;)yield Oe(100),A=yield Lt(D.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:P}=yield yn(D);return P||M}return A})).apply(this,arguments)}function Lt(D){return Xi(D,A=>{if(!A)throw Ye.create("installation-not-found");return Xn(A)})}function Xn(D){return function Ss(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Yt(D,A){return Li.apply(this,arguments)}function Li(){return(Li=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:A},M){const P=jt(D,M),Q=U(D,M),se=A.getImmediate({optional:!0});if(se){const Ct=yield se.getHeartbeatsHeader();Ct&&Q.append("x-firebase-client",Ct)}const Ue={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:X,appId:D.appId}})},pt=yield _e(()=>fetch(P,Ue));if(pt.ok)return ve(yield pt.json());throw yield we("Generate Auth Token",pt)})).apply(this,arguments)}function jt(D,{fid:A}){return`${De(D)}/${A}/authTokens:generate`}function Y(D){return G.apply(this,arguments)}function G(){return(G=(0,O.Z)(function*(D,A=!1){let M;const P=yield Xi(D.appConfig,se=>{if(!lt(se))throw Ye.create("not-registered");const Te=se.authToken;if(!A&&hn(Te))return se;if(1===Te.requestStatus)return M=B(D,A),se;{if(!navigator.onLine)throw Ye.create("app-offline");const Ue=ar(se);return M=xe(D,Ue),Ue}});return M?yield M:P.authToken})).apply(this,arguments)}function B(D,A){return $.apply(this,arguments)}function $(){return($=(0,O.Z)(function*(D,A){let M=yield W(D.appConfig);for(;1===M.authToken.requestStatus;)yield Oe(100),M=yield W(D.appConfig);const P=M.authToken;return 0===P.requestStatus?Y(D,A):P})).apply(this,arguments)}function W(D){return Xi(D,A=>{if(!lt(A))throw Ye.create("not-registered");return function tt(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function xe(D,A){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(D,A){try{const M=yield Yt(D,A),P=Object.assign(Object.assign({},A),{authToken:M});return yield pn(D.appConfig,P),M}catch(M){if(!Je(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const P=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield pn(D.appConfig,P)}else yield Un(D.appConfig);throw M}})).apply(this,arguments)}function lt(D){return void 0!==D&&2===D.registrationStatus}function hn(D){return 2===D.requestStatus&&!function Zt(D){const A=Date.now();return A<D.creationTime||D.creationTime+D.expiresIn<A+36e5}(D)}function ar(D){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:A})}function vn(){return(vn=(0,O.Z)(function*(D){const A=D,{installationEntry:M,registrationPromise:P}=yield yn(A);return P?P.catch(console.error):Y(A).catch(console.error),M.fid})).apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(D,A=!1){const M=D;return yield We(M),(yield Y(M,A)).token})).apply(this,arguments)}function We(D){return vt.apply(this,arguments)}function vt(){return(vt=(0,O.Z)(function*(D){const{registrationPromise:A}=yield yn(D);A&&(yield A)})).apply(this,arguments)}function Mt(D){return Ye.create("missing-app-config-values",{valueName:D})}const Ha="installations",xn=D=>{const A=D.getProvider("app").getImmediate(),M=function Ts(D){if(!D||!D.options)throw Mt("App Configuration");if(!D.name)throw Mt("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!D.options[M])throw Mt(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(A);return{app:A,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Ms=D=>{const A=D.getProvider("app").getImmediate(),M=(0,ue._getProvider)(A,Ha).getImmediate();return{getId:()=>function fn(D){return vn.apply(this,arguments)}(M),getToken:Q=>function mr(D){return Ar.apply(this,arguments)}(M,Q)}};(function Ir(){(0,ue._registerComponent)(new fe.wA(Ha,xn,"PUBLIC")),(0,ue._registerComponent)(new fe.wA("installations-internal",Ms,"PRIVATE"))})(),(0,ue.registerVersion)(pe,j),(0,ue.registerVersion)(pe,j,"esm2017");const ks="@firebase/remote-config",Vt=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dd{constructor(A,M,P,Q){this.client=A,this.storage=M,this.storageCache=P,this.logger=Q}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-M,Q=P<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Q}.`),Q}fetch(A){var M=this;return(0,O.Z)(function*(){const[P,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(A.cacheMaxAgeMillis,P))return Q;A.eTag=Q&&Q.eTag;const se=yield M.client.fetch(A),Te=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Te.push(M.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Te),se})()}}function xd(D=navigator){return D.languages&&D.languages[0]||D.language}class Kc{constructor(A,M,P,Q,se,Te){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=P,this.projectId=Q,this.apiKey=se,this.appId=Te}fetch(A){var M=this;return(0,O.Z)(function*(){var P,Q,se;const[Te,Ue]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ct=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},ut={sdk_version:M.sdkVersion,app_instance_id:Te,app_instance_id_token:Ue,app_id:M.appId,language_code:xd()},Pn={method:"POST",headers:At,body:JSON.stringify(ut)},jr=fetch(Ct,Pn),_o=new Promise((vo,ba)=>{A.signal.addEventListener(()=>{const zd=new Error("The operation was aborted.");zd.name="AbortError",ba(zd)})});let sn;try{yield Promise.race([jr,_o]),sn=yield jr}catch(vo){let ba="fetch-client-network";throw"AbortError"===(null===(P=vo)||void 0===P?void 0:P.name)&&(ba="fetch-timeout"),Vt.create(ba,{originalErrorMessage:null===(Q=vo)||void 0===Q?void 0:Q.message})}let cn=sn.status;const oc=sn.headers.get("ETag")||void 0;let ml,Hs;if(200===sn.status){let vo;try{vo=yield sn.json()}catch(ba){throw Vt.create("fetch-client-parse",{originalErrorMessage:null===(se=ba)||void 0===se?void 0:se.message})}ml=vo.entries,Hs=vo.state}if("INSTANCE_STATE_UNSPECIFIED"===Hs?cn=500:"NO_CHANGE"===Hs?cn=304:("NO_TEMPLATE"===Hs||"EMPTY_CONFIG"===Hs)&&(ml={}),304!==cn&&200!==cn)throw Vt.create("fetch-status",{httpStatus:cn});return{status:cn,eTag:oc,config:ml}})()}}class ug{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,O.Z)(function*(){const P=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,P)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:P}){var Q=this;return(0,O.Z)(function*(){yield function lr(D,A){return new Promise((M,P)=>{const Q=Math.max(A-Date.now(),0),se=setTimeout(M,Q);D.addEventListener(()=>{clearTimeout(se),P(Vt.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const se=yield Q.client.fetch(A);return yield Q.storage.deleteThrottleMetadata(),se}catch(se){if(!function Ad(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const A=Number(D.customData.httpStatus);return 429===A||500===A||503===A||504===A}(se))throw se;const Te={throttleEndTimeMillis:Date.now()+(0,ae.$s)(P),backoffCount:P+1};return yield Q.storage.setThrottleMetadata(Te),Q.attemptFetch(A,Te)}})()}}class Yc{constructor(A,M,P,Q,se){this.app=A,this._client=M,this._storageCache=P,this._storage=Q,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zc(D,A){var M;const P=D.target.error||void 0;return Vt.create(A,{originalErrorMessage:P&&(null===(M=P)||void 0===M?void 0:M.message)})}const Fs="app_namespace_store";class Sd{constructor(A,M,P,Q=function fg(){return new Promise((D,A)=>{var M;try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=Q=>{A(Zc(Q,"storage-open"))},P.onsuccess=Q=>{D(Q.target.result)},P.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(Fs,{keyPath:"compositeKey"})}}catch(P){A(Vt.create("storage-open",{originalErrorMessage:null===(M=P)||void 0===M?void 0:M.message}))}})}()){this.appId=A,this.appName=M,this.namespace=P,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,O.Z)(function*(){const P=yield M.openDbPromise;return new Promise((Q,se)=>{var Te;const pt=P.transaction([Fs],"readonly").objectStore(Fs),Ct=M.createCompositeKey(A);try{const At=pt.get(Ct);At.onerror=ut=>{se(Zc(ut,"storage-get"))},At.onsuccess=ut=>{const Pn=ut.target.result;Q(Pn?Pn.value:void 0)}}catch(At){se(Vt.create("storage-get",{originalErrorMessage:null===(Te=At)||void 0===Te?void 0:Te.message}))}})})()}set(A,M){var P=this;return(0,O.Z)(function*(){const Q=yield P.openDbPromise;return new Promise((se,Te)=>{var Ue;const Ct=Q.transaction([Fs],"readwrite").objectStore(Fs),At=P.createCompositeKey(A);try{const ut=Ct.put({compositeKey:At,value:M});ut.onerror=Pn=>{Te(Zc(Pn,"storage-set"))},ut.onsuccess=()=>{se()}}catch(ut){Te(Vt.create("storage-set",{originalErrorMessage:null===(Ue=ut)||void 0===Ue?void 0:Ue.message}))}})})()}delete(A){var M=this;return(0,O.Z)(function*(){const P=yield M.openDbPromise;return new Promise((Q,se)=>{var Te;const pt=P.transaction([Fs],"readwrite").objectStore(Fs),Ct=M.createCompositeKey(A);try{const At=pt.delete(Ct);At.onerror=ut=>{se(Zc(ut,"storage-delete"))},At.onsuccess=()=>{Q()}}catch(At){se(Vt.create("storage-delete",{originalErrorMessage:null===(Te=At)||void 0===Te?void 0:Te.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class za{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,O.Z)(function*(){const M=A.storage.getLastFetchStatus(),P=A.storage.getLastSuccessfulFetchTimestampMillis(),Q=A.storage.getActiveConfig(),se=yield M;se&&(A.lastFetchStatus=se);const Te=yield P;Te&&(A.lastSuccessfulFetchTimestampMillis=Te);const Ue=yield Q;Ue&&(A.activeConfig=Ue)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function bi(){return Md.apply(this,arguments)}function Md(){return(Md=(0,O.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Wo(){(0,ue._registerComponent)(new fe.wA("remote-config",function D(A,{instanceIdentifier:M}){const P=A.getProvider("app").getImmediate(),Q=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vt.create("registration-window");if(!(0,ae.hl)())throw Vt.create("indexed-db-unavailable");const{projectId:se,apiKey:Te,appId:Ue}=P.options;if(!se)throw Vt.create("registration-project-id");if(!Te)throw Vt.create("registration-api-key");if(!Ue)throw Vt.create("registration-app-id");const pt=new Sd(Ue,P.name,M=M||"firebase"),Ct=new za(pt),At=new ne.Yd(ks);At.logLevel=ne.in.ERROR;const ut=new Kc(Q,ue.SDK_VERSION,M,se,Te,Ue),Pn=new ug(ut,pt),jr=new Dd(Pn,pt,Ct,At),_o=new Yc(P,jr,Ct,pt,At);return function Sr(D){const A=(0,ae.m9)(D);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(_o),_o},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(ks,"0.3.11"),(0,ue.registerVersion)(ks,"0.3.11","esm2017")}();const Ko="/firebase-messaging-sw.js",Vi="/firebase-cloud-messaging-push-scope",io="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zo="google.c.a.c_id",qa="google.c.a.c_l",kd="google.c.a.ts",Rd="google.c.a.e";var cr=(()=>{return(D=cr||(cr={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",cr;var D})();function Kr(D){const A=new Uint8Array(D);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Od(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(M),Q=new Uint8Array(P.length);for(let se=0;se<P.length;++se)Q[se]=P.charCodeAt(se);return Q}const Qo="fcm_token_details_db",Jn="fcm_token_object_Store";function $n(D){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Qo))return null;let A=null;return(yield(0,he.X3)(Qo,5,{upgrade:(P=(0,O.Z)(function*(Q,se,Te,Ue){var pt;if(se<2||!Q.objectStoreNames.contains(Jn))return;const Ct=Ue.objectStore(Jn),At=yield Ct.index("fcmSenderId").get(D);if(yield Ct.clear(),At)if(2===se){const ut=At;if(!ut.auth||!ut.p256dh||!ut.endpoint)return;A={token:ut.fcmToken,createTime:null!==(pt=ut.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:ut.auth,p256dh:ut.p256dh,endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:"string"==typeof ut.vapidKey?ut.vapidKey:Kr(ut.vapidKey)}}}else if(3===se){const ut=At;A={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:Kr(ut.auth),p256dh:Kr(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:Kr(ut.vapidKey)}}}else if(4===se){const ut=At;A={token:ut.fcmToken,createTime:ut.createTime,subscriptionOptions:{auth:Kr(ut.auth),p256dh:Kr(ut.p256dh),endpoint:ut.endpoint,swScope:ut.swScope,vapidKey:Kr(ut.vapidKey)}}}}),function(se,Te,Ue,pt){return P.apply(this,arguments)})})).close(),yield(0,he.Lj)(Qo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),yf(A)?A:null;var P}),Fd.apply(this,arguments)}function yf(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:A}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ns="firebase-messaging-store";let Wa=null;function rs(){return Wa||(Wa=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,A)=>{0===A&&D.createObjectStore(ns)}})),Wa}function Tr(D){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(D){const A=ea(D),P=yield(yield rs()).transaction(ns).objectStore(ns).get(A);if(P)return P;{const Q=yield $n(D.appConfig.senderId);if(Q)return yield Ei(D,Q),Q}})).apply(this,arguments)}function Ei(D,A){return is.apply(this,arguments)}function is(){return(is=(0,O.Z)(function*(D,A){const M=ea(D),Q=(yield rs()).transaction(ns,"readwrite");return yield Q.objectStore(ns).put(A,M),yield Q.done,A})).apply(this,arguments)}function ss(D){return os.apply(this,arguments)}function os(){return(os=(0,O.Z)(function*(D){const A=ea(D),P=(yield rs()).transaction(ns,"readwrite");yield P.objectStore(ns).delete(A),yield P.done})).apply(this,arguments)}function ea({appConfig:D}){return D.appId}const Fn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nd(D,A){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(D,A){var M;const P=yield Ee(D),Q=Ls(A),se={method:"POST",headers:P,body:JSON.stringify(Q)};let Te;try{Te=yield(yield fetch(ta(D.appConfig),se)).json()}catch(Ue){throw Fn.create("token-subscribe-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(Te.error)throw Fn.create("token-subscribe-failed",{errorInfo:Te.error.message});if(!Te.token)throw Fn.create("token-subscribe-no-token");return Te.token})).apply(this,arguments)}function Qc(D,A){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(D,A){var M;const P=yield Ee(D),Q=Ls(A.subscriptionOptions),se={method:"PATCH",headers:P,body:JSON.stringify(Q)};let Te;try{Te=yield(yield fetch(`${ta(D.appConfig)}/${A.token}`,se)).json()}catch(Ue){throw Fn.create("token-update-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(Te.error)throw Fn.create("token-update-failed",{errorInfo:Te.error.message});if(!Te.token)throw Fn.create("token-update-no-token");return Te.token})).apply(this,arguments)}function Ps(D,A){return $l.apply(this,arguments)}function $l(){return($l=(0,O.Z)(function*(D,A){var M;const Q={method:"DELETE",headers:yield Ee(D)};try{const Te=yield(yield fetch(`${ta(D.appConfig)}/${A}`,Q)).json();if(Te.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:Te.error.message})}catch(se){throw Fn.create("token-unsubscribe-failed",{errorInfo:null===(M=se)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function ta({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ee(D){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*({appConfig:D,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Ls({p256dh:D,auth:A,endpoint:M,vapidKey:P}){const Q={web:{endpoint:M,auth:A,p256dh:D}};return P!==io&&(Q.web.applicationPubKey=P),Q}const na=6048e5;function bn(D){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(D){const A=yield _f(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:A.endpoint,auth:Kr(A.getKey("auth")),p256dh:Kr(A.getKey("p256dh"))},P=yield Tr(D.firebaseDependencies);if(P){if(er(P.subscriptionOptions,M))return Date.now()>=P.createTime+na?Ya(D,{token:P.token,createTime:Date.now(),subscriptionOptions:M}):P.token;try{yield Ps(D.firebaseDependencies,P.token)}catch(Q){console.warn(Q)}return ra(D.firebaseDependencies,M)}return ra(D.firebaseDependencies,M)})).apply(this,arguments)}function Vs(D){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(D){const A=yield Tr(D.firebaseDependencies);A&&(yield Ps(D.firebaseDependencies,A.token),yield ss(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ya(D,A){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(D,A){try{const M=yield Qc(D.firebaseDependencies,A),P=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Ei(D.firebaseDependencies,P),M}catch(M){throw yield Vs(D),M}})).apply(this,arguments)}function ra(D,A){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D,A){const P={token:yield Nd(D,A),createTime:Date.now(),subscriptionOptions:A};return yield Ei(D,P),P.token})).apply(this,arguments)}function _f(D,A){return as.apply(this,arguments)}function as(){return(as=(0,O.Z)(function*(D,A){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Od(A)})})).apply(this,arguments)}function er(D,A){return A.vapidKey===D.vapidKey&&A.endpoint===D.endpoint&&A.auth===D.auth&&A.p256dh===D.p256dh}function Bi(D){const A={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Xa(D,A){if(!A.notification)return;D.notification={};const M=A.notification.title;M&&(D.notification.title=M);const P=A.notification.body;P&&(D.notification.body=P);const Q=A.notification.image;Q&&(D.notification.image=Q)}(A,D),function oo(D,A){!A.data||(D.data=A.data)}(A,D),function ls(D,A){var M,P,Q,se,Te;if(!(A.fcmOptions||null!==(M=A.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const Ue=null!==(Q=null===(P=A.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==Q?Q:null===(se=A.notification)||void 0===se?void 0:se.click_action;Ue&&(D.fcmOptions.link=Ue);const pt=null===(Te=A.fcmOptions)||void 0===Te?void 0:Te.analytics_label;pt&&(D.fcmOptions.analyticsLabel=pt)}(A,D),A}function Xc(D){return"object"==typeof D&&!!D&&Zo in D}function Jc(D,A){const M=[];for(let P=0;P<D.length;P++)M.push(D.charAt(P)),P<A.length&&M.push(A.charAt(P));return M.join("")}function Ja(D){return Fn.create("missing-app-config-values",{valueName:D})}Jc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Jc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class eu{constructor(A,M,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Pd(D){if(!D||!D.options)throw Ja("App Configuration Object");if(!D.name)throw Ja("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const P of A)if(!M[P])throw Ja(P);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Q,installations:M,analyticsProvider:P}}_delete(){return Promise.resolve()}}function ao(D){return zl.apply(this,arguments)}function zl(){return(zl=(0,O.Z)(function*(D){var A;try{D.swRegistration=yield navigator.serviceWorker.register(Ko,{scope:Vi}),D.swRegistration.update().catch(()=>{})}catch(M){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:null===(A=M)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function el(D,A){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D,A){if(!A&&!D.swRegistration&&(yield ao(D)),A||!D.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");D.swRegistration=A}})).apply(this,arguments)}function ia(D,A){return ql.apply(this,arguments)}function ql(){return(ql=(0,O.Z)(function*(D,A){A?D.vapidKey=A:D.vapidKey||(D.vapidKey=io)})).apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(D,A){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield ia(D,A?.vapidKey),yield el(D,A?.serviceWorkerRegistration),bn(D)})).apply(this,arguments)}function Yl(D,A,M){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,O.Z)(function*(D,A,M){const P=sa(A);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:M[Zo],message_name:M[qa],message_time:M[kd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sa(D){switch(D){case cr.NOTIFICATION_CLICKED:return"notification_open";case cr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ql(){return(Ql=(0,O.Z)(function*(D,A){const M=A.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===cr.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Bi(M)):D.onMessageHandler.next(Bi(M)));const P=M.data;Xc(P)&&"1"===P[Rd]&&(yield Yl(D,M.messageType,P))})).apply(this,arguments)}const ur="@firebase/messaging",wn=D=>{const A=new eu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function vf(D,A){return Ql.apply(this,arguments)}(A,M)),A},oa=D=>{const A=D.getProvider("messaging").getImmediate();return{getToken:P=>function Wl(D,A){return Kl.apply(this,arguments)}(A,P)}};function bf(){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,O.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ld(){(0,ue._registerComponent)(new fe.wA("messaging",wn,"PUBLIC")),(0,ue._registerComponent)(new fe.wA("messaging-internal",oa,"PRIVATE")),(0,ue.registerVersion)(ur,"0.9.16"),(0,ue.registerVersion)(ur,"0.9.16","esm2017")}();const Ui="analytics",aa="firebase_id",ji="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",nl="https://www.googletagmanager.com/gtag/js",_r=new ne.Yd("@firebase/analytics");function xf(D){return Promise.all(D.map(A=>A.catch(M=>M)))}function Gy(D,A){const M=document.createElement("script");M.src=`${nl}?l=${D}&id=${A}`,M.async=!0,document.head.appendChild(M)}function rl(D,A,M,P,Q,se){return il.apply(this,arguments)}function il(){return(il=(0,O.Z)(function*(D,A,M,P,Q,se){const Te=P[Q];try{if(Te)yield A[Te];else{const pt=(yield xf(M)).find(Ct=>Ct.measurementId===Q);pt&&(yield A[pt.appId])}}catch(Ue){_r.error(Ue)}D("config",Q,se)})).apply(this,arguments)}function Ud(D,A,M,P,Q){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,O.Z)(function*(D,A,M,P,Q){try{let se=[];if(Q&&Q.send_to){let Te=Q.send_to;Array.isArray(Te)||(Te=[Te]);const Ue=yield xf(M);for(const pt of Te){const Ct=Ue.find(ut=>ut.measurementId===pt),At=Ct&&A[Ct.appId];if(!At){se=[];break}se.push(At)}}0===se.length&&(se=Object.values(A)),yield Promise.all(se),D("event",P,Q||{})}catch(se){_r.error(se)}})).apply(this,arguments)}function sl(){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(nl))return A;return null}const Mr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hd=new class Us{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function ye(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function us(D){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(D){var A;const{appId:M,apiKey:P}=D,Q={method:"GET",headers:ye(P)},se=ji.replace("{app-id}",M),Te=yield fetch(se,Q);if(200!==Te.status&&304!==Te.status){let Ue="";try{const pt=yield Te.json();null!==(A=pt.error)&&void 0!==A&&A.message&&(Ue=pt.error.message)}catch{}throw Mr.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:Ue})}return Te.json()})).apply(this,arguments)}function Qt(D){return fi.apply(this,arguments)}function fi(){return(fi=(0,O.Z)(function*(D,A=Hd,M){const{appId:P,apiKey:Q,measurementId:se}=D.options;if(!P)throw Mr.create("no-app-id");if(!Q){if(se)return{measurementId:se,appId:P};throw Mr.create("no-api-key")}const Te=A.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new ol;return setTimeout((0,O.Z)(function*(){Ue.abort()}),void 0!==M?M:6e4),An({appId:P,apiKey:Q,measurementId:se},Te,Ue,A)})).apply(this,arguments)}function An(D,A,M){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(D,{throttleEndTimeMillis:A,backoffCount:M},P,Q=Hd){var se,Te;const{appId:Ue,measurementId:pt}=D;try{yield la(P,A)}catch(Ct){if(pt)return _r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${null===(se=Ct)||void 0===se?void 0:se.message}]`),{appId:Ue,measurementId:pt};throw Ct}try{const Ct=yield us(D);return Q.deleteThrottleMetadata(Ue),Ct}catch(Ct){const At=Ct;if(!Jl(At)){if(Q.deleteThrottleMetadata(Ue),pt)return _r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Ue,measurementId:pt};throw Ct}const ut=503===Number(null===(Te=At?.customData)||void 0===Te?void 0:Te.httpStatus)?(0,ae.$s)(M,Q.intervalMillis,30):(0,ae.$s)(M,Q.intervalMillis),Pn={throttleEndTimeMillis:Date.now()+ut,backoffCount:M+1};return Q.setThrottleMetadata(Ue,Pn),_r.debug(`Calling attemptFetch again in ${ut} millis`),An(D,Pn,P,Q)}})).apply(this,arguments)}function la(D,A){return new Promise((M,P)=>{const Q=Math.max(A-Date.now(),0),se=setTimeout(M,Q);D.addEventListener(()=>{clearTimeout(se),P(Mr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Jl(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const A=Number(D.customData.httpStatus);return 429===A||500===A||503===A||504===A}class ol{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let In,Vr;function gn(){return(gn=(0,O.Z)(function*(D,A,M,P,Q){if(Q&&Q.global)D("event",M,P);else{const se=yield A;D("event",M,Object.assign(Object.assign({},P),{send_to:se}))}})).apply(this,arguments)}function iu(D){Vr=D}function tc(D){In=D}function fo(){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(){var D;if(!(0,ae.hl)())return _r.warn(Mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(A){return _r.warn(Mr.create("indexeddb-unavailable",{errorInfo:null===(D=A)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function St(){return(St=(0,O.Z)(function*(D,A,M,P,Q,se,Te){var Ue;const pt=Qt(D);pt.then(jr=>{M[jr.measurementId]=jr.appId,D.options.measurementId&&jr.measurementId!==D.options.measurementId&&_r.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${jr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(jr=>_r.error(jr)),A.push(pt);const Ct=fo().then(jr=>{if(jr)return P.getId()}),[At,ut]=yield Promise.all([pt,Ct]);sl()||Gy(se,At.measurementId),Vr&&(Q("consent","default",Vr),iu(void 0)),Q("js",new Date);const Pn=null!==(Ue=Te?.config)&&void 0!==Ue?Ue:{};return Pn.origin="firebase",Pn.update=!0,null!=ut&&(Pn[aa]=ut),Q("config",At.measurementId,Pn),In&&(Q("set",In),tc(void 0)),At.measurementId})).apply(this,arguments)}class da{constructor(A){this.app=A}_delete(){return delete Sn[this.app.options.appId],Promise.resolve()}}let Sn={},Qe=[];const ha={};let nc,Ut,ft="dataLayer",cl=!1;function mg(D,A,M){!function gg(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const A=D.map((P,Q)=>`(${Q+1}) ${P}`).join(" "),M=Mr.create("invalid-analytics-context",{errorInfo:A});_r.warn(M.message)}}();const P=D.options.appId;if(!P)throw Mr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Mr.create("no-api-key");_r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sn[P])throw Mr.create("already-exists",{id:P});if(!cl){!function $y(D){let A=[];Array.isArray(window[D])?A=window[D]:window[D]=A}(ft);const{wrappedGtag:se,gtagCore:Te}=function Af(D,A,M,P,Q){let se=function(...Te){window[P].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(se=window[Q]),window[Q]=function jd(D,A,M,P){function se(){return(se=(0,O.Z)(function*(Te,Ue,pt){try{"event"===Te?yield Ud(D,A,M,Ue,pt):"config"===Te?yield rl(D,A,M,P,Ue,pt):"consent"===Te?D("consent","update",pt):D("set",Ue)}catch(Ct){_r.error(Ct)}})).apply(this,arguments)}return function Q(Te,Ue,pt){return se.apply(this,arguments)}}(se,D,A,M),{gtagCore:se,wrappedGtag:window[Q]}}(Sn,Qe,ha,ft,"gtag");Ut=se,nc=Te,cl=!0}return Sn[P]=function Br(D,A,M,P,Q,se,Te){return St.apply(this,arguments)}(D,Qe,ha,A,nc,ft,M),new da(D)}function su(){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Rr="@firebase/analytics";!function lu(){(0,ue._registerComponent)(new fe.wA(Ui,(A,{options:M})=>mg(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new fe.wA("analytics-internal",function D(A){try{const M=A.getProvider(Ui).getImmediate();return{logEvent:(P,Q,se)=>function yg(D,A,M,P){D=(0,ae.m9)(D),function co(D,A,M,P,Q){return gn.apply(this,arguments)}(Ut,Sn[D.app.options.appId],A,M,P).catch(Q=>_r.error(Q))}(M,P,Q,se)}}catch(M){throw Mr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(Rr,"0.8.0"),(0,ue.registerVersion)(Rr,"0.8.0","esm2017")}();var zn=F(4408),dr=F(7565);const rc=new class dl extends dr.v{}(class po extends zn.o{constructor(A,M){super(A,M),this.scheduler=A,this.work=M}schedule(A,M=0){return M>0?super.schedule(A,M):(this.delay=M,this.state=A,this.scheduler.flush(this),this)}execute(A,M){return M>0||this.closed?super.execute(A,M):this._execute(A,M)}requestAsyncId(A,M,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(A,M,P):A.flush(this)}});var cu=F(4986),go=F(8505),qn=F(9468),mo=F(5363);const pa=new c.GfV("7.4.1"),Gd="__angularfire_symbol__analyticsIsSupportedValue",hs="__angularfire_symbol__analyticsIsSupported",ga="__angularfire_symbol__remoteConfigIsSupportedValue",ma="__angularfire_symbol__remoteConfigIsSupported",ic="__angularfire_symbol__messagingIsSupportedValue",uu="__angularfire_symbol__messagingIsSupported";function sc(D,A,M){if(A){if(1===A.length)return A[0];const se=A.filter(Te=>Te.app===M);if(1===se.length)return se[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[hs]||(globalThis[hs]=su().then(D=>globalThis[Gd]=D).catch(()=>globalThis[Gd]=!1)),globalThis[uu]||(globalThis[uu]=bf().then(D=>globalThis[ic]=D).catch(()=>globalThis[ic]=!1)),globalThis[ma]||(globalThis[ma]=bi().then(D=>globalThis[ga]=D).catch(()=>globalThis[ga]=!1));const yo=(D,A)=>{const M=A?[A]:(0,te.C6)(),P=[];return M.forEach(Q=>{Q.container.getProvider(D).instances.forEach(Te=>{P.includes(Te)||P.push(Te)})}),P};function js(){}class Ci{constructor(A,M=rc){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,P){const Q=this.zone;return this.delegate.schedule(function(Te){Q.runGuarded(()=>{A.apply(this,[Te])})},M,P)}}class $d{constructor(A){this.zone=A,this.task=null}call(A,M){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",js,{},js,js)),M.pipe((0,go.b)({next:P,complete:P,error:P})).subscribe(A).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mf=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ci(Zone.current)),this.insideAngular=M.run(()=>new Ci(Zone.current,cu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(c.LFG(c.R0b))},D.\u0275prov=c.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function fs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Tn(D){return fs(),function hu(D){return function(M){return(M=M.lift(new $d(D.ngZone))).pipe((0,qn.R)(D.outsideAngular),(0,mo.Q)(D.insideAngular))}}(fs())(D)}},2090:(at,Ae,F)=>{F.d(Ae,{$s:()=>Ss,BH:()=>je,G6:()=>He,L:()=>he,LL:()=>Ne,Mn:()=>we,Sg:()=>Se,UG:()=>ge,US:()=>fe,ZB:()=>H,ZR:()=>ie,b$:()=>Je,d:()=>De,eu:()=>_e,hl:()=>U,jU:()=>me,m9:()=>jt,ne:()=>gt,pd:()=>li,r3:()=>zr,ru:()=>Ye,tV:()=>pe,uI:()=>Ge,vZ:()=>ai,w1:()=>ve,xO:()=>Fi,xb:()=>an,z$:()=>Ie,zI:()=>Z,zd:()=>Qi});const ue=function(Y){const G=[];let B=0;for(let $=0;$<Y.length;$++){let W=Y.charCodeAt($);W<128?G[B++]=W:W<2048?(G[B++]=W>>6|192,G[B++]=63&W|128):55296==(64512&W)&&$+1<Y.length&&56320==(64512&Y.charCodeAt($+1))?(W=65536+((1023&W)<<10)+(1023&Y.charCodeAt(++$)),G[B++]=W>>18|240,G[B++]=W>>12&63|128,G[B++]=W>>6&63|128,G[B++]=63&W|128):(G[B++]=W>>12|224,G[B++]=W>>6&63|128,G[B++]=63&W|128)}return G},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,G){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let W=0;W<Y.length;W+=3){const xe=Y[W],Ve=W+1<Y.length,lt=Ve?Y[W+1]:0,hn=W+2<Y.length,Zt=hn?Y[W+2]:0;let fn=(15&lt)<<2|Zt>>6,vn=63&Zt;hn||(vn=64,Ve||(fn=64)),$.push(B[xe>>2],B[(3&xe)<<4|lt>>4],B[fn],B[vn])}return $.join("")},encodeString(Y,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(Y):this.encodeByteArray(ue(Y),G)},decodeString(Y,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(Y):function(Y){const G=[];let B=0,$=0;for(;B<Y.length;){const W=Y[B++];if(W<128)G[$++]=String.fromCharCode(W);else if(W>191&&W<224){const xe=Y[B++];G[$++]=String.fromCharCode((31&W)<<6|63&xe)}else if(W>239&&W<365){const hn=((7&W)<<18|(63&Y[B++])<<12|(63&Y[B++])<<6|63&Y[B++])-65536;G[$++]=String.fromCharCode(55296+(hn>>10)),G[$++]=String.fromCharCode(56320+(1023&hn))}else{const xe=Y[B++],Ve=Y[B++];G[$++]=String.fromCharCode((15&W)<<12|(63&xe)<<6|63&Ve)}}return G.join("")}(this.decodeStringToByteArray(Y,G))},decodeStringToByteArray(Y,G){this.init_();const B=G?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let W=0;W<Y.length;){const xe=B[Y.charAt(W++)],lt=W<Y.length?B[Y.charAt(W)]:0;++W;const Zt=W<Y.length?B[Y.charAt(W)]:64;++W;const tt=W<Y.length?B[Y.charAt(W)]:64;if(++W,null==xe||null==lt||null==Zt||null==tt)throw Error();$.push(xe<<2|lt>>4),64!==Zt&&($.push(lt<<4&240|Zt>>2),64!==tt&&$.push(Zt<<6&192|tt))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},he=function(Y){return function(Y){const G=ue(Y);return fe.encodeByteArray(G,!0)}(Y).replace(/\./g,"")},pe=function(Y){try{return fe.decodeString(Y,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function H(Y,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return G}for(const B in G)!G.hasOwnProperty(B)||!X(B)||(Y[B]=H(Y[B],G[B]));return Y}function X(Y){return"__proto__"!==Y}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,B)=>{this.resolve=G,this.reject=B})}wrapCallback(G){return(B,$)=>{B?this.reject(B):this.resolve($),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(B):G(B,$))}}}function Se(Y,G){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=G||"demo-project",W=Y.iat||0,xe=Y.sub||Y.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:W,exp:W+3600,auth_time:W,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ve)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return"object"==typeof self&&self.self===self}function Ye(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){return Ie().indexOf("Electron/")>=0}function ve(){const Y=Ie();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function we(){return Ie().indexOf("MSAppHost/")>=0}function He(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function _e(){return new Promise((Y,G)=>{try{let B=!0;const $="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open($);W.onsuccess=()=>{W.result.close(),B||self.indexedDB.deleteDatabase($),Y(!0)},W.onupgradeneeded=()=>{B=!1},W.onerror=()=>{var xe;G((null===(xe=W.error)||void 0===xe?void 0:xe.message)||"")}}catch(B){G(B)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ie extends Error{constructor(G,B,$){super(B),this.code=G,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor(G,B,$){this.service=G,this.serviceName=B,this.errors=$}create(G,...B){const $=B[0]||{},W=`${this.service}/${G}`,xe=this.errors[G],Ve=xe?function Oe(Y,G){return Y.replace(ht,(B,$)=>{const W=G[$];return null!=W?String(W):`<${$}?>`})}(xe,$):"Error";return new ie(W,`${this.serviceName}: ${Ve} (${W}).`,$)}}const ht=/\{\$([^}]+)}/g;function zr(Y,G){return Object.prototype.hasOwnProperty.call(Y,G)}function an(Y){for(const G in Y)if(Object.prototype.hasOwnProperty.call(Y,G))return!1;return!0}function ai(Y,G){if(Y===G)return!0;const B=Object.keys(Y),$=Object.keys(G);for(const W of B){if(!$.includes(W))return!1;const xe=Y[W],Ve=G[W];if(Lr(xe)&&Lr(Ve)){if(!ai(xe,Ve))return!1}else if(xe!==Ve)return!1}for(const W of $)if(!B.includes(W))return!1;return!0}function Lr(Y){return null!==Y&&"object"==typeof Y}function Fi(Y){const G=[];for(const[B,$]of Object.entries(Y))Array.isArray($)?$.forEach(W=>{G.push(encodeURIComponent(B)+"="+encodeURIComponent(W))}):G.push(encodeURIComponent(B)+"="+encodeURIComponent($));return G.length?"&"+G.join("&"):""}function Qi(Y){const G={};return Y.replace(/^\?/,"").split("&").forEach($=>{if($){const[W,xe]=$.split("=");G[decodeURIComponent(W)]=decodeURIComponent(xe)}}),G}function li(Y){const G=Y.indexOf("?");if(!G)return"";const B=Y.indexOf("#",G);return Y.substring(G,B>0?B:void 0)}function gt(Y,G){const B=new pn(Y,G);return B.subscribe.bind(B)}class pn{constructor(G,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{G(this)}).catch($=>{this.error($)})}next(G){this.forEachObserver(B=>{B.next(G)})}error(G){this.forEachObserver(B=>{B.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,B,$){let W;if(void 0===G&&void 0===B&&void 0===$)throw new Error("Missing Observer.");W=function Un(Y,G){if("object"!=typeof Y||null===Y)return!1;for(const B of G)if(B in Y&&"function"==typeof Y[B])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:B,complete:$},void 0===W.next&&(W.next=Pi),void 0===W.error&&(W.error=Pi),void 0===W.complete&&(W.complete=Pi);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),xe}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,G)}sendOne(G,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{B(this.observers[G])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pi(){}function Ss(Y,G=1e3,B=2){const $=G*Math.pow(B,Y),W=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+W)}function jt(Y){return Y&&Y._delegate?Y._delegate:Y}},8236:(at,Ae,F)=>{var c=F(4650);let te=null;function O(){return te}const ne=new c.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function pe(){return(0,c.LFG)(H)}()},providedIn:"platform"}),n})(),H=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function je(){return new H((0,c.LFG)(ne))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ye)},providedIn:"root"}),n})();const me=new c.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+Ge(a));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+Ge(a));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(he),c.LFG(me,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Se,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(c.LFG(ge))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ve(){return new De((0,c.LFG)(ge))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class $o{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let es=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new $o(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===a?void 0:a);else if(null!==a){const p=r.get(a);r.move(p,d),Gn(p,i)}});for(let i=0,a=r.length;i<a;i++){const p=r.get(i).context;p.index=i,p.count=a,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Gn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Gn(n,e){n.context.$implicit=e.item}let Sr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ei,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ei{constructor(){this.$implicit=null,this.ngIf=null}}function zo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class ro{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let qo=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),ti=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new ro(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(qo,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})();class Ad{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class ug{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ts=new ug,dg=new Ad;let Yc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return ts;if((0,c.F4k)(t))return dg;throw function lr(n,e){return new c.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Ns=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const cr="browser";function wi(n){return n===cr}function Jn(n){return"server"===n}class Ei extends class Jo extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){te||(te=n)}(new Ei)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ss(){return is=is||document.querySelector("base"),is?is.getAttribute("href"):null}();return null==t?null:function ea(n){os=os||document.createElement("a"),os.setAttribute("href",n);const e=os.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){is=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function qc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let os,is=null;const Et=new c.OlP("TRANSITION_ID"),Nd=[{provide:c.ip1,useFactory:function Fn(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Et,ne,c.zs3],multi:!0}];let Qc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const so=new c.OlP("EventManagerPlugins");let Ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(so),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class $l{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ta=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n extends ta{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Bt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Bt))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Bt(n){O().remove(n)}const Ls={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},na=/%COMP%/g;function ra(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ra(n,i,t):(i=i.replace(na,n),t.push(i))}return t}function Qa(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let as=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new er(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ls(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Xc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ra(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ps),c.LFG(Ee),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class er{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ls[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(oo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ls[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ls[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Qa(r)):this.eventManager.addEventListener(e,t,Qa(r))}}function oo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ls extends er{constructor(e,t,r,i){super(e),this.component=r;const a=ra(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ya(n){return"_ngcontent-%COMP%".replace(na,n)}(i+"-"+r.id),this.hostAttr=function Za(n){return"_nghost-%COMP%".replace(na,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Xc extends er{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ra(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const p=document.createElement("style");p.textContent=a[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jc=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Pd=["alt","control","meta","shift"],eu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ao={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let el=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(Pd.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),d+=y+".")}),d+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=d,p}static getEventFullKey(t){let r="",i=function tu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ao.hasOwnProperty(e)&&(e=ao[e]))}return eu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pd.forEach(a=>{a!=i&&(0,zl[a])(t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const vf=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:cr},{provide:c.g9A,useValue:function Kl(){Ei.makeCurrent()},multi:!0},{provide:ne,useFactory:function Zl(){return(0,c.RDi)(document),document},deps:[]}]),Ql=new c.OlP(""),ur=[{provide:c.rWj,useClass:class Gl{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const p=function(y){d=d||y,a--,0==a&&r(d)};i.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],hi=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Yl(){return new c.qLn},deps:[]},{provide:so,useClass:Jc,multi:!0,deps:[ne,c.R0b,c.Lbi]},{provide:so,useClass:el,multi:!0,deps:[ne]},{provide:as,useClass:as,deps:[Ps,Ee,c.AFp]},{provide:c.FYo,useExisting:as},{provide:ta,useExisting:Ee},{provide:Ee,useClass:Ee,deps:[ne]},{provide:Ps,useClass:Ps,deps:[so,c.R0b]},{provide:class Tr{},useClass:Qc,deps:[]},[]];let wn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Et,useExisting:c.AFp},Nd]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ql,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...hi,...ur],imports:[Ns,c.hGG]}),n})();typeof window<"u"&&window;let cs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Us),r},providedIn:"root"}),n})(),Us=(()=>{class n extends cs{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ru(n){return new Us(n.get(ne))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var ye=F(5861),us=F(4986),ln=F(8306),Qt=F(8996),fi=F(3269);function An(...n){const e=(0,fi.yG)(n);return(0,Qt.D)(n,e)}var Nn=F(5813),la=F(8189);function ol(...n){return function Jl(){return(0,la.J)(1)}()((0,Qt.D)(n,(0,fi.yG)(n)))}var In=F(4482);function co(...n){const e=(0,fi.yG)(n);return(0,In.e)((t,r)=>{(e?ol(n,t,e):ol(n,t)).subscribe(r)})}var gn=F(5403);function al(){return(0,In.e)((n,e)=>{let t,r=!1;n.subscribe((0,gn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var Ot=F(4004);function uo(n,e,t,r,i){return(a,d)=>{let p=t,y=e,w=0;a.subscribe((0,gn.x)(d,x=>{const T=w++;y=p?n(y,x,T):(p=!0,x),r&&d.next(y)},i&&(()=>{p&&d.next(y),d.complete()})))}}function ds(n,e){return(0,In.e)(uo(n,e,arguments.length>=2,!0))}var ca=F(4671);function ho(n,e=ca.y){return n=n??ec,(0,In.e)((t,r)=>{let i,a=!0;t.subscribe((0,gn.x)(r,d=>{const p=e(d);(a||!n(i,p))&&(a=!1,i=p,r.next(d))}))})}function ec(n,e){return n===e}function rn(n,e){return(0,In.e)((t,r)=>{let i=0;t.subscribe((0,gn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Qe,Vr=F(2011),tc=(F(1451),F(3942)),fo=F(9681),ua=F(4859),Br=F(1877),St=F(2090),da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sn={},ha=ha||{},ft=da||self;function ll(){}function nc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ut(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var If="closure_uid_"+(1e9*Math.random()>>>0),gg=0;function mg(n,e,t){return n.call.apply(n.bind,arguments)}function Sf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function kr(n,e,t){return(kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mg:Sf).apply(null,arguments)}function su(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function En(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[i].apply(r,d)}}function fa(){this.s=this.s,this.o=this.o}var tr={};fa.prototype.s=!1,fa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function cl(n){return Object.prototype.hasOwnProperty.call(n,If)&&n[If]||(n[If]=++gg)}(this);delete tr[n]}},fa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ou=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ul=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function au(n){return Array.prototype.concat.apply([],arguments)}function Rr(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ur(n){return/^[\s\xa0]*$/.test(n)}var dr,lu=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zn(n,e){return-1!=n.indexOf(e)}function po(n,e){return n<e?-1:n>e?1:0}e:{var dl=ft.navigator;if(dl){var rc=dl.userAgent;if(rc){dr=rc;break e}}dr=""}function Tf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cu(n){const e={};for(const t in n)e[t]=n[t];return e}var go="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qn(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<go.length;a++)t=go[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function mo(n){return mo[" "](n),n}mo[" "]=ll;var du,n,Gd=zn(dr,"Opera"),hs=zn(dr,"Trident")||zn(dr,"MSIE"),ga=zn(dr,"Edge"),ma=ga||hs,ic=zn(dr,"Gecko")&&!(zn(dr.toLowerCase(),"webkit")&&!zn(dr,"Edge"))&&!(zn(dr,"Trident")||zn(dr,"MSIE"))&&!zn(dr,"Edge"),uu=zn(dr.toLowerCase(),"webkit")&&!zn(dr,"Edge");function ya(){var n=ft.document;return n?n.documentMode:void 0}e:{var _a="",hl=(n=dr,ic?/rv:([^\);]+)(\)|;)/.exec(n):ga?/Edge\/([\d\.]+)/.exec(n):hs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uu?/WebKit\/(\S+)/.exec(n):Gd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(hl&&(_a=hl?hl[1]:""),hs){var sc=ya();if(null!=sc&&sc>parseFloat(_a)){du=String(sc);break e}}du=_a}var yo={};var Mf=ft.document&&hs&&(ya()||parseInt(du,10))||void 0,fs=function(){if(!ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ft.addEventListener("test",ll,e),ft.removeEventListener("test",ll,e)}catch{}return n}();function nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function vr(n,e){if(nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ic){e:{try{mo(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vr.Z.h.call(this)}}nr.prototype.h=function(){this.defaultPrevented=!0},En(vr,nr);var fl={2:"touch",3:"pen",4:"mouse"};vr.prototype.h=function(){vr.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var va="closure_listenable_"+(1e6*Math.random()|0),Tn=0;function hu(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Tn,this.ca=this.fa=!1}function pl(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function gl(n){this.src=n,this.g={},this.h=0}function D(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ou(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(pl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function A(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}gl.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=A(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new hu(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var M="closure_lm_"+(1e6*Math.random()|0),P={};function Q(n,e,t,r,i){if(r&&r.once)return Ue(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Q(n,e[a],t,r,i);return null}return t=_o(t),n&&n[va]?n.N(e,t,Ut(r)?!!r.capture:!!r,i):se(n,e,t,!1,r,i)}function se(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var d=Ut(i)?!!i.capture:!!i,p=Pn(n);if(p||(n[M]=p=new gl(n)),(t=p.add(e,t,r,d,a)).proxy)return t;if(r=function Te(){var e=ut;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fs||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(At(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ue(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Ue(n,e[a],t,r,i);return null}return t=_o(t),n&&n[va]?n.O(e,t,Ut(r)?!!r.capture:!!r,i):se(n,e,t,!0,r,i)}function pt(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)pt(n,e[a],t,r,i);else r=Ut(r)?!!r.capture:!!r,t=_o(t),n&&n[va]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=A(a=n.g[e],t,r,i))&&(pl(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Pn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=A(e,t,r,i)),(t=-1<n?e[n]:null)&&Ct(t))}function Ct(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[va])D(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(At(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Pn(e))?(D(t,n),0==t.h&&(t.src=null,e[M]=null)):pl(n)}}}function At(n){return n in P?P[n]:P[n]="on"+n}function ut(n,e){if(n.ca)n=!0;else{e=new vr(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ct(n),n=t.call(r,e)}return n}function Pn(n){return(n=n[M])instanceof gl?n:null}var jr="__closure_events_fn_"+(1e9*Math.random()>>>0);function _o(n){return"function"==typeof n?n:(n[jr]||(n[jr]=function(e){return n.handleEvent(e)}),n[jr])}function sn(){fa.call(this),this.i=new gl(this),this.P=this,this.I=null}function cn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new nr(e,n);else if(e instanceof nr)e.target=e.target||n;else{var i=e;qn(e=new nr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var d=e.g=t[a];i=oc(d,r,!0,e)&&i}if(i=oc(d=e.g=n,r,!0,e)&&i,i=oc(d,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=oc(d=e.g=t[a],r,!1,e)&&i}function oc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var d=e[a];if(d&&!d.ca&&d.capture==t){var p=d.listener,y=d.ia||d.src;d.fa&&D(n.i,d),i=!1!==p.call(y,r)&&i}}return i&&!r.defaultPrevented}En(sn,fa),sn.prototype[va]=!0,sn.prototype.removeEventListener=function(n,e,t,r){pt(this,n,e,t,r)},sn.prototype.M=function(){if(sn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)pl(t[r]);delete n.g[e],n.h--}}this.I=null},sn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},sn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ml=ft.JSON.stringify;function Hs(){var n=lc;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ac,ba=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zd,n=>n.reset());class zd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kf(n){ft.setTimeout(()=>{throw n},0)}function Rf(n,e){ac||function Of(){var n=ft.Promise.resolve(void 0);ac=function(){n.then(cw)}}(),Ff||(ac(),Ff=!0),lc.add(n,e)}var Ff=!1,lc=new class vo{constructor(){this.h=this.g=null}add(e,t){const r=ba.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function cw(){for(var n;n=Hs();){try{n.h.call(n.g)}catch(t){kf(t)}var e=ba;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ff=!1}function fu(n,e){sn.call(this),this.h=n||1,this.g=e||ft,this.j=kr(this.kb,this),this.l=Date.now()}function _g(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function pu(n,e,t){if("function"==typeof n)t&&(n=kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ft.setTimeout(n,e||0)}function vg(n){n.g=pu(()=>{n.g=null,n.i&&(n.i=!1,vg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}En(fu,sn),(Qe=fu.prototype).da=!1,Qe.S=null,Qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cn(this,"tick"),this.da&&(_g(this),this.start()))}},Qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.M=function(){fu.Z.M.call(this),_g(this),delete this.g};class bg extends fa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vg(this)}M(){super.M(),this.g&&(ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wa(n){fa.call(this),this.h=n,this.g={}}En(wa,fa);var qd=[];function bo(n,e,t,r){Array.isArray(t)||(t&&(qd[0]=t.toString()),t=qd);for(var i=0;i<t.length;i++){var a=Q(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function wg(n){Tf(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ct(e)},n),n.g={}}function Wd(){this.g=!0}function Ea(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Eg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return ml(t)}catch{return e}}(n,t)+(r?" "+r:"")})}wa.prototype.M=function(){wa.Z.M.call(this),wg(this)},wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wd.prototype.Aa=function(){this.g=!1},Wd.prototype.info=function(){};var Ca={},Da=null;function Yd(){return Da=Da||new sn}function Zd(n){nr.call(this,Ca.Ma,n)}function gu(n){const e=Yd();cn(e,new Zd(e,n))}function Qd(n,e){nr.call(this,Ca.STAT_EVENT,n),this.stat=e}function ni(n){const e=Yd();cn(e,new Qd(e,n))}function ps(n,e){nr.call(this,Ca.Na,n),this.size=e}function Gs(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ft.setTimeout(function(){n()},e)}Ca.Ma="serverreachability",En(Zd,nr),Ca.STAT_EVENT="statevent",En(Qd,nr),Ca.Na="timingevent",En(ps,nr);var cc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Cg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xd(){}function Dg(){}Xd.prototype.h=null;var wo,mu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jd(){nr.call(this,"d")}function xg(){nr.call(this,"c")}function eh(){}function yu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new wa(this),this.P=qy,this.W=new fu(n=ma?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Lf}function Lf(){this.i=null,this.g="",this.h=!1}En(Jd,nr),En(xg,nr),En(eh,Xd),eh.prototype.g=function(){return new XMLHttpRequest},eh.prototype.i=function(){return{}},wo=new eh;var qy=45e3,Eo={},_u={};function Hi(n,e,t){n.K=1,n.v=rh(Gi(e)),n.s=t,n.U=!0,xa(n,null)}function xa(n,e){n.F=Date.now(),nh(n),n.A=Gi(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),kg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Lf,n.g=Pg(n.l,t?e:null,!n.s),0<n.O&&(n.L=new bg(kr(n.Ia,n,n.g),n.O)),bo(n.V,n.g,"readystatechange",n.gb),e=n.H?cu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),gu(1),function uw(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",p=a.split("&"),y=0;y<p.length;y++){var w=p[y].split("=");if(1<w.length){var x=w[0];w=w[1];var T=x.split("_");d=2<=T.length&&"type"==T[1]?d+(x+"=")+w+"&":d+(x+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Vf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Bf(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=th(n,t),i==_u){4==e&&(n.o=4,ni(14),r=!1),Ea(n.j,n.m,null,"[Incomplete Response]");break}if(i==Eo){n.o=4,ni(15),Ea(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ea(n.j,n.m,i,null),uc(n,i)}Vf(n)&&i!=_u&&i!=Eo&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ni(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),wl(e),e.L=!0,ni(11))):(Ea(n.j,n.m,t,"[Invalid Chunked Response]"),Co(n),yl(n))}function th(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_u:(t=Number(e.substring(t,r)),isNaN(t)?Eo:(r+=1)+t>e.length?_u:(e=e.substr(r,t),n.C=r+t,e))}function nh(n){n.Y=Date.now()+n.P,Wy(n,n.P)}function Wy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gs(kr(n.eb,n),e)}function Uf(n){n.B&&(ft.clearTimeout(n.B),n.B=null)}function yl(n){0==n.l.G||n.I||Zf(n.l,n)}function Co(n){Uf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,_g(n.W),wg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function uc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Du(t.i,n)))if(t.I=n.N,!n.J&&Du(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Yf(t),Yn(t)}Kf(t),ni(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Gs(kr(t.ab,t),6e3));if(1>=Gf(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else oh(t,11)}else if((n.J||t.g==n)&&Yf(t),!Ur(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const x=w[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const T=w[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const L=w[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.i;!a.g&&(zn(z,"spdy")||zn(z,"quic")||zn(z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(xo(a,a.h),a.h=null))}if(r.D){const re=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.sa=re,Mn(r.F,r.D,re))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=r_(r,r.H?r.la:null,r.W),d.J){Ao(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(Uf(p),nh(p)),r.g=d}else Fg(r);0<t.l.length&&yc(t)}else"stop"!=w[0]&&"close"!=w[0]||oh(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?oh(t,7):dt(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}gu(4)}catch{}}function Ig(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(nc(n)||"string"==typeof n)ul(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(nc(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Ag(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(nc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function _l(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof _l)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vu(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Do(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Do(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Do(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Qe=yu.prototype).setTimeout=function(n){this.P=n},Qe.gb=function(n){n=n.target;const e=this.L;e&&3==R(n)?e.l():this.Ia(n)},Qe.Ia=function(n){try{if(n==this.g)e:{const x=R(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>x)&&(3!=x||ma||this.g&&(this.h.h||this.g.ga()||K(this.g)))){this.I||4!=x||7==e||gu(8==e||0>=T?3:2),Uf(this);var t=this.g.ba();this.N=t;t:if(Vf(this)){var r=K(this.g);n="";var i=r.length,a=4==R(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Co(this),yl(this);var d="";break t}this.h.i=new ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Kd(n,e,t,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ur(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ni(12),Co(this),yl(this);break e}Ea(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uc(this,t)}this.U?(Bf(this,x,d),ma&&this.i&&3==x&&(bo(this.V,this.W,"tick",this.fb),this.W.start())):(Ea(this.j,this.m,d,null),uc(this,d)),4==x&&Co(this),this.i&&!this.I&&(4==x?Zf(this.l,this):(this.i=!1,nh(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ni(12)):(this.o=0,ni(13)),Co(this),yl(this)}}}catch{}},Qe.fb=function(){if(this.g){var n=R(this.g),e=this.g.ga();this.C<e.length&&(Uf(this),Bf(this,n,e),this.i&&4!=n&&nh(this))}},Qe.cancel=function(){this.I=!0,Co(this)},Qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Nf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(gu(3),ni(17)),Co(this),this.o=2,yl(this)):Wy(this,this.Y-n)},(Qe=_l.prototype).R=function(){vu(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Qe.T=function(){return vu(this),this.g.concat()},Qe.get=function(n,e){return Do(this.h,n)?this.h[n]:e},Qe.set=function(n,e){Do(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Sg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gs(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof gs){this.g=void 0!==e?e:n.g,bu(this,n.j),this.s=n.s,dc(this,n.i),wu(this,n.m),this.l=n.l,e=n.h;var t=new Aa;t.i=e.i,e.g&&(t.g=new _l(e.g),t.h=e.h),Wn(this,t),this.o=n.o}else n&&(t=String(n).match(Sg))?(this.g=!!e,bu(this,t[1]||"",!0),this.s=Eu(t[2]||""),dc(this,t[3]||"",!0),wu(this,t[4]),this.l=Eu(t[5]||"",!0),Wn(this,t[6]||"",!0),this.o=Eu(t[7]||"")):(this.g=!!e,this.h=new Aa(null,this.g))}function Gi(n){return new gs(n)}function bu(n,e,t){n.j=t?Eu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dc(n,e,t){n.i=t?Eu(e,!0):e}function wu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Wn(n,e,t){e instanceof Aa?(n.h=e,function pc(n,e){e&&!n.j&&($s(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(jf(this,r),kg(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=fc(e,Qy)),n.h=new Aa(e,n.g))}function Mn(n,e,t){n.h.set(e,t)}function rh(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Eu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function fc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Yy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Yy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}gs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(fc(e,Mg,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(fc(e,Mg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(fc(t,"/"==t.charAt(0)?dw:Zy,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",fc(t,vl)),n.join("")};var Mg=/[#\/\?@]/g,Zy=/[#\?:]/g,dw=/[#\?]/g,Qy=/[#\?@]/g,vl=/#/g;function Aa(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $s(n){n.g||(n.g=new _l,n.h=0,n.i&&function Ky(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jf(n,e){$s(n),e=br(n,e),Do(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Do((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vu(n)))}function Cu(n,e){return $s(n),e=br(n,e),Do(n.g.h,e)}function kg(n,e,t){jf(n,e),0<t.length&&(n.i=null,n.g.set(br(n,e),Rr(t)),n.h+=t.length)}function br(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xy(n){this.l=n||Hf,n=ft.PerformanceNavigationTiming?0<(n=ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ft.g&&ft.g.Ea&&ft.g.Ea()&&ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=Aa.prototype).add=function(n,e){$s(this),this.i=null,n=br(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){$s(this),this.g.forEach(function(t,r){ul(t,function(i){n.call(e,i,r,this)},this)},this)},Qe.T=function(){$s(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Qe.R=function(n){$s(this);var e=[];if("string"==typeof n)Cu(this,n)&&(e=au(e,this.g.get(br(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=au(e,n[t])}return e},Qe.set=function(n,e){return $s(this),this.i=null,Cu(this,n=br(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var Hf=10;function gc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Gf(n){return n.h?1:n.g?n.g.size:0}function Du(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xo(n,e){n.g?n.g.add(e):n.h=e}function Ao(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xu(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rr(n.i)}function mc(){}function Jy(){this.g=new mc}function $f(n,e,t){const r=t||"";try{Ig(n,function(i,a){let d=i;Ut(i)&&(d=ml(i)),e.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Kn(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ia(n){this.l=n.$b||null,this.j=n.ib||!1}function Sa(n,e){sn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=zf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xy.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mc.prototype.stringify=function(n){return ft.JSON.stringify(n,void 0)},mc.prototype.parse=function(n){return ft.JSON.parse(n,void 0)},En(Ia,Xd),Ia.prototype.g=function(){return new Sa(this.l,this.j)},Ia.prototype.i=function(n){return function(){return n}}({}),En(Sa,sn);var zf=0;function zs(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function qs(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ms(n)}function ms(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=Sa.prototype).open=function(n,e){if(this.readyState!=zf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ms(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qs(this)),this.readyState=zf},Qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zs(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qs(this):ms(this),3==this.readyState&&zs(this)}},Qe.Ua=function(n){this.g&&(this.response=this.responseText=n,qs(this))},Qe.Ta=function(n){this.g&&(this.response=n,qs(this))},Qe.ha=function(){this.g&&qs(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Rg=ft.JSON.parse;function hr(n){sn.call(this),this.headers=new _l,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sh,this.K=this.L=!1}En(hr,sn);var sh="",e_=/^https?$/i,qf=["POST","PUT"];function Og(n){return"content-type"==n.toLowerCase()}function _(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,f(n),b(n)}function f(n){n.D||(n.D=!0,cn(n,"complete"),cn(n,"error"))}function m(n){if(n.h&&typeof ha<"u"&&(!n.C[1]||4!=R(n)||2!=n.ba()))if(n.v&&4==R(n))pu(n.Fa,0,n);else if(cn(n,"readystatechange"),4==R(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Sg)[1]||null;if(!i&&ft.self&&ft.self.location){var a=ft.self.location.protocol;i=a.substr(0,a.length-1)}r=!e_.test(i?i.toLowerCase():"")}t=r}if(t)cn(n,"complete"),cn(n,"success");else{n.m=6;try{var d=2<R(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.ba()+"]",f(n)}}finally{b(n)}}}function b(n,e){if(n.g){S(n);const t=n.g,r=n.C[0]?ll:null;n.g=null,n.C=null,e||cn(n,"ready");try{t.onreadystatechange=r}catch{}}}function S(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ft.clearTimeout(n.A),n.A=null)}function R(n){return n.g?n.g.readyState:0}function K(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Le(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function ce(n){let e="";return Tf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Xe(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mt(n){this.za=0,this.l=[],this.h=new Wd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Xe("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Xe("baseRetryDelayMs",5e3,n),this.$a=Xe("retryDelaySeedMs",1e4,n),this.Ya=Xe("forwardChannelMaxRetries",2,n),this.ra=Xe("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Xy(n&&n.concurrentRequestLimit),this.Ca=new Jy,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function dt(n){if($i(n),3==n.G){var e=n.V++,t=Gi(n.F);Mn(t,"SID",n.J),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),_c(n,t),(e=new yu(n,n.h,e,void 0)).K=2,e.v=rh(Gi(t)),t=!1,ft.navigator&&ft.navigator.sendBeacon&&(t=ft.navigator.sendBeacon(e.v.toString(),"")),!t&&ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=Pg(e.l,null),e.g.ea(e.v)),e.F=Date.now(),nh(e)}hw(n)}function Yn(n){n.g&&(wl(n),n.g.cancel(),n.g=null)}function $i(n){Yn(n),n.u&&(ft.clearTimeout(n.u),n.u=null),Yf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ft.clearTimeout(n.m),n.m=null)}function bl(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&yc(n)}function yc(n){gc(n.i)||n.m||(n.m=!0,Rf(n.Ha,n),n.C=0)}function Wf(n,e){var t;t=e?e.m:n.V++;const r=Gi(n.F);Mn(r,"SID",n.J),Mn(r,"RID",t),Mn(r,"AID",n.U),_c(n,r),n.o&&n.s&&Le(r,n.o,n.s),t=new yu(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=vc(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),xo(n.i,t),Hi(t,r,e)}function _c(n,e){n.j&&Ig({},function(t,r){Mn(e,r,t)})}function vc(n,e,t){t=Math.min(n.l.length,t);var r=n.j?kr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+t];-1==a?0<t?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let p=!0;for(let y=0;y<t;y++){let w=i[y].h;const x=i[y].g;if(w-=a,0>w)a=Math.max(0,i[y].h-100),p=!1;else try{$f(x,d,"req"+w+"_")}catch{r&&r(x)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Fg(n){n.g||n.u||(n.Y=1,Rf(n.Ga,n),n.A=0)}function Kf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Gs(kr(n.Ga,n),n_(n,n.A)),n.A++,0))}function wl(n){null!=n.B&&(ft.clearTimeout(n.B),n.B=null)}function Ng(n){n.g=new yu(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Gi(n.oa);Mn(e,"RID","rpc"),Mn(e,"SID",n.J),Mn(e,"CI",n.N?"0":"1"),Mn(e,"AID",n.U),_c(n,e),Mn(e,"TYPE","xmlhttp"),n.o&&n.s&&Le(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=rh(Gi(e)),t.s=null,t.U=!0,xa(t,n)}function Yf(n){null!=n.v&&(ft.clearTimeout(n.v),n.v=null)}function Zf(n,e){var t=null;if(n.g==e){Yf(n),wl(n),n.g=null;var r=2}else{if(!Du(n.i,e))return;t=e.D,Ao(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;cn(r=Yd(),new ps(r,t,e,i)),yc(n)}else Fg(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Iu(n,e){return!(Gf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Gs(kr(n.Ha,n,e),n_(n,n.C)),n.C++,0)))}(n,e)||2==r&&Kf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:oh(n,5);break;case 4:oh(n,10);break;case 3:oh(n,6);break;default:oh(n,2)}}function n_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function oh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=kr(n.jb,n);t||(t=new gs("//www.google.com/images/cleardot.gif"),ft.location&&"http"==ft.location.protocol||bu(t,"https"),rh(t)),function Au(n,e){const t=new Wd;if(ft.Image){const r=new Image;r.onload=su(Kn,t,r,"TestLoadImage: loaded",!0,e),r.onerror=su(Kn,t,r,"TestLoadImage: error",!1,e),r.onabort=su(Kn,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=su(Kn,t,r,"TestLoadImage: timeout",!1,e),ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ni(2);n.G=0,n.j&&n.j.va(e),hw(n),$i(n)}function hw(n){n.G=0,n.I=-1,n.j&&((0!=xu(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Rr(n.l),n.l.length=0),n.j.ua())}function r_(n,e,t){let r=function Tg(n){return n instanceof gs?Gi(n):new gs(n,void 0)}(t);if(""!=r.i)e&&dc(r,e+"."+r.i),wu(r,r.m);else{const i=ft.location;r=function hc(n,e,t,r){var i=new gs(null,void 0);return n&&bu(i,n),e&&dc(i,e),t&&wu(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Tf(n.aa,function(i,a){Mn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Mn(r,e,t),Mn(r,"VER",n.ma),_c(n,r),r}function Pg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Ba&&!n.qa?new Ia({ib:!0}):n.qa)).L=n.H,e}function i_(){}function Qf(){if(hs&&!(10<=Number(Mf)))throw Error("Environmental error: no available transport.")}function zi(n,e){sn.call(this),this.g=new mt(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ur(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ur(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new bc(this)}function Lg(n){Jd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fw(){xg.call(this),this.status=1}function bc(n){this.g=n}(Qe=hr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wo.g(),this.C=function Pf(n){return n.h||(n.h=n.i())}(this.u?this.u:wo),this.g.onreadystatechange=kr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void _(this,a)}n=t||"";const i=new _l(this.headers);r&&Ig(r,function(a,d){i.set(d,a)}),r=function yg(n){e:{var e=Og;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=ft.FormData&&n instanceof ft.FormData,!(0<=ou(qf,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{S(this),0<this.B&&((this.K=function t_(n){return hs&&function js(){return function pa(n){var e=yo;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=lu(String(du)).split("."),t=lu("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",a=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=po(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||po(0==i[2].length,0==a[2].length)||po(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.pa,this)):this.A=pu(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){_(this,a)}},Qe.pa=function(){typeof ha<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cn(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,cn(this,"complete"),cn(this,"abort"),b(this))},Qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),b(this,!0)),hr.Z.M.call(this)},Qe.Fa=function(){this.s||(this.F||this.v||this.l?m(this):this.cb())},Qe.cb=function(){m(this)},Qe.ba=function(){try{return 2<R(this)?this.g.status:-1}catch{return-1}},Qe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Rg(e)}},Qe.Da=function(){return this.m},Qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=mt.prototype).ma=8,Qe.G=1,Qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new yu(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=cu(a),qn(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=vc(this,i,e),Mn(t=Gi(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),_c(this,t),this.o&&a&&Le(t,this.o,a),xo(this.i,i),this.Ra&&Mn(t,"TYPE","init"),this.ja?(Mn(t,"$req",e),Mn(t,"SID","null"),i.$=!0,Hi(i,t,null)):Hi(i,t,e),this.G=2}}else 3==this.G&&(n?Wf(this,n):0==this.l.length||gc(this.i)||Wf(this))},Qe.Ga=function(){if(this.u=null,Ng(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Gs(kr(this.bb,this),n)}},Qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ni(10),Yn(this),Ng(this))},Qe.ab=function(){null!=this.v&&(this.v=null,Yn(this),Kf(this),ni(19))},Qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ni(2)):(this.h.info("Failed to ping google.com"),ni(1))},(Qe=i_.prototype).xa=function(){},Qe.wa=function(){},Qe.va=function(){},Qe.ua=function(){},Qe.Oa=function(){},Qf.prototype.g=function(n,e){return new zi(n,e)},En(zi,sn),zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rf(kr(n.hb,n,e))),ni(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=r_(n,null,n.W),yc(n)},zi.prototype.close=function(){dt(this.g)},zi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,bl(this.g,e)}else this.v?((e={}).__data__=ml(n),bl(this.g,e)):bl(this.g,n)},zi.prototype.M=function(){this.g.j=null,delete this.j,dt(this.g),delete this.g,zi.Z.M.call(this)},En(Lg,Jd),En(fw,xg),En(bc,i_),bc.prototype.xa=function(){cn(this.g,"a")},bc.prototype.wa=function(n){cn(this.g,new Lg(n))},bc.prototype.va=function(n){cn(this.g,new fw(n))},bc.prototype.ua=function(){cn(this.g,"b")},Qf.prototype.createWebChannel=Qf.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,cc.NO_ERROR=0,cc.TIMEOUT=8,cc.HTTP_ERROR=6,Cg.COMPLETE="complete",Dg.EventType=mu,mu.OPEN="a",mu.CLOSE="b",mu.ERROR="c",mu.MESSAGE="d",sn.prototype.listen=sn.prototype.N,hr.prototype.listenOnce=hr.prototype.O,hr.prototype.getLastError=hr.prototype.La,hr.prototype.getLastErrorCode=hr.prototype.Da,hr.prototype.getStatus=hr.prototype.ba,hr.prototype.getResponseJson=hr.prototype.Qa,hr.prototype.getResponseText=hr.prototype.ga,hr.prototype.send=hr.prototype.ea;var Xf=Sn.createWebChannelTransport=function(){return new Qf},iD=Sn.getStatEventTarget=function(){return Yd()},s_=Sn.ErrorCode=cc,sD=Sn.EventType=Cg,pw=Sn.Event=Ca,gw=Sn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oD=Sn.FetchXmlHttpFactory=Ia,Vg=Sn.WebChannel=Dg,aD=Sn.XhrIo=hr;const Bg="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let ah="9.9.2";const wc=new Br.Yd("@firebase/firestore");function Ug(){return wc.logLevel}function Fe(n,...e){if(wc.logLevel<=Br.in.DEBUG){const t=e.map(jg);wc.debug(`Firestore (${ah}): ${n}`,...t)}}function qt(n,...e){if(wc.logLevel<=Br.in.ERROR){const t=e.map(jg);wc.error(`Firestore (${ah}): ${n}`,...t)}}function El(n,...e){if(wc.logLevel<=Br.in.WARN){const t=e.map(jg);wc.warn(`Firestore (${ah}): ${n}`,...t)}}function jg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${ah}) INTERNAL ASSERTION FAILED: `+n;throw qt(e),new Error(e)}function st(n,e){n||nt()}function Ke(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends St.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class cD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _w{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let d=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Hr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const w=d;e.enqueueRetryable((0,ye.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Hr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st("string"==typeof r.accessToken),new mw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return st(null===e||"string"==typeof e),new Yr(e)}}class uD{constructor(e,t,r){this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class dD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new uD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.p;return this.p=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(st("string"==typeof t.token),this.p=t.token,new vw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Su{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function lh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bw(n){return n+"\0"}class rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new rr(0,0))}static max(){return new Tt(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ch{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ch.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ch?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),d=t.get(i);if(a<d)return-1;if(a>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends ch{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const Ta=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends ch{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return Ta.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new ke(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new ke(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===p?(d=!d,i++):"."!==p||d?(r+=p,i++):(a(),i++)}if(a(),d)throw new ke(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Xt.fromString(e))}static fromName(e){return new $e(Xt.fromString(e).popFirst(5))}static empty(){return new $e(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Xt(e.slice()))}}class Hg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Gg(n){return n.fields.find(e=>2===e.kind)}function Tu(n){return n.fields.filter(e=>2!==e.kind)}Hg.UNKNOWN_ID=-1;class $g{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mu(0,Ws.min())}}function zg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new rr(t+1,0):new rr(t,r));return new Ws(i,$e.empty(),e)}function o_(n){return new Ws(n.readTime,n.key,-1)}class Ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ws(Tt.min(),$e.empty(),-1)}static max(){return new Ws(Tt.max(),$e.empty(),-1)}}function Ec(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:bt(n.largestBatchId,e.largestBatchId))}const qg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Cc(n){return tp.apply(this,arguments)}function tp(){return tp=(0,ye.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==qg)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),tp.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,d=!1;e.forEach(p=>{++i,p.next(()=>{++a,d&&a===i&&t()},y=>r(y))}),d=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,d=new Array(a);let p=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(x=>{d[w]=x,++p,p===a&&r(d)},x=>i(x))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Wg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Hr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new np(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=rp(r.target.error);this.T.reject(new np(e,i))}}static open(e,t,r,i){try{return new Wg(t,e.transaction(i,r))}catch(a){throw new np(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ew(t)}}class Io{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Io.v((0,St.z$)())&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Cl(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,St.hl)())return!1;if(Io.S())return!0;const e=(0,St.z$)(),t=Io.v(e),r=0<t&&t<10,i=Io.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new np(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const p=d.target.error;i("VersionError"===p.name?new ke(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new ke(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new np(e,p))},a.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.P.M(d.target.result,a.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.k(e);const y=Wg.open(a.db,e,d?"readonly":"readwrite",r),w=i(y).next(x=>(y.R(),x)).catch(x=>(y.abort(x),le.reject(x))).toPromise();return w.catch(()=>{}),yield y.A,w}catch(y){const w=y,x="FirebaseError"!==w.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",x),a.close(),!x)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pD{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Cl(this.$.delete())}}class np extends ke{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dc(n){return"IndexedDbTransactionError"===n.name}class Ew{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cl(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Cl(this.store.add(e))}get(e){return Cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Cl(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Cl(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(d,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,d)=>{i.onerror=p=>{d(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}W(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,d,p)=>p.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const d=rp(a.target.error);i(d)},t.onsuccess=a=>{const d=a.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}G(e,t){const r=[];return new le((i,a)=>{e.onerror=d=>{a(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void i();const y=new pD(p),w=t(p.primaryKey,p.value,y);if(w instanceof le){const x=w.catch(T=>(y.done(),le.reject(T)));r.push(x)}y.isDone?i():null===y.U?p.continue():p.continue(y.U)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cl(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=rp(r.target.error);t(i)}})}let l_=!1;function rp(n){const e=Io.v((0,St.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l_||(l_=!0,setTimeout(()=>{throw r},0)),r}}return n}class gD{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Dc(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Cc(r)}yield t.Z(1)}))}}class mD{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Fe("IndexBackiller",`Processing collection: ${d}`),this.nt(e,d,i).next(p=>{i-=p,r.add(d)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const d=a.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.st(i,a)).next(p=>(Fe("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>d.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const d=o_(a);Ec(d,r)>0&&(r=d)}),new Ws(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Di{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function c_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function u_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Di.ot=-1;class ir{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kg(this.root,e,this.comparator,!0)}}class Kg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??pi.RED,this.left=i??pi.EMPTY,this.right=a??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new pi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return pi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cw(this.data.getIterator())}getIteratorFrom(e){return new Cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class Cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ku(n){return n.hasNext()?n.getNext():void 0}class qi{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new qi([])}unionWith(e){let t=new un(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const xw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(st(!!n),"string"==typeof n){let e=0;const t=xw.exec(n);if(st(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(n.seconds),nanos:Ln(n.nanos)}}function Ln(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xc(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function ip(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function d_(n){const e=n.mapValue.fields.__previous_value__;return ip(e)?d_(e):e}function Ru(n){const e=So(n.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class sp{constructor(e,t,r,i,a,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Dl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Dl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Dl&&e.projectId===this.projectId&&e.database===this.database}}function uh(n){return null==n}function op(n){return 0===n&&1/n==-1/0}function Aw(n){return"number"==typeof n&&Number.isInteger(n)&&!op(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dh={nullValue:"NULL_VALUE"};function Ac(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ip(n)?4:g_(n)?9007199254740991:10:nt()}function Al(n,e){if(n===e)return!0;const t=Ac(n);if(t!==Ac(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ru(n).isEqual(Ru(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=So(r.timestampValue),d=So(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,xc(n.bytesValue).isEqual(xc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ln(r.geoPointValue.latitude)===Ln(i.geoPointValue.latitude)&&Ln(r.geoPointValue.longitude)===Ln(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ln(r.integerValue)===Ln(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ln(r.doubleValue),d=Ln(i.doubleValue);return a===d?op(a)===op(d):isNaN(a)&&isNaN(d)}return!1}(n,e);case 9:return lh(n.arrayValue.values||[],e.arrayValue.values||[],Al);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(c_(a)!==c_(d))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===d[p]||!Al(a[p],d[p])))return!1;return!0}(n,e);default:return nt()}var i}function hh(n,e){return void 0!==(n.values||[]).find(t=>Al(t,e))}function Ic(n,e){if(n===e)return 0;const t=Ac(n),r=Ac(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const d=Ln(i.integerValue||i.doubleValue),p=Ln(a.integerValue||a.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return h_(n.timestampValue,e.timestampValue);case 4:return h_(Ru(n),Ru(e));case 5:return bt(n.stringValue,e.stringValue);case 6:return function(i,a){const d=xc(i),p=xc(a);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const d=i.split("/"),p=a.split("/");for(let y=0;y<d.length&&y<p.length;y++){const w=bt(d[y],p[y]);if(0!==w)return w}return bt(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const d=bt(Ln(i.latitude),Ln(a.latitude));return 0!==d?d:bt(Ln(i.longitude),Ln(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const d=i.values||[],p=a.values||[];for(let y=0;y<d.length&&y<p.length;++y){const w=Ic(d[y],p[y]);if(w)return w}return bt(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===xl.mapValue&&a===xl.mapValue)return 0;if(i===xl.mapValue)return 1;if(a===xl.mapValue)return-1;const d=i.fields||{},p=Object.keys(d),y=a.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let x=0;x<p.length&&x<w.length;++x){const T=bt(p[x],w[x]);if(0!==T)return T;const L=Ic(d[p[x]],y[w[x]]);if(0!==L)return L}return bt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw nt()}}function h_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return bt(n,e);const t=So(n),r=So(e),i=bt(t.seconds,r.seconds);return 0!==i?i:bt(t.nanos,r.nanos)}function fh(n){return f_(n)}function f_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=So(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=f_(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const p of i)d?d=!1:a+=",",a+=`${p}:${f_(r.fields[p])}`;return a+"}"}(n.mapValue):nt();var e}function ri(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function p_(n){return!!n&&"integerValue"in n}function ph(n){return!!n&&"arrayValue"in n}function Iw(n){return!!n&&"nullValue"in n}function Sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yg(n){return!!n&&"mapValue"in n}function ap(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ys(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ap(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ap(n.arrayValue.values[t]);return e}return Object.assign({},n)}function g_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yD(n){return"nullValue"in n?dh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ri(Dl.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function _D(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ri(Dl.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?xl:nt()}function Tw(n,e){const t=Ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ft(n,e){const t=Ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=p.popLast()}d?r[p.lastSegment()]=ap(d):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Yg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Al(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ys(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Zr(ap(this.value))}}function m_(n){const e=[];return ys(n.fields,(t,r)=>{const i=new Zn([t]);if(Yg(r)){const a=m_(r.mapValue).fields;if(0===a.length)e.push(i);else for(const d of a)e.push(i.child(d))}else e.push(i)}),new qi(e)}class Cn{constructor(e,t,r,i,a,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=d}static newInvalidDocument(e){return new Cn(e,0,Tt.min(),Tt.min(),Zr.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,Tt.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Tt.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vD{constructor(e,t=null,r=[],i=[],a=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=p,this.ut=null}}function Mw(n,e=null,t=[],r=[],i=null,a=null,d=null){return new vD(n,e,t,r,i,a,d)}function Sc(n){const e=Ke(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+fh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fh(r)).join(",")),e.ut=t}return e.ut}function gh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!NS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Al(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nu(n.startAt,e.startAt)&&Nu(n.endAt,e.endAt)}function Zg(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Qg(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function wD(n,e,t){let r=dh,i=!0;for(const a of Qg(n,e)){let d=dh,p=!0;switch(a.op){case"<":case"<=":d=yD(a.value);break;case"==":case"in":case">=":d=a.value;break;case">":d=a.value,p=!1;break;case"!=":case"not-in":d=dh}Tw({value:r,inclusive:i},{value:d,inclusive:p})<0&&(r=d,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const d=t.position[a];Tw({value:r,inclusive:i},{value:d,inclusive:t.inclusive})<0&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}function y_(n,e,t){let r=xl,i=!0;for(const a of Qg(n,e)){let d=xl,p=!0;switch(a.op){case">=":case">":d=_D(a.value),p=!1;break;case"==":case"in":case"<=":d=a.value;break;case"<":d=a.value,p=!1;break;case"!=":case"not-in":d=xl}Ft({value:r,inclusive:i},{value:d,inclusive:p})>0&&(r=d,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const d=t.position[a];Ft({value:r,inclusive:i},{value:d,inclusive:t.inclusive})>0&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}class Qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Ou(e,t,r):"array-contains"===t?new CD(e,r):"in"===t?new RS(e,r):"not-in"===t?new OS(e,r):"array-contains-any"===t?new FS(e,r):new Qr(e,t,r)}static ct(e,t,r){return"in"===t?new ED(e,r):new __(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Ic(t,this.value)):null!==t&&Ac(this.value)===Ac(t)&&this.at(Ic(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ou extends Qr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.at(t)}}class ED extends Qr{constructor(e,t){super(e,"in",t),this.keys=Xg(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class __ extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=Xg(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xg(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class CD extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ph(t)&&hh(t.arrayValue,this.value)}}class RS extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hh(this.value.arrayValue,t)}}class OS extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hh(this.value.arrayValue,t)}}class FS extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ph(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hh(this.value.arrayValue,r))}}class Tc{constructor(e,t){this.position=e,this.inclusive=t}}class Fu{constructor(e,t="asc"){this.field=e,this.dir=t}}function NS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function kw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],d=n.position[i];if(r=a.field.isKeyField()?$e.comparator($e.fromName(d.referenceValue),t.key):Ic(d,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Nu(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Al(n.position[t],e.position[t]))return!1;return!0}class Il{constructor(e,t=null,r=[],i=[],a=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=p,this.endAt=y,this.lt=null,this.ft=null}}function v_(n,e,t,r,i,a,d,p){return new Il(n,e,t,r,i,a,d,p)}function Sl(n){return new Il(n)}function Rw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Jg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function b_(n){for(const e of n.filters)if(e.ht())return e.field;return null}function w_(n){return null!==n.collectionGroup}function mh(n){const e=Ke(n);if(null===e.lt){e.lt=[];const t=b_(e),r=Jg(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Fu(t)),e.lt.push(new Fu(Zn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Fu(Zn.keyField(),a))}}}return e.lt}function Wi(n){const e=Ke(n);if(!e.ft)if("F"===e.limitType)e.ft=Mw(e.path,e.collectionGroup,mh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of mh(e))t.push(new Fu(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Tc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Tc(e.startAt.position,e.startAt.inclusive):null;e.ft=Mw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function em(n,e,t){return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yh(n,e){return gh(Wi(n),Wi(e))&&n.limitType===e.limitType}function Ow(n){return`${Sc(Wi(n))}|lt:${n.limitType}`}function tm(n){return`Query(target=${function bD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${fh(r.value)}`;var r}).join(", ")}]`),uh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>fh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>fh(t)).join(",")),`Target(${e})`}(Wi(n))}; limitType=${n.limitType})`}function nm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,d){const p=kw(i,a,d);return i.inclusive?p<=0:p<0}(t.startAt,mh(t),r)||t.endAt&&!function(i,a,d){const p=kw(i,a,d);return i.inclusive?p>=0:p>0}(t.endAt,mh(t),r)));var t,r}function rm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DD(n){return(e,t)=>{let r=!1;for(const i of mh(n)){const a=E_(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function E_(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,a,d){const p=a.data.field(i),y=d.data.field(i);return null!==p&&null!==y?Ic(p,y):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Fw(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:op(e)?"-0":e}}function xD(n){return{integerValue:""+n}}function Pu(n,e){return Aw(e)?xD(e):Fw(n,e)}class lp{constructor(){this._=void 0}}function Nw(n,e,t){return n instanceof Lu?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Vu?sm(n,e):n instanceof xi?om(n,e):function(r,i){const a=Ks(r,i),d=am(a)+am(r._t);return p_(a)&&p_(r._t)?xD(d):Fw(r.wt,d)}(n,e)}function im(n,e,t){return n instanceof Vu?sm(n,e):n instanceof xi?om(n,e):t}function Ks(n,e){return n instanceof Bu?p_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lu extends lp{}class Vu extends lp{constructor(e){super(),this.elements=e}}function sm(n,e){const t=AD(e);for(const r of n.elements)t.some(i=>Al(i,r))||t.push(r);return{arrayValue:{values:t}}}class xi extends lp{constructor(e){super(),this.elements=e}}function om(n,e){let t=AD(e);for(const r of n.elements)t=t.filter(i=>!Al(i,r));return{arrayValue:{values:t}}}class Bu extends lp{constructor(e,t){super(),this.wt=e,this._t=t}}function am(n){return Ln(n.integerValue||n.doubleValue)}function AD(n){return ph(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _h{constructor(e,t){this.field=e,this.transform=t}}class lm{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class bh{}function cm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Uu(n.key,kn.none()):new wh(n.key,n.data,kn.none());{const t=n.data,r=Zr.empty();let i=new un(Zn.comparator);for(let a of e.fields)if(!i.has(a)){let d=t.field(a);null===d&&a.length>1&&(a=a.popLast(),d=t.field(a)),null===d?r.delete(a):r.set(a,d),i=i.add(a)}return new Ma(n.key,r,new qi(i.toArray()),kn.none())}}function LS(n,e,t){n instanceof wh?function(r,i,a){const d=r.value.clone(),p=Lw(r.fieldTransforms,i,a.transformResults);d.setAll(p),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ma?function(r,i,a){if(!vh(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=Lw(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(SD(r)),p.setAll(d),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function cp(n,e,t,r){return n instanceof wh?function(i,a,d,p){if(!vh(i.precondition,a))return d;const y=i.value.clone(),w=TD(i.fieldTransforms,p,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ma?function(i,a,d,p){if(!vh(i.precondition,a))return d;const y=TD(i.fieldTransforms,p,a),w=a.data;return w.setAll(SD(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===d?null:d.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(x=>x.field))}(n,e,t,r):(d=t,vh(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):d);var a,d}function ID(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Ks(r.transform,i||null);null!=a&&(null===t&&(t=Zr.empty()),t.set(r.field,a))}return t||null}function Pw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lh(t,r,(i,a)=>function PS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vu&&r instanceof Vu||t instanceof xi&&r instanceof xi?lh(t.elements,r.elements,Al):t instanceof Bu&&r instanceof Bu?Al(t._t,r._t):t instanceof Lu&&r instanceof Lu);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class wh extends bh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ma extends bh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function SD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Lw(n,e,t){const r=new Map;st(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],d=a.transform,p=e.data.field(a.field);r.set(a.field,im(d,p,t[i]))}return r}function TD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,d=t.data.field(i.field);r.set(i.field,Nw(a,d,e))}return r}class Uu extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class um extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MD{constructor(e){this.count=e}}var fr,Jt;function kD(n){switch(n){default:return nt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function RD(n){if(void 0===n)return qt("GRPC error has no .code"),de.UNKNOWN;switch(n){case fr.OK:return de.OK;case fr.CANCELLED:return de.CANCELLED;case fr.UNKNOWN:return de.UNKNOWN;case fr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case fr.INTERNAL:return de.INTERNAL;case fr.UNAVAILABLE:return de.UNAVAILABLE;case fr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case fr.NOT_FOUND:return de.NOT_FOUND;case fr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case fr.ABORTED:return de.ABORTED;case fr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case fr.DATA_LOSS:return de.DATA_LOSS;default:return nt()}}(Jt=fr||(fr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ys(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}const VS=new ir($e.comparator);function _s(){return VS}const OD=new ir($e.comparator);function dm(...n){let e=OD;for(const t of n)e=e.insert(t.key,t);return e}function FD(n){let e=OD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Tl(){return Hu()}function Ml(){return Hu()}function Hu(){return new ju(n=>n.toString(),(n,e)=>n.isEqual(e))}const ND=new ir($e.comparator),Vw=new un($e.comparator);function Nt(...n){let e=Vw;for(const t of n)e=e.add(t);return e}const Bw=new un(bt);function Eh(){return Bw}class up{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ys.createSynthesizedTargetChangeForCurrentChange(e,t)),new up(Tt.min(),r,Eh(),_s(),Nt())}}class Ys{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ys(wr.EMPTY_BYTE_STRING,t,Nt(),Nt(),Nt())}}class dp{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class Uw{constructor(e,t){this.targetId=e,this.It=t}}class hm{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class jw{constructor(){this.Tt=0,this.Et=$w(),this.At=wr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Nt(),t=Nt(),r=Nt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new Ys(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=$w()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class Hw{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=_s(),this.Bt=Gw(),this.Lt=new un(bt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(Zg(a))if(0===r){const d=new $e(a.path);this.Kt(t,d,Cn.newNoDocument(d,Tt.min()))}else st(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,d)=>{const p=this.Ht(d);if(p){if(a.current&&Zg(p.target)){const y=new $e(p.target.path);null!==this.$t.get(y)||this.Xt(d,y)||this.Kt(d,y,Cn.newNoDocument(y,e))}a.vt&&(t.set(d,a.St()),a.Dt())}});let r=Nt();this.Bt.forEach((a,d)=>{let p=!0;d.forEachWhile(y=>{const w=this.Ht(y);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.$t.forEach((a,d)=>d.setReadTime(e));const i=new up(e,t,this.Lt,this.$t,r);return this.$t=_s(),this.Bt=Gw(),this.Lt=new un(bt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new jw,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new un(bt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new jw),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function Gw(){return new ir($e.comparator)}function $w(){return new ir($e.comparator)}const fm={asc:"ASCENDING",desc:"DESCENDING"},Ch={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class C_{constructor(e,t){this.databaseId=e,this.dt=t}}function ka(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hp(n,e){return n.dt?e.toBase64():e.toUint8Array()}function fp(n,e){return ka(n,e.toTimestamp())}function Xr(n){return st(!!n),Tt.fromTimestamp(function(e){const t=So(e);return new rr(t.seconds,t.nanos)}(n))}function pm(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function D_(n){const e=Xt.fromString(n);return st(Qw(e)),e}function Gu(n,e){return pm(n.databaseId,e.path)}function Zs(n,e){const t=D_(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(PD(t))}function gm(n,e){return pm(n.databaseId,e)}function mm(n){const e=D_(n);return 4===e.length?Xt.emptyPath():PD(e)}function pp(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PD(n){return st(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zw(n,e,t){return{name:Gu(n,e),fields:t.value.mapValue.fields}}function x_(n,e,t){const r=Zs(n,e.name),i=Xr(e.updateTime),a=new Zr({mapValue:{fields:e.fields}}),d=Cn.newFoundDocument(r,i,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Dh(n,e){let t;if(e instanceof wh)t={update:zw(n,e.key,e.value)};else if(e instanceof Uu)t={delete:Gu(n,e.key)};else if(e instanceof Ma)t={update:zw(n,e.key,e.data),updateMask:Zw(e.fieldMask)};else{if(!(e instanceof um))return nt();t={verify:Gu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof Lu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Vu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof xi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bu)return{fieldPath:a.field.canonicalString(),increment:d._t};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:fp(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function A_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kn.updateTime(Xr(i.updateTime)):void 0!==i.exists?kn.exists(i.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,d){let p=null;"setToServerValue"in d?(st("REQUEST_TIME"===d.setToServerValue),p=new Lu):"appendMissingElements"in d?p=new Vu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new xi(d.removeAllFromArray.values||[]):"increment"in d?p=new Bu(a,d.increment):nt();const y=Zn.fromServerFormat(d.fieldPath);return new _h(y,p)}(n,i)):[];var i;if(e.update){const i=Zs(n,e.update.name),a=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new qi((e.updateMask.fieldPaths||[]).map(w=>Zn.fromServerFormat(w)));return new Ma(i,a,d,t,r)}return new wh(i,a,t,r)}if(e.delete){const i=Zs(n,e.delete);return new Uu(i,t)}if(e.verify){const i=Zs(n,e.verify);return new um(i,t)}return nt()}function I_(n,e){return{documents:[gm(n,e.path)]}}function Ww(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const w=y.map(x=>function(T){if("=="===T.op){if(Sw(T.value))return{unaryFilter:{field:xh(T.field),op:"IS_NAN"}};if(Iw(T.value))return{unaryFilter:{field:xh(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(Sw(T.value))return{unaryFilter:{field:xh(T.field),op:"IS_NOT_NAN"}};if(Iw(T.value))return{unaryFilter:{field:xh(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xh(T.field),op:UD(T.op),value:T.value}}}(x));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:xh((x=w).field),direction:Kw(x.dir)};var x})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const d=(w=e.limit,n.dt||uh(w)?w:{value:w});var w,p,y;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function VD(n){let e=mm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){st(1===r);const x=t.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let a=[];t.where&&(a=ym(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Fu(Ah((T=x).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let p=null;t.limit&&(p=function(x){let T;return T="object"==typeof x?x.value:x,uh(T)?null:T}(t.limit));let y=null;var x;t.startAt&&(y=new Tc((x=t.startAt).values||[],!!x.before));let w=null;return t.endAt&&(w=function(x){return new Tc(x.values||[],!x.before)}(t.endAt)),v_(e,i,d,a,p,"F",y,w)}function ym(n){return n?void 0!==n.unaryFilter?[jD(n)]:void 0!==n.fieldFilter?[Yw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ym(e)).reduce((e,t)=>e.concat(t)):nt():[]}function Kw(n){return fm[n]}function UD(n){return Ch[n]}function xh(n){return{fieldPath:n.canonicalString()}}function Ah(n){return Zn.fromServerFormat(n.fieldPath)}function Yw(n){return Qr.create(Ah(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function jD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ah(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ah(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ah(n.unaryFilter.field);return Qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ah(n.unaryFilter.field);return Qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function Zw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=S_(e)),e=Xw(n.get(t),e);return S_(e)}function Xw(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function S_(n){return n+"\x01\x01"}function Ra(n){const e=n.length;if(st(e>=2),2===e)return st("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const d=n.indexOf("\x01",a);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const p=n.substring(a,d);let y;0===i.length?y=p:(i+=p,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:nt()}a=d+2}return new Xt(r)}const To=["userId","batchId"];function Ih(n,e){return[n,Ai(e)]}function Jw(n,e,t){return[n,Ai(e),t]}const HD={},BS=["prefixPath","collectionGroup","readTime","documentId"],eE=["prefixPath","collectionGroup","documentId"],GD=["collectionGroup","readTime","prefixPath","documentId"],$D=["canonicalId","targetId"],zD=["targetId","path"],T_=["path","targetId"],qD=["collectionId","parent"],WD=["indexId","uid"],_m=["uid","sequenceNumber"],M_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KD=["indexId","uid","orderedDocumentKey"],tE=["userId","collectionPath","documentId"],k_=["userId","collectionPath","largestBatchId"],nE=["userId","collectionGroup","largestBatchId"],YD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],US=[...YD,"documentOverlays"],vm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZD=vm,QD=[...ZD,"indexConfiguration","indexState","indexEntries"];class bm extends a_{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Gr(n,e){const t=Ke(n);return Io.N(t.ee,e)}class wm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&LS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ml();return this.mutations.forEach(i=>{const a=e.get(i.key),d=a.overlayedDocument;let p=this.applyToLocalView(d,a.mutatedFields);p=t.has(i.key)?null:p;const y=cm(d,p);null!==y&&r.set(i.key,y),d.isValidDocument()||d.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nt())}isEqual(e){return this.batchId===e.batchId&&lh(this.mutations,e.mutations,(t,r)=>Pw(t,r))&&lh(this.baseMutations,e.baseMutations,(t,r)=>Pw(t,r))}}class Em{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){st(e.mutations.length===r.length);let i=ND;const a=e.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new Em(e,t,r,i)}}class gp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gi{constructor(e,t,r,i,a=Tt.min(),d=Tt.min(),p=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class mp{constructor(e){this.ne=e}}function Sh(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Gu(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:ka(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kl(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:kl(e.version)}}var i,a;return r}function Dm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mc(n){const e=new rr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function $u(n,e){const t=(e.baseMutations||[]).map(a=>A_(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const d=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(d.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>A_(n.ne,a)),i=rr.fromMillis(e.localWriteTimeMs);return new wm(e.batchId,i,t,r)}function yp(n){const e=Mc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mc(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(st(1===(i=n.query).documents.length),r=Wi(Sl(mm(i.documents[0])))):r=Wi(VD(n.query)),new gi(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function Th(n,e){const t=kl(e.snapshotVersion),r=kl(e.lastLimboFreeSnapshotVersion);let i;i=Zg(e.target)?I_(n.ne,e.target):Ww(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function R_(n){const e=VD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?em(e,e.limit,"L"):e}function rE(n,e){return new gp(e.largestBatchId,A_(n.ne,e.overlayMutation))}function iE(n,e){const t=e.path.lastSegment();return[n,Ai(e.path.popLast()),t]}function XD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kl(r.readTime),documentKey:Ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class JD{getBundleMetadata(e,t){return sE(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sE(e).put({bundleId:(r=t).id,createTime:kl(Xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return oE(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:R_(i.bundledQuery),readTime:Mc(i.readTime)};var i})}saveNamedQuery(e,t){return oE(e).put({name:(r=t).name,readTime:kl(Xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sE(n){return Gr(n,"bundles")}function oE(n){return Gr(n,"namedQueries")}class xm{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new xm(e,t.uid||"")}getOverlay(e,t){return Am(e).get(iE(this.userId,t)).next(r=>r?rE(this.wt,r):null)}getOverlays(e,t){const r=Tl();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,d)=>{const p=new gp(t,d);i.push(this.ie(e,p))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(Ai(d.getCollectionPath())));const a=[];return i.forEach(d=>{const p=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);a.push(Am(e).W("collectionPathOverlayIndex",p))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Tl(),a=Ai(t),d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Am(e).K("collectionPathOverlayIndex",d).next(p=>{for(const y of p){const w=rE(this.wt,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Tl();let d;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Am(e).J({index:"collectionGroupOverlayIndex",range:p},(y,w,x)=>{const T=rE(this.wt,w);a.size()<i||T.largestBatchId===d?(a.set(T.getKey(),T),d=T.largestBatchId):x.done()}).next(()=>a)}ie(e,t){return Am(e).put(function(r,i,a){const[d,p,y]=iE(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Dh(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function Am(n){return Gr(n,"documentOverlays")}class kc{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Ln(e.integerValue));else if("doubleValue"in e){const r=Ln(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),op(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(xc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?g_(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):nt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),$e.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function O_(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function aE(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=O_(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}kc.ye=new kc;class F_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=aE(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=aE(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ex{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class tx{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class _p{constructor(){this.Oe=new F_,this.Fe=new ex(this.Oe),this.$e=new tx(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class zu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zu(this.indexId,this.documentKey,this.arrayValue,r)}}function qu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lE(n.arrayValue,e.arrayValue),0!==t?t:(t=lE(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function lE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Im{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Gg(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Tu(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const d=r[i];if(!this.je(this.Ke,d)||!this.We(this.Ue[a++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],d))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Wu{constructor(){this.ze=new cE}addToCollectionParentIndex(e,t){return this.ze.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ws.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class cE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(Xt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(Xt.comparator)).toArray()}}const Rc=new Uint8Array(0);class nx{constructor(e,t){this.user=e,this.databaseId=t,this.He=new cE,this.Je=new ju(r=>Sc(r),(r,i)=>gh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Ai(i)};return uE(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[bw(t),""],!1,!0);return uE(e).K(i).next(a=>{for(const d of a){if(d.collectionId!==t)break;r.push(Ra(d.parent))}return r})}addFieldIndex(e,t){const r=Sm(e),i={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var d;delete i.indexId;const a=r.add(i);if(t.indexState){const d=Ki(e);return a.next(p=>{d.put(XD(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Sm(e),i=Ki(e),a=Ku(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ku(e);let i=!0;const a=new Map;return le.forEach(this.Ye(t),d=>this.Xe(e,d).next(p=>{i&&(i=!!p),a.set(d,p)})).next(()=>{if(i){let d=Nt();const p=[];return le.forEach(a,(y,w)=>{var x;Fe("IndexedDbIndexManager",`Using index ${x=y,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${Sc(t)}`);const T=function(_t,ot){const It=Gg(ot);if(void 0===It)return null;for(const kt of Qg(_t,It.fieldPath))switch(kt.op){case"array-contains-any":return kt.value.arrayValue.values||[];case"array-contains":return[kt.value]}return null}(w,y),L=function(_t,ot){const It=new Map;for(const kt of Tu(ot))for(const tn of Qg(_t,kt.fieldPath))switch(tn.op){case"==":case"in":It.set(kt.fieldPath.canonicalString(),tn.value);break;case"not-in":case"!=":return It.set(kt.fieldPath.canonicalString(),tn.value),Array.from(It.values())}return null}(w,y),V=function(_t,ot){const It=[];let kt=!0;for(const tn of Tu(ot)){const Is=0===tn.kind?wD(_t,tn.fieldPath,_t.startAt):y_(_t,tn.fieldPath,_t.startAt);It.push(Is.value),kt&&(kt=Is.inclusive)}return new Tc(It,kt)}(w,y),z=function(_t,ot){const It=[];let kt=!0;for(const tn of Tu(ot)){const Is=0===tn.kind?y_(_t,tn.fieldPath,_t.endAt):wD(_t,tn.fieldPath,_t.endAt);It.push(Is.value),kt&&(kt=Is.inclusive)}return new Tc(It,kt)}(w,y),re=this.Ze(y,w,V),Ce=this.Ze(y,w,z),Pe=this.tn(y,w,L),rt=this.en(y.indexId,T,re,V.inclusive,Ce,z.inclusive,Pe);return le.forEach(rt,_t=>r.j(_t,t.limit).next(ot=>{ot.forEach(It=>{const kt=$e.fromSegments(It.documentKey);d.has(kt)||(d=d.add(kt),p.push(kt))})}))}).next(()=>p)}return le.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,d,p){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),x=[];for(let T=0;T<y;++T){const L=t?this.nn(t[T/w]):Rc,V=this.sn(e,L,r[T%w],i),z=this.rn(e,L,a[T%w],d),re=p.map(Ce=>this.sn(e,L,Ce,!0));x.push(...this.createRange(V,z,re))}return x}sn(e,t,r,i){const a=new zu(e,$e.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new zu(e,$e.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new Im(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let d=null;for(const p of a)r.Ge(p)&&(!d||p.fields.length>d.fields.length)&&(d=p);return d})}getIndexType(e,t){let r=2;return le.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(d){let p=new un(Zn.comparator),y=!1;for(const w of d.filters){const x=w;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?y=!0:p=p.add(x.field))}for(const w of d.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new _p;for(const i of Tu(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const d=r.Be(i.kind);kc.ye.re(a,d)}return r.Me()}nn(e){const t=new _p;return kc.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new _p;return kc.ye.re(ri(this.databaseId,t),r.Be(function(i){const a=Tu(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new _p);let a=0;for(const d of Tu(e)){const p=r[a++];for(const y of i)if(this.cn(t,d.fieldPath)&&ph(p))i=this.an(i,d,p);else{const w=y.Be(d.kind);kc.ye.re(p,w)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const i=[...e],a=[];for(const d of r.arrayValue.values||[])for(const p of i){const y=new _p;y.seed(p.Me()),kc.ye.re(d,y.Be(t.kind)),a.push(y)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof Qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Sm(e),i=Ki(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const d=[];return le.forEach(a,p=>i.get([p.indexId,this.uid]).next(y=>{d.push(function(w,x){const T=x?new Mu(x.sequenceNumber,new Ws(Mc(x.readTime),new $e(Ra(x.documentKey)),x.largestBatchId)):Mu.empty(),L=w.fields.map(([V,z])=>new $g(Zn.fromServerFormat(V),z));return new Hg(w.indexId,w.collectionGroup,L,T)}(p,y))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sm(e),a=Ki(e);return this.ln(e).next(d=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>le.forEach(p,y=>a.put(XD(y.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const d=r.get(i.collectionGroup);return(d?le.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),le.forEach(p,y=>this.fn(e,i,y).next(w=>{const x=this.dn(a,y);return w.isEqual(x)?le.resolve():this._n(e,a,y,w,x)}))))})}wn(e,t,r,i){return Ku(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return Ku(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=Ku(e);let a=new un(qu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(d,p)=>{a=a.add(new zu(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}dn(e,t){let r=new un(qu);const i=this.on(t,e);if(null==i)return r;const a=Gg(t);if(null!=a){const d=e.data.field(a.fieldPath);if(ph(d))for(const p of d.arrayValue.values||[])r=r.add(new zu(t.indexId,e.key,this.nn(p),i))}else r=r.add(new zu(t.indexId,e.key,Rc,i));return r}_n(e,t,r,i,a){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(p,y,w,x,T){const L=p.getIterator(),V=y.getIterator();let z=ku(L),re=ku(V);for(;z||re;){let Ce=!1,Pe=!1;if(z&&re){const rt=w(z,re);rt<0?Pe=!0:rt>0&&(Ce=!0)}else null!=z?Pe=!0:Ce=!0;Ce?(x(re),re=ku(V)):Pe?(T(z),z=ku(L)):(z=ku(L),re=ku(V))}}(i,a,qu,p=>{d.push(this.wn(e,t,r,p))},p=>{d.push(this.mn(e,t,r,p))}),le.waitFor(d)}ln(e){let t=1;return Ki(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,p)=>qu(d,p)).filter((d,p,y)=>!p||0!==qu(d,y[p-1]));const i=[];i.push(e);for(const d of r){const p=qu(d,e),y=qu(d,t);if(0===p)i[0]=e.Le();else if(p>0&&y<0)i.push(d),i.push(d.Le());else if(y>0)break}i.push(t);const a=[];for(let d=0;d<i.length;d+=2)a.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Rc,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Rc,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mh)}getMinOffset(e,t){return le.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||nt())).next(Mh)}}function uE(n){return Gr(n,"collectionParents")}function Ku(n){return Gr(n,"indexEntries")}function Sm(n){return Gr(n,"indexConfiguration")}function Ki(n){return Gr(n,"indexState")}function Mh(n){st(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ec(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ws(e.readTime,e.documentKey,t)}const ii={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Or{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Or(e,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vp(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],d=IDBKeyRange.only(t.batchId);let p=0;const y=r.J({range:d},(x,T,L)=>(p++,L.delete()));a.push(y.next(()=>{st(1===p)}));const w=[];for(const x of t.mutations){const T=Jw(e,x.key.path,t.batchId);a.push(i.delete(T)),w.push(x.key)}return le.waitFor(a).next(()=>w)}function Ii(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(41943040,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);class kh{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){st(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new kh(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bs(e).J({index:"userMutationsIndex",range:r},(i,a,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Mo(e),d=bs(e);return d.add({}).next(p=>{st("number"==typeof p);const y=new wm(p,t,r,i),w=function(L,V,z){const re=z.baseMutations.map(Pe=>Dh(L.ne,Pe)),Ce=z.mutations.map(Pe=>Dh(L.ne,Pe));return{userId:V,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:re,mutations:Ce}}(this.wt,this.userId,y),x=[];let T=new un((L,V)=>bt(L.canonicalString(),V.canonicalString()));for(const L of i){const V=Jw(this.userId,L.key.path,p);T=T.add(L.key.path.popLast()),x.push(d.put(w)),x.push(a.put(V,HD))}return T.forEach(L=>{x.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.gn[p]=y.keys()}),le.waitFor(x).next(()=>y)})}lookupMutationBatch(e,t){return bs(e).get(t).next(r=>r?(st(r.userId===this.userId),$u(this.wt,r)):null)}yn(e,t){return this.gn[t]?le.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return bs(e).J({index:"userMutationsIndex",range:i},(d,p,y)=>{p.userId===this.userId&&(st(p.batchId>=r),a=$u(this.wt,p)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bs(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bs(e).K("userMutationsIndex",t).next(r=>r.map(i=>$u(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ih(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Mo(e).J({range:i},(d,p,y)=>{const[w,x,T]=d,L=Ra(x);if(w===this.userId&&t.path.isEqual(L))return bs(e).get(T).next(V=>{if(!V)throw nt();st(V.userId===this.userId),a.push($u(this.wt,V))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(bt);const i=[];return t.forEach(a=>{const d=Ih(this.userId,a.path),p=IDBKeyRange.lowerBound(d),y=Mo(e).J({range:p},(w,x,T)=>{const[L,V,z]=w,re=Ra(V);L===this.userId&&a.path.isEqual(re)?r=r.add(z):T.done()});i.push(y)}),le.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ih(this.userId,r),d=IDBKeyRange.lowerBound(a);let p=new un(bt);return Mo(e).J({range:d},(y,w,x)=>{const[T,L,V]=y,z=Ra(L);T===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add(V)):x.done()}).next(()=>this.pn(e,p))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(bs(e).get(a).next(d=>{if(null===d)throw nt();st(d.userId===this.userId),r.push($u(this.wt,d))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return vp(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Mo(e).J({range:r},(a,d,p)=>{if(a[0]===this.userId){const y=Ra(a[1]);i.push(y)}else p.done()}).next(()=>{st(0===i.length)})})}containsKey(e,t){return Yu(e,this.userId,t)}Tn(e){return Zu(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Yu(n,e,t){const r=Ih(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return Mo(n).J({range:a,H:!0},(p,y,w)=>{const[x,T,L]=p;x===e&&T===i&&(d=!0),w.done()}).next(()=>d)}function bs(n){return Gr(n,"mutations")}function Mo(n){return Gr(n,"documentMutations")}function Zu(n){return Gr(n,"mutationQueues")}class Qs{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Qs(0)}static Rn(){return new Qs(-1)}}class Rh{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Qs(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Tt.fromTimestamp(new rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ko(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(st(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ko(e).J((d,p)=>{const y=yp(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ko(e).J((r,i)=>{const a=yp(i);t(a)})}bn(e){return Qu(e).get("targetGlobalKey").next(t=>(st(null!==t),t))}Pn(e,t){return Qu(e).put("targetGlobalKey",t)}vn(e,t){return ko(e).put(Th(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ko(e).J({range:i,index:"queryTargetsIndex"},(d,p,y)=>{const w=yp(p);gh(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ws(e);return t.forEach(d=>{const p=Ai(d.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,d))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=ws(e);return le.forEach(t,a=>{const d=Ai(a.path);return le.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ws(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ws(e);let a=Nt();return i.J({range:r,H:!0},(d,p,y)=>{const w=Ra(d[1]),x=new $e(w);a=a.add(x)}).next(()=>a)}containsKey(e,t){const r=Ai(t.path),i=IDBKeyRange.bound([r],[bw(r)],!1,!0);let a=0;return ws(e).J({index:"documentTargetsIndex",H:!0,range:i},([d,p],y,w)=>{0!==d&&(a++,w.done())}).next(()=>a>0)}te(e,t){return ko(e).get(t).next(r=>r?yp(r):null)}}function ko(n){return Gr(n,"targets")}function Qu(n){return Gr(n,"targetGlobal")}function ws(n){return Gr(n,"targetDocuments")}function N_([n,e],[t,r]){const i=bt(n,t);return 0===i?bt(e,r):i}class dE{constructor(e){this.Sn=e,this.buffer=new un(N_),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();N_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dc(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Cc(r)}yield t.kn(3e5)}))}}class fE{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Di.ot);const r=new dE(t);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ii)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ii):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,i,a,d,p,y,w;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,d=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,p=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(w=Date.now(),Ug()<=Br.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${i} in `+(p-d)+`ms\n\tRemoved ${a} targets in `+(y-p)+`ms\n\tRemoved ${T} documents in `+(w-y)+`ms\nTotal Duration: ${w-x}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class pE{constructor(e,t){this.db=e,this.garbageCollector=new fE(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return bp(e,r)}removeReference(e,t,r){return bp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bp(e,t)}Un(e,t){return function(r,i){let a=!1;return Zu(r).Y(d=>Yu(r,d,i).next(p=>(p&&(a=!0),le.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(d,p)=>{if(p<=t){const y=this.Un(e,d).next(w=>{if(!w)return a++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Tt.min()),ws(e).delete([0,Ai(d.path)])))});i.push(y)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bp(e,t)}Ln(e,t){const r=ws(e);let i,a=Di.ot;return r.J({index:"documentTargetsIndex"},([d,p],{path:y,sequenceNumber:w})=>{0===d?(a!==Di.ot&&t(new $e(Ra(i)),a),a=w,i=y):a=Di.ot}).next(()=>{a!==Di.ot&&t(new $e(Ra(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bp(n,e){return ws(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ai(e.path),sequenceNumber:r}));var r}class P_{constructor(){this.changes=new ju(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gE{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xu(e).put(r)}removeEntry(e,t,r){return Xu(e).delete(function(i,a){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Dm(a),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return Xu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return Xu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Oh(t))},(i,a)=>{r={document:this.Kn(t,a),size:Ii(a)}}).next(()=>r)}getEntries(e,t){let r=_s();return this.Qn(e,t,(i,a)=>{const d=this.Kn(i,a);r=r.insert(i,d)}).next(()=>r)}jn(e,t){let r=_s(),i=new ir($e.comparator);return this.Qn(e,t,(a,d)=>{const p=this.Kn(a,d);r=r.insert(a,p),i=i.insert(a,Ii(d))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return le.resolve();let i=new un(V_);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(Oh(i.first()),Oh(i.last())),d=i.getIterator();let p=d.getNext();return Xu(e).J({index:"documentKeyIndex",range:a},(y,w,x)=>{const T=$e.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;p&&V_(p,T)<0;)r(p,null),p=d.getNext();p&&p.isEqual(T)&&(r(p,w),p=d.hasNext()?d.getNext():null),p?x.q(Oh(p)):x.done()}).next(()=>{for(;p;)r(p,null),p=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Dm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xu(e).K(IDBKeyRange.bound(i,a,!0)).next(d=>{let p=_s();for(const y of d){const w=this.Kn($e.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(w.key,w)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=_s();const d=yE(t,r),p=yE(t,Ws.max());return Xu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,p,!0)},(y,w,x)=>{const T=this.Kn($e.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(T.key,T),a.size===i&&x.done()}).next(()=>a)}newChangeBuffer(e){return new rx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mE(e).get("remoteDocumentGlobalKey").next(t=>(st(!!t),t))}qn(e,t){return mE(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Cm(n,e){let t;if(e.document)t=x_(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=Mc(e.noDocument.readTime);t=Cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=$e.fromSegments(e.unknownDocument.path),i=Mc(e.unknownDocument.version);t=Cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new rr(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return Cn.newInvalidDocument(e)}}function L_(n){return new gE(n)}class rx extends P_{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new ju(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new un((a,d)=>bt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const p=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,p.readTime)),d.isValidDocument()){const y=Sh(this.zn.wt,d);i=i.add(a.path.popLast()),r+=Ii(y)-p.size,t.push(this.zn.addEntry(e,a,y))}else if(r-=p.size,this.trackRemovals){const y=Sh(this.zn.wt,d.convertToNoDocument(Tt.min()));t.push(this.zn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,d)=>{this.Hn.set(a,{size:d,readTime:r.get(a).readTime})}),r))}}function mE(n){return Gr(n,"remoteDocumentGlobal")}function Xu(n){return Gr(n,"remoteDocumentsV14")}function Oh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yE(n,e){const t=e.documentKey.path.toArray();return[n,Dm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function V_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=bt(t[a],r[a]),i)return i;return i=bt(t.length,r.length),i||(i=bt(t[t.length-2],r[r.length-2]),i||bt(t[t.length-1],r[r.length-1]))}class B_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tm{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&cp(r.mutation,i,qi.empty(),rr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Nt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Nt()){const i=Tl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let d=dm();return a.forEach((p,y)=>{d=d.insert(p,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Tl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Nt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((d,p)=>{t.set(d,p)})})}computeViews(e,t,r,i){let a=_s();const d=Hu(),p=Hu();return t.forEach((y,w)=>{const x=r.get(w.key);i.has(w.key)&&(void 0===x||x.mutation instanceof Ma)?a=a.insert(w.key,w):void 0!==x&&(d.set(w.key,x.mutation.getFieldMask()),cp(x.mutation,w,x.mutation.getFieldMask(),rr.now()))}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,x)=>d.set(w,x)),t.forEach((w,x)=>{var T;return p.set(w,new B_(x,null!==(T=d.get(w))&&void 0!==T?T:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Hu();let i=new ir((d,p)=>d-p),a=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const p of d)p.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let x=r.get(y)||qi.empty();x=p.applyToLocalView(w,x),r.set(y,x);const T=(i.get(p.batchId)||Nt()).add(y);i=i.insert(p.batchId,T)})}).next(()=>{const d=[],p=i.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),w=y.key,x=y.value,T=Ml();x.forEach(L=>{if(!a.has(L)){const V=cm(t.get(L),r.get(L));null!==V&&T.set(L,V),a=a.add(L)}}),d.push(this.documentOverlayCache.saveOverlays(e,w,T))}return le.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):w_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const d=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(Tl());let p=-1,y=a;return d.next(w=>le.forEach(w,(x,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),a.get(x)?le.resolve():this.getBaseDocument(e,x,T).next(L=>{y=y.insert(x,L)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,Nt())).next(x=>({batchId:p,changes:FD(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=dm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=dm();return this.indexManager.getCollectionParents(e,i).next(d=>le.forEach(d,p=>{const y=(w=t,x=p.child(i),new Il(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,x;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((x,T)=>{a=a.insert(x,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((p,y)=>{const w=y.getKey();null===i.get(w)&&(i=i.insert(w,Cn.newInvalidDocument(w)))});let d=dm();return i.forEach((p,y)=>{const w=a.get(p);void 0!==w&&cp(w.mutation,y,qi.empty(),rr.now()),nm(t,y)&&(d=d.insert(p,y))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):le.resolve(Cn.newInvalidDocument(t))}}class ix{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return le.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Xr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:R_(r.bundledQuery),readTime:Xr(r.readTime)}),le.resolve();var r}}class Mm{constructor(){this.overlays=new ir($e.comparator),this.Xn=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Tl();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Tl(),a=t.length+1,d=new $e(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ir((w,x)=>w-x);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let x=a.get(w.largestBatchId);null===x&&(x=Tl(),a=a.insert(w.largestBatchId,x)),x.set(w.getKey(),w)}}const p=Tl(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,x)=>p.set(w,x)),!(p.size()>=i)););return le.resolve(p)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const d=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new gp(t,r));let a=this.Xn.get(t);void 0===a&&(a=Nt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class Fh{constructor(){this.Zn=new un(Fr.ts),this.es=new un(Fr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Fr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new $e(new Xt([])),r=new Fr(t,e),i=new Fr(t,e+1),a=[];return this.es.forEachInRange([r,i],d=>{this.rs(d),a.push(d.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new $e(new Xt([])),r=new Fr(t,e),i=new Fr(t,e+1);let a=Nt();return this.es.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(e){const t=new Fr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return $e.comparator(e.key,t.key)||bt(e.ls,t.ls)}static ns(e,t){return bt(e.ls,t.ls)||$e.comparator(e.key,t.key)}}class sx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new un(Fr.ts)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const d=new wm(a,t,r,i);this.mutationQueue.push(d);for(const p of i)this.ds=this.ds.add(new Fr(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),i=new Fr(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],d=>{const p=this._s(d.ls);a.push(p)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(bt);return t.forEach(i=>{const a=new Fr(i,0),d=new Fr(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,d],p=>{r=r.add(p.ls)})}),le.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;$e.isDocumentKey(a)||(a=a.child(""));const d=new Fr(new $e(a),0);let p=new un(bt);return this.ds.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(p=p.add(y.ls)),!0)},d),le.resolve(this.gs(p))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){st(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return le.forEach(t.mutations,i=>{const a=new Fr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Fr(t,0),i=this.ds.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U_{constructor(e){this.ps=e,this.docs=new ir($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,d=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Cn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=_s();const a=new $e(t.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||Ec(o_(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}Is(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new j_(this)}getSize(e){return le.resolve(this.size)}}class j_ extends P_{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class _E{constructor(e){this.persistence=e,this.Ts=new ju(t=>Sc(t),gh),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Es=0,this.As=new Fh,this.targetCount=0,this.Rs=Qs.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),le.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Qs(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.vn(t),le.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Ts.delete(d),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(d=>{a.push(i.markPotentiallyOrphaned(e,d))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.As.containsKey(t))}}class H_{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Di(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new _E(this),this.indexManager=new Wu,this.remoteDocumentCache=new U_(r=>this.referenceDelegate.Ss(r)),this.wt=new mp(t),this.Ds=new ix(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new sx(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new G_(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return le.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class G_ extends a_{constructor(e){super(),this.currentSequenceNumber=e}}class wp{constructor(e){this.persistence=e,this.ks=new Fh,this.Ms=null}static Os(e){return new wp(e)}get Fs(){if(this.Ms)return this.Ms;throw nt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),le.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Fs,r=>{const i=$e.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return le.or([()=>le.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class vE{constructor(e){this.wt=e}M(e,t,r,i){const a=new Wg("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",To,{unique:!0}),p.createObjectStore("documentMutations"),km(e),function(p){p.createObjectStore("remoteDocuments")}(e));let d=le.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),km(e)),d=d.next(()=>function(p){const y=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(p,y){return y.store("mutations").K().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",To,{unique:!0});const x=y.store("mutations"),T=w.map(L=>x.put(L));return le.waitFor(T)})}(e,a))),d=d.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Bs(a))),r<6&&i>=6&&(d=d.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(d=d.next(()=>this.Us(a))),r<8&&i>=8&&(d=d.next(()=>this.qs(e,a))),r<9&&i>=9&&(d=d.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(d=d.next(()=>this.Ks(a))),r<11&&i>=11&&(d=d.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:tE});y.createIndex("collectionPathOverlayIndex",k_,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",nE,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:BS});y.createIndex("documentKeyIndex",eE),y.createIndex("collectionGroupIndex",GD)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>this.Qs(e,a))),r<15&&i>=15&&(d=d.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:WD}).createIndex("sequenceNumberIndex",_m,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:M_}).createIndex("documentKeyIndex",KD,{unique:!1})}(e))),d}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ii(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>le.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",d).next(p=>le.forEach(p,y=>{st(y.userId===a.userId);const w=$u(this.wt,y);return vp(e,a.userId,w).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((d,p)=>{const y=new Xt(d),w=[0,Ai(y)];a.push(t.get(w).next(x=>x?le.resolve():t.put({targetId:0,path:Ai(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:qD});const r=t.store("collectionParents"),i=new cE,a=d=>{if(i.add(d)){const p=d.lastSegment(),y=d.popLast();return r.put({collectionId:p,parent:Ai(y)})}};return t.store("remoteDocuments").J({H:!0},(d,p)=>{const y=new Xt(d);return a(y.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,p,y],w)=>{const x=Ra(p);return a(x.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=yp(i),d=Th(this.wt,a);return t.put(d)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,d)=>{const p=t.store("remoteDocumentsV14"),y=(w=d,w.document?new $e(Xt.fromString(w.document.name).popFirst(5)):w.noDocument?$e.fromSegments(w.noDocument.path):w.unknownDocument?$e.fromSegments(w.unknownDocument.path):nt()).path.toArray();var w;const x={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(p.put(x))}).next(()=>le.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=L_(this.wt),a=new H_(wp.Os,this.wt.ne);return r.K().next(d=>{const p=new Map;return d.forEach(y=>{var w;let x=null!==(w=p.get(y.userId))&&void 0!==w?w:Nt();$u(this.wt,y).keys().forEach(T=>x=x.add(T)),p.set(y.userId,x)}),le.forEach(p,(y,w)=>{const x=new Yr(w),T=xm.se(this.wt,x),L=a.getIndexManager(x),V=kh.se(x,this.wt,L,a.referenceDelegate);return new Tm(i,V,T,L).recalculateAndSaveOverlaysForDocumentKeys(new bm(t,Di.ot),y).next()})})}}function km(n){n.createObjectStore("targetDocuments",{keyPath:zD}).createIndex("documentTargetsIndex",T_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$D,{unique:!0}),n.createObjectStore("targetGlobal")}const Ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $_{constructor(e,t,r,i,a,d,p,y,w,x,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=d,this.document=p,this.Ws=w,this.zs=x,this.Hs=T,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=L=>Promise.resolve(),!$_.V())throw new ke(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pE(this,i),this.ei=t+"main",this.wt=new mp(y),this.ni=new Io(this.ei,this.Hs,new vE(this.wt)),this.Vs=new Rh(this.referenceDelegate,this.wt),this.remoteDocumentCache=L_(this.wt),this.Ds=new JD,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===x&&qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(de.FAILED_PRECONDITION,Ep);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Di(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Dc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Nh(e).get("owner").next(t=>le.resolve(this.di(t)))}_i(e){return Cp(e).delete(this.clientId)}wi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Gr(r,"clientMetadata");return i.K().next(a=>{const d=e.gi(a,18e5),p=a.filter(y=>-1===d.indexOf(y));return le.forEach(p,y=>i.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?le.resolve(!0):Nh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new ke(de.FAILED_PRECONDITION,Ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cp(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bm(t,Di.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Cp(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return kh.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nx(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return xm.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(d=this.Hs)?QD:14===d?ZD:13===d?vm:12===d?US:11===d?YD:void nt();var d;let p;return this.ni.runTransaction(e,i,a,y=>(p=new bm(y,this.Ps?this.Ps.next():Di.ot),"readwrite-primary"===t?this.ai(p).next(w=>!!w||this.hi(p)).next(w=>{if(!w)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ke(de.FAILED_PRECONDITION,qg);return r(p)}).next(w=>this.fi(p).next(()=>w)):this.bi(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}bi(e){return Nh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(de.FAILED_PRECONDITION,Ep)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nh(e).put("owner",t)}static V(){return Io.V()}li(e){const t=Nh(e);return t.get("owner").next(r=>this.di(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(qt(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,St.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nh(n){return Gr(n,"owner")}function Cp(n){return Gr(n,"clientMetadata")}function Rm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Om{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Nt(),i=Nt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Om(e,t.fromCache,r,i)}}class bE{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){if(Rw(t))return le.resolve(null);let r=Wi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=em(t,null,"F"),r=Wi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const d=Nt(...a);return this.Di.getDocuments(e,d).next(p=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.ki(t,p);return this.Mi(t,w,d,y.readTime)?this.Ci(e,em(t,null,"F")):this.Oi(e,w,t,y)}))})))}xi(e,t,r,i){return Rw(t)||i.isEqual(Tt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const d=this.ki(t,a);return this.Mi(t,d,r,i)?this.Ni(e,t):(Ug()<=Br.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tm(t)),this.Oi(e,d,t,zg(i,-1)))})}ki(e,t){let r=new un(DD(e));return t.forEach((i,a)=>{nm(e,a)&&(r=r.add(a))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Ug()<=Br.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",tm(t)),this.Di.getDocumentsMatchingQuery(e,t,Ws.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(d=>{a=a.insert(d.key,d)}),a))}}class wE{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new ir(bt),this.Bi=new ju(a=>Sc(a),gh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tm(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function z_(n,e,t,r){return new wE(n,e,t,r)}function q_(n,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ye.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const d=[],p=[];let y=Nt();for(const w of i){d.push(w.batchId);for(const x of w.mutations)y=y.add(x.key)}for(const w of a){p.push(w.batchId);for(const x of w.mutations)y=y.add(x.key)}return t.localDocuments.getDocuments(r,y).next(w=>({Ki:w,removedBatchIds:d,addedBatchIds:p}))})})}),Dp.apply(this,arguments)}function EE(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(d,p,y,w){const x=y.batch,T=x.keys();let L=le.resolve();return T.forEach(V=>{L=L.next(()=>w.getEntry(p,V)).next(z=>{const re=y.docVersions.get(V);st(null!==re),z.version.compareTo(re)<0&&(x.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),w.addEntry(z)))})}),L.next(()=>d.mutationQueue.removeMutationBatch(p,x))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Nt();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function W_(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function CE(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const p=[];e.targetChanges.forEach((x,T)=>{const L=i.get(T);if(!L)return;p.push(t.Vs.removeMatchingKeys(a,x.removedDocuments,T).next(()=>t.Vs.addMatchingKeys(a,x.addedDocuments,T)));let V=L.withSequenceNumber(a.currentSequenceNumber);var z,re,Ce;e.targetMismatches.has(T)?V=V.withResumeToken(wr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):x.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(x.resumeToken,r)),i=i.insert(T,V),re=V,Ce=x,(0===(z=L).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&p.push(t.Vs.updateTargetData(a,V))});let y=_s(),w=Nt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,x))}),p.push(K_(a,d,e.documentUpdates).next(x=>{y=x.Gi,w=x.Qi})),!r.isEqual(Tt.min())){const x=t.Vs.getLastRemoteSnapshotVersion(a).next(T=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(x)}return le.waitFor(p).next(()=>d.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.$i=i,a))}function K_(n,e,t){let r=Nt(),i=Nt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let d=_s();return t.forEach((p,y)=>{const w=a.get(p);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(p)),y.isNoDocument()&&y.version.isEqual(Tt.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):Fe("LocalStore","Ignoring outdated watch update for ",p,". Current version:",w.version," Watch version:",y.version)}),{Gi:d,Qi:i}})}function DE(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ju(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Vs.allocateTargetId(r).next(d=>(i=new gi(e,d,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function ed(n,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Dc(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),Fm.apply(this,arguments)}function Y_(n,e,t){const r=Ke(n);let i=Tt.min(),a=Nt();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,y,w){const x=Ke(p),T=x.Bi.get(w);return void 0!==T?le.resolve(x.$i.get(T)):x.Vs.getTargetData(y,w)}(r,d,Wi(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(d,p.targetId).next(y=>{a=y})}).next(()=>r.Fi.getDocumentsMatchingQuery(d,e,t?i:Tt.min(),t?a:Nt())).next(p=>(Z_(r,rm(e),p),{documents:p,ji:a})))}function xE(n,e){const t=Ke(n),r=Ke(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(d=>d?d.target:null))}function AE(n,e){const t=Ke(n),r=t.Li.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,zg(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Z_(t,e,i),i))}function Z_(n,e,t){let r=Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function Er(){return Er=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n);let a=Nt(),d=_s();for(const w of t){const x=e.Wi(w.metadata.name);w.document&&(a=a.add(x));const T=e.zi(w);T.setReadTime(e.Hi(w.metadata.readTime)),d=d.insert(x,T)}const p=i.Ui.newChangeBuffer({trackRemovals:!0}),y=yield Ju(i,(w=r,Wi(Sl(Xt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>K_(w,p,d).next(x=>(p.apply(w),x)).next(x=>i.Vs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Vs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,x.Gi,x.Qi)).next(()=>x.Gi)))}),Er.apply(this,arguments)}function IE(n,e){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ye.Z)(function*(n,e,t=Nt()){const r=yield Ju(n,Wi(R_(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=Xr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i.Ds.saveNamedQuery(a,e);const p=r.withResumeToken(wr.EMPTY_BYTE_STRING,d);return i.$i=i.$i.insert(p.targetId,p),i.Vs.updateTargetData(a,p).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),Q_.apply(this,arguments)}function SE(n,e){return`firestore_clients_${n}_${e}`}function X_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function J_(n,e){return`firestore_targets_${n}_${e}`}class xp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new ke(i.error.code,i.error.message))),d?new xp(e,t,i.state,a):(qt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new Ph(e,r.state,i):(qt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Eh();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=Aw(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new Rl(e,a):(qt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ev{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ev(t.clientId,t.onlineState):(qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tv{constructor(){this.activeTargetIds=Eh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nm{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ir(bt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=SE(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new tv),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(SE(e.persistenceKey,i));if(a){const d=Rl.Ji(i,a);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(J_(this.persistenceKey,e));if(r){const i=Ph.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(J_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let d=Di.ot;if(null!=a)try{const p=JSON.parse(a);st("number"==typeof p),d=p}catch(p){qt("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);i!==Di.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new xp(this.currentUser,e,t,r),a=X_(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=X_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=J_(this.persistenceKey,e),a=new Ph(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Rl.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return xp.Ji(new Yr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Ph.Ji(i,t)}wr(e){return ev.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),d=[],p=[];return a.forEach(y=>{i.has(y)||d.push(y)}),i.forEach(y=>{a.has(y)||p.push(y)}),this.syncEngine.Or(d,p).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Eh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class TE{constructor(){this.Fr=new tv,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new tv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ME{Br(e){}shutdown(){}}class ax{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class rv{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Oa extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const d=this.oo(e,t);Fe("RestConnection","Sending: ",d,r);const p={};return this.uo(p,i,a),this.co(e,d,p,r).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw El("RestConnection",`${e} failed with error: `,y,"url: ",d,"request:",r),y})}ao(e,t,r,i,a,d){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ah,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${nv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,d)=>{const p=new aD;p.listenOnce(sD.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case s_.NO_ERROR:const w=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case s_.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),d(new ke(de.DEADLINE_EXCEEDED,"Request time out"));break;case s_.HTTP_ERROR:const x=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",p.getResponseText()),x>0){const T=p.getResponseJson().error;if(T&&T.status&&T.message){const L=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(z)>=0?z:de.UNKNOWN}(T.status);d(new ke(L,T.message))}else d(new ke(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ke(de.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);p.send(t,"POST",y,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Xf(),d=iD(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new oD({})),this.uo(p.initMessageHeaders,t,r),(0,St.uI)()||(0,St.b$)()||(0,St.d)()||(0,St.w1)()||(0,St.Mn)()||(0,St.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Fe("Connection","Creating WebChannel: "+y,p);const w=a.createWebChannel(y,p);let x=!1,T=!1;const L=new rv({jr:z=>{T?Fe("Connection","Not sending because WebChannel is closed:",z):(x||(Fe("Connection","Opening WebChannel transport."),w.open(),x=!0),Fe("Connection","WebChannel sending:",z),w.send(z))},Wr:()=>w.close()}),V=(z,re,Ce)=>{z.listen(re,Pe=>{try{Ce(Pe)}catch(rt){setTimeout(()=>{throw rt},0)}})};return V(w,Vg.EventType.OPEN,()=>{T||Fe("Connection","WebChannel transport opened.")}),V(w,Vg.EventType.CLOSE,()=>{T||(T=!0,Fe("Connection","WebChannel transport closed"),L.eo())}),V(w,Vg.EventType.ERROR,z=>{T||(T=!0,El("Connection","WebChannel transport errored:",z),L.eo(new ke(de.UNAVAILABLE,"The operation could not be completed")))}),V(w,Vg.EventType.MESSAGE,z=>{var re;if(!T){const Ce=z.data[0];st(!!Ce);const Pe=Ce,rt=Pe.error||(null===(re=Pe[0])||void 0===re?void 0:re.error);if(rt){Fe("Connection","WebChannel received error:",rt);const _t=rt.status;let ot=function(kt){const tn=fr[kt];if(void 0!==tn)return RD(tn)}(_t),It=rt.message;void 0===ot&&(ot=de.INTERNAL,It="Unknown error status: "+_t+" with message "+rt.message),T=!0,L.eo(new ke(ot,It)),w.close()}else Fe("Connection","WebChannel received:",Ce),L.no(Ce)}}),V(d,pw.STAT_EVENT,z=>{z.stat===gw.PROXY?Fe("Connection","Detected buffering proxy"):z.stat===gw.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.Zr()},0),L}}function kE(){return typeof window<"u"?window:null}function Ap(){return typeof document<"u"?document:null}function Yi(n){return new C_(n,!0)}class Es{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Xs{constructor(e,t,r,i,a,d,p,y){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Es(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new ke(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RE extends Xs{constructor(e,t,r,i,a,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function qw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:nt(),i=e.targetChange.targetIds||[],a=function(y,w){return y.dt?(st(void 0===w||"string"==typeof w),wr.fromBase64String(w||"")):(st(void 0===w||w instanceof Uint8Array),wr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(y){const w=void 0===y.code?de.UNKNOWN:RD(y.code);return new ke(w,y.message||"")}(d);t=new hm(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Zs(n,r.document.name),a=Xr(r.document.updateTime),d=new Zr({mapValue:{fields:r.document.fields}}),p=Cn.newFoundDocument(i,a,d);t=new dp(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Zs(n,r.document),a=r.readTime?Xr(r.readTime):Tt.min(),d=Cn.newNoDocument(i,a);t=new dp([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=Zs(n,r.document);t=new dp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,a=new MD(r.count||0);t=new Uw(r.targetId,a)}}var y;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?Xr(a.readTime):Tt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=pp(this.wt),t.addTarget=function(i,a){let d;const p=a.target;return d=Zg(p)?{documents:I_(i,p)}:{query:Ww(i,p)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=hp(i,a.resumeToken):a.snapshotVersion.compareTo(Tt.min())>0&&(d.readTime=ka(i,a.snapshotVersion.toTimestamp())),d}(this.wt,e);const r=function BD(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=pp(this.wt),t.removeTarget=e,this.Oo(t)}}class OE extends Xs{constructor(e,t,r,i,a,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function vs(n,e){return n&&n.length>0?(st(void 0!==e),n.map(t=>function(r,i){let a=Xr(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=Xr(i)),new lm(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.Jo(r,t)}return st(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=pp(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Dh(this.wt,r))};this.Oo(t)}}class lx extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(de.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,d])=>this.bo.ao(e,t,r,a,d,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(de.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class cx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(qt(t),this.su=!1):Fe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class ux{constructor(e,t,r,i,a){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(p=>{r.enqueueAndForget((0,ye.Z)(function*(){var y;Ol(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ye.Z)(function*(w){const x=Ke(w);x.lu.add(4),yield Fa(x),x._u.set("Unknown"),x.lu.delete(4),yield Ip(x)}),function(w){return y.apply(this,arguments)})(d))}))}),this._u=new cx(r,i)}}function Ip(n){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ye.Z)(function*(n){if(Ol(n))for(const e of n.fu)yield e(!0)}),Sp.apply(this,arguments)}function Fa(n){return iv.apply(this,arguments)}function iv(){return iv=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),iv.apply(this,arguments)}function Tp(n,e){const t=Ke(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),ov(t)?Lh(t):Bh(t).Co()&&Pm(t,e))}function Mp(n,e){const t=Ke(n),r=Bh(t);t.hu.delete(e),r.Co()&&sv(t,e),0===t.hu.size&&(r.Co()?r.ko():Ol(t)&&t._u.set("Unknown"))}function Pm(n,e){n.wu.Nt(e.targetId),Bh(n).Qo(e)}function sv(n,e){n.wu.Nt(e),Bh(n).jo(e)}function Lh(n){n.wu=new Hw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Bh(n).start(),n._u.iu()}function ov(n){return Ol(n)&&!Bh(n).Do()&&n.hu.size>0}function Ol(n){return 0===Ke(n).lu.size}function av(n){n.wu=void 0}function lv(n){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{Pm(n,e)})}),Vh.apply(this,arguments)}function cv(n,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ye.Z)(function*(n,e){av(n),ov(n)?(n._u.uu(e),Lh(n)):n._u.set("Unknown")}),Lm.apply(this,arguments)}function FE(n,e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof hm&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const d=a.cause;for(const p of a.targetIds)i.hu.has(p)&&(yield i.remoteSyncer.rejectListen(p,d),i.hu.delete(p),i.wu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kp(n,r)}else if(e instanceof dp?n.wu.Ut(e):e instanceof Uw?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Tt.min()))try{const r=yield W_(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const d=i.wu.Yt(a);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=i.hu.get(y);w&&i.hu.set(y,w.withResumeToken(p.resumeToken,a))}}),d.targetMismatches.forEach(p=>{const y=i.hu.get(p);if(!y)return;i.hu.set(p,y.withResumeToken(wr.EMPTY_BYTE_STRING,y.snapshotVersion)),sv(i,p);const w=new gi(y.target,p,1,y.sequenceNumber);Pm(i,w)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield kp(n,r)}var r}),Vm.apply(this,arguments)}function kp(n,e,t){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,ye.Z)(function*(n,e,t){if(!Dc(e))throw e;n.lu.add(1),yield Fa(n),n._u.set("Offline"),t||(t=()=>W_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Ip(n)}))}),Bm.apply(this,arguments)}function uv(n,e){return e().catch(t=>kp(n,t,e))}function td(n){return dv.apply(this,arguments)}function dv(){return dv=(0,ye.Z)(function*(n){const e=Ke(n),t=Fl(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;dx(e);)try{const i=yield DE(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,hx(e,i)}catch(i){yield kp(e,i)}NE(e)&&PE(e)}),dv.apply(this,arguments)}function dx(n){return Ol(n)&&n.au.length<10}function hx(n,e){n.au.push(e);const t=Fl(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function NE(n){return Ol(n)&&!Fl(n).Do()&&n.au.length>0}function PE(n){Fl(n).start()}function fx(n){return hv.apply(this,arguments)}function hv(){return hv=(0,ye.Z)(function*(n){Fl(n).Xo()}),hv.apply(this,arguments)}function px(n){return fv.apply(this,arguments)}function fv(){return fv=(0,ye.Z)(function*(n){const e=Fl(n);for(const t of n.au)e.Ho(t.mutations)}),fv.apply(this,arguments)}function gx(n,e,t){return pv.apply(this,arguments)}function pv(){return pv=(0,ye.Z)(function*(n,e,t){const r=n.au.shift(),i=Em.from(r,e,t);yield uv(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield td(n)}),pv.apply(this,arguments)}function mx(n,e){return gv.apply(this,arguments)}function gv(){return gv=(0,ye.Z)(function*(n,e){var t;e&&Fl(n).zo&&(yield(t=(0,ye.Z)(function*(r,i){if(kD(a=i.code)&&a!==de.ABORTED){const d=r.au.shift();Fl(r).No(),yield uv(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield td(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),NE(n)&&PE(n)}),gv.apply(this,arguments)}function LE(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,ye.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Ol(t);t.lu.add(3),yield Fa(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Ip(t)}),mv.apply(this,arguments)}function yv(n,e){return _v.apply(this,arguments)}function _v(){return _v=(0,ye.Z)(function*(n,e){const t=Ke(n);e?(t.lu.delete(2),yield Ip(t)):e||(t.lu.add(2),yield Fa(t),t._u.set("Unknown"))}),_v.apply(this,arguments)}function Bh(n){return n.mu||(n.mu=function(e,t,r){const i=Ke(e);return i.tu(),new RE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:lv.bind(null,n),Jr:cv.bind(null,n),Go:FE.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),ov(n)?Lh(n):n._u.set("Unknown")):(yield n.mu.stop(),av(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Fl(n){return n.gu||(n.gu=function(e,t,r){const i=Ke(e);return i.tu(),new OE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:fx.bind(null,n),Jr:mx.bind(null,n),Yo:px.bind(null,n),Jo:gx.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield td(n)):(yield n.gu.stop(),n.au.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Um{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,a){const d=Date.now()+r,p=new Um(e,t,d,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nd(n,e){if(qt("AsyncQueue",`${e}: ${n}`),Dc(n))return new ke(de.UNAVAILABLE,`${e}: ${n}`);throw n}class rd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=dm(),this.sortedSet=new ir(this.comparator)}static emptySet(e){return new rd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new rd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class vv{constructor(){this.yu=new ir($e.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):nt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class id{constructor(e,t,r,i,a,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new id(e,t,rd.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VE{constructor(){this.Iu=void 0,this.listeners=[]}}class BE{constructor(){this.queries=new ju(e=>Ow(e),yh),this.onlineState="Unknown",this.Tu=new Set}}function jm(n,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new VE),i)try{a.Iu=yield t.onListen(r)}catch(d){const p=nd(d,`Initialization of query '${tm(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&Oc(t)}),Rp.apply(this,arguments)}function Op(n,e){return Nl.apply(this,arguments)}function Nl(){return Nl=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const d=a.listeners.indexOf(e);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Nl.apply(this,arguments)}function yx(n,e){const t=Ke(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const p of d.listeners)p.Au(i)&&(r=!0);d.Iu=i}}r&&Oc(t)}function _x(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Oc(n){n.Tu.forEach(e=>{e.next()})}class UE{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new id(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class bv{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class vx{constructor(e){this.wt=e}Wi(e){return Zs(this.wt,e)}zi(e){return e.metadata.exists?x_(this.wt,e.document,!1):Cn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Xr(e)}}class jE{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wv(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new vx(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const d of i.metadata.queries){const p=(t.get(d)||Nt()).add(a);t.set(d,p)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function ox(n,e,t,r){return Er.apply(this,arguments)}(e.localStore,new vx(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield IE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function wv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bx{constructor(e){this.key=e}}class wt{constructor(e){this.key=e}}class HE{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Nt(),this.mutatedKeys=Nt(),this.Lu=DD(e),this.Uu=new rd(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new vv,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,d=i,p=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,T)=>{const L=i.get(x),V=nm(this.query,T)?T:null,z=!!L&&this.mutatedKeys.has(L.key),re=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ce=!1;L&&V?L.data.isEqual(V.data)?z!==re&&(r.track({type:3,doc:V}),Ce=!0):this.Qu(L,V)||(r.track({type:2,doc:V}),Ce=!0,(y&&this.Lu(V,y)>0||w&&this.Lu(V,w)<0)&&(p=!0)):!L&&V?(r.track({type:0,doc:V}),Ce=!0):L&&!V&&(r.track({type:1,doc:L}),Ce=!0,(y||w)&&(p=!0)),Ce&&(V?(d=d.add(V),a=re?a.add(x):a.delete(x)):(d=d.delete(x),a=a.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),a=a.delete(x.key),r.track({type:1,doc:x})}return{Uu:d,Gu:r,Mi:p,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((w,x)=>function(T,L){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return V(T)-V(L)}(w.type,x.type)||this.Lu(w.doc,x.doc)),this.ju(r);const d=t?this.Wu():[],p=0===this.Bu.size&&this.current?1:0,y=p!==this.$u;return this.$u=p,0!==a.length||y?{snapshot:new id(this.query,e.Uu,i,a,e.mutatedKeys,0===p,y,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new vv,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Nt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new wt(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new bx(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Nt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return id.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class wx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ex{constructor(e){this.key=e,this.Xu=!1}}class Uh{constructor(e,t,r,i,a,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.Zu={},this.tc=new ju(p=>Ow(p),yh),this.ec=new Map,this.nc=new Set,this.sc=new ir($e.comparator),this.ic=new Map,this.rc=new Fh,this.oc={},this.uc=new Map,this.cc=Qs.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Cx(n,e){return jh.apply(this,arguments)}function jh(){return jh=(0,ye.Z)(function*(n,e){const t=Nv(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const d=yield Ju(t.localStore,Wi(e));t.isPrimaryClient&&Tp(t.remoteStore,d);const p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield Hh(t,e,r,"current"===p)}return i}),jh.apply(this,arguments)}function Hh(n,e,t,r){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,ye.Z)(function*(n,e,t,r){n.hc=(x,T,L)=>{return(V=(0,ye.Z)(function*(z,re,Ce,Pe){let rt=re.view.Ku(Ce);rt.Mi&&(rt=yield Y_(z.localStore,re.query,!1).then(({documents:It})=>re.view.Ku(It,rt)));const _t=Pe&&Pe.targetChanges.get(re.targetId),ot=re.view.applyChanges(rt,z.isPrimaryClient,_t);return Mv(z,re.targetId,ot.zu),ot.snapshot}),function(z,re,Ce,Pe){return V.apply(this,arguments)})(n,x,T,L);var V};const i=yield Y_(n.localStore,e,!0),a=new HE(e,i.ji),d=a.Ku(i.documents),p=Ys.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=a.applyChanges(d,n.isPrimaryClient,p);Mv(n,t,y.zu);const w=new wx(e,t,a);return n.tc.set(e,w),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),y.snapshot}),Qn.apply(this,arguments)}function jS(n,e){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,ye.Z)(function*(n,e){const t=Ke(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!yh(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ed(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Mp(t.remoteStore,r.targetId),sd(t,r.targetId)}).catch(Cc))):(sd(t,r.targetId),yield ed(t.localStore,r.targetId,!0))}),Hm.apply(this,arguments)}function Ev(){return Ev=(0,ye.Z)(function*(n,e,t){const r=Pv(n);try{const i=yield function(a,d){const p=Ke(a),y=rr.now(),w=d.reduce((L,V)=>L.add(V.key),Nt());let x,T;return p.persistence.runTransaction("Locally write mutations","readwrite",L=>{let V=_s(),z=Nt();return p.Ui.getEntries(L,w).next(re=>{V=re,V.forEach((Ce,Pe)=>{Pe.isValidDocument()||(z=z.add(Ce))})}).next(()=>p.localDocuments.getOverlayedDocuments(L,V)).next(re=>{x=re;const Ce=[];for(const Pe of d){const rt=ID(Pe,x.get(Pe.key).overlayedDocument);null!=rt&&Ce.push(new Ma(Pe.key,rt,m_(rt.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(L,y,Ce,d)}).next(re=>{T=re;const Ce=re.applyToLocalDocumentSet(x,z);return p.documentOverlayCache.saveOverlays(L,re.batchId,Ce)})}).then(()=>({batchId:T.batchId,changes:FD(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,p){let y=a.oc[a.currentUser.toKey()];y||(y=new ir(bt)),y=y.insert(d,p),a.oc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield Pl(r,i.changes),yield td(r.remoteStore)}catch(i){const a=nd(i,"Failed to persist write");t.reject(a)}}),Ev.apply(this,arguments)}function Cv(n,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,ye.Z)(function*(n,e){const t=Ke(n);try{const r=yield CE(t.localStore,e);e.targetChanges.forEach((i,a)=>{const d=t.ic.get(a);d&&(st(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Xu=!0:i.modifiedDocuments.size>0?st(d.Xu):i.removedDocuments.size>0&&(st(d.Xu),d.Xu=!1))}),yield Pl(t,r,e)}catch(r){yield Cc(r)}}),Gm.apply(this,arguments)}function Dv(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,d)=>{const p=d.view.Eu(e);p.snapshot&&i.push(p.snapshot)}),function(a,d){const p=Ke(a);p.onlineState=d;let y=!1;p.queries.forEach((w,x)=>{for(const T of x.listeners)T.Eu(d)&&(y=!0)}),y&&Oc(p)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $E(n,e,t){return xv.apply(this,arguments)}function xv(){return xv=(0,ye.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let d=new ir($e.comparator);d=d.insert(a,Cn.newNoDocument(a,Tt.min()));const p=Nt().add(a),y=new up(Tt.min(),new Map,new un(bt),d,p);yield Cv(r,y),r.sc=r.sc.remove(a),r.ic.delete(e),od(r)}else yield ed(r.localStore,e,!1).then(()=>sd(r,e,t)).catch(Cc)}),xv.apply(this,arguments)}function Dx(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield EE(t.localStore,e);$m(t,r,null),Gh(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pl(t,i)}catch(i){yield Cc(i)}}),Av.apply(this,arguments)}function Fp(n,e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,ye.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(a,d){const p=Ke(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.mutationQueue.lookupMutationBatch(y,d).next(x=>(st(null!==x),w=x.keys(),p.mutationQueue.removeMutationBatch(y,x))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>p.localDocuments.getDocuments(y,w))})}(r.localStore,e);$m(r,e,t),Gh(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pl(r,i)}catch(i){yield Cc(i)}}),Iv.apply(this,arguments)}function Sv(){return Sv=(0,ye.Z)(function*(n,e){const t=Ke(n);Ol(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=Ke(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=nd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Sv.apply(this,arguments)}function Gh(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function $m(n,e,t){const r=Ke(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function sd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||Tv(n,r)})}function Tv(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Mp(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),od(n))}function Mv(n,e,t){for(const r of t)r instanceof bx?(n.rc.addReference(r.key,e),Np(n,r)):r instanceof wt?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||Tv(n,r.key)):nt()}function Np(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.nc.add(r),od(n))}function od(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new $e(Xt.fromString(e)),r=n.cc.next();n.ic.set(r,new Ex(t)),n.sc=n.sc.insert(t,r),Tp(n.remoteStore,new gi(Wi(Sl(t.path)),r,2,Di.ot))}}function Pl(n,e,t){return kv.apply(this,arguments)}function kv(){return kv=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[],d=[];var p;r.tc.isEmpty()||(r.tc.forEach((p,y)=>{d.push(r.hc(y,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w.fromCache?"not-current":"current"),i.push(w);const x=Om.Vi(y.targetId,w);a.push(x)}}))}),yield Promise.all(d),r.Zu.Go(i),yield(p=(0,ye.Z)(function*(y,w){const x=Ke(y);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>le.forEach(w,L=>le.forEach(L.Pi,V=>x.persistence.referenceDelegate.addReference(T,L.targetId,V)).next(()=>le.forEach(L.vi,V=>x.persistence.referenceDelegate.removeReference(T,L.targetId,V)))))}catch(T){if(!Dc(T))throw T;Fe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of w){const L=T.targetId;if(!T.fromCache){const V=x.$i.get(L),re=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);x.$i=x.$i.insert(L,re)}}}),function(y,w){return p.apply(this,arguments)})(r.localStore,a))}),kv.apply(this,arguments)}function Ax(n,e){return zm.apply(this,arguments)}function zm(){return zm=(0,ye.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield q_(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(d=>{d.forEach(p=>{p.reject(new ke(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pl(t,r.Ki)}var i}),zm.apply(this,arguments)}function zE(n,e){const t=Ke(n),r=t.ic.get(e);if(r&&r.Xu)return Nt().add(r.key);{let i=Nt();const a=t.ec.get(e);if(!a)return i;for(const d of a){const p=t.tc.get(d);i=i.unionWith(p.view.qu)}return i}}function qE(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ye.Z)(function*(n,e){const t=Ke(n),r=yield Y_(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Mv(t,e.targetId,i.zu),i}),Rv.apply(this,arguments)}function WE(n,e){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,ye.Z)(function*(n,e){const t=Ke(n);return AE(t.localStore,e).then(r=>Pl(t,r))}),Ov.apply(this,arguments)}function Ix(n,e,t,r){return KE.apply(this,arguments)}function KE(){return KE=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n),a=yield function(d,p){const y=Ke(d),w=Ke(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",x=>w.yn(x,p).next(T=>T?y.localDocuments.getDocuments(x,T):le.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield td(i.remoteStore):"acknowledged"===t||"rejected"===t?($m(i,e,r||null),Gh(i,e),p=e,Ke(Ke(i.localStore).mutationQueue).In(p)):nt(),yield Pl(i,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),KE.apply(this,arguments)}function YE(){return YE=(0,ye.Z)(function*(n,e){const t=Ke(n);if(Nv(t),Pv(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Sx(t,r.toArray());t.ac=!0,yield yv(t.remoteStore,!0);for(const a of i)Tp(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(sd(t,d),ed(t.localStore,d,!0))),Mp(t.remoteStore,d)}),yield i,yield Sx(t,r),function(a){const d=Ke(a);d.ic.forEach((p,y)=>{Mp(d.remoteStore,y)}),d.rc.cs(),d.ic=new Map,d.sc=new ir($e.comparator)}(t),t.ac=!1,yield yv(t.remoteStore,!1)}}),YE.apply(this,arguments)}function Sx(n,e,t){return qm.apply(this,arguments)}function qm(){return qm=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[];for(const d of e){let p;const y=r.ec.get(d);if(y&&0!==y.length){p=yield Ju(r.localStore,Wi(y[0]));for(const w of y){const x=r.tc.get(w),T=yield qE(r,x);T.snapshot&&a.push(T.snapshot)}}else{const w=yield xE(r.localStore,d);p=yield Ju(r.localStore,w),yield Hh(r,Pp(w),d,!1)}i.push(p)}return r.Zu.Go(a),i}),qm.apply(this,arguments)}function Pp(n){return v_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Tx(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Ri()}function Mx(n,e,t,r){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n);if(i.ac)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const d=yield AE(i.localStore,rm(a[0])),p=up.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pl(i,d,p);break}case"rejected":yield ed(i.localStore,e,!0),sd(i,e,r);break;default:nt()}}),Wm.apply(this,arguments)}function Lp(n,e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ye.Z)(function*(n,e,t){const r=Nv(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const a=yield xE(r.localStore,i),d=yield Ju(r.localStore,a);yield Hh(r,Pp(a),d.targetId,!1),Tp(r.remoteStore,d)}for(const i of t)r.ec.has(i)&&(yield ed(r.localStore,i,!1).then(()=>{Mp(r.remoteStore,i),sd(r,i)}).catch(Cc))}}),Fv.apply(this,arguments)}function Nv(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$E.bind(null,e),e.Zu.Go=yx.bind(null,e.eventManager),e.Zu.lc=_x.bind(null,e.eventManager),e}function Pv(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fp.bind(null,e),e}class ZE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.wt=Yi(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return z_(this.persistence,new bE,e.initialUser,this.wt)}_c(e){return new H_(wp.Os,this.wt)}dc(e){return new TE}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lv extends ZE{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield Pv(r.yc.syncEngine),yield td(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return z_(this.persistence,new bE,e.initialUser,this.wt)}mc(e,t){return new hE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new mD(t,this.persistence);return new gD(e.asyncQueue,r)}_c(e){const t=Rm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new $_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kE(),Ap(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new TE}}class Rx extends Lv{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof Nm&&(r.sharedClientState.syncEngine={kr:Ix.bind(null,i),Mr:Mx.bind(null,i),Or:Lp.bind(null,i),Ri:Tx.bind(null,i),Nr:WE.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,ye.Z)(function*(d){yield function HS(n,e){return YE.apply(this,arguments)}(r.yc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}dc(e){const t=kE();if(!Nm.V(t))throw new ke(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Rm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vv{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Dv(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ax.bind(null,r.syncEngine),yield yv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BE}createDatastore(e){const t=Yi(e.databaseInfo.databaseId),r=new Oa(e.databaseInfo);return new lx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>Dv(this.syncEngine,p,0),d=ax.V()?new ax:new ME,new ux(t,r,i,a,d);var t,r,i,a,d}createSyncEngine(e,t){return function(r,i,a,d,p,y,w){const x=new Uh(r,i,a,d,p,y);return w&&(x.ac=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ke(t);Fe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Fa(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ad(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Km{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QE{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new bv(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,ye.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ox{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,d){const p=Ke(a),y=pp(p.wt)+"/documents",w={documents:d.map(V=>Gu(p.wt,V))},x=yield p.ao("BatchGetDocuments",y,w,d.length),T=new Map;x.forEach(V=>{const z=function LD(n,e){return"found"in e?function(t,r){st(!!r.found);const i=Zs(t,r.found.name),a=Xr(r.found.updateTime),d=new Zr({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(i,a,d)}(n,e):"missing"in e?function(t,r){st(!!r.missing),st(!!r.readTime);const i=Zs(t,r.missing),a=Xr(r.readTime);return Cn.newNoDocument(i,a)}(n,e):nt()}(p.wt,V);T.set(z.key.toString(),z)});const L=[];return d.forEach(V=>{const z=T.get(V.toString());st(!!z),L.push(z)}),L}),function(a,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=$e.fromPath(i);e.mutations.push(new um(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const d=Ke(i),p=pp(d.wt)+"/documents",y={writes:a.map(w=>Dh(d.wt,w))};yield d.ro("Commit",p,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kn.updateTime(t):kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new ke(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(t)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XE{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Es(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new Ox(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!uh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kD(t)}return!1}}class Fx{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yr.UNAUTHENTICATED,this.clientId=Su.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=nd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Bv(n,e){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield q_(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Uv.apply(this,arguments)}function Ym(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Zm(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>LE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>LE(e.remoteStore,a)),n.onlineComponents=e}),jv.apply(this,arguments)}function Zm(n){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,ye.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Bv(n,new ZE)),n.offlineComponents}),Qm.apply(this,arguments)}function Xm(n){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,ye.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Ym(n,new Vv)),n.onlineComponents}),Hv.apply(this,arguments)}function JE(n){return Zm(n).then(e=>e.persistence)}function $h(n){return Zm(n).then(e=>e.localStore)}function e0(n){return Xm(n).then(e=>e.remoteStore)}function Jm(n){return Xm(n).then(e=>e.syncEngine)}function zh(n){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,ye.Z)(function*(n){const e=yield Xm(n),t=e.eventManager;return t.onListen=Cx.bind(null,e.syncEngine),t.onUnlisten=jS.bind(null,e.syncEngine),t}),Gv.apply(this,arguments)}function t0(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,d,p,y){const w=new Km({next:T=>{a.enqueueAndForget(()=>Op(i,x));const L=T.docs.has(d);!L&&T.fromCache?y.reject(new ke(de.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&T.fromCache&&p&&"server"===p.source?y.reject(new ke(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new UE(Sl(d.path),w,{includeMetadataChanges:!0,Du:!0});return jm(i,x)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}function n0(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,d,p,y){const w=new Km({next:T=>{a.enqueueAndForget(()=>Op(i,x)),T.fromCache&&"server"===p.source?y.reject(new ke(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new UE(d,w,{includeMetadataChanges:!0,Du:!0});return jm(i,x)}(yield zh(n),n.asyncQueue,e,t,r)})),r.promise}const $v=new Map;function zv(n,e,t){if(!t)throw new ke(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function o0(n,e,t,r){if(!0===e&&!0===r)throw new ke(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function a0(n){if(!$e.isDocumentKey(n))throw new ke(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ey(n){if($e.isDocumentKey(n))throw new ke(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qh(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(n);throw new ke(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ty(n,e){if(e<=0)throw new ke(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class l0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,o0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vp{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l0({}),this._settingsFrozen=!1,e instanceof Dl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yw;switch(t.type){case"gapi":const r=t.client;return st(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new dD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$v.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),$v.delete(e),t.terminate())}(this),Promise.resolve()}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new si(this.firestore,e,this._query)}}class Si extends si{constructor(e,t,r){super(e,t,Sl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new $e(e))}withConverter(e){return new Si(this.firestore,e,this._path)}}function c0(n,e,...t){if(n=(0,St.m9)(n),zv("collection","path",e),n instanceof Vp){const r=Xt.fromString(e,...t);return ey(r),new Si(n,null,r)}{if(!(n instanceof Vn||n instanceof Si))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return ey(r),new Si(n.firestore,null,r)}}function Wv(n,e,...t){if(n=(0,St.m9)(n),1===arguments.length&&(e=Su.I()),zv("doc","path",e),n instanceof Vp){const r=Xt.fromString(e,...t);return a0(r),new Vn(n,null,new $e(r))}{if(!(n instanceof Vn||n instanceof Si))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return a0(r),new Vn(n.firestore,n instanceof Si?n.converter:null,new $e(r))}}function Kv(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),(n instanceof Vn||n instanceof Si)&&(e instanceof Vn||e instanceof Si)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ny(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),n instanceof si&&e instanceof si&&n.firestore===e.firestore&&yh(n._query,e._query)&&n.converter===e.converter}class Hx{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Es(this,"async_queue_retry"),this.Kc=()=>{const t=Ap();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Ap();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Ap();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Hr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!Dc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,qt("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=Um.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&nt()}verifyOperationInProgress(){}zc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function ry(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Gx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rn extends Vp{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Hx,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()}}function Cr(n){return n._firestoreClient||Yv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Yv(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new sp(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new Fx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function u0(n,e,t){const r=new Hr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Bv(n,t),yield Ym(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(d=a).name?d.code===de.FAILED_PRECONDITION||d.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw a;El("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var d})).then(()=>r.promise)}function Qx(n){if(n._initialized||n._terminated)throw new ke(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ll{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(wr.fromBase64String(e))}catch(t){throw new ke(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Na(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fc{constructor(e){this._methodName=e}}class iy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}const Xx=/^__.*__$/;class Jx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new wh(e,this.data,t,this.fieldTransforms)}}class f0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class sy{constructor(e,t,r,i,a,d){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new sy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Cs(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(p0(this.Zc)&&Xx.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class eA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Yi(e)}aa(e,t,r,i=!1){return new sy({Zc:e,methodName:t,ca:r,path:Zn.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ld(n){const e=n._freezeSettings(),t=Yi(n._databaseId);return new eA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nc(n,e,t,r,i,a={}){const d=n.aa(a.merge||a.mergeFields?2:0,e,t,i);Jv("Data must be an object, but it was:",d,r);const p=v0(r,d);let y,w;if(a.merge)y=new qi(d.fieldMask),w=d.fieldTransforms;else if(a.mergeFields){const x=[];for(const T of a.mergeFields){const L=ud(e,T,t);if(!d.contains(L))throw new ke(de.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);w0(x,L)||x.push(L)}y=new qi(x),w=d.fieldTransforms.filter(T=>y.covers(T.field))}else y=null,w=d.fieldTransforms;return new Jx(new Zr(p),y,w)}class Wh extends Fc{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wh}}function Zv(n,e,t){return new sy({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class oy extends Fc{_toFieldTransform(e){return new _h(e.path,new Lu)}isEqual(e){return e instanceof oy}}class g0 extends Fc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Zv(this,e,!0),r=this.ha.map(a=>cd(a,t)),i=new Vu(r);return new _h(e.path,i)}isEqual(e){return this===e}}class m0 extends Fc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Zv(this,e,!0),r=this.ha.map(a=>cd(a,t)),i=new xi(r);return new _h(e.path,i)}isEqual(e){return this===e}}class y0 extends Fc{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Bu(e.wt,Pu(e.wt,this.la));return new _h(e.path,t)}isEqual(e){return this===e}}function Qv(n,e,t,r){const i=n.aa(1,e,t);Jv("Data must be an object, but it was:",i,r);const a=[],d=Zr.empty();ys(r,(y,w)=>{const x=Kh(e,y,t);w=(0,St.m9)(w);const T=i.ia(x);if(w instanceof Wh)a.push(x);else{const L=cd(w,T);null!=L&&(a.push(x),d.set(x,L))}});const p=new qi(a);return new f0(d,p,i.fieldTransforms)}function _0(n,e,t,r,i,a){const d=n.aa(1,e,t),p=[ud(e,r,t)],y=[i];if(a.length%2!=0)throw new ke(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)p.push(ud(e,a[L])),y.push(a[L+1]);const w=[],x=Zr.empty();for(let L=p.length-1;L>=0;--L)if(!w0(w,p[L])){const V=p[L];let z=y[L];z=(0,St.m9)(z);const re=d.ia(V);if(z instanceof Wh)w.push(V);else{const Ce=cd(z,re);null!=Ce&&(w.push(V),x.set(V,Ce))}}const T=new qi(w);return new f0(x,T,d.fieldTransforms)}function Xv(n,e,t,r=!1){return cd(t,n.aa(r?4:3,e))}function cd(n,e){if(b0(n=(0,St.m9)(n)))return Jv("Unsupported field value:",e,n),v0(n,e);if(n instanceof Fc)return function(t,r){if(!p0(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const d of t){let p=cd(d,r.ra(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,St.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pu(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=rr.fromDate(t);return{timestampValue:ka(r.wt,i)}}if(t instanceof rr){const i=new rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ka(r.wt,i)}}if(t instanceof iy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Na)return{bytesValue:hp(r.wt,t._byteString)};if(t instanceof Vn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${qh(t)}`)}(n,e)}function v0(n,e){const t={};return u_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ys(n,(r,i)=>{const a=cd(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function b0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof iy||n instanceof Na||n instanceof Vn||n instanceof Fc)}function Jv(n,e,t){if(!b0(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=qh(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function ud(n,e,t){if((e=(0,St.m9)(e))instanceof Ll)return e._internalPath;if("string"==typeof e)return Kh(n,e);throw Cs("Field path arguments must be of type string or ",n,!1,void 0,t)}const tA=new RegExp("[~\\*/\\[\\]]");function Kh(n,e,t){if(e.search(tA)>=0)throw Cs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ll(...e.split("."))._internalPath}catch{throw Cs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cs(n,e,t,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(a||d)&&(y+=" (found",a&&(y+=` in field ${r}`),d&&(y+=` in document ${i}`),y+=")"),new ke(de.INVALID_ARGUMENT,p+n+y)}function w0(n,e){return n.some(t=>t.isEqual(e))}class Pc{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ay("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bp extends Pc{data(){return super.data()}}function ay(n,e){return"string"==typeof e?Kh(n,e):e instanceof Ll?e._internalPath:e._delegate._internalPath}class dd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vl extends Pc{constructor(e,t,r,i,a,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ay("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Lc extends Vl{data(e={}){return super.data(e)}}class Ro{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lc(this._firestore,this._userDataWriter,r.key,r,new dd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Lc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new dd(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const p=new Lc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new dd(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==d.type&&(y=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),w=a.indexOf(d.doc.key)),{type:nA(d.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function E0(n,e){return n instanceof Vl&&e instanceof Vl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ro&&e instanceof Ro&&n._firestore===e._firestore&&ny(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function eb(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yh{}function Pa(n,...e){for(const t of e)n=t._apply(n);return n}class C0 extends Yh{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=ld(e.firestore),r=function(i,a,d,p,y,w,x){let T;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){ib(x,w);const V=[];for(const z of x)V.push(uy(p,i,z));T={arrayValue:{values:V}}}else T=uy(p,i,x)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||ib(x,w),T=Xv(d,"where",x,"in"===w||"not-in"===w);const L=Qr.create(y,w,T);return function(V,z){if(z.ht()){const Ce=b_(V);if(null!==Ce&&!Ce.isEqual(z.field))throw new ke(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ce.toString()}' and '${z.field.toString()}'`);const Pe=Jg(V);null!==Pe&&sb(0,z.field,Pe)}const re=function(Ce,Pe){for(const rt of Ce.filters)if(Pe.indexOf(rt.op)>=0)return rt.op;return null}(V,function(Ce){switch(Ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==re)throw new ke(de.INVALID_ARGUMENT,re===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${re.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new si(e.firestore,e.converter,function(i,a){const d=i.filters.concat([a]);return new Il(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class iA extends Yh{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Fu(i,a);return function(p,y){if(null===Jg(p)){const w=b_(p);null!==w&&sb(0,w,y.field)}}(r,d),d}(e._query,this.fa,this.wa);return new si(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Il(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ly extends Yh{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new si(e.firestore,e.converter,em(e._query,this.ma,this.ga))}}class cy extends Yh{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=rb(e,this.type,this.ya,this.pa);return new si(e.firestore,e.converter,(i=t,new Il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class x0 extends Yh{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=rb(e,this.type,this.ya,this.pa);return new si(e.firestore,e.converter,(i=t,new Il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function rb(n,e,t,r){if(t[0]=(0,St.m9)(t[0]),t[0]instanceof Pc)return function(i,a,d,p,y){if(!p)throw new ke(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const x of mh(i))if(x.field.isKeyField())w.push(ri(a,p.key));else{const T=p.data.field(x.field);if(ip(T))throw new ke(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const L=x.field.canonicalString();throw new ke(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}w.push(T)}return new Tc(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ld(n.firestore);return function(a,d,p,y,w,x){const T=a.explicitOrderBy;if(w.length>T.length)throw new ke(de.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let V=0;V<w.length;V++){const z=w[V];if(T[V].field.isKeyField()){if("string"!=typeof z)throw new ke(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof z}`);if(!w_(a)&&-1!==z.indexOf("/"))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${z}' contains a slash.`);const re=a.path.child(Xt.fromString(z));if(!$e.isDocumentKey(re))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${re}' is not because it contains an odd number of segments.`);const Ce=new $e(re);L.push(ri(d,Ce))}else{const re=Xv(p,y,z);L.push(re)}}return new Tc(L,x)}(n._query,n.firestore._databaseId,i,e,t,r)}}function uy(n,e,t){if("string"==typeof(t=(0,St.m9)(t))){if(""===t)throw new ke(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w_(e)&&-1!==t.indexOf("/"))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!$e.isDocumentKey(r))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ri(n,new $e(r))}if(t instanceof Vn)return ri(n,t._key);throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function ib(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sb(n,e,t){if(!t.isEqual(e))throw new ke(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const A0={maxAttempts:5};class dy{convertValue(e,t="none"){switch(Ac(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return ys(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new iy(Ln(e.latitude),Ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=So(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);st(Qw(r));const i=new Dl(r.get(1),r.get(3)),a=new $e(r.popFirst(5));return i.isEqual(t)||qt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function hy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class I0 extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}class ob{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,t,r){this._verifyNotCommitted();const i=Vc(e,this._firestore),a=hy(i.converter,t,r),d=Nc(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Vc(e,this._firestore);let d;return d="string"==typeof(t=(0,St.m9)(t))||t instanceof Ll?_0(this._dataReader,"WriteBatch.update",a._key,t,r,i):Qv(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(d.toMutation(a._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vc(e,this._firestore);return this._mutations=this._mutations.concat(new Uu(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vc(n,e){if((n=(0,St.m9)(n)).firestore!==e)throw new ke(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hd extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function uA(n,e,t){n=zt(n,Vn);const r=zt(n.firestore,Rn),i=hy(n.converter,e,t);return Qh(r,[Nc(ld(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kn.none())])}function ab(n,e,t,...r){n=zt(n,Vn);const i=zt(n.firestore,Rn),a=ld(i);let d;return d="string"==typeof(e=(0,St.m9)(e))||e instanceof Ll?_0(a,"updateDoc",n._key,e,t,r):Qv(a,"updateDoc",n._key,e),Qh(i,[d.toMutation(n._key,kn.exists(!0))])}function M0(n,...e){var t,r,i;n=(0,St.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||ry(e[d])||(a=e[d],d++);const p={includeMetadataChanges:a.includeMetadataChanges};if(ry(e[d])){const T=e[d];e[d]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[d+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[d+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let y,w,x;if(n instanceof Vn)w=zt(n.firestore,Rn),x=Sl(n._key.path),y={next:T=>{e[d]&&e[d](fy(w,n,T))},error:e[d+1],complete:e[d+2]};else{const T=zt(n,si);w=zt(T.firestore,Rn),x=T._query;const L=new hd(w);y={next:V=>{e[d]&&e[d](new Ro(w,L,T,V))},error:e[d+1],complete:e[d+2]},eb(n._query)}return function(T,L,V,z){const re=new Km(z),Ce=new UE(L,re,V);return T.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return jm(yield zh(T),Ce)})),()=>{re.Tc(),T.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Op(yield zh(T),Ce)}))}}(Cr(w),x,p,y)}function Qh(n,e){return function(t,r){const i=new Hr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function GE(n,e,t){return Ev.apply(this,arguments)}(yield Jm(t),r,i)})),i.promise}(Cr(n),e)}function fy(n,e,t){const r=t.docs.get(e._key),i=new hd(n);return new Vl(n,i,e._key,r,new dd(t.hasPendingWrites,t.fromCache),e.converter)}class dA extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ld(e)}get(e){const t=Vc(e,this._firestore),r=new I0(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const a=i[0];if(a.isFoundDocument())return new Pc(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Pc(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=Vc(e,this._firestore),a=hy(i.converter,t,r),d=Nc(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const a=Vc(e,this._firestore);let d;return d="string"==typeof(t=(0,St.m9)(t))||t instanceof Ll?_0(this._dataReader,"Transaction.update",a._key,t,r,i):Qv(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,d),this}delete(e){const t=Vc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vc(e,this._firestore),r=new hd(this._firestore);return super.get(e).then(i=>new Vl(this._firestore,r,t._key,i._document,new dd(!1,!1),t.converter))}}function py(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fd(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function N0(){if(!function Dw(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ah=fo.SDK_VERSION,(0,fo._registerComponent)(new ua.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Rn(i,new _w(t.getProvider("auth-internal")),new hD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,fo.registerVersion)(Bg,"3.4.14",n),(0,fo.registerVersion)(Bg,"3.4.14","esm2017")}();class Xh{constructor(e){this._delegate=e}static fromBase64String(e){return N0(),new Xh(Na.fromBase64String(e))}static fromUint8Array(e){return fd(),new Xh(Na.fromUint8Array(e))}toBase64(){return N0(),this._delegate.toBase64()}toUint8Array(){return fd(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hp(n){return function YS(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class mA{enableIndexedDbPersistence(e,t){return function Wx(n,e){Qx(n=zt(n,Rn));const t=Cr(n),r=n._freezeSettings(),i=new Vv;return u0(t,i,new Lv(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Kx(n){Qx(n=zt(n,Rn));const e=Cr(n),t=n._freezeSettings(),r=new Vv;return u0(e,r,new Rx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Yx(n){if(n._initialized&&!n._terminated)throw new ke(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Io.V())return Promise.resolve();const i=r+"main";yield Io.delete(i)}),function(r){return t.apply(this,arguments)})(Rm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Dl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&El("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function qv(n,e,t,r={}){var i;const a=(n=zt(n,Vp))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&El("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=Yr.MOCK_USER;else{d=(0,St.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new ke(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Yr(y)}n._authCredentials=new cD(new mw(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function GS(n){return function Nx(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield JE(n),t=yield e0(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.lu.delete(0),Ip(i)}(t)}))}(Cr(n=zt(n,Rn)))}(this._delegate)}disableNetwork(){return function h0(n){return function Px(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield JE(n),t=yield e0(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Ke(i);a.lu.add(0),yield Fa(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Cr(n=zt(n,Rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,o0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function d0(n){return function(e){const t=new Hr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function xx(n,e){return Sv.apply(this,arguments)}(yield Jm(e),t)})),t.promise}(Cr(n=zt(n,Rn)))}(this._delegate)}onSnapshotsInSync(e){return function lb(n,e){return function r0(n,e){const t=new Km(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield zh(n),i=t,Ke(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield zh(n),i=t,void Ke(r).Tu.delete(i);var r,i}))}}(Cr(n=zt(n,Rn)),ry(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pd(this,c0(this._delegate,e))}catch(t){throw mi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Js(this,Wv(this._delegate,e))}catch(t){throw mi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mi(this,function jx(n,e){if(n=zt(n,Vp),zv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new si(n,null,(t=e,new Il(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw mi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hA(n,e,t){n=zt(n,Rn);const r=Object.assign(Object.assign({},A0),t);return function(i){if(i.maxAttempts<1)throw new ke(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function s0(n,e,t){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const i=yield(a=n,Xm(a).then(d=>d.datastore));var a;new XE(n.asyncQueue,i,t,e,r).run()})),r.promise}(Cr(n),i=>e(new dA(n,i)),r)}(this._delegate,t=>e(new P0(this,t)))}batch(){return Cr(this._delegate),new db(new ob(this._delegate,e=>Qh(this._delegate,e)))}loadBundle(e){return function Zx(n,e){const t=Cr(n=zt(n,Rn)),r=new Gx;return function Bx(n,e,t,r){const i=function(a,d){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return ad(y,w);if(y instanceof ArrayBuffer)return ad(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new QE(y,d);var y}(t,Yi(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function kx(n,e,t){const r=Ke(n);var i;(i=(0,ye.Z)(function*(a,d,p){try{const y=yield d.getMetadata();if(yield function(L,V){const z=Ke(L),re=Xr(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ce=>z.Ds.getBundleMetadata(Ce,V.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(re)>=0)}(a.localStore,y))return yield d.close(),p._completeWith({taskState:"Success",documentsLoaded:(L=y).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);p._updateProgress(wv(y));const w=new jE(y,a.localStore,d.wt);let x=yield d.fc();for(;x;){const L=yield w.Nu(x);L&&p._updateProgress(L),x=yield d.fc()}const T=yield w.complete();return yield Pl(a,T.Ou,void 0),yield function(L,V){const z=Ke(L);return z.persistence.runTransaction("Save bundle","readwrite",re=>z.Ds.saveBundleMetadata(re,V))}(a.localStore,y),p._completeWith(T.progress),Promise.resolve(T.Mu)}catch(y){return El("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var L}),function(a,d,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Jm(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zS(n,e){return function Ux(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield $h(n),e)}))}(Cr(n=zt(n,Rn)),e).then(t=>t?new si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Mi(this,t):null)}}class gy extends dy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xh(new Na(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Js.forKey(t,this.firestore,null)}}class P0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gy(e)}get(e){const t=Uc(e);return this._delegate.get(t).then(r=>new Gp(this._firestore,new Vl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Uc(e);return r?(py("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Uc(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Uc(e);return this._delegate.delete(t),this}}class db{constructor(e){this._delegate=e}set(e,t,r){const i=Uc(e);return r?(py("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Uc(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Uc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Lc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Bc(e,new gy(e),t),i.set(t,a)),a}}Bc.INSTANCES=new WeakMap;class Js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gy(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Js(t,new Vn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Js(t,new Vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pd(this.firestore,c0(this._delegate,e))}catch(t){throw mi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof Vn&&Kv(this._delegate,e)}set(e,t){t=py("DocumentReference.set",t);try{return t?uA(this._delegate,e,t):uA(this._delegate,e)}catch(r){throw mi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ab(this._delegate,e):ab(this._delegate,e,t,...r)}catch(i){throw mi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function T0(n){return Qh(zt(n.firestore,Rn),[new Uu(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=hb(e),r=L0(e,i=>new Gp(this.firestore,new Vl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return M0(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Ti(n){n=zt(n,Vn);const e=zt(n.firestore,Rn),t=Cr(e),r=new hd(e);return function Lx(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,d){try{const p=yield function(y,w){const x=Ke(y);return x.persistence.runTransaction("read document","readonly",T=>x.localDocuments.getDocument(T,w))}(i,a);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new ke(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=nd(p,`Failed to get document '${a} from cache`);d.reject(y)}}),function(i,a,d){return r.apply(this,arguments)})(yield $h(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vl(e,r,n._key,i,new dd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Zh(n){n=zt(n,Vn);const e=zt(n.firestore,Rn);return t0(Cr(e),n._key,{source:"server"}).then(t=>fy(e,n,t))}(this._delegate):function S0(n){n=zt(n,Vn);const e=zt(n.firestore,Rn);return t0(Cr(e),n._key).then(t=>fy(e,n,t))}(this._delegate),t.then(r=>new Gp(this.firestore,new Vl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Js(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}function mi(n,e,t){return n.message=n.message.replace(e,t),n}function hb(n){for(const e of n)if("object"==typeof e&&!Hp(e))return e;return{}}function L0(n,e){var t,r;let i;return i=Hp(n[0])?n[0]:Hp(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Gp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Js(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return E0(this._delegate,e._delegate)}}class Jh extends Gp{data(e){const t=this._delegate.data(e);return function Jf(n,e){n||nt()}(void 0!==t),t}}class Mi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gy(e)}where(e,t,r){try{return new Mi(this.firestore,Pa(this._delegate,function rA(n,e,t){const r=e,i=ay("where",n);return new C0(i,r,t)}(e,t,r)))}catch(i){throw mi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mi(this.firestore,Pa(this._delegate,function WS(n,e="asc"){const t=e,r=ay("orderBy",n);return new iA(r,t)}(e,t)))}catch(r){throw mi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mi(this.firestore,Pa(this._delegate,function tb(n){return ty("limit",n),new ly("limit",n,"F")}(e)))}catch(t){throw mi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Mi(this.firestore,Pa(this._delegate,function D0(n){return ty("limitToLast",n),new ly("limitToLast",n,"L")}(e)))}catch(t){throw mi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Mi(this.firestore,Pa(this._delegate,function nb(...n){return new cy("startAt",n,!0)}(...e)))}catch(t){throw mi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Mi(this.firestore,Pa(this._delegate,function sA(...n){return new cy("startAfter",n,!1)}(...e)))}catch(t){throw mi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Mi(this.firestore,Pa(this._delegate,function oA(...n){return new x0("endBefore",n,!1)}(...e)))}catch(t){throw mi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Mi(this.firestore,Pa(this._delegate,function aA(...n){return new x0("endAt",n,!0)}(...e)))}catch(t){throw mi(t,"endAt()","Query.endAt()")}}isEqual(e){return ny(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function cA(n){n=zt(n,si);const e=zt(n.firestore,Rn),t=Cr(e),r=new hd(e);return function Vx(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,d){try{const p=yield Y_(i,a,!0),y=new HE(a,p.ji),w=y.Ku(p.documents),x=y.applyChanges(w,!1);d.resolve(x.snapshot)}catch(p){const y=nd(p,`Failed to execute query '${a} against cache`);d.reject(y)}}),function(i,a,d){return r.apply(this,arguments)})(yield $h(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ro(e,r,n,i))}(this._delegate):"server"===e?.source?function KS(n){n=zt(n,si);const e=zt(n.firestore,Rn),t=Cr(e),r=new hd(e);return n0(t,n._query,{source:"server"}).then(i=>new Ro(e,r,n,i))}(this._delegate):function lA(n){n=zt(n,si);const e=zt(n.firestore,Rn),t=Cr(e),r=new hd(e);return eb(n._query),n0(t,n._query).then(i=>new Ro(e,r,n,i))}(this._delegate),t.then(r=>new my(this.firestore,new Ro(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=hb(e),r=L0(e,i=>new my(this.firestore,new Ro(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return M0(this._delegate,t,r)}withConverter(e){return new Mi(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}class V0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class my{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new V0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jh(this._firestore,r))})}isEqual(e){return E0(this._delegate,e._delegate)}}class pd extends Mi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Js(this.firestore,e):null}doc(e){try{return new Js(this.firestore,void 0===e?Wv(this._delegate):Wv(this._delegate,e))}catch(t){throw mi(t,"doc()","CollectionReference.doc()")}}add(e){return function Up(n,e){const t=zt(n.firestore,Rn),r=Wv(n),i=hy(n.converter,e);return Qh(t,[Nc(ld(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Js(this.firestore,t))}isEqual(e){return Kv(this._delegate,e._delegate)}withConverter(e){return new pd(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}function Uc(n){return zt(n,Vn)}class fb{constructor(...e){this._delegate=new Ll(...e)}static documentId(){return new fb(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof Ll&&this._delegate._internalPath.isEqual(e._internalPath)}}class gd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fA(){return new oy("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gd(e)}static delete(){const e=function jp(){return new Wh("deleteField")}();return e._methodName="FieldValue.delete",new gd(e)}static arrayUnion(...e){const t=function cb(...n){return new g0("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gd(t)}static arrayRemove(...e){const t=function k0(...n){return new m0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gd(t)}static increment(e){const t=function R0(n){return new y0("increment",n)}(e);return t._methodName="FieldValue.increment",new gd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZS={Firestore:yA,GeoPoint:iy,Timestamp:rr,Blob:Xh,Transaction:P0,WriteBatch:db,DocumentReference:Js,DocumentSnapshot:Gp,Query:Mi,QueryDocumentSnapshot:Jh,QuerySnapshot:my,CollectionReference:pd,FieldPath:fb,FieldValue:gd,setLogLevel:function _A(n){!function lD(n){wc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function QS(n){(function B0(n,e){n.INTERNAL.registerComponent(new ua.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZS)))})(n,(e,t)=>new yA(e,t,new mA)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(tc.Z);var en=F(7579),ef=F(6451),pb=F(5363),md=F(8421);function Oo(n,e){return(0,In.e)((t,r)=>{let i=null,a=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe((0,gn.x)(r,y=>{i?.unsubscribe();let w=0;const x=a++;(0,md.Xf)(n(y,x)).subscribe(i=(0,gn.x)(r,T=>r.next(e?e(y,T,x,w++):T),()=>{i=null,p()}))},()=>{d=!0,p()}))})}var XS=F(6063);class JS extends en.x{constructor(e=1/0,t=1/0,r=XS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:d}=this;t||(r.push(e),!i&&r.push(a.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let d=0;d<a.length&&!e.closed;d+=r?1:2)e.next(a[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const d=t.now();let p=0;for(let y=1;y<r.length&&r[y]<=d;y+=2)p=y;p&&r.splice(0,p+1)}}}var $p=F(3099);function vA(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,$p.B)({connector:()=>new JS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const zp=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var gb=F(515);function ki(n){return n<=0?()=>gb.E:(0,In.e)((e,t)=>{let r=0;e.subscribe((0,gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function eT(n){return(0,In.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mb(n=j0){return(0,In.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function j0(){return new zp}var Ds=F(576);function wA(n,e){return(0,Ds.m)(e)?Oo(()=>n,e):Oo(()=>n)}var yb=F(9468);F(5867);const $0=new Map,xs={activated:!1,tokenObservers:[]},AA={initialized:!1,enabled:!1};function Nr(n){return $0.get(n)||xs}function Fo(n,e){$0.set(n,e)}function vy(){return AA}class SA{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new St.BH,yield function K0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new St.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oi=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vb(n){if(!Nr(n).activated)throw oi.create("use-before-activation",{appName:n.name})}function bb(n,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,ye.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const V=yield d.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const p={method:"POST",body:JSON.stringify(e),headers:a};let y,w;try{y=yield fetch(n,p)}catch(V){throw oi.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==y.status)throw oi.create("fetch-status-error",{httpStatus:y.status});try{w=yield y.json()}catch(V){throw oi.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const x=w.ttl.match(/^([\d.]+)(s)$/);if(!x||!x[2]||isNaN(Number(x[1])))throw oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const T=1e3*Number(x[1]),L=Date.now();return{token:w.token,expireTimeMillis:L+T,issuedAtTimeMillis:L}}),Y0.apply(this,arguments)}function kA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const by="firebase-app-check-store";let wy=null;function Eb(){return wy||(wy=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(oi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(by,{keyPath:"compositeKey"})}}catch(r){e(oi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),wy)}function Ey(){return Ey=(0,ye.Z)(function*(n,e){const r=(yield Eb()).transaction(by,"readwrite"),a=r.objectStore(by).put({compositeKey:n,value:e});return new Promise((d,p)=>{a.onsuccess=y=>{d()},r.onerror=y=>{var w;p(oi.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})}),Ey.apply(this,arguments)}const nf=new Br.Yd("@firebase/app-check");function xb(n,e){return(0,St.hl)()?function Cb(n,e){return function J0(n,e){return Ey.apply(this,arguments)}(function Kp(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{nf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NA(){return vy().enabled}function PA(){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,ye.Z)(function*(){const n=vy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Dy.apply(this,arguments)}const VA={error:"UNKNOWN_ERROR"};function BA(n){return St.US.encodeString(JSON.stringify(n),!1)}function Ib(n){return eC.apply(this,arguments)}function eC(){return eC=(0,ye.Z)(function*(n,e=!1){const t=n.app;vb(t);const r=Nr(t);let a,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&xy(y)&&(i=y)}if(!e&&i&&xy(i))return{token:i.token};let p,d=!1;if(NA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bb(kA(t,yield PA()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const y=yield r.exchangeTokenPromise;return yield xb(t,y),Fo(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),d=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?nf.warn(y.message):nf.error(y),a=y}return i?(p={token:i.token},Fo(t,Object.assign(Object.assign({},r),{token:i})),yield xb(t,i)):p=HA(a),d&&Yp(t,p),p}),eC.apply(this,arguments)}function nC(n,e){const t=Nr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Fo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function UA(n){const{app:e}=n,t=Nr(e);let r=t.tokenRefresher;r||(r=function jA(n){const{app:e}=n;return new SA((0,ye.Z)(function*(){let r;if(r=Nr(e).token?yield Ib(n,!0):yield Ib(n),r.error)throw r.error}),()=>!0,()=>{const t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Fo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Yp(n,e){const t=Nr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function xy(n){return n.expireTimeMillis-Date.now()>0}function HA(n){return{token:BA(VA),error:n}}class rC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Nr(this.app);for(const t of e)nC(this.app,t.next);return Promise.resolve()}}const dC="app-check-internal";!function QA(){(0,fo._registerComponent)(new ua.wA("app-check",n=>function yd(n,e){return new rC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(dC).initialize()})),(0,fo._registerComponent)(new ua.wA(dC,n=>function iC(n){return{getToken:e=>Ib(n,e),addTokenListener:e=>function tC(n,e,t,r){const{app:i}=n,a=Nr(i),d={next:t,error:r,type:e};if(Fo(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&xy(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),UA(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>UA(n))}(n,"INTERNAL",e),removeTokenListener:e=>nC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,fo.registerVersion)("@firebase/app-check","0.5.12")}();class Lb{constructor(){return(0,Nn.vb)("app-check")}}typeof window<"u"&&window;var o=F(127);const u=new c.OlP("angularfire2.auth.use-emulator"),h=new c.OlP("angularfire2.auth.settings"),g=new c.OlP("angularfire2.auth.tenant-id"),v=new c.OlP("angularfire2.auth.langugage-code"),E=new c.OlP("angularfire2.auth.use-device-language"),C=new c.OlP("angularfire.auth.persistence"),I=(n,e,t,r,i,a,d,p)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),d)for(const[w,x]of Object.entries(d))y.settings[w]=x;return p&&y.setPersistence(p),y},[t,r,i,a,d,p]);let k=(()=>{class n{constructor(t,r,i,a,d,p,y,w,x,T,L,V){const z=new en.x,re=An(void 0).pipe((0,pb.Q)(d.outsideAngular),Oo(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1451)))),(0,Ot.U)(()=>(0,Vr.on)(t,a,r)),(0,Ot.U)(Ce=>I(Ce,a,p,w,x,T,y,L)),vA({bufferSize:1,refCount:!1}));if(Jn(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=An(null);else{re.pipe(function bA(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rn((i,a)=>n(i,a,r)):ca.y,ki(1),t?eT(e):mb(()=>new zp))}()).subscribe();const Pe=re.pipe(Oo(ot=>ot.getRedirectResult().then(It=>It,()=>null)),Nn.iC,vA({bufferSize:1,refCount:!1})),rt=re.pipe(Oo(ot=>new ln.y(It=>({unsubscribe:a.runOutsideAngular(()=>ot.onAuthStateChanged(kt=>It.next(kt),kt=>It.error(kt),()=>It.complete()))})))),_t=re.pipe(Oo(ot=>new ln.y(It=>({unsubscribe:a.runOutsideAngular(()=>ot.onIdTokenChanged(kt=>It.next(kt),kt=>It.error(kt),()=>It.complete()))}))));this.authState=Pe.pipe(wA(rt),(0,yb.R)(d.outsideAngular),(0,pb.Q)(d.insideAngular)),this.user=Pe.pipe(wA(_t),(0,yb.R)(d.outsideAngular),(0,pb.Q)(d.insideAngular)),this.idToken=this.user.pipe(Oo(ot=>ot?(0,Qt.D)(ot.getIdToken()):An(null))),this.idTokenResult=this.user.pipe(Oo(ot=>ot?(0,Qt.D)(ot.getIdTokenResult()):An(null))),this.credential=(0,ef.T)(Pe,z,this.authState.pipe(rn(ot=>!ot))).pipe((0,Ot.U)(ot=>ot?.user?ot:null),(0,yb.R)(d.outsideAngular),(0,pb.Q)(d.insideAngular))}return(0,Vr.pX)(this,re,a,{spy:{apply:(Ce,Pe,rt)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&rt.then(_t=>z.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vr.Dh),c.LFG(Vr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Nn.HU),c.LFG(u,8),c.LFG(h,8),c.LFG(g,8),c.LFG(v,8),c.LFG(E,8),c.LFG(C,8),c.LFG(Lb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ee(n,e){return function q(n,e=us.z){return new ln.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Re(n,e){return ee(n,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function ze(n,e){return Re(n,e).pipe(co(void 0),al(),(0,Ot.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const y=i.find(x=>x.doc.ref.isEqual(d.ref)),w=t?.payload.docs.find(x=>x.ref.isEqual(d.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(d.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),a}))}function et(n,e,t){return ze(n,t).pipe(ds((r,i)=>function Dt(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function yt(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Me(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Me(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Me(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),ho(),(0,Ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Me(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Gt(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class On{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ze(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(co(void 0),al(),rn(([r,i])=>i.length>0||!r),(0,Ot.U)(([r,i])=>i),Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ds((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gt(e);return et(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return Re(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Nn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Nn.iC)}add(e){return this.ref.add(e)}doc(e){return new jc(this.ref.doc(e),this.afs)}}class jc{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Ty(r,t);return new On(i,a,this.afs)}snapshotChanges(){return function be(n,e){return ee(n,e).pipe(co(void 0),al(),(0,Ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(Nn.iC)}}class Bb{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ze(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),rn(t=>t.length>0),Nn.iC):ze(this.query,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ds((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gt(e);return et(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(e={}){return Re(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Nn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Nn.iC)}}const Iy=new c.OlP("angularfire2.enableFirestorePersistence"),Sy=new c.OlP("angularfire2.firestore.persistenceSettings"),Ub=new c.OlP("angularfire2.firestore.settings"),jb=new c.OlP("angularfire2.firestore.use-emulator");function Ty(n,e=(t=>t)){return{query:e(n),ref:n}}let My=(()=>{class n{constructor(t,r,i,a,d,p,y,w,x,T,L,V,z,re,Ce,Pe,rt){this.schedulers=y;const _t=(0,Vr.on)(t,p,r),ot=x;T&&I(_t,p,L,z,re,Ce,V,Pe),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const It=p.runOutsideAngular(()=>_t.firestore());if(a&&It.settings(a),ot&&It.useEmulator(...ot),i&&!Jn(d)){const kt=()=>{try{return(0,Qt.D)(It.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(tn){return typeof console<"u"&&console.warn(tn),An(!1)}};return[It,p.runOutsideAngular(kt)]}return[It,An(!1)]},[a,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:d}=Ty(i,r),p=this.schedulers.ngZone.run(()=>a);return new On(p,d,this)}collectionGroup(t,r){const i=r||(d=>d),a=this.firestore.collectionGroup(t);return new Bb(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new jc(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vr.Dh),c.LFG(Vr.xv,8),c.LFG(Iy,8),c.LFG(Ub,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Nn.HU),c.LFG(Sy,8),c.LFG(jb,8),c.LFG(k,8),c.LFG(u,8),c.LFG(h,8),c.LFG(g,8),c.LFG(v,8),c.LFG(E,8),c.LFG(C,8),c.LFG(Lb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Hb=(()=>{class n{constructor(){o.Z.registerVersion("angularfire",Nn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Iy,useValue:!0},{provide:Sy,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[My]}),n})();function sr(n){return null!=n&&"false"!=`${n}`}function Gb(n,e=0){return function OO(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function fC(n){return Array.isArray(n)?n:[n]}function Jr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Zp(n){return n instanceof c.SBq?n.nativeElement:n}var pC=F(5577),FO=F(1144);const{isArray:NO}=Array;function JA(n){return(0,Ot.U)(e=>function PO(n,e){return NO(e)?n(...e):n(e)}(n,e))}const LO=["addListener","removeListener"],VO=["addEventListener","removeEventListener"],BO=["on","off"];function $b(n,e,t,r){if((0,Ds.m)(t)&&(r=t,t=void 0),r)return $b(n,e,t).pipe(JA(r));const[i,a]=function HO(n){return(0,Ds.m)(n.addEventListener)&&(0,Ds.m)(n.removeEventListener)}(n)?VO.map(d=>p=>n[d](e,p,t)):function UO(n){return(0,Ds.m)(n.addListener)&&(0,Ds.m)(n.removeListener)}(n)?LO.map(mT(n,e)):function jO(n){return(0,Ds.m)(n.on)&&(0,Ds.m)(n.off)}(n)?BO.map(mT(n,e)):[];if(!i&&(0,FO.z)(n))return(0,pC.z)(d=>$b(d,e,t))((0,md.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new ln.y(d=>{const p=(...y)=>d.next(1<y.length?y:y[0]);return i(p),()=>a(p)})}function mT(n,e){return t=>r=>n[t](e,r)}var yT=F(4408),Hc=F(727);const zb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=zb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new Hc.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=zb;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=zb;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var _T=F(7565);new class $O extends _T.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class GO extends yT.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=zb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(zb.cancelAnimationFrame(t),e._scheduled=void 0)}});let eI,qO=1;const gC={};function vT(n){return n in gC&&(delete gC[n],!0)}const WO={setImmediate(n){const e=qO++;return gC[e]=!0,eI||(eI=Promise.resolve()),eI.then(()=>vT(e)&&n()),e},clearImmediate(n){vT(n)}},{setImmediate:KO,clearImmediate:YO}=WO,mC={setImmediate(...n){const{delegate:e}=mC;return(e?.setImmediate||KO)(...n)},clearImmediate(n){const{delegate:e}=mC;return(e?.clearImmediate||YO)(n)},delegate:void 0};new class QO extends _T.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class ZO extends yT.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=mC.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(mC.clearImmediate(t),e._scheduled=void 0)}});var eF=F(3532);function bT(n=0,e,t=us.P){let r=-1;return null!=e&&((0,eF.K)(e)?t=e:r=e),new ln.y(i=>{let a=function tF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},a)})}function wT(n,e=us.z){return function JO(n){return(0,In.e)((e,t)=>{let r=!1,i=null,a=null,d=!1;const p=()=>{if(a?.unsubscribe(),a=null,r){r=!1;const w=i;i=null,t.next(w)}d&&t.complete()},y=()=>{a=null,d&&t.complete()};e.subscribe((0,gn.x)(t,w=>{r=!0,i=w,a||(0,md.Xf)(n(w)).subscribe(a=(0,gn.x)(t,p,y))},()=>{d=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>bT(n,e))}let tI;try{tI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{tI=!1}let qb,Qp,rI,Po=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?wi(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!tI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nI(n){return function nF(){if(null==qb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>qb=!0}))}finally{qb=qb||!1}return qb}()?n:!!n.capture}function rF(){if(null==Qp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Qp=!1,Qp;if("scrollBehavior"in document.documentElement.style)Qp=!0;else{const n=Element.prototype.scrollTo;Qp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Qp}function CT(n){if(function iF(){if(null==rI){const n=typeof document<"u"?document.head:null;rI=!(!n||!n.createShadowRoot&&!n.attachShadow)}return rI}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Xp(n){return n.composedPath?n.composedPath()[0]:n.target}function iI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const sF=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function oF(){return(0,c.f3M)(ne)}}),aF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let sI=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function lF(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?aF.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sF,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ry=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),uF=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new en.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new ln.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(wT(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):An()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(rn(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Zp(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$b(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Po),c.LFG(ne,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oI=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new en.x,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(wT(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Po),c.LFG(c.R0b),c.LFG(ne,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),xT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ry,DT,Ry,DT]}),n})();class aI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lI extends aI{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class cI extends aI{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class hF extends aI{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class uI{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof lI?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof cI?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof hF?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class fF extends uI{constructor(e,t,r,i,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=d=>{const p=d.element,y=this._document.createComment("dom-portal");p.parentNode.insertBefore(y,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(p,y)})},this._document=a}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||c.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let dI=(()=>{class n extends uI{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=a=>{const d=a.element,p=this._document.createComment("dom-portal");a.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=a,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(a,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(ne))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),hI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var fI=F(5032);function Gc(n){return(0,In.e)((e,t)=>{(0,md.Xf)(n).subscribe((0,gn.x)(t,()=>t.complete(),fI.Z)),!t.closed&&e.subscribe(t)})}const AT=rF();class pF{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Jr(-this._previousScrollPosition.left),e.style.top=Jr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,a=r.scrollBehavior||"",d=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),AT&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),AT&&(r.scrollBehavior=a,i.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class gF{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class IT{enable(){}disable(){}attach(){}}function pI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function ST(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class mF{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();pI(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yF=(()=>{class n{constructor(t,r,i,a){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new IT,this.close=d=>new gF(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new pF(this._viewportRuler,this._document),this.reposition=d=>new mF(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(uF),c.LFG(oI),c.LFG(c.R0b),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class TT{constructor(e){if(this.scrollStrategy=new IT,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class _F{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let MT=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vF=(()=>{class n extends MT{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const a=this._attachedOverlays;for(let d=a.length-1;d>-1;d--)if(a[d]._keydownEvents.observers.length>0){const p=a[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>p.next(i)):p.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bF=(()=>{class n extends MT{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Xp(a)},this._clickListener=a=>{const d=Xp(a),p="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const y=this._attachedOverlays.slice();for(let w=y.length-1;w>-1;w--){const x=y[w];if(x._outsidePointerEvents.observers.length<1||!x.hasAttached())continue;if(x.overlayElement.contains(d)||x.overlayElement.contains(p))break;const T=x._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>T.next(a)):T.next(a)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne),c.LFG(Po),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kT=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||iI()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].remove()}const r=this._document.createElement("div");r.classList.add(t),iI()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne),c.LFG(Po))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wF{constructor(e,t,r,i,a,d,p,y,w,x=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=d,this._document=p,this._location=y,this._outsideClickDispatcher=w,this._animationsDisabled=x,this._backdropElement=null,this._backdropClick=new en.x,this._attachments=new en.x,this._detachments=new en.x,this._locationChanges=Hc.w0.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._backdropTransitionendHandler=T=>{this._disposeBackdrop(T.target)},this._keydownEvents=new en.x,this._outsidePointerEvents=new en.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ki(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Jr(this._config.width),e.height=Jr(this._config.height),e.minWidth=Jr(this._config.minWidth),e.minHeight=Jr(this._config.minHeight),e.maxWidth=Jr(this._config.maxWidth),e.maxHeight=Jr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=fC(t||[]).filter(a=>!!a);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Gc((0,ef.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const RT="cdk-overlay-connected-position-bounding-box",EF=/([A-Za-z%]+)$/;class CF{constructor(e,t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new en.x,this._resizeSubscription=Hc.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(RT),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,a=[];let d;for(let p of this._preferredPositions){let y=this._getOriginPoint(e,i,p),w=this._getOverlayPoint(y,t,p),x=this._getOverlayFit(w,t,r,p);if(x.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(p,y);this._canFitWithFlexibleDimensions(x,w,r)?a.push({position:p,origin:y,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(y,p)}):(!d||d.overlayFit.visibleArea<x.visibleArea)&&(d={overlayFit:x,overlayPoint:w,originPoint:y,position:p,overlayRect:t})}if(a.length){let p=null,y=-1;for(const w of a){const x=w.boundingBoxRect.width*w.boundingBoxRect.height*(w.position.weight||1);x>y&&(y=x,p=w)}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Jp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(RT),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,a;if("center"==r.originX)i=e.left+e.width/2;else{const d=this._isRtl()?e.right:e.left,p=this._isRtl()?e.left:e.right;i="start"==r.originX?d:p}return t.left<0&&(i-=t.left),a="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(a-=t.top),{x:i,y:a}}_getOverlayPoint(e,t,r){let i,a;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+a}}_getOverlayFit(e,t,r,i){const a=FT(t);let{x:d,y:p}=e,y=this._getOffset(i,"x"),w=this._getOffset(i,"y");y&&(d+=y),w&&(p+=w);let L=0-p,V=p+a.height-r.height,z=this._subtractOverflows(a.width,0-d,d+a.width-r.width),re=this._subtractOverflows(a.height,L,V),Ce=z*re;return{visibleArea:Ce,isCompletelyWithinViewport:a.width*a.height===Ce,fitsInViewportVertically:re===a.height,fitsInViewportHorizontally:z==a.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,a=r.right-t.x,d=OT(this._overlayRef.getConfig().minHeight),p=OT(this._overlayRef.getConfig().minWidth),w=e.fitsInViewportHorizontally||null!=p&&p<=a;return(e.fitsInViewportVertically||null!=d&&d<=i)&&w}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=FT(t),a=this._viewportRect,d=Math.max(e.x+i.width-a.width,0),p=Math.max(e.y+i.height-a.height,0),y=Math.max(a.top-r.top-e.y,0),w=Math.max(a.left-r.left-e.x,0);let x=0,T=0;return x=i.width<=a.width?w||-d:e.x<this._viewportMargin?a.left-r.left-e.x:0,T=i.height<=a.height?y||-p:e.y<this._viewportMargin?a.top-r.top-e.y:0,this._previousPushAmount={x,y:T},{x:e.x+x,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new _F(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let a,d,p,x,T,L;if("top"===t.overlayY)d=e.y,a=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)p=r.height-e.y+2*this._viewportMargin,a=r.height-p+this._viewportMargin;else{const V=Math.min(r.bottom-e.y+r.top,e.y),z=this._lastBoundingBoxSize.height;a=2*V,d=e.y-V,a>z&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.y-z/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)L=r.width-e.x+this._viewportMargin,x=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)T=e.x,x=r.right-e.x;else{const V=Math.min(r.right-e.x+r.left,e.x),z=this._lastBoundingBoxSize.width;x=2*V,T=e.x-V,x>z&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-z/2)}return{top:d,left:T,bottom:p,right:L,width:x,height:a}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;i.height=Jr(r.height),i.top=Jr(r.top),i.bottom=Jr(r.bottom),i.width=Jr(r.width),i.left=Jr(r.left),i.right=Jr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=Jr(a)),d&&(i.maxWidth=Jr(d))}this._lastBoundingBoxSize=r,Jp(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Jp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Jp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(i){const x=this._viewportRuler.getViewportScrollPosition();Jp(r,this._getExactOverlayY(t,e,x)),Jp(r,this._getExactOverlayX(t,e,x))}else r.position="static";let p="",y=this._getOffset(t,"x"),w=this._getOffset(t,"y");y&&(p+=`translateX(${y}px) `),w&&(p+=`translateY(${w}px)`),r.transform=p.trim(),d.maxHeight&&(i?r.maxHeight=Jr(d.maxHeight):a&&(r.maxHeight="")),d.maxWidth&&(i?r.maxWidth=Jr(d.maxWidth):a&&(r.maxWidth="")),Jp(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=Jr(a.y),i}_getExactOverlayX(e,t,r){let d,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),d=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===d?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=Jr(a.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ST(e,r),isOriginOutsideView:pI(e,r),isOverlayClipped:ST(t,r),isOverlayOutsideView:pI(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&fC(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Jp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function OT(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(EF);return t&&"px"!==t?null:parseFloat(e)}return n||null}function FT(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const NT="cdk-global-overlay-wrapper";class DF{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(NT),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:d,maxHeight:p}=r,y=!("100%"!==i&&"100vw"!==i||d&&"100%"!==d&&"100vw"!==d),w=!("100%"!==a&&"100vh"!==a||p&&"100%"!==p&&"100vh"!==p),x=this._xPosition,T=this._xOffset,L="rtl"===this._overlayRef.getConfig().direction;let V="",z="",re="";y?re="flex-start":"center"===x?(re="center",L?z=T:V=T):L?"left"===x||"end"===x?(re="flex-end",V=T):("right"===x||"start"===x)&&(re="flex-start",z=T):"left"===x||"start"===x?(re="flex-start",V=T):("right"===x||"end"===x)&&(re="flex-end",z=T),e.position=this._cssPosition,e.marginLeft=y?"0":V,e.marginTop=w?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=y?"0":z,t.justifyContent=re,t.alignItems=w?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(NT),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let xF=(()=>{class n{constructor(t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a}global(){return new DF}flexibleConnectedTo(t){return new CF(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(oI),c.LFG(ne),c.LFG(Po),c.LFG(kT))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AF=0,_C=(()=>{class n{constructor(t,r,i,a,d,p,y,w,x,T,L,V){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=d,this._injector=p,this._ngZone=y,this._document=w,this._directionality=x,this._location=T,this._outsideClickDispatcher=L,this._animationsModuleType=V}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),a=this._createPortalOutlet(i),d=new TT(t);return d.direction=d.direction||this._directionality.value,new wF(a,r,i,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+AF++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new fF(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yF),c.LFG(kT),c.LFG(c._Vd),c.LFG(xF),c.LFG(vF),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(ne),c.LFG(sI),c.LFG(De),c.LFG(bF),c.LFG(c.QbO,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const TF={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[_C],useFactory:function SF(n){return()=>n.scrollStrategies.reposition()}};let MF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[_C,TF],imports:[Ry,hI,xT,xT]}),n})();class PT extends en.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function LT(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Oy=F(8505);function gI(n,e=us.z){return(0,In.e)((t,r)=>{let i=null,a=null,d=null;const p=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function y(){const w=d+n,x=e.now();if(x<w)return i=this.schedule(void 0,w-x),void r.add(i);p()}t.subscribe((0,gn.x)(r,w=>{a=w,d=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}function VT(n){return rn((e,t)=>n<=t)}let BT=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[BT]}),n})();const{isArray:QF}=Array,{getPrototypeOf:XF,prototype:JF,keys:eN}=Object;function jT(n){if(1===n.length){const e=n[0];if(QF(e))return{args:e,keys:null};if(function tN(n){return n&&"object"==typeof n&&XF(n)===JF}(e)){const t=eN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function HT(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var nN=F(9672);function GT(n,e,t){n?(0,nN.f)(t,n,e):e()}const $T=new Set;let Fy,sN=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):aN}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function oN(n){if(!$T.has(n))try{Fy||(Fy=document.createElement("style"),Fy.setAttribute("type","text/css"),document.head.appendChild(Fy)),Fy.sheet&&(Fy.sheet.insertRule(`@media ${n} {body{ }}`,0),$T.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Po))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aN(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let mI=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new en.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return zT(fC(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let a=function rN(...n){const e=(0,fi.yG)(n),t=(0,fi.jO)(n),{args:r,keys:i}=jT(n);if(0===r.length)return(0,Qt.D)([],e);const a=new ln.y(function iN(n,e,t=ca.y){return r=>{GT(e,()=>{const{length:i}=n,a=new Array(i);let d=i,p=i;for(let y=0;y<i;y++)GT(e,()=>{const w=(0,Qt.D)(n[y],e);let x=!1;w.subscribe((0,gn.x)(r,T=>{a[y]=T,x||(x=!0,p--),p||r.next(t(a.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>HT(i,d):ca.y));return t?a.pipe(JA(t)):a}(zT(fC(t)).map(d=>this._registerQuery(d).observable));return a=ol(a.pipe(ki(1)),a.pipe(VT(1),gI(0))),a.pipe((0,Ot.U)(d=>{const p={matches:!1,breakpoints:{}};return d.forEach(({matches:y,query:w})=>{p.matches=p.matches||y,p.breakpoints[w]=y}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),a={observable:new ln.y(d=>{const p=y=>this._zone.run(()=>d.next(y));return r.addListener(p),()=>{r.removeListener(p)}}).pipe(co(r),(0,Ot.U)(({matches:d})=>({query:t,matches:d})),Gc(this._destroySubject)),mql:r};return this._queries.set(t,a),a}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(sN),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zT(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class hN extends class dN{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new en.x,this._typeaheadSubscription=Hc.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new en.x,this.change=new en.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Oy.b)(t=>this._pressedLetters.push(t)),gI(e),rn(()=>this._pressedLetters.length>0),(0,Ot.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const a=(this._activeItemIndex+i)%r.length,d=r[a];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!e[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||LT(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function YT(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function ZT(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const _N=new c.OlP("cdk-input-modality-detector-options"),vN={ignoreKeys:[18,17,224,91,16]},Ny=nI({passive:!0,capture:!0});let bN=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new PT(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(p=>p===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Xp(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(YT(d)?"keyboard":"mouse"),this._mostRecentTarget=Xp(d))},this._onTouchstart=d=>{ZT(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Xp(d))},this._options={...vN,...a},this.modalityDetected=this._modality.pipe(VT(1)),this.modalityChanged=this.modalityDetected.pipe(ho()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Ny),i.addEventListener("mousedown",this._onMousedown,Ny),i.addEventListener("touchstart",this._onTouchstart,Ny)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ny),document.removeEventListener("mousedown",this._onMousedown,Ny),document.removeEventListener("touchstart",this._onTouchstart,Ny))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Po),c.LFG(c.R0b),c.LFG(ne),c.LFG(_N,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wN=new c.OlP("liveAnnouncerElement",{providedIn:"root",factory:function EN(){return null}}),CN=new c.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let XT=(()=>{class n{constructor(t,r,i,a){this._ngZone=r,this._defaultOptions=a,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let a,d;return 1===r.length&&"number"==typeof r[0]?d=r[0]:[a,d]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=i&&i.politeness?i.politeness:"polite"),null==d&&i&&(d=i.duration),this._liveElement.setAttribute("aria-live",a),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(p=>this._currentResolve=p)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wN,8),c.LFG(c.R0b),c.LFG(ne),c.LFG(CN,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DN=new c.OlP("cdk-focus-monitor-default-options"),vC=nI({passive:!0,capture:!0});let yI=(()=>{class n{constructor(t,r,i,a,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new en.x,this._rootNodeFocusAndBlurListener=p=>{for(let w=Xp(p);w;w=w.parentElement)"focus"===p.type?this._onFocus(p,w):this._onBlur(p,w)},this._document=a,this._detectionMode=d?.detectionMode||0}monitor(t,r=!1){const i=Zp(t);if(!this._platform.isBrowser||1!==i.nodeType)return An(null);const a=CT(i)||this._getDocument(),d=this._elementInfo.get(i);if(d)return r&&(d.checkChildren=!0),d.subject;const p={checkChildren:r,subject:new en.x,rootNode:a};return this._elementInfo.set(i,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(t){const r=Zp(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=Zp(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([p,y])=>this._originChanged(p,r,y)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=Xp(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,vC),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,vC)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gc(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,vC),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,vC),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const a=t.labels;if(a)for(let d=0;d<a.length;d++)if(a[d].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Po),c.LFG(bN),c.LFG(ne,8),c.LFG(DN,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JT="cdk-high-contrast-black-on-white",eM="cdk-high-contrast-white-on-black",_I="cdk-high-contrast-active";let tM=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,c.f3M)(mI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_I,JT,eM),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(_I,JT):2===r&&t.add(_I,eM)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Po),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xN=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tM))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[UT]}),n})();const IN=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function AN(){return!0}});let $r=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!iI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tM),c.LFG(IN,8),c.LFG(ne))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ry,Ry]}),n})();function iM(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=sr(e)}}}function Wb(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function sM(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=sr(e)}}}function oM(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Gb(t):this.defaultTabIndex}}}class TN{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const aM={enterDuration:225,exitDuration:150},vI=nI({passive:!0}),lM=["mousedown","touchstart"],cM=["mouseup","mouseleave","touchend","touchcancel"];class kN{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Zp(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...aM,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const d=r.radius||function RN(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),p=e-i.left,y=t-i.top,w=a.enterDuration,x=document.createElement("div");x.classList.add("mat-ripple-element"),x.style.left=p-d+"px",x.style.top=y-d+"px",x.style.height=2*d+"px",x.style.width=2*d+"px",null!=r.color&&(x.style.backgroundColor=r.color),x.style.transitionDuration=`${w}ms`,this._containerElement.appendChild(x);const T=window.getComputedStyle(x),V=T.transitionDuration,z="none"===T.transitionProperty||"0s"===V||"0s, 0s"===V,re=new TN(this,x,r,z);x.style.transform="scale3d(1, 1, 1)",re.state=0,r.persistent||(this._mostRecentTransientRipple=re);let Ce=null;return!z&&(w||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Pe=()=>this._finishRippleTransition(re),rt=()=>this._destroyRipple(re);x.addEventListener("transitionend",Pe),x.addEventListener("transitioncancel",rt),Ce={onTransitionEnd:Pe,onTransitionCancel:rt}}),this._activeRipples.set(re,Ce),(z||!w)&&this._finishRippleTransition(re),re}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...aM,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Zp(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(lM))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(cM),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=YT(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ZT(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,vI)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(lM.forEach(e=>{this._triggerElement.removeEventListener(e,this,vI)}),this._pointerUpEventsRegistered&&cM.forEach(e=>{this._triggerElement.removeEventListener(e,this,vI)}))}}const ON=new c.OlP("mat-ripple-global-options");let bI=(()=>{class n{constructor(t,r,i,a,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new kN(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Po),c.Y36(ON,8),c.Y36(c.QbO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),uM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$r,$r]}),n})();const FN=["mat-button",""],NN=["*"],LN=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],VN=Wb(iM(sM(class{constructor(n){this._elementRef=n}})));let BN=(()=>{class n extends VN{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of LN)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(yI),c.Y36(c.QbO,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&c.Gf(bI,5),2&t){let i;c.iGM(i=c.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:FN,ngContentSelectors:NN,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1)(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[bI],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),dM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[uM,$r,$r]}),n})();class hM{}const _d="*";function wI(n,e){return{type:7,name:n,definitions:e,options:{}}}function bC(n,e=null){return{type:4,styles:e,timings:n}}function fM(n,e=null){return{type:2,steps:n,options:e}}function vd(n){return{type:6,styles:n,offset:null}}function Py(n,e,t){return{type:0,name:n,styles:e,options:t}}function wC(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function pM(n){Promise.resolve(null).then(n)}class Yb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class gM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?pM(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==a&&this._onFinish()}),d.onDestroy(()=>{++r==a&&this._onDestroy()}),d.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function jN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",2)(1,"button",3),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.action())}),c._uU(2),c.qZA()()}if(2&n){const t=c.oxw();c.xp6(2),c.Oqu(t.data.action)}}function HN(n,e){}const mM=new c.OlP("MatSnackBarData");class EC{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const GN=Math.pow(2,31)-1;class CI{constructor(e,t){this._overlayRef=t,this._afterDismissed=new en.x,this._afterOpened=new en.x,this._onAction=new en.x,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,GN))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let $N=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(CI),c.Y36(mM))},n.\u0275cmp=c.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"span",0),c._uU(1),c.qZA(),c.YNc(2,jN,3,1,"div",1)),2&t&&(c.xp6(1),c.Oqu(r.data.message),c.xp6(1),c.Q6J("ngIf",r.hasAction))},dependencies:[Sr,BN],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const zN={snackBarState:wI("state",[Py("void, hidden",vd({transform:"scale(0.8)",opacity:0})),Py("visible",vd({transform:"scale(1)",opacity:1})),wC("* => visible",bC("150ms cubic-bezier(0, 0, 0.2, 1)")),wC("* => void, * => hidden",bC("75ms cubic-bezier(0.4, 0.0, 1, 1)",vd({opacity:0})))])};let qN=(()=>{class n extends uI{constructor(t,r,i,a,d){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=a,this.snackBarConfig=d,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new en.x,this._onExit=new en.x,this._onEnter=new en.x,this._animationState="void",this.attachDomPortal=p=>{this._assertNotAttached();const y=this._portalOutlet.attachDomPortal(p);return this._afterPortalAttached(),y},this._live="assertive"!==d.politeness||d.announcementMessage?"off"===d.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(ki(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.R0b),c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(Po),c.Y36(EC))},n.\u0275dir=c.lG2({type:n,viewQuery:function(t,r){if(1&t&&c.Gf(dI,7),2&t){let i;c.iGM(i=c.CRH())&&(r._portalOutlet=i.first)}},features:[c.qOj]}),n})(),WN=(()=>{class n extends qN{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&c.WFA("@state.done",function(a){return r.onAnimationEnd(a)}),2&t&&c.d8E("@state",r._animationState)},features:[c.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.YNc(1,HN,0,0,"ng-template",1),c.qZA(),c._UZ(2,"div")),2&t&&(c.xp6(2),c.uIk("aria-live",r._live)("role",r._role))},dependencies:[dI],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[zN.snackBarState]}}),n})(),yM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[MF,hI,Ns,dM,$r,$r]}),n})();const _M=new c.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function KN(){return new EC}});let YN=(()=>{class n{constructor(t,r,i,a,d,p){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=a,this._parentSnackBar=d,this._defaultConfig=p,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const a={...this._defaultConfig,...i};return a.data={message:t,action:r},a.announcementMessage===t&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const a=c.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:EC,useValue:r}]}),d=new lI(this.snackBarContainerComponent,r.viewContainerRef,a),p=t.attach(d);return p.instance.snackBarConfig=r,p.instance}_attach(t,r){const i={...new EC,...this._defaultConfig,...r},a=this._createOverlay(i),d=this._attachSnackBarContainer(a,i),p=new CI(d,a);if(t instanceof c.Rgc){const y=new cI(t,null,{$implicit:i.data,snackBarRef:p});p.instance=d.attachTemplatePortal(y)}else{const y=this._createInjector(i,p),w=new lI(t,void 0,y),x=d.attachComponentPortal(w);p.instance=x.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Gc(a.detachments())).subscribe(y=>{a.overlayElement.classList.toggle(this.handsetCssClass,y.matches)}),i.announcementMessage&&d._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(p,i),this._openedSnackBarRef=p,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new TT;r.direction=t.direction;let i=this._overlay.position().global();const a="rtl"===t.direction,d="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!a||"end"===t.horizontalPosition&&a,p=!d&&"center"!==t.horizontalPosition;return d?i.left("0"):p?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return c.zs3.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:CI,useValue:r},{provide:mM,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_C),c.LFG(XT),c.LFG(c.zs3),c.LFG(mI),c.LFG(n,12),c.LFG(_M))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ZN=(()=>{class n extends YN{constructor(t,r,i,a,d,p){super(t,r,i,a,d,p),this.simpleSnackBarComponent=$N,this.snackBarContainerComponent=WN,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_C),c.LFG(XT),c.LFG(c.zs3),c.LFG(mI),c.LFG(n,12),c.LFG(_M))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:yM}),n})();function vM(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const DI="inline",CC=["row","column","row-reverse","column-reverse"];function bM(n){let[e,t,r]=wM(n);return function XN(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,r)}function wM(n){n=n?.toLowerCase()??"";let[e,t,r]=n.split(" ");return CC.find(i=>i===e)||(e=CC[0]),t===DI&&(t=r!==DI?r:"",r=DI),[e,QN(t),!!r]}function Zb(n){let[e]=wM(n);return e.indexOf("row")>-1}function QN(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function bd(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}const eP={provide:c.tb,useFactory:function JN(n,e){return()=>{if(wi(e)){const t=Array.from(n.querySelectorAll(`[class*=${EM}]`)),r=/\bflex-layout-.+?\b/g;t.forEach(i=>{i.classList.contains(`${EM}ssr`)&&i.parentNode?i.parentNode.removeChild(i):i.className.replace(r,"")})}}},deps:[ne,c.Lbi],multi:!0},EM="flex-layout-";let xI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[eP]}),n})();class eg{constructor(e=!1,t="all",r="",i="",a=0){this.matches=e,this.mediaQuery=t,this.mqAlias=r,this.suffix=i,this.priority=a,this.property=""}clone(){return new eg(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let tP=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,r,i){const a=this.stylesheet.get(t);a?a.set(r,i):this.stylesheet.set(t,new Map([[r,i]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,r){const i=this.stylesheet.get(t);let a="";if(i){const d=i.get(r);("number"==typeof d||"string"==typeof d)&&(a=d+"")}return a}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AI={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Bl=new c.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>AI}),Ly=new c.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),II=new c.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function CM(n,e){return n=n?.clone()??new eg,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class Pr{constructor(){this.shouldCache=!0}sideEffect(e,t,r){}}let or=(()=>{class n{constructor(t,r,i,a){this._serverStylesheet=t,this._serverModuleLoaded=r,this._platformId=i,this.layoutConfig=a}applyStyleToElement(t,r,i=null){let a={};"string"==typeof r&&(a[r]=i,r=a),a=this.layoutConfig.disableVendorPrefixes?r:vM(r),this._applyMultiValueStyleToElement(a,t)}applyStyleToElements(t,r=[]){const i=this.layoutConfig.disableVendorPrefixes?t:vM(t);r.forEach(a=>{this._applyMultiValueStyleToElement(i,a)})}getFlowDirection(t){const r="flex-direction";let i=this.lookupStyle(t,r);return[i||"row",this.lookupInlineStyle(t,r)||Jn(this._platformId)&&this._serverModuleLoaded?i:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,r){return t.getAttribute(r)??""}lookupInlineStyle(t,r){return wi(this._platformId)?t.style.getPropertyValue(r):function nP(n,e){return DM(n)[e]??""}(t,r)}lookupStyle(t,r,i=!1){let a="";return t&&((a=this.lookupInlineStyle(t,r))||(wi(this._platformId)?i||(a=getComputedStyle(t).getPropertyValue(r)):this._serverModuleLoaded&&(a=this._serverStylesheet.getStyleForElement(t,r)))),a?a.trim():""}_applyMultiValueStyleToElement(t,r){Object.keys(t).sort().forEach(i=>{const a=t[i],d=Array.isArray(a)?a:[a];d.sort();for(let p of d)p=p?p+"":"",wi(this._platformId)||!this._serverModuleLoaded?wi(this._platformId)?r.style.setProperty(i,p):rP(r,i,p):this._serverStylesheet.addStyleToElement(r,i,p)})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tP),c.LFG(Ly),c.LFG(c.Lbi),c.LFG(Bl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rP(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=DM(n);r[e]=t??"",function iP(n,e){let t="";for(const r in e)e[r]&&(t+=`${r}:${e[r]};`);n.setAttribute("style",t)}(n,r)}function DM(n){const e={},t=n.getAttribute("style");if(t){const r=t.split(/;+/g);for(let i=0;i<r.length;i++){const a=r[i].trim();if(a.length>0){const d=a.indexOf(":");if(-1===d)throw new Error(`Invalid CSS style: ${a}`);e[a.substr(0,d).trim()]=a.substr(d+1).trim()}}}return e}function Qb(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function sP(n,e){return(n.priority||0)-(e.priority||0)}let SI=(()=>{class n{constructor(t,r,i){this._zone=t,this._platformId=r,this._document=i,this.source=new PT(new eg(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((r,i)=>{r.matches&&t.push(i)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(i=>i.matches)}observe(t,r=!1){if(t&&t.length){const i=this._observable$.pipe(rn(d=>!r||t.indexOf(d.mediaQuery)>-1)),a=new ln.y(d=>{const p=this.registerQuery(t);if(p.length){const y=p.pop();p.forEach(w=>{d.next(w)}),this.source.next(y)}d.complete()});return(0,ef.T)(a,i)}return this._observable$}registerQuery(t){const r=Array.isArray(t)?t:[t],i=[];return function oP(n,e){const t=n.filter(r=>!xM[r]);if(t.length>0){const r=t.join(", ");try{const i=e.createElement("style");i.setAttribute("type","text/css"),i.styleSheet||i.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${r} {.fx-query-test{ }}\n`)),e.head.appendChild(i),t.forEach(a=>xM[a]=i)}catch(i){console.error(i)}}}(r,this._document),r.forEach(a=>{const d=y=>{this._zone.run(()=>this.source.next(new eg(y.matches,a)))};let p=this.registry.get(a);p||(p=this.buildMQL(a),p.addListener(d),this.pendingRemoveListenerFns.push(()=>p.removeListener(d)),this.registry.set(a,p)),p.matches&&i.push(new eg(!0,a))}),i}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function aP(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,wi(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(c.Lbi),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xM={},lP=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],AM="(orientation: portrait) and (max-width: 599.98px)",IM="(orientation: landscape) and (max-width: 959.98px)",SM="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",TM="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",MM="(orientation: portrait) and (min-width: 840px)",kM="(orientation: landscape) and (min-width: 1280px)",wd={HANDSET:`${AM}, ${IM}`,TABLET:`${SM} , ${TM}`,WEB:`${MM}, ${kM} `,HANDSET_PORTRAIT:`${AM}`,TABLET_PORTRAIT:`${SM} `,WEB_PORTRAIT:`${MM}`,HANDSET_LANDSCAPE:`${IM}`,TABLET_LANDSCAPE:`${TM}`,WEB_LANDSCAPE:`${kM}`},cP=[{alias:"handset",priority:2e3,mediaQuery:wd.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:wd.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:wd.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:wd.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:wd.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:wd.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:wd.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:wd.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:wd.WEB_PORTRAIT,overlapping:!0}],uP=/(\.|-|_)/g;function dP(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const gP=new c.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=(0,c.f3M)(II),e=(0,c.f3M)(Bl),t=[].concat.apply([],(n||[]).map(i=>Array.isArray(i)?i:[i]));return function pP(n,e=[]){const t={};return n.forEach(r=>{t[r.alias]=r}),e.forEach(r=>{t[r.alias]?bd(t[r.alias],r):t[r.alias]=r}),function fP(n){return n.forEach(e=>{e.suffix||(e.suffix=function hP(n){return n.replace(uP,"|").split("|").map(dP).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(r=>t[r]))}((e.disableDefaultBps?[]:lP).concat(e.addOrientationBps?cP:[]),t)}});let TI=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(sP)}findByAlias(t){return t?this.findWithPredicate(t,r=>r.alias===t):null}findByQuery(t){return this.findWithPredicate(t,r=>r.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,r){let i=this.findByMap.get(t);return i||(i=this.items.find(r)??null,this.findByMap.set(t,i)),i??null}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(gP))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vy="print",mP={alias:Vy,mediaQuery:Vy,priority:1e3};let yP=(()=>{class n{constructor(t,r,i){this.breakpoints=t,this.layoutConfig=r,this._document=i,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new _P,this.deactivations=[]}withPrintQuery(t){return[...t,Vy]}isPrintEvent(t){return t.mediaQuery.startsWith(Vy)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const r=this.breakpoints.findByQuery(t);return(r?[...this.printBreakPoints,r]:this.printBreakPoints).sort(Qb)}updateEvent(t){let r=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(r=this.getEventBreakpoints(t)[0],t.mediaQuery=r?.mediaQuery??""),CM(t,r)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const r=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new eg(!0,Vy))),t.updateStyles())},i=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",r),this._document.defaultView.addEventListener("afterprint",i),this.beforePrintEventListeners.push(r),this.afterPrintEventListeners.push(i)}interceptEvents(t){return r=>{this.isPrintEvent(r)?r.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(r)),t.updateStyles()):!r.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,r)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,r){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(r)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,r){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!r.matches){const i=this.breakpoints.findByQuery(r.mediaQuery);if(i){const a=this.formerActivations&&this.formerActivations.includes(i),d=!this.formerActivations&&t.activatedBreakpoints.includes(i);(a||d)&&(this.deactivations.push(i),this.deactivations.sort(Qb))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(TI),c.LFG(Bl),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _P{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(mP),e.sort(Qb),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(r=>r.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function vP(n){return n?.mediaQuery.startsWith(Vy)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let pr=(()=>{class n{constructor(t,r,i){this.matchMedia=t,this.breakpoints=r,this.hook=i,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new en.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const r=this.findByQuery(t.mediaQuery);if(r){t=CM(t,r);const i=this.activatedBreakpoints.indexOf(r);t.matches&&-1===i?(this._activatedBreakpoints.push(r),this._activatedBreakpoints.sort(Qb),this.updateStyles()):!t.matches&&-1!==i&&(this._activatedBreakpoints.splice(i,1),this._activatedBreakpoints.sort(Qb),this.updateStyles())}}init(t,r,i,a,d=[]){RM(this.updateMap,t,r,i),RM(this.clearMap,t,r,a),this.buildElementKeyMap(t,r),this.watchExtraTriggers(t,r,d)}getValue(t,r,i){const a=this.elementMap.get(t);if(a){const d=void 0!==i?a.get(i):this.getActivatedValues(a,r);if(d)return d.get(r)}}hasValue(t,r){const i=this.elementMap.get(t);if(i){const a=this.getActivatedValues(i,r);if(a)return void 0!==a.get(r)||!1}return!1}setValue(t,r,i,a){let d=this.elementMap.get(t);if(d){const y=(d.get(a)??new Map).set(r,i);d.set(a,y),this.elementMap.set(t,d)}else d=(new Map).set(a,(new Map).set(r,i)),this.elementMap.set(t,d);const p=this.getValue(t,r);void 0!==p&&this.updateElement(t,r,p)}trackValue(t,r){return this.subject.asObservable().pipe(rn(i=>i.element===t&&i.key===r))}updateStyles(){this.elementMap.forEach((t,r)=>{const i=new Set(this.elementKeyMap.get(r));let a=this.getActivatedValues(t);a&&a.forEach((d,p)=>{this.updateElement(r,p,d),i.delete(p)}),i.forEach(d=>{if(a=this.getActivatedValues(t,d),a){const p=a.get(d);this.updateElement(r,d,p)}else this.clearElement(r,d)})})}clearElement(t,r){const i=this.clearMap.get(t);if(i){const a=i.get(r);a&&(a(),this.subject.next({element:t,key:r,value:""}))}}updateElement(t,r,i){const a=this.updateMap.get(t);if(a){const d=a.get(r);d&&(d(i),this.subject.next({element:t,key:r,value:i}))}}releaseElement(t){const r=this.watcherMap.get(t);r&&(r.forEach(a=>a.unsubscribe()),this.watcherMap.delete(t));const i=this.elementMap.get(t);i&&(i.forEach((a,d)=>i.delete(d)),this.elementMap.delete(t))}triggerUpdate(t,r){const i=this.elementMap.get(t);if(i){const a=this.getActivatedValues(i,r);a&&(r?this.updateElement(t,r,a.get(r)):a.forEach((d,p)=>this.updateElement(t,p,d)))}}buildElementKeyMap(t,r){let i=this.elementKeyMap.get(t);i||(i=new Set,this.elementKeyMap.set(t,i)),i.add(r)}watchExtraTriggers(t,r,i){if(i&&i.length){let a=this.watcherMap.get(t);if(a||(a=new Map,this.watcherMap.set(t,a)),!a.get(r)){const p=(0,ef.T)(...i).subscribe(()=>{const y=this.getValue(t,r);this.updateElement(t,r,y)});a.set(r,p)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,r){for(let a=0;a<this.activatedBreakpoints.length;a++){const p=t.get(this.activatedBreakpoints[a].alias);if(p&&(void 0===r||p.has(r)&&null!=p.get(r)))return p}if(!this._useFallbacks)return;const i=t.get("");return void 0===r||i&&i.has(r)?i:void 0}observeActivations(){const t=this.breakpoints.items.map(r=>r.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe((0,Oy.b)(this.hook.interceptEvents(this)),rn(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(SI),c.LFG(TI),c.LFG(yP))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RM(n,e,t,r){if(void 0!==r){const i=n.get(e)??new Map;i.set(t,r),n.set(e,i)}}let Dr=(()=>{class n{constructor(t,r,i,a){this.elementRef=t,this.styleBuilder=r,this.styler=i,this.marshal=a,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new en.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(r=>{if(-1!==this.inputs.indexOf(r)){const i=r.split(".").slice(1).join(".");this.setValue(t[r].currentValue,i)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,r){const i=this.styleBuilder,a=i.shouldCache;let d=this.styleCache.get(t);(!d||!a)&&(d=i.buildStyles(t,r),a&&this.styleCache.set(t,d)),this.mru={...d},this.applyStyleToElement(d),i.sideEffect(t,d,r)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,r=!1){if(t){const[i,a]=this.styler.getFlowDirection(t);if(!a&&r){const d=bM(i);this.styler.applyStyleToElements(d,[t])}return i.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,r,i=this.nativeElement){this.styler.applyStyleToElement(i,t,r)}setValue(t,r){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,r)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Pr),c.Y36(or),c.Y36(pr))},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();function OM(n,e="1",t="1"){let r=[e,t,n],i=n.indexOf("calc");if(i>0){r[2]=FM(n.substring(i).trim());let a=n.substr(0,i).trim().split(" ");2==a.length&&(r[0]=a[0],r[1]=a[1])}else if(0==i)r[2]=FM(n.trim());else{let a=n.split(" ");r=3===a.length?a:[e,t,n]}return r}function FM(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let EP=(()=>{class n extends Pr{buildStyles(t,{display:r}){const i=bM(t);return{...i,display:"none"===r?r:i.display}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CP=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let DP=(()=>{class n extends Dr{constructor(t,r,i,a,d){super(t,i,r,a),this._config=d,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const i=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=LM.get(i)??new Map,LM.set(i,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:i}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(or),c.Y36(EP),c.Y36(pr),c.Y36(Bl))},n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})(),PM=(()=>{class n extends DP{constructor(){super(...arguments),this.inputs=CP}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[c.qOj]}),n})();const LM=new Map;let PP=(()=>{class n extends Pr{constructor(t){super(),this.layoutConfig=t}buildStyles(t,r){let[i,a,...d]=t.split(" "),p=d.join(" ");const y=r.direction.indexOf("column")>-1?"column":"row",w=Zb(y)?"max-width":"max-height",x=Zb(y)?"min-width":"min-height",T=String(p).indexOf("calc")>-1,L=T||"auto"===p,V=String(p).indexOf("%")>-1&&!T,z=String(p).indexOf("px")>-1||String(p).indexOf("rem")>-1||String(p).indexOf("em")>-1||String(p).indexOf("vw")>-1||String(p).indexOf("vh")>-1;let re=T||z;i="0"==i?0:i,a="0"==a?0:a;const Ce=!i&&!a;let Pe={};const rt={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(p||""){case"":const _t=!1!==this.layoutConfig.useColumnBasisZero;p="row"===y?"0%":_t?"0.000000001px":"auto";break;case"initial":case"nogrow":i=0,p="auto";break;case"grow":p="100%";break;case"noshrink":a=0,p="auto";break;case"auto":break;case"none":i=0,a=0,p="auto";break;default:!re&&!V&&!isNaN(p)&&(p+="%"),"0%"===p&&(re=!0),"0px"===p&&(p="0%"),Pe=bd(rt,T?{"flex-grow":i,"flex-shrink":a,"flex-basis":re?p:"100%"}:{flex:`${i} ${a} ${re?p:"100%"}`})}return Pe.flex||Pe["flex-grow"]||(Pe=bd(rt,T?{"flex-grow":i,"flex-shrink":a,"flex-basis":p}:{flex:`${i} ${a} ${p}`})),"0%"!==p&&"0px"!==p&&"0.000000001px"!==p&&"auto"!==p&&(Pe[x]=Ce||re&&i?p:null,Pe[w]=Ce||!L&&a?p:null),Pe[x]||Pe[w]?r.hasWrap&&(Pe[T?"flex-basis":"flex"]=Pe[w]?T?Pe[w]:`${i} ${a} ${Pe[w]}`:T?Pe[x]:`${i} ${a} ${Pe[x]}`):Pe=bd(rt,T?{"flex-grow":i,"flex-shrink":a,"flex-basis":p}:{flex:`${i} ${a} ${p}`}),bd(Pe,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Bl))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LP=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let VP=(()=>{class n extends Dr{constructor(t,r,i,a,d){super(t,a,r,d),this.layoutConfig=i,this.marshal=d,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Gc(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Gc(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const i=t.value.split(" ");this.direction=i[0],this.wrap=void 0!==i[1]&&"wrap"===i[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const i=this.direction,a=i.startsWith("row"),d=this.wrap;a&&d?this.styleCache=jP:a&&!d?this.styleCache=BP:!a&&d?this.styleCache=HP:!a&&!d&&(this.styleCache=UP);const y=OM(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(y.join(" "),{direction:i,hasWrap:d})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const r=OM(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,r.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(or),c.Y36(Bl),c.Y36(PP),c.Y36(pr))},n.\u0275dir=c.lG2({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[c.qOj]}),n})(),UM=(()=>{class n extends VP{constructor(){super(...arguments),this.inputs=LP}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[c.qOj]}),n})();const BP=new Map,UP=new Map,jP=new Map,HP=new Map;let h1=(()=>{class n extends Pr{buildStyles(t,r){const i={},[a,d]=t.split(" ");switch(a){case"center":i["justify-content"]="center";break;case"space-around":i["justify-content"]="space-around";break;case"space-between":i["justify-content"]="space-between";break;case"space-evenly":i["justify-content"]="space-evenly";break;case"end":case"flex-end":i["justify-content"]="flex-end";break;default:i["justify-content"]="flex-start"}switch(d){case"start":case"flex-start":i["align-items"]=i["align-content"]="flex-start";break;case"center":i["align-items"]=i["align-content"]="center";break;case"end":case"flex-end":i["align-items"]=i["align-content"]="flex-end";break;case"space-between":i["align-content"]="space-between",i["align-items"]="stretch";break;case"space-around":i["align-content"]="space-around",i["align-items"]="stretch";break;case"baseline":i["align-content"]="stretch",i["align-items"]="baseline";break;default:i["align-items"]=i["align-content"]="stretch"}return bd(i,{display:r.inline?"inline-flex":"flex","flex-direction":r.layout,"box-sizing":"border-box","max-width":"stretch"===d?Zb(r.layout)?null:"100%":null,"max-height":"stretch"===d&&Zb(r.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f1=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let p1=(()=>{class n extends Dr{constructor(t,r,i,a){super(t,i,r,a),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Gc(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const r=this.layout||"row",i=this.inline;"row"===r&&i?this.styleCache=v1:"row"!==r||i?"row-reverse"===r&&i?this.styleCache=w1:"row-reverse"!==r||i?"column"===r&&i?this.styleCache=b1:"column"!==r||i?"column-reverse"===r&&i?this.styleCache=E1:"column-reverse"===r&&!i&&(this.styleCache=_1):this.styleCache=m1:this.styleCache=y1:this.styleCache=g1,this.addStyles(t,{layout:r,inline:i})}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],this.inline=t.value.includes("inline"),CC.find(i=>i===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(or),c.Y36(h1),c.Y36(pr))},n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})(),jM=(()=>{class n extends p1{constructor(){super(...arguments),this.inputs=f1}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[c.qOj]}),n})();const g1=new Map,m1=new Map,y1=new Map,_1=new Map,v1=new Map,b1=new Map,w1=new Map,E1=new Map;let HM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[xI,Ry]}),n})();const C1=["*",[["mat-toolbar-row"]]],D1=["*","mat-toolbar-row"],x1=Wb(class{constructor(n){this._elementRef=n}});let A1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),I1=(()=>{class n extends x1{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Po),c.Y36(ne))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,A1,5),2&t){let a;c.iGM(a=c.CRH())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&c.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[c.qOj],ngContentSelectors:D1,decls:2,vars:0,template:function(t,r){1&t&&(c.F$t(C1),c.Hsn(0),c.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),S1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$r,$r]}),n})();function GM(n,e){const t=(0,Ds.m)(n)?n:()=>n,r=i=>i.error(t());return new ln.y(e?i=>e.schedule(r,0,i):r)}function zM(n){return(0,In.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,gn.x)(t,void 0,void 0,d=>{a=(0,md.Xf)(n(d,zM(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}class k1{}class rf{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(d):this.headers.set(a,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof rf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new rf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===a.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class R1{encodeKey(e){return qM(e)}encodeValue(e){return qM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const F1=/%(\d[a-f0-9])/gi,N1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qM(n){return encodeURIComponent(n).replace(F1,(e,t)=>N1[t]??e)}function AC(n){return`${n}`}class sf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new R1,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function O1(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[d,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(d)||[];y.push(p),t.set(d,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(AC):[AC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new sf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(AC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(AC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class P1{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function WM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function KM(n){return typeof Blob<"u"&&n instanceof Blob}function YM(n){return typeof FormData<"u"&&n instanceof FormData}class Xb{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function L1(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new rf),this.context||(this.context=new P1),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new sf,this.urlWithParams=t}serializeBody(){return null===this.body?null:WM(this.body)||KM(this.body)||YM(this.body)||function V1(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YM(this.body)?null:KM(this.body)?this.body.type||null:WM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const x=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((T,L)=>T.set(L,e.setHeaders[L]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((T,L)=>T.set(L,e.setParams[L]),w)),new Xb(t,r,a,{params:w,headers:y,context:x,reportProgress:p,responseType:i,withCredentials:d})}}var Ri=(()=>((Ri=Ri||{})[Ri.Sent=0]="Sent",Ri[Ri.UploadProgress=1]="UploadProgress",Ri[Ri.ResponseHeader=2]="ResponseHeader",Ri[Ri.DownloadProgress=3]="DownloadProgress",Ri[Ri.Response=4]="Response",Ri[Ri.User=5]="User",Ri))();class MI extends class B1{constructor(e,t=200,r="OK"){this.headers=e.headers||new rf,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Ri.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new MI({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function kI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let QM=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Xb)a=t;else{let y,w;y=i.headers instanceof rf?i.headers:new rf(i.headers),i.params&&(w=i.params instanceof sf?i.params:new sf({fromObject:i.params})),a=new Xb(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=An(a).pipe(function M1(n,e){return(0,Ds.m)(e)?(0,pC.z)(n,e,1):(0,pC.z)(n,1)}(y=>this.handler.handle(y)));if(t instanceof Xb||"events"===i.observe)return d;const p=d.pipe(rn(y=>y instanceof MI));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,Ot.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,Ot.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,Ot.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe((0,Ot.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new sf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,kI(i,r))}post(t,r,i={}){return this.request("POST",t,kI(i,r))}put(t,r,i={}){return this.request("PUT",t,kI(i,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(k1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const j1=["*"];let IC;function Jb(n){return function H1(){if(void 0===IC&&(IC=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(IC=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return IC}()?.createHTML(n)||n}function XM(n){return Error(`Unable to find icon with the name "${n}"`)}function JM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function ek(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class tg{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let SC=(()=>{class n{constructor(t,r,i,a){this._httpClient=t,this._sanitizer=r,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,a){return this._addSvgIconConfig(t,r,new tg(i,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,a){const d=this._sanitizer.sanitize(c.q3G.HTML,i);if(!d)throw ek(i);const p=Jb(d);return this._addSvgIconConfig(t,r,new tg("",p,a))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new tg(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const a=this._sanitizer.sanitize(c.q3G.HTML,r);if(!a)throw ek(r);const d=Jb(a);return this._addSvgIconSetConfig(t,new tg("",d,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!r)throw JM(t);const i=this._cachedIconsByUrl.get(r);return i?An(TC(i)):this._loadSvgIconFromConfig(new tg(t,null)).pipe((0,Oy.b)(a=>this._cachedIconsByUrl.set(r,a)),(0,Ot.U)(a=>TC(a)))}getNamedSvgIcon(t,r=""){const i=tk(r,t);let a=this._svgIconConfigs.get(i);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(r,t),a)return this._svgIconConfigs.set(i,a),this._getSvgFromConfig(a);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):GM(XM(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?An(TC(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Ot.U)(r=>TC(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?An(i):function $M(...n){const e=(0,fi.jO)(n),{args:t,keys:r}=jT(n),i=new ln.y(a=>{const{length:d}=t;if(!d)return void a.complete();const p=new Array(d);let y=d,w=d;for(let x=0;x<d;x++){let T=!1;(0,md.Xf)(t[x]).subscribe((0,gn.x)(a,L=>{T||(T=!0,w--),p[x]=L},()=>y--,void 0,()=>{(!y||!T)&&(w||a.next(r?HT(r,p):p),a.complete())}))}});return e?i.pipe(JA(e)):i}(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(zM(p=>{const w=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,d.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(w)),An(null)})))).pipe((0,Ot.U)(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw XM(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const a=r[i];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(a),p=this._extractSvgIconFromSet(d,t,a.options);if(p)return p}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Oy.b)(r=>t.svgText=r),(0,Ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?An(null):this._fetchIcon(t).pipe((0,Oy.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const a=t.querySelector(`[id="${r}"]`);if(!a)return null;const d=a.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,i);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),i);const p=this._svgElementFromString(Jb("<svg></svg>"));return p.appendChild(d),this._setSvgAttributes(p,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Jb("<svg></svg>")),i=t.attributes;for(let a=0;a<i.length;a++){const{name:d,value:p}=i[a];"id"!==d&&r.setAttribute(d,p)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[a].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,a=i?.withCredentials??!1;if(!this._httpClient)throw function G1(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,r);if(!d)throw JM(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const y=this._httpClient.get(d,{responseType:"text",withCredentials:a}).pipe((0,Ot.U)(w=>Jb(w)),function T1(n){return(0,In.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(d)),(0,$p.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(tk(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const a=this._resolvers[i](r,t);if(a)return z1(a)?new tg(a.url,null,a.options):new tg(a,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(QM,8),c.LFG(cs),c.LFG(ne,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TC(n){return n.cloneNode(!0)}function tk(n,e){return n+":"+e}function z1(n){return!(!n.url||!n.options)}const q1=Wb(class{constructor(n){this._elementRef=n}}),W1=new c.OlP("MAT_ICON_DEFAULT_OPTIONS"),K1=new c.OlP("mat-icon-location",{providedIn:"root",factory:function Y1(){const n=(0,c.f3M)(ne),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),nk=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Z1=nk.map(n=>`[${n}]`).join(", "),Q1=/^url\(['"]?#(.*?)['"]?\)$/;let X1=(()=>{class n extends q1{constructor(t,r,i,a,d,p){super(t),this._iconRegistry=r,this._location=a,this._errorHandler=d,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Hc.w0.EMPTY,p&&(p.color&&(this.color=this.defaultColor=p.color),p.fontSet&&(this.fontSet=p.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=sr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,a)=>{i.forEach(d=>{a.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(Z1),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<r.length;a++)nk.forEach(d=>{const p=r[a],y=p.getAttribute(d),w=y?y.match(Q1):null;if(w){let x=i.get(p);x||(x=[],i.set(p,x)),x.push({name:d,value:w[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(ki(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${a.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(SC),c.$8M("aria-hidden"),c.Y36(K1),c.Y36(c.qLn),c.Y36(W1,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:j1,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),J1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$r,$r]}),n})(),eL=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=sr(t)}get inset(){return this._inset}set inset(t){this._inset=sr(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("aria-orientation",r.vertical?"vertical":"horizontal"),c.ekj("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),tL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$r,$r]}),n})(),rk=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nL=0;const RI=new c.OlP("CdkAccordion");let rL=(()=>{class n{constructor(){this._stateChanges=new en.x,this._openCloseAllActions=new en.x,this.id="cdk-accordion-"+nL++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=sr(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[c._Bn([{provide:RI,useExisting:n}]),c.TTD]}),n})(),iL=0,sL=(()=>{class n{constructor(t,r,i){this.accordion=t,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=Hc.w0.EMPTY,this.closed=new c.vpe,this.opened=new c.vpe,this.destroyed=new c.vpe,this.expandedChange=new c.vpe,this.id="cdk-accordion-child-"+iL++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((a,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==a&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=sr(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=sr(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(RI,12),c.Y36(c.sBO),c.Y36(rk))},n.\u0275dir=c.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[c._Bn([{provide:RI,useValue:void 0}])]}),n})(),oL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const aL=["body"];function lL(n,e){}const cL=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],uL=["mat-expansion-panel-header","*","mat-action-row"];function dL(n,e){if(1&n&&c._UZ(0,"span",2),2&n){const t=c.oxw();c.Q6J("@indicatorRotate",t._getExpandedState())}}const hL=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],fL=["mat-panel-title","mat-panel-description","*"],OI=new c.OlP("MAT_ACCORDION"),ik="225ms cubic-bezier(0.4,0.0,0.2,1)",sk={indicatorRotate:wI("indicatorRotate",[Py("collapsed, void",vd({transform:"rotate(0deg)"})),Py("expanded",vd({transform:"rotate(180deg)"})),wC("expanded <=> collapsed, void => collapsed",bC(ik))]),bodyExpansion:wI("bodyExpansion",[Py("collapsed, void",vd({height:"0px",visibility:"hidden"})),Py("expanded",vd({height:"*",visibility:"visible"})),wC("expanded <=> collapsed, void => collapsed",bC(ik))])},ok=new c.OlP("MAT_EXPANSION_PANEL");let pL=(()=>{class n{constructor(t,r){this._template=t,this._expansionPanel=r}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(ok,8))},n.\u0275dir=c.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),gL=0;const ak=new c.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let lk=(()=>{class n extends sL{constructor(t,r,i,a,d,p,y){super(t,r,i),this._viewContainerRef=a,this._animationMode=p,this._hideToggle=!1,this.afterExpand=new c.vpe,this.afterCollapse=new c.vpe,this._inputChanges=new en.x,this._headerId="mat-expansion-panel-header-"+gL++,this._bodyAnimationDone=new en.x,this.accordion=t,this._document=d,this._bodyAnimationDone.pipe(ho((w,x)=>w.fromState===x.fromState&&w.toState===x.toState)).subscribe(w=>{"void"!==w.fromState&&("expanded"===w.toState?this.afterExpand.emit():"collapsed"===w.toState&&this.afterCollapse.emit())}),y&&(this.hideToggle=y.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=sr(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(co(null),rn(()=>this.expanded&&!this._portal),ki(1)).subscribe(()=>{this._portal=new cI(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,r=this._body.nativeElement;return t===r||r.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(OI,12),c.Y36(c.sBO),c.Y36(rk),c.Y36(c.s_b),c.Y36(ne),c.Y36(c.QbO,8),c.Y36(ak,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,pL,5),2&t){let a;c.iGM(a=c.CRH())&&(r._lazyContent=a.first)}},viewQuery:function(t,r){if(1&t&&c.Gf(aL,5),2&t){let i;c.iGM(i=c.CRH())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,r){2&t&&c.ekj("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[c._Bn([{provide:OI,useValue:void 0},{provide:ok,useExisting:n}]),c.qOj,c.TTD],ngContentSelectors:uL,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(c.F$t(cL),c.Hsn(0),c.TgZ(1,"div",0,1),c.NdJ("@bodyExpansion.done",function(a){return r._bodyAnimationDone.next(a)}),c.TgZ(3,"div",2),c.Hsn(4,1),c.YNc(5,lL,0,0,"ng-template",3),c.qZA(),c.Hsn(6,2),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@bodyExpansion",r._getExpandedState())("id",r.id),c.uIk("aria-labelledby",r._headerId),c.xp6(4),c.Q6J("cdkPortalOutlet",r._portal))},dependencies:[dI],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[sk.bodyExpansion]},changeDetection:0}),n})();class mL{}const yL=oM(mL);let ck=(()=>{class n extends yL{constructor(t,r,i,a,d,p,y){super(),this.panel=t,this._element=r,this._focusMonitor=i,this._changeDetectorRef=a,this._animationMode=p,this._parentChangeSubscription=Hc.w0.EMPTY;const w=t.accordion?t.accordion._stateChanges.pipe(rn(x=>!(!x.hideToggle&&!x.togglePosition))):gb.E;this.tabIndex=parseInt(y||"")||0,this._parentChangeSubscription=(0,ef.T)(t.opened,t.closed,w,t._inputChanges.pipe(rn(x=>!!(x.hideToggle||x.disabled||x.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(rn(()=>t._containsFocus())).subscribe(()=>i.focusVia(r,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:LT(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,r){t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(lk,1),c.Y36(c.SBq),c.Y36(yI),c.Y36(c.sBO),c.Y36(ak,8),c.Y36(c.QbO,8),c.$8M("tabindex"))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r._toggle()})("keydown",function(a){return r._keydown(a)}),2&t&&(c.uIk("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),c.Udp("height",r._getHeaderHeight()),c.ekj("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[c.qOj],ngContentSelectors:fL,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,r){1&t&&(c.F$t(hL),c.TgZ(0,"span",0),c.Hsn(1),c.Hsn(2,1),c.Hsn(3,2),c.qZA(),c.YNc(4,dL,1,1,"span",1)),2&t&&(c.ekj("mat-content-hide-toggle",!r._showToggle()),c.xp6(4),c.Q6J("ngIf",r._showToggle()))},dependencies:[Sr],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[sk.indicatorRotate]},changeDetection:0}),n})(),_L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),vL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),bL=(()=>{class n extends rL{constructor(){super(...arguments),this._ownHeaders=new c.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=sr(t)}ngAfterContentInit(){this._headers.changes.pipe(co(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new hN(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["mat-accordion"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,ck,5),2&t){let a;c.iGM(a=c.CRH())&&(r._headers=a)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[c._Bn([{provide:OI,useExisting:n}]),c.qOj]}),n})(),wL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Ns,$r,oL,hI]}),n})();function EL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",7),c.NdJ("click",function(){const a=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.openPanel(a))}),c._uU(1),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.hij("| ",t," |")}}function CL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",7),c.NdJ("click",function(){const a=c.CHM(t).$implicit,d=c.oxw();return c.KtG(d.openPanel(a.name))}),c._uU(1),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.hij("| ",t.acr," |")}}function DL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"div",11)(2,"mat-icon"),c._uU(3,"girl"),c.qZA(),c.TgZ(4,"mat-icon",12),c.NdJ("click",function(){const a=c.CHM(t).$implicit,d=c.oxw().$implicit,p=c.oxw();return c.KtG(p.dec(a,d,!0))}),c.qZA(),c._uU(5),c.TgZ(6,"mat-icon",13),c.NdJ("click",function(){const a=c.CHM(t).$implicit,d=c.oxw().$implicit,p=c.oxw();return c.KtG(p.inc(a,d,!0))}),c.qZA()(),c.TgZ(7,"div",11)(8,"mat-icon"),c._uU(9,"boy"),c.qZA(),c.TgZ(10,"mat-icon",12),c.NdJ("click",function(){const a=c.CHM(t).$implicit,d=c.oxw().$implicit,p=c.oxw();return c.KtG(p.dec(a,d,!1))}),c.qZA(),c._uU(11),c.TgZ(12,"mat-icon",13),c.NdJ("click",function(){const a=c.CHM(t).$implicit,d=c.oxw().$implicit,p=c.oxw();return c.KtG(p.inc(a,d,!1))}),c.qZA()()()}if(2&n){const t=e.$implicit,r=c.oxw().$implicit,i=c.oxw();c.xp6(1),c.Tol(0==i.getQtd(t,r)?"color-none":1==i.getQtd(t,r)?"color-have":"color-dup"),c.xp6(4),c.AsE(" ",t,": ",i.getQtdG(t,r)," "),c.xp6(2),c.Tol(0==i.getQtd(t,r)?"color-none":1==i.getQtd(t,r)?"color-have":"color-dup"),c.xp6(4),c.AsE(" ",t,": ",i.getQtdO(t,r)," ")}}function xL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"mat-expansion-panel",8)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",7),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.topFunction())}),c._uU(4,"home"),c.qZA(),c._uU(5),c.qZA(),c.TgZ(6,"mat-panel-description"),c._uU(7),c.qZA()(),c.YNc(8,DL,13,8,"div",9),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw();c.Q6J("expanded",r.expOpened==t.name)("id",t.name),c.xp6(5),c.hij(" ",t.name," "),c.xp6(2),c.hij(" ",r.getPageDesc(t)," "),c.xp6(1),c.Q6J("ngForOf",t.stickers)}}let AL=(()=>{class n{constructor(t,r){this.firestore=t,this._snackBar=r,this.title="copa",this.listaAcr=[],this.listaOrder=[],this.listaAlfa=[],this.total=0,this.uniq=0,this.dups=0,this.expOpened="PaginaInicial",this.identifyer=(a,d)=>d.name,this.lista=t.collection("copa2",a=>a.orderBy("order")).valueChanges(),t.collection("copa2").get().forEach(a=>{a.forEach(d=>{let p=d.data(),y=this.getAcr(p),w=y;"000"==y?(y="000",w="000"):"FWC 8"==p.stickers[0]?(y="fwc8-18",w="001"):"FWC"==y?(y="fwc19-29",w="zz1"):"C"==y&&(y="Coca",w="zz2");let x=p.stickers.length,T=0,L=0;for(let V=0;V<p.stickers.length;V++){let z=p.qtdsG[V]+p.qtdsO[V];z>0&&(T++,L+=z-1)}if(this.total+=x,this.uniq+=T,this.dups+=L,0==this.listaAlfa.length)this.listaAlfa.push(p.name);else if("Museu"==p.name||"PaginaInicial"==p.name||"Estadios"==p.name)console.log();else for(let V=0;V<this.listaAlfa.length;V++){if(p.name<this.listaAlfa[V]){this.listaAlfa.splice(V,0,p.name);break}if(V==this.listaAlfa.length-1){this.listaAlfa.push(p.name);break}}if(0==this.listaAcr.length)this.listaAcr.push({acr:y,name:p.name,total:x,uniq:T,dups:L}),this.listaOrder.push(w);else for(let V=0;V<this.listaAcr.length;V++){if(w<this.listaOrder[V]){this.listaAcr.splice(V,0,{acr:y,name:p.name,total:x,uniq:T,dups:L}),this.listaOrder.splice(V,0,w);break}if(V==this.listaAcr.length-1){this.listaAcr.push({acr:y,name:p.name,total:x,uniq:T,dups:L}),this.listaOrder.push(w);break}}})})}getQtd(t,r){let i=r.stickers.indexOf(t);return r.qtdsG[i]+r.qtdsO[i]}getQtdO(t,r){let i=r.stickers.indexOf(t);return r.qtdsO[i]}getQtdG(t,r){let i=r.stickers.indexOf(t);return r.qtdsG[i]}updatePage(t){var r=this;return(0,ye.Z)(function*(){yield(yield r.firestore.doc("copa2/"+t.name)).update(t)})()}getAcrItem(t){for(const r of this.listaAcr)if(r.name==t.name)return r;return this.listaAcr[0]}inc(t,r,i){var a=this;return(0,ye.Z)(function*(){let d=r.stickers.indexOf(t);i?r.qtdsG[d]++:r.qtdsO[d]++,yield a.updatePage(r);let p=a.getAcrItem(r);r.qtdsG[d]+r.qtdsO[d]>1?(a.dups++,p.dups++):(a.uniq++,p.uniq++)})()}dec(t,r,i){var a=this;return(0,ye.Z)(function*(){let d=r.stickers.indexOf(t);if((i?r.qtdsG[d]:r.qtdsO[d])>0){i?r.qtdsG[d]--:r.qtdsO[d]--,yield a.updatePage(r);let y=a.getAcrItem(r);r.qtdsG[d]+r.qtdsO[d]==0?(a.uniq--,y.uniq--):(a.dups--,y.dups--)}else a._snackBar.open("Imposs\xedvel diminuir pois "+(i?"Gabi":"Omaro")+" n\xe3o possui","fechar",{duration:15e3})})()}showvars(t){return console.log(JSON.stringify(t)),""}getAcr(t){return t.stickers[0].split(" ")[0]}topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.expOpened=""}getPageDesc(t){for(let r=0;r<this.listaAcr.length;r++){let i=this.listaAcr[r];if(i.name==t.name)return t.name+" "+i.uniq+";rep:"+i.dups}return t.name}openPanel(t){this.expOpened=t;var r=t;window.setTimeout(()=>{document.getElementById(r)?.scrollIntoView()},100)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(My),c.Y36(ZN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:16,vars:8,consts:[["color","primary"],[1,"container-wrapper"],["href","#PaginaInicial",3,"click"],["href","#Estadios",3,"click"],["href","#Museu",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"expanded","id",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[3,"expanded","id"],["fxLayout","row wrap","fxLayoutAlign","space-between",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-between"],["fxFlex","0 1 calc(49%)"],["aria-hidden","true","fontIcon","do_not_disturb_on",3,"click"],["aria-hidden","true","fontIcon","add_circle",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"mat-toolbar",0)(1,"span"),c._uU(2),c.qZA()(),c.TgZ(3,"div",1)(4,"a",2),c.NdJ("click",function(){return r.openPanel("PaginaInicial")}),c._uU(5,"| Inicial |"),c.qZA(),c.TgZ(6,"a",3),c.NdJ("click",function(){return r.openPanel("Estadios")}),c._uU(7,"| Est\xe1dios |"),c.qZA(),c.TgZ(8,"a",4),c.NdJ("click",function(){return r.openPanel("Museu")}),c._uU(9,"| Museu |"),c.qZA(),c.YNc(10,EL,2,1,"a",5),c._UZ(11,"mat-divider"),c.YNc(12,CL,2,1,"a",5),c.TgZ(13,"mat-accordion"),c.YNc(14,xL,9,5,"mat-expansion-panel",6),c.ALo(15,"async"),c.qZA()()),2&t&&(c.xp6(2),c.AsE("rep:",r.dups,"-falta:",r.total-r.uniq,""),c.xp6(8),c.Q6J("ngForOf",r.listaAlfa),c.xp6(2),c.Q6J("ngForOf",r.listaAcr),c.xp6(2),c.Q6J("ngForOf",c.lcZ(15,6,r.lista))("ngForTrackBy",r.identifyer))},dependencies:[es,PM,jM,UM,I1,X1,eL,bL,lk,ck,vL,_L,Yc],styles:[".color-none[_ngcontent-%COMP%]{background-color:red;color:#fff;margin:1px 1px 0 0}.color-have[_ngcontent-%COMP%]{background-color:green;color:#fff;margin:1px 1px 0 0}.color-dup[_ngcontent-%COMP%]{background-color:#00f;color:#fff;margin:1px 1px 0 0}.mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}body[_ngcontent-%COMP%]{margin:0}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%) translateY(-50%)}.overlay[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#00000049;z-index:10;top:0;left:0;position:fixed}"]}),n})(),gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[xI]}),n})(),Ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[xI]}),n})(),hB=(()=>{class n{constructor(t,r){Jn(r)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,r=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Bl,useValue:{...AI,...t}},{provide:II,useValue:r,multi:!0},{provide:Ly,useValue:!0}]:[{provide:Bl,useValue:{...AI,...t}},{provide:II,useValue:r,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ly),c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[HM,gk,Ck,HM,gk,Ck]}),n})();function Dk(n){return new c.vHH(3e3,!1)}function WB(){return typeof window<"u"&&typeof window.document<"u"}function NI(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function af(n){switch(n.length){case 0:return new Yb;case 1:return n[0];default:return new gM(n)}}function xk(n,e,t,r,i=new Map,a=new Map){const d=[],p=[];let y=-1,w=null;if(r.forEach(x=>{const T=x.get("offset"),L=T==y,V=L&&w||new Map;x.forEach((z,re)=>{let Ce=re,Pe=z;if("offset"!==re)switch(Ce=e.normalizePropertyName(Ce,d),Pe){case"!":Pe=i.get(re);break;case _d:Pe=a.get(re);break;default:Pe=e.normalizeStyleValue(re,Ce,Pe,d)}V.set(Ce,Pe)}),L||p.push(V),w=V,y=T}),d.length)throw function NB(n){return new c.vHH(3502,!1)}();return p}function PI(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&LI(t,"start",n)));break;case"done":n.onDone(()=>r(t&&LI(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&LI(t,"destroy",n)))}}function LI(n,e,t){const a=VI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),d=n._data;return null!=d&&(a._data=d),a}function VI(n,e,t,r,i="",a=0,d){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!d}}function Lo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Ak(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let BI=(n,e)=>!1,Ik=(n,e,t)=>[],Sk=null;function UI(n){const e=n.parentNode||n.host;return e===Sk?null:e}(NI()||typeof Element<"u")&&(WB()?(Sk=(()=>document.documentElement)(),BI=(n,e)=>{for(;e;){if(e===n)return!0;e=UI(e)}return!1}):BI=(n,e)=>n.contains(e),Ik=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let ng=null,Tk=!1;const Mk=BI,kk=Ik;let Rk=(()=>{class n{validateStyleProperty(t){return function YB(n){ng||(ng=function ZB(){return typeof document<"u"?document.body:null}()||{},Tk=!!ng.style&&"WebkitAppearance"in ng.style);let e=!0;return ng.style&&!function KB(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ng.style,!e&&Tk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ng.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Mk(t,r)}getParentElement(t){return UI(t)}query(t,r,i){return kk(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,d,p=[],y){return new Yb(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),jI=(()=>{class n{}return n.NOOP=new Rk,n})();const HI="ng-enter",MC="ng-leave",kC="ng-trigger",RC=".ng-trigger",Fk="ng-animating",GI=".ng-animating";function lf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:$I(parseFloat(e[1]),e[2])}function $I(n,e){return"s"===e?1e3*n:n}function OC(n,e,t){return n.hasOwnProperty("duration")?n:function JB(n,e,t){let i,a=0,d="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(Dk()),{duration:0,delay:0,easing:""};i=$I(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(a=$I(parseFloat(y),p[4]));const w=p[5];w&&(d=w)}else i=n;if(!t){let p=!1,y=e.length;i<0&&(e.push(function fB(){return new c.vHH(3100,!1)}()),p=!0),a<0&&(e.push(function pB(){return new c.vHH(3101,!1)}()),p=!0),p&&e.splice(y,0,Dk())}return{duration:i,delay:a,easing:d}}(n,e,t)}function ew(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Nk(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function cf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Lk(n,e,t){return t?e+":"+t+";":""}function Vk(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Lk(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Lk(0,r2(t),n.style[t]));n.setAttribute("style",e)}function $c(n,e,t){n.style&&(e.forEach((r,i)=>{const a=qI(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),NI()&&Vk(n))}function rg(n,e){n.style&&(e.forEach((t,r)=>{const i=qI(r);n.style[i]=""}),NI()&&Vk(n))}function tw(n){return Array.isArray(n)?1==n.length?n[0]:fM(n):n}const zI=new RegExp("{{\\s*(.+?)\\s*}}","g");function Bk(n){let e=[];if("string"==typeof n){let t;for(;t=zI.exec(n);)e.push(t[1]);zI.lastIndex=0}return e}function FC(n,e,t){const r=n.toString(),i=r.replace(zI,(a,d)=>{let p=e[d];return null==p&&(t.push(function mB(n){return new c.vHH(3003,!1)}()),p=""),p.toString()});return i==r?n:i}function NC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const n2=/-+([a-z0-9])/g;function qI(n){return n.replace(n2,(...e)=>e[1].toUpperCase())}function r2(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function yB(n){return new c.vHH(3004,!1)}()}}function Uk(n,e){return window.getComputedStyle(n)[e]}function u2(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function d2(n,e,t){if(":"==n[0]){const y=function h2(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function kB(n){return new c.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function MB(n){return new c.vHH(3015,!1)}()),e;const i=r[1],a=r[2],d=r[3];e.push(jk(i,d));"<"==a[0]&&!("*"==i&&"*"==d)&&e.push(jk(d,i))}(r,t,e)):t.push(n),t}const BC=new Set(["true","1"]),UC=new Set(["false","0"]);function jk(n,e){const t=BC.has(n)||UC.has(n),r=BC.has(e)||UC.has(e);return(i,a)=>{let d="*"==n||n==i,p="*"==e||e==a;return!d&&t&&"boolean"==typeof i&&(d=i?BC.has(n):UC.has(n)),!p&&r&&"boolean"==typeof a&&(p=a?BC.has(e):UC.has(e)),d&&p}}const f2=new RegExp("s*:selfs*,?","g");function WI(n,e,t,r){return new p2(n).build(e,t,r)}class p2{constructor(e){this._driver=e}build(e,t,r){const i=new y2(t);return this._resetContextStyleTimingState(i),Vo(this,tw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push(function vB(){return new c.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,w=y.name;w.toString().split(/\s*,\s*/).forEach(x=>{y.name=x,a.push(this.visitState(y,t))}),y.name=w}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,i+=y.depCount,d.push(y)}else t.errors.push(function bB(){return new c.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:d,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,d=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(y=>{Bk(y).forEach(w=>{d.hasOwnProperty(w)||a.add(w)})})}),a.size&&(NC(a.values()),t.errors.push(function wB(n,e){return new c.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Vo(this,tw(e.animation),t);return{type:1,matchers:u2(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ig(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Vo(this,r,t)),options:ig(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(d=>{t.currentTime=r;const p=Vo(this,d,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:a,options:ig(e.options)}}visitAnimate(e,t){const r=function v2(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return KI(OC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=KI(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=OC(t,e);return KI(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:vd({});if(5==a.type)i=this.visitKeyframes(a,t);else{let d=e.styles,p=!1;if(!d){p=!0;const w={};r.easing&&(w.easing=r.easing),d=vd(w)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(d,t);y.isEmptyStep=p,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of i)"string"==typeof p?p===_d?r.push(p):t.errors.push(new c.vHH(3002,!1)):r.push(Nk(p));let a=!1,d=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(d=p.get("easing"),p.delete("easing")),!a))for(let y of p.values())if(y.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:d,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&d.forEach((p,y)=>{const w=t.collectedStyles.get(t.currentQuerySelector),x=w.get(y);let T=!0;x&&(a!=i&&a>=x.startTime&&i<=x.endTime&&(t.errors.push(function CB(n,e,t,r,i){return new c.vHH(3010,!1)}()),T=!1),a=x.startTime),T&&w.set(y,{startTime:a,endTime:i}),t.options&&function t2(n,e,t){const r=e.params||{},i=Bk(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function gB(n){return new c.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function DB(){return new c.vHH(3011,!1)}()),r;let a=0;const d=[];let p=!1,y=!1,w=0;const x=e.steps.map(Pe=>{const rt=this._makeStyleAst(Pe,t);let _t=null!=rt.offset?rt.offset:function _2(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(rt.styles),ot=0;return null!=_t&&(a++,ot=rt.offset=_t),y=y||ot<0||ot>1,p=p||ot<w,w=ot,d.push(ot),rt});y&&t.errors.push(function xB(){return new c.vHH(3012,!1)}()),p&&t.errors.push(function AB(){return new c.vHH(3200,!1)}());const T=e.steps.length;let L=0;a>0&&a<T?t.errors.push(function IB(){return new c.vHH(3202,!1)}()):0==a&&(L=1/(T-1));const V=T-1,z=t.currentTime,re=t.currentAnimateTimings,Ce=re.duration;return x.forEach((Pe,rt)=>{const _t=L>0?rt==V?1:L*rt:d[rt],ot=_t*Ce;t.currentTime=z+re.delay+ot,re.duration=ot,this._validateStyleAst(Pe,t),Pe.offset=_t,r.styles.push(Pe)}),r}visitReference(e,t){return{type:8,animation:Vo(this,tw(e.animation),t),options:ig(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ig(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ig(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,d]=function g2(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(f2,"")),n=n.replace(/@\*/g,RC).replace(/@\w+/g,t=>RC+"-"+t.slice(1)).replace(/:animating/g,GI),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Lo(t.collectedStyles,t.currentQuerySelector,new Map);const p=Vo(this,tw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:p,originalSelector:e.selector,options:ig(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function SB(){return new c.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:OC(e.timings,t.errors,!0);return{type:12,animation:Vo(this,tw(e.animation),t),timings:r,options:null}}}class y2{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ig(n){return n?(n=ew(n)).params&&(n.params=function m2(n){return n?ew(n):null}(n.params)):n={},n}function KI(n,e,t){return{duration:n,delay:e,easing:t}}function YI(n,e,t,r,i,a,d=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:d,subTimeline:p}}class jC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const E2=new RegExp(":enter","g"),D2=new RegExp(":leave","g");function ZI(n,e,t,r,i,a=new Map,d=new Map,p,y,w=[]){return(new x2).buildKeyframes(n,e,t,r,i,a,d,p,y,w)}class x2{buildKeyframes(e,t,r,i,a,d,p,y,w,x=[]){w=w||new jC;const T=new QI(e,t,w,i,a,x,[]);T.options=y;const L=y.delay?lf(y.delay):0;T.currentTimeline.delayNextStep(L),T.currentTimeline.setStyles([d],null,T.errors,y),Vo(this,r,T);const V=T.timelines.filter(z=>z.containsAnimation());if(V.length&&p.size){let z;for(let re=V.length-1;re>=0;re--){const Ce=V[re];if(Ce.element===t){z=Ce;break}}z&&!z.allowOnlyTimelineStyles()&&z.setStyles([p],null,T.errors,y)}return V.length?V.map(z=>z.buildKeyframes()):[YI(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);a!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const d=null!=r.duration?lf(r.duration):null,p=null!=r.delay?lf(r.delay):null;return 0!==d&&e.forEach(y=>{const w=t.appendInstructionToTimeline(y,d,p);a=Math.max(a,w.duration+w.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Vo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=HC);const d=lf(a.delay);i.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>Vo(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?lf(e.options.delay):0;e.steps.forEach(d=>{const p=t.createSubContext(e.options);a&&p.delayNextStep(a),Vo(this,d,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return OC(t.params?FC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*a),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?lf(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=HC);let d=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((w,x)=>{t.currentQueryIndex=x;const T=t.createSubContext(e.options,w);a&&T.delayNextStep(a),w===t.element&&(y=T.currentTimeline),Vo(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,d=Math.abs(a.duration),p=d*(t.currentQueryTotal-1);let y=d*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const x=t.currentTimeline;y&&x.delayNextStep(y);const T=x.currentTime;Vo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const HC={};class QI{constructor(e,t,r,i,a,d,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=HC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new GC(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=lf(r.duration)),null!=r.delay&&(i.delay=lf(r.delay));const a=r.params;if(a){let d=i.params;d||(d=this.options.params={}),Object.keys(a).forEach(p=>{(!t||!d.hasOwnProperty(p))&&(d[p]=FC(a[p],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new QI(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=HC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new A2(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,d){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(E2,"."+this._enterClassName)).replace(D2,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),p.push(...w)}return!a&&0==p.length&&d.push(function TB(n){return new c.vHH(3014,!1)}()),p}}class GC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new GC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||_d),this._currentKeyframe.set(t,_d);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},d=function I2(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,_d)}else cf(i,t)}),t}(e,this._globalTimelineStyles);for(let[p,y]of d){const w=FC(y,a,r);this._pendingStyles.set(p,w),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??_d),this._updateStyle(p,w)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,y)=>{const w=cf(p,new Map,this._backFill);w.forEach((x,T)=>{"!"===x?e.add(T):x===_d&&t.add(T)}),r||w.set("offset",y/this.duration),i.push(w)});const a=e.size?NC(e.values()):[],d=t.size?NC(t.values()):[];if(r){const p=i[0],y=new Map(p);p.set("offset",0),y.set("offset",1),i=[p,y]}return YI(this.element,i,a,d,this.duration,this.startTime,this.easing,!1)}}class A2 extends GC{constructor(e,t,r,i,a,d,p=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],d=r+t,p=t/d,y=cf(e[0]);y.set("offset",0),a.push(y);const w=cf(e[0]);w.set("offset",$k(p)),a.push(w);const x=e.length-1;for(let T=1;T<=x;T++){let L=cf(e[T]);const V=L.get("offset");L.set("offset",$k((t+V*r)/d)),a.push(L)}r=d,t=0,i="",e=a}return YI(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function $k(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class XI{}const S2=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class T2 extends XI{normalizePropertyName(e,t){return qI(e)}normalizeStyleValue(e,t,r,i){let a="";const d=r.toString().trim();if(S2.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function _B(n,e){return new c.vHH(3005,!1)}())}return d+a}}function zk(n,e,t,r,i,a,d,p,y,w,x,T,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:d,timelines:p,queriedElements:y,preStyleProps:w,postStyleProps:x,totalTime:T,errors:L}}const JI={};class qk{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function M2(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,d,p,y,w,x){const T=[],L=this.ast.options&&this.ast.options.params||JI,z=this.buildStyles(r,p&&p.params||JI,T),re=y&&y.params||JI,Ce=this.buildStyles(i,re,T),Pe=new Set,rt=new Map,_t=new Map,ot="void"===i,It={params:k2(re,L),delay:this.ast.options?.delay},kt=x?[]:ZI(e,t,this.ast.animation,a,d,z,Ce,It,w,T);let tn=0;if(kt.forEach(Ed=>{tn=Math.max(Ed.duration+Ed.delay,tn)}),T.length)return zk(t,this._triggerName,r,i,ot,z,Ce,[],[],rt,_t,tn,T);kt.forEach(Ed=>{const Cd=Ed.element,vO=Lo(rt,Cd,new Set);Ed.preStyleProps.forEach(ag=>vO.add(ag));const lw=Lo(_t,Cd,new Set);Ed.postStyleProps.forEach(ag=>lw.add(ag)),Cd!==t&&Pe.add(Cd)});const Is=NC(Pe.values());return zk(t,this._triggerName,r,i,ot,z,Ce,kt,Is,rt,_t,tn)}}function k2(n,e){const t=ew(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class R2{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=ew(this.defaultParams);return Object.keys(e).forEach(a=>{const d=e[a];null!==d&&(i[a]=d)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((d,p)=>{d&&(d=FC(d,i,t));const y=this.normalizer.normalizePropertyName(p,t);d=this.normalizer.normalizeStyleValue(p,y,d,t),r.set(y,d)})}),r}}class F2{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new R2(i.style,i.options&&i.options.params||{},r))}),Wk(this.states,"true","1"),Wk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new qk(e,i,this.states))}),this.fallbackTransition=function N2(n,e,t){return new qk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(d=>d.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Wk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const P2=new jC;class L2{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=WI(this._driver,t,r,[]);if(r.length)throw function PB(n){return new c.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=xk(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let d;const p=new Map;if(a?(d=ZI(this._driver,t,a,HI,MC,new Map,new Map,r,P2,i),d.forEach(x=>{const T=Lo(p,x.element,new Map);x.postStyleProps.forEach(L=>T.set(L,null))})):(i.push(function LB(){return new c.vHH(3300,!1)}()),d=[]),i.length)throw function VB(n){return new c.vHH(3504,!1)}();p.forEach((x,T)=>{x.forEach((L,V)=>{x.set(V,this._driver.computeStyle(T,V,_d))})});const w=af(d.map(x=>{const T=p.get(x.element);return this._buildPlayer(x,new Map,T)}));return this._playersById.set(e,w),w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function BB(n){return new c.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=VI(t,"","","");return PI(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Kk="ng-animate-queued",eS="ng-animate-disabled",H2=[],Yk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},G2={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Va="__ng_removed";class tS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function W2(n){return n??null}(r?e.value:e),r){const a=ew(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const nw="void",nS=new tS(nw);class $2{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ba(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function UB(n,e){return new c.vHH(3302,!1)}();if(null==r||0==r.length)throw function jB(n){return new c.vHH(3303,!1)}();if(!function K2(n){return"start"==n||"done"==n}(r))throw function HB(n,e){return new c.vHH(3400,!1)}();const a=Lo(this._elementListeners,e,[]),d={name:t,phase:r,callback:i};a.push(d);const p=Lo(this._engine.statesByElement,e,new Map);return p.has(t)||(Ba(e,kC),Ba(e,kC+"-"+t),p.set(t,nS)),()=>{this._engine.afterFlush(()=>{const y=a.indexOf(d);y>=0&&a.splice(y,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function GB(n){return new c.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),d=new rS(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ba(e,kC),Ba(e,kC+"-"+t),this._engine.statesByElement.set(e,p=new Map));let y=p.get(t);const w=new tS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&w.absorbOptions(y.options),p.set(t,w),y||(y=nS),w.value!==nw&&y.value===w.value){if(!function Q2(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(y.params,w.params)){const re=[],Ce=a.matchStyles(y.value,y.params,re),Pe=a.matchStyles(w.value,w.params,re);re.length?this._engine.reportError(re):this._engine.afterFlush(()=>{rg(e,Ce),$c(e,Pe)})}return}const L=Lo(this._engine.playersByElement,e,[]);L.forEach(re=>{re.namespaceId==this.id&&re.triggerName==t&&re.queued&&re.destroy()});let V=a.matchTransition(y.value,w.value,e,w.params),z=!1;if(!V){if(!i)return;V=a.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:V,fromState:y,toState:w,player:d,isFallbackTransition:z}),z||(Ba(e,Kk),d.onStart(()=>{By(e,Kk)})),d.onDone(()=>{let re=this.players.indexOf(d);re>=0&&this.players.splice(re,1);const Ce=this._engine.playersByElement.get(e);if(Ce){let Pe=Ce.indexOf(d);Pe>=0&&Ce.splice(Pe,1)}}),this.players.push(d),L.push(d),d}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,RC,!0);r.forEach(i=>{if(i[Va])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),d=new Map;if(a){const p=[];if(a.forEach((y,w)=>{if(d.set(w,y.value),this._triggers.has(w)){const x=this.trigger(e,w,nw,i);x&&p.push(x)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,d),r&&af(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const d=a.name;if(i.has(d))return;i.add(d);const y=this._triggers.get(d).fallbackTransition,w=r.get(d)||nS,x=new tS(nw),T=new rS(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:y,fromState:w,toState:x,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Va];(!a||a===Yk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ba(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,d=this._elementListeners.get(a);d&&d.forEach(p=>{if(p.name==r.triggerName){const y=VI(a,r.triggerName,r.fromState.value,r.toState.value);y._data=e,PI(r.player,p.phase,y,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==a||0==d?a-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class z2{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new $2(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,p=this.driver.getParentElement(t);for(;p;){const y=i.get(p);if(y){const w=r.indexOf(y);r.splice(w+1,0,e),d=!0;break}p=this.driver.getParentElement(p)}d||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if($C(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!$C(t))return;const a=t[Va];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ba(e,eS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),By(e,eS))}removeNode(e,t,r,i){if($C(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==e&&d.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Va]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return $C(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,RC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,GI,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return af(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Va];if(t&&t.setForRemoval){if(e[Va]=Yk,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(eS)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ba(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?af(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function $B(n){return new c.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new jC,i=[],a=new Map,d=[],p=new Map,y=new Map,w=new Map,x=new Set;this.disabledNodes.forEach(ct=>{x.add(ct);const xt=this.driver.query(ct,".ng-animate-queued",!0);for(let Rt=0;Rt<xt.length;Rt++)x.add(xt[Rt])});const T=this.bodyNode,L=Array.from(this.statesByElement.keys()),V=Xk(L,this.collectedEnterElements),z=new Map;let re=0;V.forEach((ct,xt)=>{const Rt=HI+re++;z.set(xt,Rt),ct.forEach(dn=>Ba(dn,Rt))});const Ce=[],Pe=new Set,rt=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const xt=this.collectedLeaveElements[ct],Rt=xt[Va];Rt&&Rt.setForRemoval&&(Ce.push(xt),Pe.add(xt),Rt.hasAnimation?this.driver.query(xt,".ng-star-inserted",!0).forEach(dn=>Pe.add(dn)):rt.add(xt))}const _t=new Map,ot=Xk(L,Array.from(Pe));ot.forEach((ct,xt)=>{const Rt=MC+re++;_t.set(xt,Rt),ct.forEach(dn=>Ba(dn,Rt))}),e.push(()=>{V.forEach((ct,xt)=>{const Rt=z.get(xt);ct.forEach(dn=>By(dn,Rt))}),ot.forEach((ct,xt)=>{const Rt=_t.get(xt);ct.forEach(dn=>By(dn,Rt))}),Ce.forEach(ct=>{this.processLeaveNode(ct)})});const It=[],kt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Rt=>{const dn=Rt.player,yi=Rt.element;if(It.push(dn),this.collectedEnterElements.length){const Zi=yi[Va];if(Zi&&Zi.setForMove){if(Zi.previousTriggersValues&&Zi.previousTriggersValues.has(Rt.triggerName)){const lg=Zi.previousTriggersValues.get(Rt.triggerName),Ua=this.statesByElement.get(Rt.element);if(Ua&&Ua.has(Rt.triggerName)){const rD=Ua.get(Rt.triggerName);rD.value=lg,Ua.set(Rt.triggerName,rD)}}return void dn.destroy()}}const zc=!T||!this.driver.containsElement(T,yi),Bo=_t.get(yi),gf=z.get(yi),xr=this._buildInstruction(Rt,r,gf,Bo,zc);if(xr.errors&&xr.errors.length)return void kt.push(xr);if(zc)return dn.onStart(()=>rg(yi,xr.fromStyles)),dn.onDestroy(()=>$c(yi,xr.toStyles)),void i.push(dn);if(Rt.isFallbackTransition)return dn.onStart(()=>rg(yi,xr.fromStyles)),dn.onDestroy(()=>$c(yi,xr.toStyles)),void i.push(dn);const EO=[];xr.timelines.forEach(Zi=>{Zi.stretchStartingKeyframe=!0,this.disabledNodes.has(Zi.element)||EO.push(Zi)}),xr.timelines=EO,r.append(yi,xr.timelines),d.push({instruction:xr,player:dn,element:yi}),xr.queriedElements.forEach(Zi=>Lo(p,Zi,[]).push(dn)),xr.preStyleProps.forEach((Zi,lg)=>{if(Zi.size){let Ua=y.get(lg);Ua||y.set(lg,Ua=new Set),Zi.forEach((rD,MS)=>Ua.add(MS))}}),xr.postStyleProps.forEach((Zi,lg)=>{let Ua=w.get(lg);Ua||w.set(lg,Ua=new Set),Zi.forEach((rD,MS)=>Ua.add(MS))})});if(kt.length){const ct=[];kt.forEach(xt=>{ct.push(function zB(n,e){return new c.vHH(3505,!1)}())}),It.forEach(xt=>xt.destroy()),this.reportError(ct)}const tn=new Map,Is=new Map;d.forEach(ct=>{const xt=ct.element;r.has(xt)&&(Is.set(xt,xt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,tn))}),i.forEach(ct=>{const xt=ct.element;this._getPreviousPlayers(xt,!1,ct.namespaceId,ct.triggerName,null).forEach(dn=>{Lo(tn,xt,[]).push(dn),dn.destroy()})});const Ed=Ce.filter(ct=>eR(ct,y,w)),Cd=new Map;Qk(Cd,this.driver,rt,w,_d).forEach(ct=>{eR(ct,y,w)&&Ed.push(ct)});const lw=new Map;V.forEach((ct,xt)=>{Qk(lw,this.driver,new Set(ct),y,"!")}),Ed.forEach(ct=>{const xt=Cd.get(ct),Rt=lw.get(ct);Cd.set(ct,new Map([...Array.from(xt?.entries()??[]),...Array.from(Rt?.entries()??[])]))});const ag=[],bO=[],wO={};d.forEach(ct=>{const{element:xt,player:Rt,instruction:dn}=ct;if(r.has(xt)){if(x.has(xt))return Rt.onDestroy(()=>$c(xt,dn.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(dn.totalTime),void i.push(Rt);let yi=wO;if(Is.size>1){let Bo=xt;const gf=[];for(;Bo=Bo.parentNode;){const xr=Is.get(Bo);if(xr){yi=xr;break}gf.push(Bo)}gf.forEach(xr=>Is.set(xr,yi))}const zc=this._buildAnimation(Rt.namespaceId,dn,tn,a,lw,Cd);if(Rt.setRealPlayer(zc),yi===wO)ag.push(Rt);else{const Bo=this.playersByElement.get(yi);Bo&&Bo.length&&(Rt.parentPlayer=af(Bo)),i.push(Rt)}}else rg(xt,dn.fromStyles),Rt.onDestroy(()=>$c(xt,dn.toStyles)),bO.push(Rt),x.has(xt)&&i.push(Rt)}),bO.forEach(ct=>{const xt=a.get(ct.element);if(xt&&xt.length){const Rt=af(xt);ct.setRealPlayer(Rt)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Ce.length;ct++){const xt=Ce[ct],Rt=xt[Va];if(By(xt,MC),Rt&&Rt.hasAnimation)continue;let dn=[];if(p.size){let zc=p.get(xt);zc&&zc.length&&dn.push(...zc);let Bo=this.driver.query(xt,GI,!0);for(let gf=0;gf<Bo.length;gf++){let xr=p.get(Bo[gf]);xr&&xr.length&&dn.push(...xr)}}const yi=dn.filter(zc=>!zc.destroyed);yi.length?Y2(this,xt,yi):this.processLeaveNode(xt)}return Ce.length=0,ag.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const xt=this.players.indexOf(ct);this.players.splice(xt,1)}),ct.play()}),ag}elementContainsData(e,t){let r=!1;const i=t[Va];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let d=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(d=p)}else{const p=this.playersByElement.get(e);if(p){const y=!a||a==nw;p.forEach(w=>{w.queued||!y&&w.triggerName!=i||d.push(w)})}}return(r||i)&&(d=d.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),d}_beforeAnimationBuild(e,t,r){const a=t.element,d=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const w=y.element,x=w!==a,T=Lo(r,w,[]);this._getPreviousPlayers(w,x,d,p,t.toState).forEach(V=>{const z=V.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),V.destroy(),T.push(V)})}rg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,d){const p=t.triggerName,y=t.element,w=[],x=new Set,T=new Set,L=t.timelines.map(z=>{const re=z.element;x.add(re);const Ce=re[Va];if(Ce&&Ce.removedBeforeQueried)return new Yb(z.duration,z.delay);const Pe=re!==y,rt=function Z2(n){const e=[];return Jk(n,e),e}((r.get(re)||H2).map(tn=>tn.getRealPlayer())).filter(tn=>!!tn.element&&tn.element===re),_t=a.get(re),ot=d.get(re),It=xk(0,this._normalizer,0,z.keyframes,_t,ot),kt=this._buildPlayer(z,It,rt);if(z.subTimeline&&i&&T.add(re),Pe){const tn=new rS(e,p,re);tn.setRealPlayer(kt),w.push(tn)}return kt});w.forEach(z=>{Lo(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function q2(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,z.element,z))}),x.forEach(z=>Ba(z,Fk));const V=af(L);return V.onDestroy(()=>{x.forEach(z=>By(z,Fk)),$c(y,t.toStyles)}),T.forEach(z=>{Lo(i,z,[]).push(V)}),V}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Yb(e.duration,e.delay)}}class rS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Yb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>PI(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Lo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function $C(n){return n&&1===n.nodeType}function Zk(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Qk(n,e,t,r,i){const a=[];t.forEach(y=>a.push(Zk(y)));const d=[];r.forEach((y,w)=>{const x=new Map;y.forEach(T=>{const L=e.computeStyle(w,T,i);x.set(T,L),(!L||0==L.length)&&(w[Va]=G2,d.push(w))}),n.set(w,x)});let p=0;return t.forEach(y=>Zk(y,a[p++])),d}function Xk(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),a=new Map;function d(p){if(!p)return 1;let y=a.get(p);if(y)return y;const w=p.parentNode;return y=t.has(w)?w:i.has(w)?1:d(w),a.set(p,y),y}return e.forEach(p=>{const y=d(p);1!==y&&t.get(y).push(p)}),t}function Ba(n,e){n.classList?.add(e)}function By(n,e){n.classList?.remove(e)}function Y2(n,e,t){af(t).onDone(()=>n.processLeaveNode(e))}function Jk(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof gM?Jk(r.players,e):e.push(r)}}function eR(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class zC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new z2(e,t,r),this._timelineEngine=new L2(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const d=e+"-"+i;let p=this._triggerCache[d];if(!p){const y=[],x=WI(this._driver,a,y,[]);if(y.length)throw function FB(n,e){return new c.vHH(3404,!1)}();p=function O2(n,e,t){return new F2(n,e,t)}(i,x,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,d]=Ak(r);this._timelineEngine.command(a,t,d,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[d,p]=Ak(r);return this._timelineEngine.listen(d,t,p,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let J2=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&$c(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($c(this._element,this._initialStyles),this._endStyles&&($c(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(rg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rg(this._element,this._endStyles),this._endStyles=null),$c(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function iS(n){let e=null;return n.forEach((t,r)=>{(function eU(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class tR{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Uk(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class tU{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Mk(e,t)}getParentElement(e){return UI(e)}query(e,t,r){return kk(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,d=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(y.easing=a);const w=new Map,x=d.filter(V=>V instanceof tR);(function s2(n,e){return 0===n||0===e})(r,i)&&x.forEach(V=>{V.currentSnapshot.forEach((z,re)=>w.set(re,z))});let T=function e2(n){return n.length?n[0]instanceof Map?n:n.map(e=>Nk(e)):[]}(t).map(V=>cf(V));T=function o2(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,d)=>{r.has(d)||i.push(d),r.set(d,a)}),i.length)for(let a=1;a<e.length;a++){let d=e[a];i.forEach(p=>d.set(p,Uk(n,p)))}}return e}(e,T,w);const L=function X2(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=iS(e[0]),e.length>1&&(r=iS(e[e.length-1]))):e instanceof Map&&(t=iS(e)),t||r?new J2(n,t,r):null}(e,T);return new tR(e,T,y,L)}}let nU=(()=>{class n extends hM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?fM(t):t;return nR(this._renderer,null,r,"register",[i]),new rU(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class rU extends class UN{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new iU(this._id,e,t||{},this._renderer)}}class iU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return nR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function nR(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const rR="@.disabled";let sU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,d)=>{const p=d?.parentNode(a);p&&d.removeChild(p,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let x=this._rendererCache.get(a);return x||(x=new iR("",a,this.engine),this._rendererCache.set(a,x)),x}const d=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=x=>{Array.isArray(x)?x.forEach(y):this.engine.registerTrigger(d,p,t,x.name,x)};return r.data.animation.forEach(y),new oU(this,p,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[d,p]=a;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(zC),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class iR{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==rR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class oU extends iR{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==rR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function aU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),d="";return"@"!=a.charAt(0)&&([a,d]=function lU(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let cU=(()=>{class n extends zC{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne),c.LFG(jI),c.LFG(XI),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const sR=[{provide:hM,useClass:nU},{provide:XI,useFactory:function uU(){return new T2}},{provide:zC,useClass:cU},{provide:c.FYo,useFactory:function dU(n,e,t){return new sU(n,e,t)},deps:[as,zC,c.R0b]}],sS=[{provide:jI,useFactory:()=>new tU},{provide:c.QbO,useValue:"BrowserAnimations"},...sR],oR=[{provide:jI,useClass:Rk},{provide:c.QbO,useValue:"NoopAnimations"},...sR];let hU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?oR:sS}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:sS,imports:[wn]}),n})(),fU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$r,$r]}),n})(),pU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[xN,$r,$r]}),n})();function gU(n,e){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const t=c.oxw(),r=c.MAs(1);c.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),c.uIk("r",t._getCircleRadius())}}function mU(n,e){if(1&n&&(c.O4$(),c._UZ(0,"circle",4)),2&n){const t=c.oxw(),r=c.MAs(1);c.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),c.uIk("r",t._getCircleRadius())}}const _U=Wb(class{constructor(n){this._elementRef=n}},"primary"),vU=new c.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function bU(){return{diameter:100}}});class uf extends _U{constructor(e,t,r,i,a,d,p,y){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=Hc.w0.EMPTY,this.mode="determinate";const w=uf._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),w.has(r.head)||w.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!a&&!a._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),a&&(a.color&&(this.color=this.defaultColor=a.color),a.diameter&&(this.diameter=a.diameter),a.strokeWidth&&(this.strokeWidth=a.strokeWidth)),t.isBrowser&&t.SAFARI&&p&&d&&y&&(this._resizeSubscription=p.change(150).subscribe(()=>{"indeterminate"===this.mode&&y.run(()=>d.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=Gb(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=Gb(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Gb(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=CT(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=uf._diameters;let i=r.get(e);if(!i||!i.has(t)){const a=this._document.createElement("style");a.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),a.textContent=this._getAnimationText(),e.appendChild(a),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}uf._diameters=new WeakMap,uf.\u0275fac=function(e){return new(e||uf)(c.Y36(c.SBq),c.Y36(Po),c.Y36(ne,8),c.Y36(c.QbO,8),c.Y36(vU),c.Y36(c.sBO),c.Y36(oI),c.Y36(c.R0b))},uf.\u0275cmp=c.Xpm({type:uf,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(c.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),c.Udp("width",t.diameter,"px")("height",t.diameter,"px"),c.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[c.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(c.O4$(),c.TgZ(0,"svg",0,1),c.YNc(2,gU,1,11,"circle",2),c.YNc(3,mU,1,9,"circle",3),c.qZA()),2&e&&(c.Udp("width",t.diameter,"px")("height",t.diameter,"px"),c.Q6J("ngSwitch","indeterminate"===t.mode),c.uIk("viewBox",t._getViewBox()),c.xp6(2),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngSwitchCase",!1))},dependencies:[qo,ti],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let EU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$r,Ns,$r]}),n})(),hO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),Nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[hO,uM,$r,UT,hO,$r]}),n})();const SS_firebase={projectId:"copa-b2abd",appId:"1:75383122449:web:a9b67f027fcf2c5929dfb0",storageBucket:"copa-b2abd.appspot.com",locationId:"us-central",apiKey:"AIzaSyAnt5IfH33ZBvde1L3bctlwjjpqHkDjEGY",authDomain:"copa-b2abd.firebaseapp.com",messagingSenderId:"75383122449"};function fO(n){return new ln.y(e=>{(0,md.Xf)(n()).subscribe(e)})}const pf=new ln.y(fI.Z);class Lj extends ln.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,In.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Hc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Hc.w0.EMPTY)}return e}refCount(){return function Pj(){return(0,In.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}()(this)}}const Bj={connector:()=>new en.x};function pO(n,e=Bj){const{connector:t}=e;return(0,In.e)((r,i)=>{const a=t();(0,md.Xf)(n(function Vj(n){return new ln.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}function gO(n,e){return e?t=>ol(e.pipe(ki(1),function Hj(){return(0,In.e)((n,e)=>{n.subscribe((0,gn.x)(e,fI.Z))})}()),t.pipe(gO(n))):(0,pC.z)((t,r)=>n(t,r).pipe(ki(1),function Gj(n){return(0,Ot.U)(()=>n)}(t)))}const aw="Service workers are disabled or not supported by this browser";class nD{constructor(e){if(this.serviceWorker=e,e){const r=$b(e,"controllerchange").pipe((0,Ot.U)(()=>e.controller)),a=ol(fO(()=>An(e.controller)),r);this.worker=a.pipe(rn(x=>!!x)),this.registration=this.worker.pipe(Oo(()=>e.getRegistration()));const w=$b(e,"message").pipe((0,Ot.U)(x=>x.data)).pipe(rn(x=>x&&x.type)).pipe(function jj(n){return n?e=>pO(n)(e):e=>function Uj(n,e){const t=(0,Ds.m)(n)?n:()=>n;return(0,Ds.m)(e)?pO(e,{connector:t}):r=>new Lj(r,t)}(new en.x)(e)}());w.connect(),this.events=w}else this.worker=this.events=this.registration=function zj(n){return fO(()=>GM(new Error(n)))}(aw)}postMessage(e,t){return this.worker.pipe(ki(1),(0,Oy.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,d])=>d)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(rn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(ki(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(rn(t=>t.nonce===e),ki(1),(0,Ot.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let qj=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new en.x,!t.isEnabled)return this.messages=pf,this.notificationClicks=pf,void(this.subscription=pf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ot.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ot.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,Ot.U)(i=>i.pushManager));const r=this.pushManager.pipe(Oo(i=>i.getSubscription()));this.subscription=(0,ef.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(aw));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let d=0;d<i.length;d++)a[d]=i.charCodeAt(d);return r.applicationServerKey=a,this.pushManager.pipe(Oo(d=>d.subscribe(r)),ki(1)).toPromise().then(d=>(this.subscriptionChanges.next(d),d))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ki(1),Oo(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(aw))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(nD))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Wj=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=pf,this.available=pf,this.activated=pf,void(this.unrecoverable=pf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(rn(r=>"VERSION_READY"===r.type),(0,Ot.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(aw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(aw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(nD))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class TS{}const mO=new c.OlP("NGSW_REGISTER_SCRIPT");function Kj(n,e,t,r){return()=>{if(!wi(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let a;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)a=t.registrationStrategy();else{const[p,...y]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(p){case"registerImmediately":a=An(null);break;case"registerWithDelay":a=yO(+y[0]||0);break;case"registerWhenStable":a=y[0]?(0,ef.T)(_O(n),yO(+y[0])):_O(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(c.R0b).runOutsideAngular(()=>a.pipe(ki(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(p=>console.error("Service worker registration failed with:",p))))}}function yO(n){return An(null).pipe(function $j(n,e=us.z){const t=bT(n,e);return gO(()=>t)}(n))}function _O(n){return n.get(c.z2F).isStable.pipe(rn(t=>t))}function Yj(n,e){return new nD(wi(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let Zj=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:mO,useValue:t},{provide:TS,useValue:r},{provide:nD,useFactory:Yj,deps:[TS,c.Lbi]},{provide:c.ip1,useFactory:Kj,deps:[c.zs3,mO,TS,c.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[qj,Wj]}),n})(),Qj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[AL]}),n.\u0275inj=c.cJS({imports:[wn,hB,hU,S1,J1,fU,pU,dM,tL,EU,wL,Nj,yM,Vr.hO.initializeApp(SS_firebase),Hb,Zj.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),n})();(0,c.G48)(),vf().bootstrapModule(Qj).catch(n=>console.error(n))},5867:(at,Ae,F)=>{F.d(Ae,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=F(9681);(0,c.registerVersion)("firebase","9.9.3","app")},127:(at,Ae,F)=>{F.d(Ae,{Z:()=>c.Z});var c=F(3942);c.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(at,Ae,F)=>{F.r(Ae);var c=F(5861),te=F(3942),O=F(2090),ue=F(9681),ae=F(655),fe=F(1877),ne=F(4859);const Ie=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ge=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new fe.Yd("@firebase/auth");function Je(_,...f){Ye.logLevel<=fe.in.ERROR&&Ye.error(`Auth (${ue.SDK_VERSION}): ${_}`,...f)}function De(_,...f){throw He(_,...f)}function ve(_,...f){return He(_,...f)}function we(_,f,m){const b=Object.assign(Object.assign({},Ge()),{[f]:m});return new O.LL("auth","Firebase",b).create(f,{appName:_.name})}function Be(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&De(_,"argument-error"),we(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(_,...f){if("string"!=typeof _){const m=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=_.name),_._errorFactory.create(m,...b)}return ge.create(_,...f)}function U(_,f,...m){if(!_)throw He(f,...m)}function _e(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Je(f),new Error(f)}function Z(_,f){_||_e(f)}const J=new Map;function oe(_){Z(_ instanceof Function,"Expected a class definition");let f=J.get(_);return f?(Z(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,J.set(_,f),f)}function Oe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ht(){return"http:"===$t()||"https:"===$t()}function $t(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class on{constructor(f,m){this.shortDelay=f,this.longDelay=m,Z(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ht(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bn(_,f){Z(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Wt{static initialize(f,m,b){this.fetchImpl=f,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zr=new on(3e4,6e4);function Pt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function an(_,f,m,b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,c.Z)(function*(_,f,m,b,S={}){return ai(_,S,(0,c.Z)(function*(){let R={},K={};b&&("GET"===f?K=b:R={body:JSON.stringify(b)});const ce=(0,O.xO)(Object.assign({key:_.config.apiKey},K)).slice(1),Le=yield _._getAdditionalHeaders();return Le["Content-Type"]="application/json",_.languageCode&&(Le["X-Firebase-Locale"]=_.languageCode),Wt.fetch()(Qi(_,_.config.apiHost,m,ce),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ai(_,f,m){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(_,f,m){_._canInitEmulator=!1;const b=Object.assign(Object.assign({},Kt),f);try{const S=new li(_),R=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const K=yield R.json();if("needConfirmation"in K)throw Ni(_,"account-exists-with-different-credential",K);if(R.ok&&!("errorMessage"in K))return K;{const ce=R.ok?K.errorMessage:K.error.message,[Le,Xe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ni(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===Le)throw Ni(_,"email-already-in-use",K);if("USER_DISABLED"===Le)throw Ni(_,"user-disabled",K);const mt=b[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw we(_,mt,Xe);De(_,mt)}}catch(S){if(S instanceof O.ZR)throw S;De(_,"network-request-failed")}})).apply(this,arguments)}function qr(_,f,m,b){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,c.Z)(function*(_,f,m,b,S={}){const R=yield an(_,f,m,b,S);return"mfaPendingCredential"in R&&De(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Qi(_,f,m,b){const S=`${f}${m}?${b}`;return _.config.emulator?Bn(_.config,S):`${_.config.apiScheme}://${S}`}class li{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(ve(this.auth,"network-request-failed")),zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ni(_,f,m){const b={appName:_.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const S=ve(_,f,b);return S.customData._tokenResponse=m,S}function pn(){return(pn=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function _i(_,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Pi(_,f){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function jn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function mn(){return(mn=(0,c.Z)(function*(_,f=!1){const m=(0,O.m9)(_),b=yield m.getIdToken(f),S=Ze(b);U(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,K=R?.sign_in_provider;return{claims:S,token:b,authTime:jn(it(S.auth_time)),issuedAtTime:jn(it(S.iat)),expirationTime:jn(it(S.exp)),signInProvider:K||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function it(_){return 1e3*Number(_)}function Ze(_){var f;const[m,b,S]=_.split(".");if(void 0===m||void 0===b||void 0===S)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(b);return R?JSON.parse(R):(Je("Failed to decode base64 JWT payload"),null)}catch(R){return Je("Caught error parsing JWT payload as JSON",null===(f=R)||void 0===f?void 0:f.toString()),null}}function gr(_,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(b){throw b instanceof O.ZR&&Lt(b)&&_.auth.currentUser===_&&(yield _.auth.signOut()),b}})).apply(this,arguments)}function Lt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Xn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),b)}iteration(){var f=this;return(0,c.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(m=b)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Ss{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(_){return Li.apply(this,arguments)}function Li(){return(Li=(0,c.Z)(function*(_){var f;const m=_.auth,b=yield _.getIdToken(),S=yield gr(_,Pi(m,{idToken:b}));U(S?.users.length,m,"internal-error");const R=S.users[0];_._notifyReloadListener(R);const K=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?B(R.providerUserInfo):[],ce=G(_.providerData,K),mt=!!_.isAnonymous&&!(_.email&&R.passwordHash||ce?.length),dt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new Ss(R.createdAt,R.lastLoginAt),isAnonymous:mt};Object.assign(_,dt)})).apply(this,arguments)}function Y(){return(Y=(0,c.Z)(function*(_){const f=(0,O.m9)(_);yield Yt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function G(_,f){return[..._.filter(b=>!f.some(S=>S.providerId===b.providerId)),...f]}function B(_){return _.map(f=>{var{providerId:m}=f,b=(0,ae._T)(f,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function W(){return(W=(0,c.Z)(function*(_,f){const m=yield ai(_,{},(0,c.Z)(function*(){const b=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:R}=_.config,K=Qi(_,S,"/v1/token",`key=${R}`),ce=yield _._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(K,{method:"POST",headers:ce,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function jo(_){const f=Ze(_);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var b=this;return(0,c.Z)(function*(){return U(!b.accessToken||b.refreshToken,f,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var b=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:K}=yield function $(_,f){return W.apply(this,arguments)}(f,m);b.updateTokensAndExpiration(S,R,Number(K))})()}updateTokensAndExpiration(f,m,b){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,m){const{refreshToken:b,accessToken:S,expirationTime:R}=m,K=new xe;return b&&(U("string"==typeof b,"internal-error",{appName:f}),K.refreshToken=b),S&&(U("string"==typeof S,"internal-error",{appName:f}),K.accessToken=S),R&&(U("number"==typeof R,"internal-error",{appName:f}),K.expirationTime=R),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new xe,this.toJSON())}_performRefresh(){return _e("not implemented")}}function Ve(_,f){U("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class lt{constructor(f){var{uid:m,auth:b,stsTokenManager:S}=f,R=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Ss(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,c.Z)(function*(){const b=yield gr(m,m.stsTokenManager.getToken(m.auth,f));return U(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(f){return function to(_){return mn.apply(this,arguments)}(this,f)}reload(){return function jt(_){return Y.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new lt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var b=this;return(0,c.Z)(function*(){let S=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield Yt(b)),yield b.auth._persistUserIfCurrent(b),S&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,c.Z)(function*(){const m=yield f.getIdToken();return yield gr(f,function gt(_,f){return pn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var b,S,R,K,ce,Le,Xe,mt;const dt=null!==(b=m.displayName)&&void 0!==b?b:void 0,Yn=null!==(S=m.email)&&void 0!==S?S:void 0,$i=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,bl=null!==(K=m.photoURL)&&void 0!==K?K:void 0,yc=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,Iu=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,Wf=null!==(Xe=m.createdAt)&&void 0!==Xe?Xe:void 0,_c=null!==(mt=m.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:vc,emailVerified:Fg,isAnonymous:Kf,providerData:wl,stsTokenManager:Ng}=m;U(vc&&Ng,f,"internal-error");const Yf=xe.fromJSON(this.name,Ng);U("string"==typeof vc,f,"internal-error"),Ve(dt,f.name),Ve(Yn,f.name),U("boolean"==typeof Fg,f,"internal-error"),U("boolean"==typeof Kf,f,"internal-error"),Ve($i,f.name),Ve(bl,f.name),Ve(yc,f.name),Ve(Iu,f.name),Ve(Wf,f.name),Ve(_c,f.name);const Zf=new lt({uid:vc,auth:f,email:Yn,emailVerified:Fg,displayName:dt,isAnonymous:Kf,photoURL:bl,phoneNumber:$i,tenantId:yc,stsTokenManager:Yf,createdAt:Wf,lastLoginAt:_c});return wl&&Array.isArray(wl)&&(Zf.providerData=wl.map(n_=>Object.assign({},n_))),Iu&&(Zf._redirectEventId=Iu),Zf}static _fromIdTokenResponse(f,m,b=!1){return(0,c.Z)(function*(){const S=new xe;S.updateFromServerResponse(m);const R=new lt({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:b});return yield Yt(R),R})()}}const Zt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,b){var S=this;return(0,c.Z)(function*(){S.storage[m]=b})()}_get(m){var b=this;return(0,c.Z)(function*(){const S=b.storage[m];return void 0===S?null:S})()}_remove(m){var b=this;return(0,c.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return _.type="NONE",_})();function ar(_,f,m){return`firebase:${_}:${f}:${m}`}class tt{constructor(f,m,b){this.persistence=f,this.auth=m,this.userKey=b;const{config:S,name:R}=this.auth;this.fullUserKey=ar(this.userKey,S.apiKey,R),this.fullPersistenceKey=ar("persistence",S.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?lt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,c.Z)(function*(){if(m.persistence===f)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,b="authUser"){return(0,c.Z)(function*(){if(!m.length)return new tt(oe(Zt),f,b);const S=(yield Promise.all(m.map(function(){var Xe=(0,c.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let R=S[0]||oe(Zt);const K=ar(b,f.config.apiKey,f.name);let ce=null;for(const Xe of m)try{const mt=yield Xe._get(K);if(mt){const dt=lt._fromJSON(f,mt);Xe!==R&&(ce=dt),R=Xe;break}}catch{}const Le=S.filter(Xe=>Xe._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],ce&&(yield R._set(K,ce.toJSON())),yield Promise.all(m.map(function(){var Xe=(0,c.Z)(function*(mt){if(mt!==R)try{yield mt._remove(K)}catch{}});return function(mt){return Xe.apply(this,arguments)}}())),new tt(R,f,b)):new tt(R,f,b)})()}}function fn(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(We(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(vn(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(nn(f))return"Blackberry";if(Hn(f))return"Webos";if(mr(f))return"Safari";if((f.includes("chrome/")||Ar(f))&&!f.includes("edge/"))return"Chrome";if(vt(f))return"Android";{const b=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function vn(_=(0,O.z$)()){return/firefox\//i.test(_)}function mr(_=(0,O.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ar(_=(0,O.z$)()){return/crios\//i.test(_)}function We(_=(0,O.z$)()){return/iemobile/i.test(_)}function vt(_=(0,O.z$)()){return/android/i.test(_)}function nn(_=(0,O.z$)()){return/blackberry/i.test(_)}function Hn(_=(0,O.z$)()){return/webos/i.test(_)}function ci(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function ja(_=(0,O.z$)()){return ci(_)||vt(_)||Hn(_)||nn(_)||/windows phone/i.test(_)||We(_)}function Mt(_,f=[]){let m;switch(_){case"Browser":m=fn((0,O.z$)());break;case"Worker":m=`${fn((0,O.z$)())}-${_}`;break;default:m=_}const b=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${b}`}class Ha{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const b=R=>new Promise((K,ce)=>{try{K(f(R))}catch(Le){ce(Le)}});b.onAbort=m,this.queue.push(b);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,c.Z)(function*(){var b;if(m.auth.currentUser===f)return;const S=[];try{for(const R of m.queue)yield R(f),R.onAbort&&S.push(R.onAbort)}catch(R){S.reverse();for(const K of S)try{K()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=R)||void 0===b?void 0:b.message})}})()}}class Ho{constructor(f,m,b){this.app=f,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ms(this),this.idTokenSubscription=new Ms(this),this.beforeStateQueue=new Ha(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,m){var b=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,R;if(!b._deleted&&(b.persistenceManager=yield tt.create(b,f),!b._deleted)){if(null!==(S=b._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(R=b.currentUser)||void 0===R?void 0:R.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,c.Z)(function*(){var b;const S=yield m.assertedPersistence.getCurrentUser();let R=S,K=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Le=R?._redirectEventId,Xe=yield m.tryRedirectSignIn(f);(!ce||ce===Le)&&Xe?.user&&(R=Xe.user,K=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(K)try{yield m.beforeStateQueue.runMiddleware(R)}catch(ce){R=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return U(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var m=this;return(0,c.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,c.Z)(function*(){var b;try{yield Yt(f)}catch(S){if("auth/network-request-failed"!==(null===(b=S)||void 0===b?void 0:b.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,c.Z)(function*(){const b=f?(0,O.m9)(f):null;return b&&U(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(f,m=!1){var b=this;return(0,c.Z)(function*(){if(!b._deleted)return f&&U(b.tenantId===f.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(f)),b.queue((0,c.Z)(function*(){yield b.directlySetCurrentUser(f),b.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,m,b){return this.registerStateListener(this.authStateSubscription,f,m,b)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,b){return this.registerStateListener(this.idTokenSubscription,f,m,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var b=this;return(0,c.Z)(function*(){const S=yield b.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const b=f&&oe(f)||m._popupRedirectResolver;U(b,m,"argument-error"),m.redirectPersistenceManager=yield tt.create(m,[oe(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,c.Z)(function*(){var b,S;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,c.Z)(function*(){if(f===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,b,S){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),K=this._isInitialized?Promise.resolve():this._initializationPromise;return U(K,this,"internal-error"),K.then(()=>R(this.currentUser)),"function"==typeof m?f.addObserver(m,b,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Mt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var m;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(b["X-Firebase-Client"]=S),b})()}}function xn(_){return(0,O.m9)(_)}class Ms{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ks(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Wr(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class no{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return _e("not implemented")}_getIdTokenResponse(f){return _e("not implemented")}_linkToIdToken(f,m){return _e("not implemented")}_getReauthenticationResolver(f){return _e("not implemented")}}function Vt(_,f){return qc.apply(this,arguments)}function qc(){return(qc=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:resetPassword",Pt(_,f))})).apply(this,arguments)}function jl(_,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ga(_,f){return Os.apply(this,arguments)}function Os(){return(Os=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:update",Pt(_,f))})).apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithPassword",Pt(_,f))})).apply(this,arguments)}function Gn(_,f){return $a.apply(this,arguments)}function $a(){return($a=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:sendOobCode",Pt(_,f))})).apply(this,arguments)}function Sr(_,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,c.Z)(function*(_,f){return Gn(_,f)})).apply(this,arguments)}function zo(_,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,c.Z)(function*(_,f){return Gn(_,f)})).apply(this,arguments)}function qo(_,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(_,f){return Gn(_,f)})).apply(this,arguments)}function cg(_,f){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,c.Z)(function*(_,f){return Gn(_,f)})).apply(this,arguments)}function Wc(){return(Wc=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithEmailLink",Pt(_,f))})).apply(this,arguments)}function xd(){return(xd=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithEmailLink",Pt(_,f))})).apply(this,arguments)}class Kc extends no{constructor(f,m,b,S=null){super("password",b),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new Kc(f,m,"password")}static _fromEmailAndCode(f,m,b=null){return new Kc(f,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,c.Z)(function*(){switch(m.signInMethod){case"password":return function $o(_,f){return es.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function mf(_,f){return Wc.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,m){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return jl(f,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Dd(_,f){return xd.apply(this,arguments)}(f,{idToken:m,email:b._email,oobCode:b._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function lr(_,f){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithIdp",Pt(_,f))})).apply(this,arguments)}class ts extends no{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ts(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):De("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:S}=m,R=(0,ae._T)(m,["providerId","signInMethod"]);if(!b||!S)return null;const K=new ts(b,S);return K.idToken=R.idToken||void 0,K.accessToken=R.accessToken||void 0,K.secret=R.secret,K.nonce=R.nonce,K.pendingToken=R.pendingToken||null,K}_getIdTokenResponse(f){return lr(f,this.buildRequest())}_linkToIdToken(f,m){const b=this.buildRequest();return b.idToken=m,lr(f,b)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,lr(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,O.xO)(m)}return f}}function dg(_,f){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:sendVerificationCode",Pt(_,f))})).apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithPhoneNumber",Pt(_,f))})).apply(this,arguments)}function Id(){return(Id=(0,c.Z)(function*(_,f){const m=yield qr(_,"POST","/v1/accounts:signInWithPhoneNumber",Pt(_,f));if(m.temporaryProof)throw Ni(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const fg={USER_NOT_FOUND:"user-not-found"};function za(){return(za=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithPhoneNumber",Pt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),fg)})).apply(this,arguments)}class Wo extends no{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Wo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Wo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Zc(_,f){return Fs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function hg(_,f){return Id.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Sd(_,f){return za.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:b,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:b,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:b,phoneNumber:S,temporaryProof:R}=f;return b||m||S||R?new Wo({verificationId:m,verificationCode:b,phoneNumber:S,temporaryProof:R}):null}}class bi{constructor(f){var m,b,S,R,K,ce;const Le=(0,O.zd)((0,O.pd)(f)),Xe=null!==(m=Le.apiKey)&&void 0!==m?m:null,mt=null!==(b=Le.oobCode)&&void 0!==b?b:null,dt=function jy(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);U(Xe&&mt&&dt,"argument-error"),this.apiKey=Xe,this.operation=dt,this.code=mt,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(K=Le.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ce=Le.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const m=function Td(_){const f=(0,O.zd)((0,O.pd)(_)).link,m=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,b=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(b?(0,O.zd)((0,O.pd)(b)).link:null)||b||m||f||_}(f);try{return new bi(m)}catch{return null}}}let Ko=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,b){return Kc._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const S=bi.parseLink(b);return U(S,"argument-error"),Kc._fromEmailAndCode(m,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Vi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class io extends Vi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Yo extends io{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return U("providerId"in m&&"signInMethod"in m,"argument-error"),ts._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Yo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Yo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:S,pendingToken:R,nonce:K,providerId:ce}=f;if(!b&&!S&&!m&&!R||!ce)return null;try{return new Yo(ce)._credential({idToken:m,accessToken:b,nonce:K,pendingToken:R})}catch{return null}}}let Zo=(()=>{class _ extends io{constructor(){super("facebook.com")}static credential(m){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),qa=(()=>{class _ extends io{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:S}=m;if(!b&&!S)return null;try{return _.credential(b,S)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),kd=(()=>{class _ extends io{constructor(){super("github.com")}static credential(m){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ns extends no{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return lr(f,this.buildRequest())}_linkToIdToken(f,m){const b=this.buildRequest();return b.idToken=m,lr(f,b)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,lr(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:S,pendingToken:R}=m;return b&&S&&R&&b===S?new Ns(b,R):null}static _create(f,m){return new Ns(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends Vi{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Kr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Kr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Ns.fromJSON(f);return U(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:b}=f;if(!m||!b)return null;try{return Ns._create(b,m)}catch{return null}}}let Od=(()=>{class _ extends io{constructor(){super("twitter.com")}static credential(m,b){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:S}=m;if(!b||!S)return null;try{return _.credential(b,S)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Qo(_,f){return wi.apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signUp",Pt(_,f))})).apply(this,arguments)}class Jn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,b,S=!1){return(0,c.Z)(function*(){const R=yield lt._fromIdTokenResponse(f,b,S),K=$n(b);return new Jn({user:R,providerId:K,_tokenResponse:b,operationType:m})})()}static _forOperation(f,m,b){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const S=$n(b);return new Jn({user:f,providerId:S,_tokenResponse:b,operationType:m})})()}}function $n(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function yf(){return(yf=(0,c.Z)(function*(_){var f;const m=xn(_);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Jn({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield Qo(m,{returnSecureToken:!0}),S=yield Jn._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Xo extends O.ZR{constructor(f,m,b,S){var R;super(m.code,m.message),this.operationType=b,this.user=S,Object.setPrototypeOf(this,Xo.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,m,b,S){return new Xo(f,m,b,S)}}function ui(_,f,m,b){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Xo._fromErrorAndOperation(_,R,f,b):R})}function ns(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function rs(){return(rs=(0,c.Z)(function*(_,f){const m=(0,O.m9)(_);yield Ei(!0,m,f);const{providerUserInfo:b}=yield _i(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=ns(b||[]);return m.providerData=m.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Tr(_,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,c.Z)(function*(_,f,m=!1){const b=yield gr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return Jn._forOperation(_,"link",b)})).apply(this,arguments)}function Ei(_,f,m){return is.apply(this,arguments)}function is(){return(is=(0,c.Z)(function*(_,f,m){yield Yt(f);const S=!1===_?"provider-already-linked":"no-such-provider";U(ns(f.providerData).has(m)===_,f.auth,S)})).apply(this,arguments)}function ss(_,f){return os.apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(_,f,m=!1){var b;const{auth:S}=_,R="reauthenticate";try{const K=yield gr(_,ui(S,R,f,_),m);U(K.idToken,S,"internal-error");const ce=Ze(K.idToken);U(ce,S,"internal-error");const{sub:Le}=ce;return U(_.uid===Le,S,"user-mismatch"),Jn._forOperation(_,R,K)}catch(K){throw"auth/user-not-found"===(null===(b=K)||void 0===b?void 0:b.code)&&De(S,"user-mismatch"),K}})).apply(this,arguments)}function ea(_,f){return Et.apply(this,arguments)}function Et(){return(Et=(0,c.Z)(function*(_,f,m=!1){const b="signIn",S=yield ui(_,b,f),R=yield Jn._fromIdTokenResponse(_,b,S);return m||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Fn(_,f){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,c.Z)(function*(_,f){return ea(xn(_),f)})).apply(this,arguments)}function Gl(_,f){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,c.Z)(function*(_,f){const m=(0,O.m9)(_);return yield Ei(!1,m,f.providerId),Tr(m,f)})).apply(this,arguments)}function so(_,f){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,c.Z)(function*(_,f){return ss((0,O.m9)(_),f)})).apply(this,arguments)}function $l(_,f){return ta.apply(this,arguments)}function ta(){return(ta=(0,c.Z)(function*(_,f){return qr(_,"POST","/v1/accounts:signInWithCustomToken",Pt(_,f))})).apply(this,arguments)}function Bt(){return(Bt=(0,c.Z)(function*(_,f){const m=xn(_),b=yield $l(m,{token:f,returnSecureToken:!0}),S=yield Jn._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ls{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?na._fromServerResponse(f,m):De(f,"internal-error")}}class na extends Ls{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new na(m)}}function bn(_,f,m){var b;U((null===(b=m.url)||void 0===b?void 0:b.length)>0,_,"invalid-continue-uri"),U(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(U(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(U(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Vs(){return(Vs=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_),S={requestType:"PASSWORD_RESET",email:f};m&&bn(b,S,m),yield zo(b,S)})).apply(this,arguments)}function Ya(){return(Ya=(0,c.Z)(function*(_,f,m){yield Vt((0,O.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(_,f){yield Ga((0,O.m9)(_),{oobCode:f})})).apply(this,arguments)}function Qa(_,f){return _f.apply(this,arguments)}function _f(){return(_f=(0,c.Z)(function*(_,f){const m=(0,O.m9)(_),b=yield Vt(m,{oobCode:f}),S=b.requestType;switch(U(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(b.mfaInfo,m,"internal-error");default:U(b.email,m,"internal-error")}let R=null;return b.mfaInfo&&(R=Ls._fromServerResponse(xn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(_,f){const{data:m}=yield Qa((0,O.m9)(_),f);return m.email})).apply(this,arguments)}function Xa(){return(Xa=(0,c.Z)(function*(_,f,m){const b=xn(_),S=yield Qo(b,{returnSecureToken:!0,email:f,password:m}),R=yield Jn._fromIdTokenResponse(b,"signIn",S);return yield b._updateCurrentUser(R.user),R})).apply(this,arguments)}function Xc(){return(Xc=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_),S={requestType:"EMAIL_SIGNIN",email:f};U(m.handleCodeInApp,b,"argument-error"),m&&bn(b,S,m),yield qo(b,S)})).apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_),S=Ko.credentialWithLink(f,m||Oe());return U(S._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Fn(b,S)})).apply(this,arguments)}function eu(_,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:createAuthUri",Pt(_,f))})).apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(_,f){const b={identifier:f,continueUri:ht()?Oe():"http://localhost"},{signinMethods:S}=yield eu((0,O.m9)(_),b);return S||[]})).apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(_,f){const m=(0,O.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&bn(m.auth,S,f);const{email:R}=yield Sr(m.auth,S);R!==_.email&&(yield _.reload())})).apply(this,arguments)}function Wl(){return(Wl=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&bn(b.auth,R,m);const{email:K}=yield cg(b.auth,R);K!==_.email&&(yield _.reload())})).apply(this,arguments)}function Kl(_,f){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,c.Z)(function*(_,f){return an(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function sa(){return(sa=(0,c.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const b=(0,O.m9)(_),R={idToken:yield b.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},K=yield gr(b,Kl(b.auth,R));b.displayName=K.displayName||null,b.photoURL=K.photoUrl||null;const ce=b.providerData.find(({providerId:Le})=>"password"===Le);ce&&(ce.displayName=b.displayName,ce.photoURL=b.photoURL),yield b._updateTokensIfNecessary(K)})).apply(this,arguments)}function ur(_,f,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,c.Z)(function*(_,f,m){const{auth:b}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(R.email=f),m&&(R.password=m);const K=yield gr(_,jl(b,R));yield _._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class oa{constructor(f,m,b={}){this.isNewUser=f,this.providerId=m,this.profile=b}}class Ld extends oa{constructor(f,m,b,S){super(f,m,b),this.username=S}}class bf extends oa{constructor(f,m){super(f,"facebook.com",m)}}class Vd extends Ld{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class wf extends oa{constructor(f,m){super(f,"google.com",m)}}class nu extends Ld{constructor(f,m,b){super(f,"twitter.com",m,b)}}function Xl(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function wn(_){var f,m;if(!_)return null;const{providerId:b}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!b&&_?.idToken){const K=null===(m=null===(f=Ze(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(K)return new oa(R,"anonymous"!==K&&"custom"!==K?K:null)}if(!b)return null;switch(b){case"facebook.com":return new bf(R,S);case"github.com":return new Vd(R,S);case"google.com":return new wf(R,S);case"twitter.com":return new nu(R,S,_.screenName||null);case"custom":case"anonymous":return new oa(R,null);default:return new oa(R,b,S)}}(m)}class ji{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ji("enroll",f)}static _fromMfaPendingCredential(f){return new ji("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,b;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ji._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(b=f.multiFactorSession)&&void 0!==b&&b.idToken)return ji._fromIdtoken(f.multiFactorSession.idToken)}return null}}class nl{constructor(f,m,b){this.session=f,this.hints=m,this.signInResolver=b}static _fromError(f,m){const b=xn(f),S=m.customData._serverResponse,R=(S.mfaInfo||[]).map(ce=>Ls._fromServerResponse(b,ce));U(S.mfaPendingCredential,b,"internal-error");const K=ji._fromMfaPendingCredential(S.mfaPendingCredential);return new nl(K,R,function(){var ce=(0,c.Z)(function*(Le){const Xe=yield Le._process(b,K);delete S.mfaInfo,delete S.mfaPendingCredential;const mt=Object.assign(Object.assign({},S),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(m.operationType){case"signIn":const dt=yield Jn._fromIdTokenResponse(b,m.operationType,mt);return yield b._updateCurrentUser(dt.user),dt;case"reauthenticate":return U(m.user,b,"internal-error"),Jn._forOperation(m.user,m.operationType,mt);default:De(b,"internal-error")}});return function(Le){return ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,c.Z)(function*(){return m.signInResolver(f)})()}}function xf(_,f){return an(_,"POST","/v2/accounts/mfaEnrollment:start",Pt(_,f))}class rl{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Ls._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new rl(f)}getSession(){var f=this;return(0,c.Z)(function*(){return ji._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var b=this;return(0,c.Z)(function*(){const S=f,R=yield b.getSession(),K=yield gr(b.user,S._process(b.user.auth,R,m));return yield b.user._updateTokensIfNecessary(K),b.user.reload()})()}unenroll(f){var m=this;return(0,c.Z)(function*(){var b;const S="string"==typeof f?f:f.uid,R=yield m.user.getIdToken(),K=yield gr(m.user,function $y(_,f){return an(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Pt(_,f))}(m.user.auth,{idToken:R,mfaEnrollmentId:S}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ce})=>ce!==S),yield m.user._updateTokensIfNecessary(K);try{yield m.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(b=ce)||void 0===b?void 0:b.code))throw ce}})()}}const il=new WeakMap,Bs="__sak";class jd{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const cs=(()=>{class _ extends jd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Af(){const _=(0,O.z$)();return mr(_)||ci(_)}()&&function Ts(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ja(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const S=this.storage.getItem(b),R=this.localCache[b];S!==R&&m(b,R,S)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((ce,Le,Xe)=>{this.notifyListeners(ce,Xe)});const S=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(S);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!b)return}const R=()=>{const ce=this.storage.getItem(S);!b&&this.localCache[S]===ce||this.notifyListeners(S,ce)},K=this.storage.getItem(S);!function Dn(){return(0,O.w1)()&&10===document.documentMode}()||K===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,b){this.localCache[m]=b;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var S=()=>super._set,R=this;return(0,c.Z)(function*(){yield S().call(R,m,b),R.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,S=this;return(0,c.Z)(function*(){const R=yield b().call(S,m);return S.localCache[m]=JSON.stringify(R),R})()}_remove(m){var b=()=>super._remove,S=this;return(0,c.Z)(function*(){yield b().call(S,m),delete S.localCache[m]})()}}return _.type="LOCAL",_})(),Us=(()=>{class _ extends jd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return _.type="SESSION",_})();let ye=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(R=>R.isListeningto(m));if(b)return b;const S=new _(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,c.Z)(function*(){const S=m,{eventId:R,eventType:K,data:ce}=S.data,Le=b.handlersMap[K];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:K});const Xe=Array.from(Le).map(function(){var dt=(0,c.Z)(function*(Yn){return Yn(S.origin,ce)});return function(Yn){return dt.apply(this,arguments)}}()),mt=yield function Hd(_){return Promise.all(_.map(function(){var f=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return f.apply(this,arguments)}}()))}(Xe);S.ports[0].postMessage({status:"done",eventId:R,eventType:K,response:mt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function us(_="",f=10){let m="";for(let b=0;b<f;b++)m+=Math.floor(10*Math.random());return _+m}class ln{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,b=50){var S=this;return(0,c.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let K,ce;return new Promise((Le,Xe)=>{const mt=us("",20);R.port1.start();const dt=setTimeout(()=>{Xe(new Error("unsupported_event"))},b);ce={messageChannel:R,onMessage(Yn){const $i=Yn;if($i.data.eventId===mt)switch($i.data.status){case"ack":clearTimeout(dt),K=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Le($i.data.response);break;default:clearTimeout(dt),clearTimeout(K),Xe(new Error("invalid_response"))}}},S.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),S.target.postMessage({eventType:f,eventId:mt,data:m},[R.port2])}).finally(()=>{ce&&S.removeMessageHandler(ce)})})()}}function Qt(){return window}function An(){return typeof Qt().WorkerGlobalScope<"u"&&"function"==typeof Qt().importScripts}function la(){return(la=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const In="firebaseLocalStorageDb",gn="firebaseLocalStorage",al="fbase_key";class Ot{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function uo(_,f){return _.transaction([gn],f?"readwrite":"readonly").objectStore(gn)}function ca(){const _=indexedDB.open(In,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const b=_.result;try{b.createObjectStore(gn,{keyPath:al})}catch(S){m(S)}}),_.addEventListener("success",(0,c.Z)(function*(){const b=_.result;b.objectStoreNames.contains(gn)?f(b):(b.close(),yield function ds(){const _=indexedDB.deleteDatabase(In);return new Ot(_).toPromise()}(),f(yield ca()))}))})}function ho(_,f,m){return ec.apply(this,arguments)}function ec(){return(ec=(0,c.Z)(function*(_,f,m){const b=uo(_,!0).put({[al]:f,value:m});return new Ot(b).toPromise()})).apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(_,f){const m=uo(_,!1).get(f),b=yield new Ot(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function iu(_,f){const m=uo(_,!0).delete(f);return new Ot(m).toPromise()}const Br=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield ca()),m.db})()}_withRetries(m){var b=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const R=yield b._openDb();return yield m(R)}catch(R){if(S++>3)throw R;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return An()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=ye._getInstance(function ol(){return An()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(S,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(S,R){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var b,S;if(m.activeServiceWorker=yield function Nn(){return la.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ln(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(b=R[0])||void 0===b?void 0:b.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Jl(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ca();return yield ho(m,Bs,"1"),yield iu(m,Bs),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(R=>ho(R,m,b)),S.localCache[m]=b,S.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,c.Z)(function*(){const S=yield b._withRetries(R=>function rn(_,f){return Vr.apply(this,arguments)}(R,m));return b.localCache[m]=S,S})()}_remove(m){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(S=>iu(S,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const b=yield m._withRetries(K=>{const ce=uo(K,!1).getAll();return new Ot(ce).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:K,value:ce}of b)R.add(K),JSON.stringify(m.localCache[K])!==JSON.stringify(ce)&&(m.notifyListeners(K,ce),S.push(K));for(const K of Object.keys(m.localCache))m.localCache[K]&&!R.has(K)&&(m.notifyListeners(K,null),S.push(K));return S})()}notifyListeners(m,b){this.localCache[m]=b;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function St(_,f){return an(_,"POST","/v2/accounts/mfaSignIn:start",Pt(_,f))}function Qe(){return(Qe=(0,c.Z)(function*(_){return(yield an(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ft(_){return new Promise((f,m)=>{const b=document.createElement("script");b.setAttribute("src",_),b.onload=f,b.onerror=S=>{const R=ve("internal-error");R.customData=S,m(R)},b.type="text/javascript",b.charset="UTF-8",function ha(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(b)})}function ll(_){return`__${_}${Math.floor(1e6*Math.random())}`}const cl=1e12;class If{constructor(f){this.auth=f,this.counter=cl,this._widgets=new Map}render(f,m){const b=this.counter;return this._widgets.set(b,new gg(f,this.auth.name,m||{})),this.counter++,b}reset(f){var m;const b=f||cl;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(f){var m;return(null===(m=this._widgets.get(f||cl))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,c.Z)(function*(){var b;return null===(b=m._widgets.get(f||cl))||void 0===b||b.execute(),""})()}}class gg{constructor(f,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;U(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mg(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<_;b++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sf=ll("rcb"),kr=new on(3e4,6e4);class En{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Qt().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return U(function fa(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Qt().grecaptcha):new Promise((b,S)=>{const R=Qt().setTimeout(()=>{S(ve(f,"network-request-failed"))},kr.get());Qt()[Sf]=()=>{Qt().clearTimeout(R),delete Qt()[Sf];const ce=Qt().grecaptcha;if(!ce)return void S(ve(f,"internal-error"));const Le=ce.render;ce.render=(Xe,mt)=>{const dt=Le(Xe,mt);return this.counter++,dt},this.hostLanguage=m,b(ce)},ft(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Sf,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),S(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Qt().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zy{load(f){return(0,c.Z)(function*(){return new If(f)})()}clearedOneInstance(){}}const tr="recaptcha",ou={theme:"light",type:"image"};class ul{constructor(f,m=Object.assign({},ou),b){this.parameters=m,this.type=tr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xn(b),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;U(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zy:new En,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(m)||new Promise(R=>{const K=ce=>{!ce||(f.tokenChangeListeners.delete(K),R(ce))};f.tokenChangeListeners.add(K),f.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof f)f(m);else if("string"==typeof f){const b=Qt()[f];"function"==typeof b&&b(m)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){U(ht()&&!An(),f.auth,"internal-error"),yield function yg(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Sn(_){return Qe.apply(this,arguments)}(f.auth);U(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class au{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Wo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Ur(){return(Ur=(0,c.Z)(function*(_,f,m){const b=xn(_),S=yield dl(b,f,(0,O.m9)(m));return new au(S,R=>Fn(b,R))})).apply(this,arguments)}function zn(){return(zn=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_);yield Ei(!1,b,"phone");const S=yield dl(b.auth,f,(0,O.m9)(m));return new au(S,R=>Gl(b,R))})).apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_),S=yield dl(b.auth,f,(0,O.m9)(m));return new au(S,R=>so(b,R))})).apply(this,arguments)}function dl(_,f,m){return rc.apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(_,f,m){var b;const S=yield m.verify();try{let R;if(U("string"==typeof S,_,"argument-error"),U(m.type===tr,_,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const K=R.session;if("phoneNumber"in R)return U("enroll"===K.type,_,"internal-error"),(yield xf(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{U("signin"===K.type,_,"internal-error");const ce=(null===(b=R.multiFactorHint)||void 0===b?void 0:b.uid)||R.multiFactorUid;return U(ce,_,"missing-multi-factor-info"),(yield St(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield dg(_,{phoneNumber:R.phoneNumber,recaptchaToken:S});return K}}finally{m._reset()}})).apply(this,arguments)}function cu(){return(cu=(0,c.Z)(function*(_,f){yield Tr((0,O.m9)(_),f)})).apply(this,arguments)}let go=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=xn(m)}verifyPhoneNumber(m,b){return dl(this.auth,m,(0,O.m9)(b))}static credential(m,b){return Wo._fromVerification(m,b)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:S}=m;return b&&S?Wo._fromTokenResponse(b,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function qn(_,f){return f?oe(f):(U(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class mo extends no{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return lr(f,this._buildIdpRequest())}_linkToIdToken(f,m){return lr(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return lr(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function pa(_){return ea(_.auth,new mo(_),_.bypassAuthState)}function Gd(_){const{auth:f,user:m}=_;return U(m,f,"internal-error"),ss(m,new mo(_),_.bypassAuthState)}function hs(_){return ga.apply(this,arguments)}function ga(){return(ga=(0,c.Z)(function*(_){const{auth:f,user:m}=_;return U(m,f,"internal-error"),Tr(m,new mo(_),_.bypassAuthState)})).apply(this,arguments)}class ma{constructor(f,m,b,S,R=!1){this.auth=f,this.resolver=b,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,c.Z)(function*(b,S){f.pendingPromise={resolve:b,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(b,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:S,postBody:R,tenantId:K,error:ce,type:Le}=f;if(ce)return void m.reject(ce);const Xe={auth:m.auth,requestUri:b,sessionId:S,tenantId:K||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Xe))}catch(mt){m.reject(mt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return pa;case"linkViaPopup":case"linkViaRedirect":return hs;case"reauthViaPopup":case"reauthViaRedirect":return Gd;default:De(this.auth,"internal-error")}}resolve(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ic=new on(2e3,1e4);function ya(){return(ya=(0,c.Z)(function*(_,f,m){const b=xn(_);Be(_,f,Vi);const S=qn(b,m);return new yo(b,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_);Be(b.auth,f,Vi);const S=qn(b.auth,m);return new yo(b.auth,"reauthViaPopup",f,S,b).executeNotNull()})).apply(this,arguments)}function sc(){return(sc=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_);Be(b.auth,f,Vi);const S=qn(b.auth,m);return new yo(b.auth,"linkViaPopup",f,S,b).executeNotNull()})).apply(this,arguments)}let yo=(()=>{class _ extends ma{constructor(m,b,S,R,K){super(m,b,R,K),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const b=yield m.execute();return U(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,c.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const b=us();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,S;this.pollId=null!==(S=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ic.get())};m()}}return _.currentPopupAction=null,_})();const Ci=new Map;class $d extends ma{constructor(f,m,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,c.Z)(function*(){let b=Ci.get(m.auth._key());if(!b){try{const R=(yield function Mf(_,f){return fs.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;b=()=>Promise.resolve(R)}catch(S){b=()=>Promise.reject(S)}Ci.set(m.auth._key(),b)}return m.bypassAuthState||Ci.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(b,f);if("unknown"!==f.type){if(f.eventId){const S=yield b.auth._redirectUserForId(f.eventId);if(S)return b.user=S,m().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function fs(){return(fs=(0,c.Z)(function*(_,f){const m=hu(f),b=Tn(_);if(!(yield b._isAvailable()))return!1;const S="true"===(yield b._get(m));return yield b._remove(m),S})).apply(this,arguments)}function nr(_,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,c.Z)(function*(_,f){return Tn(_)._set(hu(f),"true")})).apply(this,arguments)}function va(_,f){Ci.set(_._key(),f)}function Tn(_){return oe(_._redirectPersistence)}function hu(_){return ar("pendingRedirect",_.config.apiKey,_.name)}function D(){return(D=(0,c.Z)(function*(_,f,m){const b=xn(_);Be(_,f,Vi);const S=qn(b,m);return yield nr(S,b),S._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function P(){return(P=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_);Be(b.auth,f,Vi);const S=qn(b.auth,m);yield nr(S,b.auth);const R=yield ut(b);return S._openRedirect(b.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Te(){return(Te=(0,c.Z)(function*(_,f,m){const b=(0,O.m9)(_);Be(b.auth,f,Vi);const S=qn(b.auth,m);yield Ei(!1,b,f.providerId),yield nr(S,b.auth);const R=yield ut(b);return S._openRedirect(b.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function pt(){return(pt=(0,c.Z)(function*(_,f){return yield xn(_)._initializationPromise,Ct(_,f,!1)})).apply(this,arguments)}function Ct(_,f){return At.apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(_,f,m=!1){const b=xn(_),S=qn(b,f),K=yield new $d(b,S,m).execute();return K&&!m&&(delete K.user._redirectEventId,yield b._persistUserIfCurrent(K.user),yield b._setRedirectUser(null,f)),K})).apply(this,arguments)}function ut(_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,c.Z)(function*(_){const f=us(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class _o{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(m=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function oc(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cn(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var b;if(f.error&&!cn(f)){const S=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(ve(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const b=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sn(f))}saveEventToCache(f){this.cachedEventUids.add(sn(f)),this.lastProcessedEventTime=Date.now()}}function sn(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function cn({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function ml(_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(_,f={}){return an(_,"GET","/v1/projects",f)})).apply(this,arguments)}const vo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ba=/^https?/;function kf(){return(kf=(0,c.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield ml(_);for(const m of f)try{if(Rf(m))return}catch{}De(_,"unauthorized-domain")})).apply(this,arguments)}function Rf(_){const f=Oe(),{protocol:m,hostname:b}=new URL(f);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===b?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&K.hostname===b}if(!ba.test(m))return!1;if(vo.test(_))return b===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(b)}const ac=new on(3e4,6e4);function Of(){const _=Qt().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let lc=null;function cw(_){return lc=lc||function Ff(_){return new Promise((f,m)=>{var b,S,R;function K(){Of(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Of(),m(ve(_,"network-request-failed"))},timeout:ac.get()})}if(null!==(S=null===(b=Qt().gapi)||void 0===b?void 0:b.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(R=Qt().gapi)||void 0===R||!R.load){const ce=ll("iframefcb");return Qt()[ce]=()=>{gapi.load?K():m(ve(_,"network-request-failed"))},ft(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Le=>m(Le))}K()}}).catch(f=>{throw lc=null,f})}(_),lc}const fu=new on(5e3,15e3),vg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wa(_){const f=_.config;U(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?Bn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:_.name,v:ue.SDK_VERSION},S=bg.get(_.config.apiHost);S&&(b.eid=S);const R=_._getFrameworks();return R.length&&(b.fw=R.join(",")),`${m}?${(0,O.xO)(b).slice(1)}`}function bo(){return bo=(0,c.Z)(function*(_){const f=yield cw(_),m=Qt().gapi;return U(m,_,"internal-error"),f.open({where:document.body,url:wa(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vg,dontclear:!0},b=>new Promise(function(){var S=(0,c.Z)(function*(R,K){yield b.restyle({setHideOnLeave:!1});const ce=ve(_,"network-request-failed"),Le=Qt().setTimeout(()=>{K(ce)},fu.get());function Xe(){Qt().clearTimeout(Le),R(b)}b.ping(Xe).then(Xe,()=>{K(ce)})});return function(R,K){return S.apply(this,arguments)}}()))}),bo.apply(this,arguments)}const wg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nf{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zd(_,f,m,b,S,R){U(_.config.authDomain,_,"auth-domain-config-required"),U(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:b,v:ue.SDK_VERSION,eventId:S};if(f instanceof Vi){f.setDefaultLanguage(_.languageCode),K.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Xe]of Object.entries(R||{}))K[Le]=Xe}if(f instanceof io){const Le=f.getScopes().filter(Xe=>""!==Xe);Le.length>0&&(K.scopes=Le.join(","))}_.tenantId&&(K.tid=_.tenantId);const ce=K;for(const Le of Object.keys(ce))void 0===ce[Le]&&delete ce[Le];return`${function gu({config:_}){return _.emulator?Bn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(ce).slice(1)}`}const Qd="webStorageSupport";class cc extends class Gs{constructor(f){this.factorId=f}_process(f,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,b);case"signin":return this._finalizeSignIn(f,m.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new cc(f)}_finalizeEnroll(f,m,b){return function Gy(_,f){return an(_,"POST","/v2/accounts/mfaEnrollment:finalize",Pt(_,f))}(f,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function da(_,f){return an(_,"POST","/v2/accounts/mfaSignIn:finalize",Pt(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cg=(()=>{class _{constructor(){}static assertion(m){return cc._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Xd="@firebase/auth";class Dg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(b=>{var S;f((null===(S=b)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wo(){return window}function Lf(){return(Lf=(0,c.Z)(function*(_,f,m){var b;const{BuildInfo:S}=wo();Z(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Bf(f.sessionId),K={};return ci()?K.ibi=S.packageName:vt()?K.apn=S.packageName:De(_,"operation-not-supported-in-this-environment"),S.displayName&&(K.appDisplayName=S.displayName),K.sessionId=R,Zd(_,m,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,K)})).apply(this,arguments)}function Eo(){return(Eo=(0,c.Z)(function*(_){const{BuildInfo:f}=wo(),m={};ci()?m.iosBundleId=f.packageName:vt()?m.androidPackageName=f.packageName:De(_,"operation-not-supported-in-this-environment"),yield ml(_,m)})).apply(this,arguments)}function xa(){return(xa=(0,c.Z)(function*(_,f,m){const{cordova:b}=wo();let S=()=>{};try{yield new Promise((R,K)=>{let ce=null;function Le(){var dt;R();const Yn=null===(dt=b.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof Yn&&Yn(),"function"==typeof m?.close&&m.close()}function Xe(){ce||(ce=window.setTimeout(()=>{K(ve(_,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===document?.visibilityState&&Xe()}f.addPassiveListener(Le),document.addEventListener("resume",Xe,!1),vt()&&document.addEventListener("visibilitychange",mt,!1),S=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",mt,!1),ce&&window.clearTimeout(ce)}})}finally{S()}})).apply(this,arguments)}function Bf(_){return th.apply(this,arguments)}function th(){return(th=(0,c.Z)(function*(_){const f=nh(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function nh(_){if(Z(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let b=0;b<_.length;b++)m[b]=_.charCodeAt(b);return m}!function Jd(_){(0,ue._registerComponent)(new ne.wA("auth",(f,{options:m})=>{const b=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:R,authDomain:K}=b.options;return((ce,Le)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),U(!K?.includes(":"),"argument-error",{appName:ce.name});const Xe={apiKey:R,authDomain:K,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mt(_)},mt=new Ho(ce,Le,Xe);return function Ne(_,f){const m=f?.persistence||[],b=(Array.isArray(m)?m:[m]).map(oe);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(b,f?.popupRedirectResolver)}(mt,m),mt})(b,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,b)=>{f.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new ne.wA("auth-internal",f=>{const m=xn(f.getProvider("auth").getImmediate());return new Dg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Xd,"0.20.5",function mu(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ue.registerVersion)(Xd,"0.20.5","esm2017")}("Browser");class Uf extends _o{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function uc(_){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,c.Z)(function*(_){const f=yield vu()._get(Do(_));return f&&(yield vu()._remove(Do(_))),f})).apply(this,arguments)}function _l(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*f.length);_.push(f.charAt(b))}return _.join("")}function vu(){return oe(cs)}function Do(_){return ar("authEvent",_.config.apiKey,_.name)}function gs(_){if(!_?.includes("?"))return{};const[f,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function wu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function hc(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function fc(_=(0,O.z$)()){return!("file:"!==hc()&&"ionic:"!==hc()&&"capacitor:"!==hc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qy(){try{const _=self.localStorage,f=us();if(_)return _.setItem(f,"1"),_.removeItem(f),!function dw(_=(0,O.z$)()){return function Mg(){return(0,O.w1)()&&11===document?.documentMode}()||function Zy(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch{return vl()&&(0,O.hl)()}return!1}function vl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Aa(){return(function Eu(){return"http:"===hc()||"https:"===hc()}()||(0,O.ru)()||fc())&&!function Yy(){return(0,O.b$)()||(0,O.UG)()}()&&Qy()&&!vl()}function $s(){return fc()&&typeof document<"u"}function Cu(){return(Cu=(0,c.Z)(function*(){return!!$s()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const br={LOCAL:"local",NONE:"none",SESSION:"session"},pc=U,ih="persistence";function Hf(_){return gc.apply(this,arguments)}function gc(){return(gc=(0,c.Z)(function*(_){yield _._initializationPromise;const f=Du(),m=ar(ih,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function Du(){var _;try{return(null===(_=function kg(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const xo=U;class Ao{constructor(){this.browserResolver=oe(class ni{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Us,this._completeRedirectFn=Ct,this._overrideRedirectResult=va}_openPopup(f,m,b,S){var R=this;return(0,c.Z)(function*(){var K;Z(null===(K=R.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ce=Zd(f,m,b,Oe(),S);return function Eg(_,f,m,b=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),K=Math.max((window.screen.availWidth-b)/2,0).toString();let ce="";const Le=Object.assign(Object.assign({},wg),{width:b.toString(),height:S.toString(),top:R,left:K}),Xe=(0,O.z$)().toLowerCase();m&&(ce=Ar(Xe)?"_blank":m),vn(Xe)&&(f=f||"http://localhost",Le.scrollbars="yes");const mt=Object.entries(Le).reduce((Yn,[$i,bl])=>`${Yn}${$i}=${bl},`,"");if(function vi(_=(0,O.z$)()){var f;return ci(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Xe)&&"_self"!==ce)return function Ca(_,f){const m=document.createElement("a");m.href=_,m.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(f||"",ce),new Nf(null);const dt=window.open(f||"",ce,mt);U(dt,_,"popup-blocked");try{dt.focus()}catch{}return new Nf(dt)}(f,ce,us())})()}_openRedirect(f,m,b,S){var R=this;return(0,c.Z)(function*(){return yield R._originValidation(f),function fi(_){Qt().location.href=_}(Zd(f,m,b,Oe(),S)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:R}=this.eventManagers[m];return S?Promise.resolve(S):(Z(R,"If manager is not set, promise should be"),R)}const b=this.initAndGetManager(f);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(f){var m=this;return(0,c.Z)(function*(){const b=yield function qd(_){return bo.apply(this,arguments)}(f),S=new _o(f);return b.register("authEvent",R=>(U(R?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=b,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Qd,{type:Qd},S=>{var R;const K=null===(R=S?.[0])||void 0===R?void 0:R[Qd];void 0!==K&&m(!!K),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function zd(_){return kf.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return ja()||mr()||ci()}}),this.cordovaResolver=oe(class bu{constructor(){this._redirectPersistence=Us,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ct,this._overrideRedirectResult=va}_initialize(f){var m=this;return(0,c.Z)(function*(){const b=f._key();let S=m.eventManagers.get(b);return S||(S=new Uf(f),m.eventManagers.set(b,S),m.attachCallbackListeners(f,S)),S})()}_openPopup(f){De(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,b,S){var R=this;return(0,c.Z)(function*(){!function Vf(_){var f,m,b,S,R,K,ce,Le,Xe,mt;const dt=wo();U("function"==typeof(null===(f=dt?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(m=dt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(S=null===(b=dt?.cordova)||void 0===b?void 0:b.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Le=null===(ce=null===(K=dt?.cordova)||void 0===K?void 0:K.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Le?void 0:Le.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(mt=null===(Xe=dt?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===mt?void 0:mt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const K=yield R._initialize(f);yield K.initialized(),K.resetRedirect(),function fl(){Ci.clear()}(),yield R._originValidation(f);const ce=function yl(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:_l(),postBody:null,tenantId:_.tenantId,error:ve(_,"no-auth-event")}}(f,b,S);yield function Co(_,f){return vu()._set(Do(_),f)}(f,ce);const Le=yield function yu(_,f,m){return Lf.apply(this,arguments)}(f,ce,m),Xe=yield function _u(_){const{cordova:f}=wo();return new Promise(m=>{f.plugins.browsertab.isAvailable(b=>{let S=null;b?f.plugins.browsertab.openUrl(_):S=f.InAppBrowser.open(_,function yr(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(S)})})}(Le);return function Hi(_,f,m){return xa.apply(this,arguments)}(f,K,Xe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function qy(_){return Eo.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:b,handleOpenURL:S,BuildInfo:R}=wo(),K=setTimeout((0,c.Z)(function*(){yield uc(f),m.onEvent(wu())}),500),ce=function(){var mt=(0,c.Z)(function*(dt){clearTimeout(K);const Yn=yield uc(f);let $i=null;Yn&&dt?.url&&($i=function Ig(_,f){var m,b;const S=function Ky(_){const f=gs(_),m=f.link?decodeURIComponent(f.link):void 0,b=gs(m).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return gs(S).link||S||b||m||_}(f);if(S.includes("/__/auth/callback")){const R=gs(S),K=R.firebaseError?function Sg(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(b=null===(m=K?.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Le=ce?ve(ce):null;return Le?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:S,postBody:null}}return null}(Yn,dt.url)),m.onEvent($i||wu())});return function(Yn){return mt.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,ce);const Le=S,Xe=`${R.packageName.toLowerCase()}://`;wo().handleOpenURL=function(){var mt=(0,c.Z)(function*(dt){if(dt.toLowerCase().startsWith(Xe)&&ce({url:dt}),"function"==typeof Le)try{Le(dt)}catch(Yn){console.error(Yn)}});return function(dt){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Us,this._completeRedirectFn=Ct,this._overrideRedirectResult=va}_initialize(f){var m=this;return(0,c.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,b,S){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,m,b,S)})()}_openRedirect(f,m,b,S){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,m,b,S)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $s()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const m=yield function jf(){return Cu.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function xu(_){return _.unwrap()}function Jy(_){return Au(_)}function Au(_){const{_tokenResponse:f}=_ instanceof O.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return go.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=qa;break;case"facebook.com":b=Zo;break;case"github.com":b=kd;break;case"twitter.com":b=Od;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:K,pendingToken:ce,nonce:Le}=f;return R||K||S||ce?ce?m.startsWith("saml.")?Ns._create(m,ce):ts._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:S,accessToken:R}):new Yo(m).credential({idToken:S,accessToken:R,rawNonce:Le}):null}return _ instanceof O.ZR?b.credentialFromError(_):b.credentialFromResult(_)}function Kn(_,f){return f.catch(m=>{throw m instanceof O.ZR&&function $f(_,f){var m,b;const S=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=f)||void 0===b?void 0:b.code))f.resolver=new zf(_,function _r(_,f){var m;const b=(0,O.m9)(_),S=f;return U(f.customData.operationType,b,"argument-error"),U(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),nl._fromError(b,S)}(_,f));else if(S){const R=Au(f),K=f;R&&(K.credential=R,K.tenantId=S.tenantId||void 0,K.email=S.email||void 0,K.phoneNumber=S.phoneNumber||void 0)}}(_,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:Jy(m),additionalUserInfo:Xl(m),user:zs.getOrCreate(S)}})}function Ia(_,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,c.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:b=>Kn(_,m.confirm(b))}})).apply(this,arguments)}class zf{constructor(f,m){this.resolver=m,this.auth=function mc(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Kn(xu(this.auth),this.resolver.resolveSignIn(f))}}class zs{constructor(f){this._delegate=f,this.multiFactor=function Ud(_){const f=(0,O.m9)(_);return il.has(f)||il.set(f,rl._fromUser(f)),il.get(f)}(f)}static getOrCreate(f){return zs.USER_MAP.has(f)||zs.USER_MAP.set(f,new zs(f)),zs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,c.Z)(function*(){return Kn(m.auth,Gl(m._delegate,f))})()}linkWithPhoneNumber(f,m){var b=this;return(0,c.Z)(function*(){return Ia(b.auth,function lu(_,f,m){return zn.apply(this,arguments)}(b._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,c.Z)(function*(){return Kn(m.auth,function hl(_,f,m){return sc.apply(this,arguments)}(m._delegate,f,Ao))})()}linkWithRedirect(f){var m=this;return(0,c.Z)(function*(){return yield Hf(xn(m.auth)),function Q(_,f,m){return function se(_,f,m){return Te.apply(this,arguments)}(_,f,m)}(m._delegate,f,Ao)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,c.Z)(function*(){return Kn(m.auth,so(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Ia(this.auth,function po(_,f,m){return dr.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Kn(this.auth,function du(_,f,m){return _a.apply(this,arguments)}(this._delegate,f,Ao))}reauthenticateWithRedirect(f){var m=this;return(0,c.Z)(function*(){return yield Hf(xn(m.auth)),function A(_,f,m){return function M(_,f,m){return P.apply(this,arguments)}(_,f,m)}(m._delegate,f,Ao)})()}sendEmailVerification(f){return function tu(_,f){return ia.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,c.Z)(function*(){return yield function Wa(_,f){return rs.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function vf(_,f){return ur((0,O.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Ql(_,f){return ur((0,O.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Tf(_,f){return cu.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Zl(_,f){return sa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function ql(_,f,m){return Wl.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zs.USER_MAP=new WeakMap;const qs=U;let ms=(()=>{class _{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;qs(S,"invalid-api-key",{appName:m.name}),qs(S,"invalid-api-key",{appName:m.name});const R=typeof window<"u"?Ao:void 0;this._delegate=b.initialize({options:{persistence:hr(S,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function Ir(_,f,m){const b=xn(_);U(b._canInitEmulator,b,"emulator-config-failed"),U(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const S=!!m?.disableWarnings,R=ks(f),{host:K,port:ce}=function Ji(_){const f=ks(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(b);if(S){const R=S[1];return{host:R,port:Wr(b.substr(R.length+1))}}{const[R,K]=b.split(":");return{host:R,port:Wr(K)}}}(f);b.config.emulator={url:`${R}//${K}${null===ce?"":`:${ce}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:K,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Rs(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,b)}applyActionCode(m){return function Za(_,f){return ra.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Qa(this._delegate,m)}confirmPasswordReset(m,b){return function di(_,f,m){return Ya.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var S=this;return(0,c.Z)(function*(){return Kn(S._delegate,function Bi(_,f,m){return Xa.apply(this,arguments)}(S._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function zl(_,f){return el.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Jc(_,f){return"EMAIL_SIGNIN"===bi.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,c.Z)(function*(){qs(Aa(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function Ue(_,f){return pt.apply(this,arguments)}(m._delegate,Ao);return b?Kn(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Wn(_,f){xn(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,b,S){const{next:R,error:K,complete:ce}=Rg(m,b,S);return this._delegate.onAuthStateChanged(R,K,ce)}onIdTokenChanged(m,b,S){const{next:R,error:K,complete:ce}=Rg(m,b,S);return this._delegate.onIdTokenChanged(R,K,ce)}sendSignInLinkToEmail(m,b){return function ls(_,f,m){return Xc.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function Ka(_,f,m){return Vs.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,c.Z)(function*(){let S;switch(function Xy(_,f){pc(Object.values(br).includes(f),_,"invalid-persistence-type"),(0,O.b$)()?pc(f!==br.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?pc(f===br.NONE,_,"unsupported-persistence-type"):vl()?pc(f===br.NONE||f===br.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):pc(f===br.NONE||Qy(),_,"unsupported-persistence-type")}(b._delegate,m),m){case br.SESSION:S=Us;break;case br.LOCAL:S=(yield oe(Br)._isAvailable())?Br:cs;break;case br.NONE:S=Zt;break;default:return De("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Kn(this._delegate,function Fd(_){return yf.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Kn(this._delegate,Fn(this._delegate,m))}signInWithCustomToken(m){return Kn(this._delegate,function Ee(_,f){return Bt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return Kn(this._delegate,function oo(_,f,m){return Fn((0,O.m9)(_),Ko.credential(f,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return Kn(this._delegate,function Pd(_,f,m){return Ja.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return Ia(this._delegate,function Rr(_,f,m){return Ur.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,c.Z)(function*(){return qs(Aa(),b._delegate,"operation-not-supported-in-this-environment"),Kn(b._delegate,function uu(_,f,m){return ya.apply(this,arguments)}(b._delegate,m,Ao))})()}signInWithRedirect(m){var b=this;return(0,c.Z)(function*(){return qs(Aa(),b._delegate,"operation-not-supported-in-this-environment"),yield Hf(b._delegate),function pl(_,f,m){return function gl(_,f,m){return D.apply(this,arguments)}(_,f,m)}(b._delegate,m,Ao)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function as(_,f){return er.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=br,_})();function Rg(_,f,m){let b=_;"function"!=typeof _&&({next:b,error:f,complete:m}=_);const S=b;return{next:K=>S(K&&zs.getOrCreate(K)),error:f,complete:m}}function hr(_,f){const m=function Gf(_,f){const m=Du();if(!m)return[];const b=ar(ih,_,f);switch(m.getItem(b)){case br.NONE:return[Zt];case br.LOCAL:return[Br,Us];case br.SESSION:return[Us];default:return[]}}(_,f);if(typeof self<"u"&&!m.includes(Br)&&m.push(Br),typeof window<"u")for(const b of[cs,Us])m.includes(b)||m.push(b);return m.includes(Zt)||m.push(Zt),m}class sh{constructor(){this.providerId="phone",this._delegate=new go(xu(te.Z.auth()))}static credential(f,m){return go.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}sh.PHONE_SIGN_IN_METHOD=go.PHONE_SIGN_IN_METHOD,sh.PROVIDER_ID=go.PROVIDER_ID;const e_=U;class qf{constructor(f,m,b=te.Z.app()){var S;e_(null===(S=b.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new ul(f,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Og(_){_.INTERNAL.registerComponent(new ne.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new ms(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ko,FacebookAuthProvider:Zo,GithubAuthProvider:kd,GoogleAuthProvider:qa,OAuthProvider:Yo,SAMLAuthProvider:Kr,PhoneAuthProvider:sh,PhoneMultiFactorGenerator:Cg,RecaptchaVerifier:qf,TwitterAuthProvider:Od,Auth:ms,AuthCredential:no,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},8306:(at,Ae,F)=>{F.d(Ae,{y:()=>j});var c=F(930),te=F(727),O=F(8822),ue=F(4671);var ne=F(2416),he=F(576),pe=F(2806);let j=(()=>{class Se{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ge=new Se;return ge.source=this,ge.operator=Ge,ge}subscribe(Ge,ge,me){const Ye=function je(Se){return Se&&Se instanceof c.Lv||function X(Se){return Se&&(0,he.m)(Se.next)&&(0,he.m)(Se.error)&&(0,he.m)(Se.complete)}(Se)&&(0,te.Nn)(Se)}(Ge)?Ge:new c.Hp(Ge,ge,me);return(0,pe.x)(()=>{const{operator:Je,source:De}=this;Ye.add(Je?Je.call(Ye,De):De?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ge){Ge.error(ge)}}forEach(Ge,ge){return new(ge=H(ge))((me,Ye)=>{const Je=new c.Hp({next:De=>{try{Ge(De)}catch(ve){Ye(ve),Je.unsubscribe()}},error:Ye,complete:me});this.subscribe(Je)})}_subscribe(Ge){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ge)}[O.L](){return this}pipe(...Ge){return function fe(Se){return 0===Se.length?ue.y:1===Se.length?Se[0]:function(Ge){return Se.reduce((ge,me)=>me(ge),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=H(Ge))((ge,me)=>{let Ye;this.subscribe(Je=>Ye=Je,Je=>me(Je),()=>ge(Ye))})}}return Se.create=Ie=>new Se(Ie),Se})();function H(Se){var Ie;return null!==(Ie=Se??ne.v.Promise)&&void 0!==Ie?Ie:Promise}},7579:(at,Ae,F)=>{F.d(Ae,{x:()=>ne});var c=F(8306),te=F(727);const ue=(0,F(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=F(8737),fe=F(2806);let ne=(()=>{class pe extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const X=new he(this,this);return X.operator=H,X}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(H)}})}error(H){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:X}=this;for(;X.length;)X.shift().error(H)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:X,isStopped:je,observers:Se}=this;return X||je?te.Lc:(this.currentObservers=null,Se.push(H),new te.w0(()=>{this.currentObservers=null,(0,ae.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:X,thrownError:je,isStopped:Se}=this;X?H.error(je):Se&&H.complete()}asObservable(){const H=new c.y;return H.source=this,H}}return pe.create=(j,H)=>new he(j,H),pe})();class he extends ne{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===X||X.call(H,j)}error(j){var H,X;null===(X=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===X||X.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,X;return null!==(X=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==X?X:te.Lc}}},930:(at,Ae,F)=>{F.d(Ae,{Hp:()=>Ge,Lv:()=>X});var c=F(576),te=F(727),O=F(2416),ue=F(7849),ae=F(5032);const fe=pe("C",void 0,void 0);function pe(De,ve,we){return{kind:De,value:ve,error:we}}var j=F(3410),H=F(2806);class X extends te.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,te.Nn)(ve)&&ve.add(this)):this.destination=Je}static create(ve,we,Be){return new Ge(ve,we,Be)}next(ve){this.isStopped?Ye(function he(De){return pe("N",De,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function ne(De){return pe("E",void 0,De)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Se(De,ve){return je.call(De,ve)}class Ie{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(Be){ge(Be)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(Be){ge(Be)}else ge(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){ge(we)}}}class Ge extends X{constructor(ve,we,Be){let He;if(super(),(0,c.m)(ve)||!ve)He={next:ve??void 0,error:we??void 0,complete:Be??void 0};else{let U;this&&O.v.useDeprecatedNextContext?(U=Object.create(ve),U.unsubscribe=()=>this.unsubscribe(),He={next:ve.next&&Se(ve.next,U),error:ve.error&&Se(ve.error,U),complete:ve.complete&&Se(ve.complete,U)}):He=ve}this.destination=new Ie(He)}}function ge(De){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(De):(0,ue.h)(De)}function Ye(De,ve){const{onStoppedNotification:we}=O.v;we&&j.z.setTimeout(()=>we(De,ve))}const Je={closed:!0,next:ae.Z,error:function me(De){throw De},complete:ae.Z}},727:(at,Ae,F)=>{F.d(Ae,{Lc:()=>fe,w0:()=>ae,Nn:()=>ne});var c=F(576);const O=(0,F(3888).d)(pe=>function(H){pe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((X,je)=>`${je+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=F(8737);class ae{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:X}=this;if((0,c.m)(X))try{X()}catch(Se){j=Se instanceof O?Se.errors:[Se]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Se of je)try{he(Se)}catch(Ie){j=j??[],Ie instanceof O?j=[...j,...Ie.errors]:j.push(Ie)}}if(j)throw new O(j)}}add(j){var H;if(j&&j!==this)if(this.closed)he(j);else{if(j instanceof ae){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,ue.P)(H,j),j instanceof ae&&j._removeParent(this)}}ae.EMPTY=(()=>{const pe=new ae;return pe.closed=!0,pe})();const fe=ae.EMPTY;function ne(pe){return pe instanceof ae||pe&&"closed"in pe&&(0,c.m)(pe.remove)&&(0,c.m)(pe.add)&&(0,c.m)(pe.unsubscribe)}function he(pe){(0,c.m)(pe)?pe():pe.unsubscribe()}},2416:(at,Ae,F)=>{F.d(Ae,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ae,F)=>{F.d(Ae,{E:()=>te});const te=new(F(8306).y)(ae=>ae.complete())},8996:(at,Ae,F)=>{F.d(Ae,{D:()=>ve});var c=F(8421),te=F(5363),O=F(9468),fe=F(8306),he=F(2202),pe=F(576),j=F(9672);function X(we,Be){if(!we)throw new Error("Iterable cannot be null");return new fe.y(He=>{(0,j.f)(He,Be,()=>{const U=we[Symbol.asyncIterator]();(0,j.f)(He,Be,()=>{U.next().then(_e=>{_e.done?He.complete():He.next(_e.value)})},0,!0)})})}var je=F(3670),Se=F(8239),Ie=F(1144),Ge=F(6495),ge=F(2206),me=F(4532),Ye=F(3260);function ve(we,Be){return Be?function De(we,Be){if(null!=we){if((0,je.c)(we))return function ue(we,Be){return(0,c.Xf)(we).pipe((0,O.R)(Be),(0,te.Q)(Be))}(we,Be);if((0,Ie.z)(we))return function ne(we,Be){return new fe.y(He=>{let U=0;return Be.schedule(function(){U===we.length?He.complete():(He.next(we[U++]),He.closed||this.schedule())})})}(we,Be);if((0,Se.t)(we))return function ae(we,Be){return(0,c.Xf)(we).pipe((0,O.R)(Be),(0,te.Q)(Be))}(we,Be);if((0,ge.D)(we))return X(we,Be);if((0,Ge.T)(we))return function H(we,Be){return new fe.y(He=>{let U;return(0,j.f)(He,Be,()=>{U=we[he.h](),(0,j.f)(He,Be,()=>{let _e,Z;try{({value:_e,done:Z}=U.next())}catch(J){return void He.error(J)}Z?He.complete():He.next(_e)},0,!0)}),()=>(0,pe.m)(U?.return)&&U.return()})}(we,Be);if((0,Ye.L)(we))return function Je(we,Be){return X((0,Ye.Q)(we),Be)}(we,Be)}throw(0,me.z)(we)}(we,Be):(0,c.Xf)(we)}},8421:(at,Ae,F)=>{F.d(Ae,{Xf:()=>je});var c=F(655),te=F(1144),O=F(8239),ue=F(8306),ae=F(3670),fe=F(2206),ne=F(4532),he=F(6495),pe=F(3260),j=F(576),H=F(7849),X=F(8822);function je(De){if(De instanceof ue.y)return De;if(null!=De){if((0,ae.c)(De))return function Se(De){return new ue.y(ve=>{const we=De[X.L]();if((0,j.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,te.z)(De))return function Ie(De){return new ue.y(ve=>{for(let we=0;we<De.length&&!ve.closed;we++)ve.next(De[we]);ve.complete()})}(De);if((0,O.t)(De))return function Ge(De){return new ue.y(ve=>{De.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,H.h)})}(De);if((0,fe.D)(De))return me(De);if((0,he.T)(De))return function ge(De){return new ue.y(ve=>{for(const we of De)if(ve.next(we),ve.closed)return;ve.complete()})}(De);if((0,pe.L)(De))return function Ye(De){return me((0,pe.Q)(De))}(De)}throw(0,ne.z)(De)}function me(De){return new ue.y(ve=>{(function Je(De,ve){var we,Be,He,U;return(0,c.mG)(this,void 0,void 0,function*(){try{for(we=(0,c.KL)(De);!(Be=yield we.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(_e){He={error:_e}}finally{try{Be&&!Be.done&&(U=we.return)&&(yield U.call(we))}finally{if(He)throw He.error}}ve.complete()})})(De,ve).catch(we=>ve.error(we))})}},6451:(at,Ae,F)=>{F.d(Ae,{T:()=>fe});var c=F(8189),te=F(8421),O=F(515),ue=F(3269),ae=F(8996);function fe(...ne){const he=(0,ue.yG)(ne),pe=(0,ue._6)(ne,1/0),j=ne;return j.length?1===j.length?(0,te.Xf)(j[0]):(0,c.J)(pe)((0,ae.D)(j,he)):O.E}},5403:(at,Ae,F)=>{F.d(Ae,{x:()=>te});var c=F(930);function te(ue,ae,fe,ne,he){return new O(ue,ae,fe,ne,he)}class O extends c.Lv{constructor(ae,fe,ne,he,pe,j){super(ae),this.onFinalize=pe,this.shouldUnsubscribe=j,this._next=fe?function(H){try{fe(H)}catch(X){ae.error(X)}}:super._next,this._error=he?function(H){try{he(H)}catch(X){ae.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ne?function(){try{ne()}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(at,Ae,F)=>{F.d(Ae,{U:()=>O});var c=F(4482),te=F(5403);function O(ue,ae){return(0,c.e)((fe,ne)=>{let he=0;fe.subscribe((0,te.x)(ne,pe=>{ne.next(ue.call(ae,pe,he++))}))})}},8189:(at,Ae,F)=>{F.d(Ae,{J:()=>O});var c=F(5577),te=F(4671);function O(ue=1/0){return(0,c.z)(te.y,ue)}},5577:(at,Ae,F)=>{F.d(Ae,{z:()=>he});var c=F(4004),te=F(8421),O=F(4482),ue=F(9672),ae=F(5403),ne=F(576);function he(pe,j,H=1/0){return(0,ne.m)(j)?he((X,je)=>(0,c.U)((Se,Ie)=>j(X,Se,je,Ie))((0,te.Xf)(pe(X,je))),H):("number"==typeof j&&(H=j),(0,O.e)((X,je)=>function fe(pe,j,H,X,je,Se,Ie,Ge){const ge=[];let me=0,Ye=0,Je=!1;const De=()=>{Je&&!ge.length&&!me&&j.complete()},ve=Be=>me<X?we(Be):ge.push(Be),we=Be=>{Se&&j.next(Be),me++;let He=!1;(0,te.Xf)(H(Be,Ye++)).subscribe((0,ae.x)(j,U=>{je?.(U),Se?ve(U):j.next(U)},()=>{He=!0},void 0,()=>{if(He)try{for(me--;ge.length&&me<X;){const U=ge.shift();Ie?(0,ue.f)(j,Ie,()=>we(U)):we(U)}De()}catch(U){j.error(U)}}))};return pe.subscribe((0,ae.x)(j,ve,()=>{Je=!0,De()})),()=>{Ge?.()}}(X,je,pe,H)))}},5363:(at,Ae,F)=>{F.d(Ae,{Q:()=>ue});var c=F(9672),te=F(4482),O=F(5403);function ue(ae,fe=0){return(0,te.e)((ne,he)=>{ne.subscribe((0,O.x)(he,pe=>(0,c.f)(he,ae,()=>he.next(pe),fe),()=>(0,c.f)(he,ae,()=>he.complete(),fe),pe=>(0,c.f)(he,ae,()=>he.error(pe),fe)))})}},3099:(at,Ae,F)=>{F.d(Ae,{B:()=>ae});var c=F(8421),te=F(7579),O=F(930),ue=F(4482);function ae(ne={}){const{connector:he=(()=>new te.x),resetOnError:pe=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=ne;return X=>{let je,Se,Ie,Ge=0,ge=!1,me=!1;const Ye=()=>{Se?.unsubscribe(),Se=void 0},Je=()=>{Ye(),je=Ie=void 0,ge=me=!1},De=()=>{const ve=je;Je(),ve?.unsubscribe()};return(0,ue.e)((ve,we)=>{Ge++,!me&&!ge&&Ye();const Be=Ie=Ie??he();we.add(()=>{Ge--,0===Ge&&!me&&!ge&&(Se=fe(De,H))}),Be.subscribe(we),!je&&Ge>0&&(je=new O.Hp({next:He=>Be.next(He),error:He=>{me=!0,Ye(),Se=fe(Je,pe,He),Be.error(He)},complete:()=>{ge=!0,Ye(),Se=fe(Je,j),Be.complete()}}),(0,c.Xf)(ve).subscribe(je))})(X)}}function fe(ne,he,...pe){if(!0===he)return void ne();if(!1===he)return;const j=new O.Hp({next:()=>{j.unsubscribe(),ne()}});return he(...pe).subscribe(j)}},9468:(at,Ae,F)=>{F.d(Ae,{R:()=>te});var c=F(4482);function te(O,ue=0){return(0,c.e)((ae,fe)=>{fe.add(O.schedule(()=>ae.subscribe(fe),ue))})}},8505:(at,Ae,F)=>{F.d(Ae,{b:()=>ae});var c=F(576),te=F(4482),O=F(5403),ue=F(4671);function ae(fe,ne,he){const pe=(0,c.m)(fe)||ne||he?{next:fe,error:ne,complete:he}:fe;return pe?(0,te.e)((j,H)=>{var X;null===(X=pe.subscribe)||void 0===X||X.call(pe);let je=!0;j.subscribe((0,O.x)(H,Se=>{var Ie;null===(Ie=pe.next)||void 0===Ie||Ie.call(pe,Se),H.next(Se)},()=>{var Se;je=!1,null===(Se=pe.complete)||void 0===Se||Se.call(pe),H.complete()},Se=>{var Ie;je=!1,null===(Ie=pe.error)||void 0===Ie||Ie.call(pe,Se),H.error(Se)},()=>{var Se,Ie;je&&(null===(Se=pe.unsubscribe)||void 0===Se||Se.call(pe)),null===(Ie=pe.finalize)||void 0===Ie||Ie.call(pe)}))}):ue.y}},4408:(at,Ae,F)=>{F.d(Ae,{o:()=>ae});var c=F(727);class te extends c.w0{constructor(ne,he){super()}schedule(ne,he=0){return this}}const O={setInterval(fe,ne,...he){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(fe,ne,...he):setInterval(fe,ne,...he)},clearInterval(fe){const{delegate:ne}=O;return(ne?.clearInterval||clearInterval)(fe)},delegate:void 0};var ue=F(8737);class ae extends te{constructor(ne,he){super(ne,he),this.scheduler=ne,this.work=he,this.pending=!1}schedule(ne,he=0){if(this.closed)return this;this.state=ne;const pe=this.id,j=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(j,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(j,this.id,he),this}requestAsyncId(ne,he,pe=0){return O.setInterval(ne.flush.bind(ne,this),pe)}recycleAsyncId(ne,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;O.clearInterval(he)}execute(ne,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ne,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ne,he){let j,pe=!1;try{this.work(ne)}catch(H){pe=!0,j=H||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ne,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(pe,this),null!=ne&&(this.id=this.recycleAsyncId(he,ne,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ae,F)=>{F.d(Ae,{v:()=>O});var c=F(6063);class te{constructor(ae,fe=te.now){this.schedulerActionCtor=ae,this.now=fe}schedule(ae,fe=0,ne){return new this.schedulerActionCtor(this,ae).schedule(ne,fe)}}te.now=c.l.now;class O extends te{constructor(ae,fe=te.now){super(ae,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:fe}=this;if(this._active)return void fe.push(ae);let ne;this._active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=fe.shift());if(this._active=!1,ne){for(;ae=fe.shift();)ae.unsubscribe();throw ne}}}},4986:(at,Ae,F)=>{F.d(Ae,{P:()=>ue,z:()=>O});var c=F(4408);const O=new(F(7565).v)(c.o),ue=O},6063:(at,Ae,F)=>{F.d(Ae,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(at,Ae,F)=>{F.d(Ae,{z:()=>c});const c={setTimeout(te,O,...ue){const{delegate:ae}=c;return ae?.setTimeout?ae.setTimeout(te,O,...ue):setTimeout(te,O,...ue)},clearTimeout(te){const{delegate:O}=c;return(O?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(at,Ae,F)=>{F.d(Ae,{h:()=>te});const te=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ae,F)=>{F.d(Ae,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(at,Ae,F)=>{F.d(Ae,{_6:()=>fe,jO:()=>ue,yG:()=>ae});var c=F(576),te=F(3532);function O(ne){return ne[ne.length-1]}function ue(ne){return(0,c.m)(O(ne))?ne.pop():void 0}function ae(ne){return(0,te.K)(O(ne))?ne.pop():void 0}function fe(ne,he){return"number"==typeof O(ne)?ne.pop():he}},8737:(at,Ae,F)=>{function c(te,O){if(te){const ue=te.indexOf(O);0<=ue&&te.splice(ue,1)}}F.d(Ae,{P:()=>c})},3888:(at,Ae,F)=>{function c(te){const ue=te(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}F.d(Ae,{d:()=>c})},2806:(at,Ae,F)=>{F.d(Ae,{O:()=>ue,x:()=>O});var c=F(2416);let te=null;function O(ae){if(c.v.useDeprecatedSynchronousErrorHandling){const fe=!te;if(fe&&(te={errorThrown:!1,error:null}),ae(),fe){const{errorThrown:ne,error:he}=te;if(te=null,ne)throw he}}else ae()}function ue(ae){c.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=ae)}},9672:(at,Ae,F)=>{function c(te,O,ue,ae=0,fe=!1){const ne=O.schedule(function(){ue(),fe?te.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(te.add(ne),!fe)return ne}F.d(Ae,{f:()=>c})},4671:(at,Ae,F)=>{function c(te){return te}F.d(Ae,{y:()=>c})},1144:(at,Ae,F)=>{F.d(Ae,{z:()=>c});const c=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(at,Ae,F)=>{F.d(Ae,{D:()=>te});var c=F(576);function te(O){return Symbol.asyncIterator&&(0,c.m)(O?.[Symbol.asyncIterator])}},576:(at,Ae,F)=>{function c(te){return"function"==typeof te}F.d(Ae,{m:()=>c})},3670:(at,Ae,F)=>{F.d(Ae,{c:()=>O});var c=F(8822),te=F(576);function O(ue){return(0,te.m)(ue[c.L])}},6495:(at,Ae,F)=>{F.d(Ae,{T:()=>O});var c=F(2202),te=F(576);function O(ue){return(0,te.m)(ue?.[c.h])}},8239:(at,Ae,F)=>{F.d(Ae,{t:()=>te});var c=F(576);function te(O){return(0,c.m)(O?.then)}},3260:(at,Ae,F)=>{F.d(Ae,{L:()=>ue,Q:()=>O});var c=F(655),te=F(576);function O(ae){return(0,c.FC)(this,arguments,function*(){const ne=ae.getReader();try{for(;;){const{value:he,done:pe}=yield(0,c.qq)(ne.read());if(pe)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(he)}}finally{ne.releaseLock()}})}function ue(ae){return(0,te.m)(ae?.getReader)}},3532:(at,Ae,F)=>{F.d(Ae,{K:()=>te});var c=F(576);function te(O){return O&&(0,c.m)(O.schedule)}},4482:(at,Ae,F)=>{F.d(Ae,{A:()=>te,e:()=>O});var c=F(576);function te(ue){return(0,c.m)(ue?.lift)}function O(ue){return ae=>{if(te(ae))return ae.lift(function(fe){try{return ue(fe,this)}catch(ne){this.error(ne)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,Ae,F)=>{function c(){}F.d(Ae,{Z:()=>c})},7849:(at,Ae,F)=>{F.d(Ae,{h:()=>O});var c=F(2416),te=F(3410);function O(ue){te.z.setTimeout(()=>{const{onUnhandledError:ae}=c.v;if(!ae)throw ue;ae(ue)})}},4532:(at,Ae,F)=>{function c(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ae,{z:()=>c})},655:(at,Ae,F)=>{function ue(Z,J){var oe={};for(var ie in Z)Object.prototype.hasOwnProperty.call(Z,ie)&&J.indexOf(ie)<0&&(oe[ie]=Z[ie]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(ie=Object.getOwnPropertySymbols(Z);Ne<ie.length;Ne++)J.indexOf(ie[Ne])<0&&Object.prototype.propertyIsEnumerable.call(Z,ie[Ne])&&(oe[ie[Ne]]=Z[ie[Ne]])}return oe}function he(Z,J,oe,ie){return new(oe||(oe=Promise))(function(Oe,ht){function $t(on){try{qe(ie.next(on))}catch(Bn){ht(Bn)}}function Ht(on){try{qe(ie.throw(on))}catch(Bn){ht(Bn)}}function qe(on){on.done?Oe(on.value):function Ne(Oe){return Oe instanceof oe?Oe:new oe(function(ht){ht(Oe)})}(on.value).then($t,Ht)}qe((ie=ie.apply(Z,J||[])).next())})}function ge(Z){return this instanceof ge?(this.v=Z,this):new ge(Z)}function me(Z,J,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,ie=oe.apply(Z,J||[]),Oe=[];return Ne={},ht("next"),ht("throw"),ht("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function ht(Wt){ie[Wt]&&(Ne[Wt]=function(Kt){return new Promise(function(zr,Pt){Oe.push([Wt,Kt,zr,Pt])>1||$t(Wt,Kt)})})}function $t(Wt,Kt){try{!function Ht(Wt){Wt.value instanceof ge?Promise.resolve(Wt.value.v).then(qe,on):Bn(Oe[0][2],Wt)}(ie[Wt](Kt))}catch(zr){Bn(Oe[0][3],zr)}}function qe(Wt){$t("next",Wt)}function on(Wt){$t("throw",Wt)}function Bn(Wt,Kt){Wt(Kt),Oe.shift(),Oe.length&&$t(Oe[0][0],Oe[0][1])}}function Je(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function X(Z){var J="function"==typeof Symbol&&Symbol.iterator,oe=J&&Z[J],ie=0;if(oe)return oe.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ie>=Z.length&&(Z=void 0),{value:Z&&Z[ie++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),oe={},ie("next"),ie("throw"),ie("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ie(Oe){oe[Oe]=Z[Oe]&&function(ht){return new Promise(function($t,Ht){!function Ne(Oe,ht,$t,Ht){Promise.resolve(Ht).then(function(qe){Oe({value:qe,done:$t})},ht)}($t,Ht,(ht=Z[Oe](ht)).done,ht.value)})}}}F.d(Ae,{FC:()=>me,KL:()=>Je,_T:()=>ue,mG:()=>he,qq:()=>ge})},4650:(at,Ae,F)=>{F.d(Ae,{$8M:()=>Br,$Z:()=>lp,AFp:()=>gb,ALo:()=>y0,AaK:()=>he,AsE:()=>cv,CHM:()=>Ls,CRH:()=>dy,CZH:()=>zp,CqO:()=>vE,D6c:()=>Vb,EJc:()=>tT,EiD:()=>bu,EpF:()=>H_,F$t:()=>wE,F4k:()=>wp,FYo:()=>mt,FiY:()=>se,G48:()=>Ab,Gf:()=>sb,GfV:()=>bl,Gpc:()=>H,Hsn:()=>z_,Ikx:()=>Rp,JOm:()=>Ta,JVY:()=>Cg,KtG:()=>na,L6k:()=>Xd,LAX:()=>Dg,LFG:()=>Tn,Lbi:()=>bA,Lck:()=>jx,MAs:()=>V_,NdJ:()=>km,O4$:()=>oa,OlP:()=>Ut,Oqu:()=>lv,Q6J:()=>B_,QGY:()=>G_,QbO:()=>yb,Qsj:()=>dt,R0b:()=>xs,RDi:()=>vg,Rgc:()=>Bp,SBq:()=>ce,Suo:()=>A0,TTD:()=>Ko,TgZ:()=>Mm,Tol:()=>Ap,Udp:()=>nv,VKq:()=>Fc,WFA:()=>Ep,X6Q:()=>FA,Xpm:()=>B,Y36:()=>Pu,YNc:()=>Oh,Yjl:()=>ar,Yz7:()=>Kt,ZZ4:()=>cC,_Bn:()=>si,_UZ:()=>Fr,_Vd:()=>S,_c5:()=>Lb,_uU:()=>av,aQg:()=>Pb,cJS:()=>Pt,cg1:()=>bv,d8E:()=>Op,dDg:()=>SA,dqk:()=>Ze,eBb:()=>Pf,eFA:()=>wb,ekj:()=>rv,eoX:()=>K0,f3M:()=>pl,g9A:()=>j0,h0i:()=>Si,hGG:()=>uT,hij:()=>Vh,iGM:()=>ib,ifc:()=>it,ip1:()=>U0,kL8:()=>jE,lG2:()=>Zt,lcZ:()=>Xv,lri:()=>_b,mCW:()=>Eo,n5z:()=>iu,n_E:()=>Pc,oAB:()=>Ve,oxw:()=>Om,pB0:()=>mu,q3G:()=>Wn,q4F:()=>yc,qLn:()=>Xf,qOj:()=>O_,qZA:()=>Fh,qzn:()=>Gs,rWj:()=>W0,sBO:()=>LA,sIi:()=>Rc,s_b:()=>Ro,soG:()=>_y,tb:()=>Ds,tp0:()=>Ue,uIk:()=>kh,vHH:()=>Ie,vpe:()=>Cs,wAp:()=>wt,xp6:()=>Zr,z2F:()=>tf,z3N:()=>ps,zSh:()=>xu,zs3:()=>Ou});var c=F(7579),te=F(727),O=F(8306),ue=F(6451),ae=F(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function ne(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=fe({__forward_ref__:fe});function H(s){return s.__forward_ref__=H,s.toString=function(){return he(this())},s}function X(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===H}class Ie extends Error{constructor(o,l){super(function Ge(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,o){throw new Ie(-201,!1)}function Ht(s,o){null==s&&function qe(s,o,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function Kt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Pt(s){return{providers:s.providers||[],imports:s.imports||[]}}function an(s){return Uo(s,Fi)||Uo(s,li)}function Uo(s,o){return s.hasOwnProperty(o)?s[o]:null}function qr(s){return s&&(s.hasOwnProperty(Qi)||s.hasOwnProperty(Ni))?s[Qi]:null}const Fi=fe({\u0275prov:fe}),Qi=fe({\u0275inj:fe}),li=fe({ngInjectableDef:fe}),Ni=fe({ngInjectorDef:fe});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let pn;function Un(s){const o=pn;return pn=s,o}function Pi(s,o,l){const u=an(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&gt.Optional?null:void 0!==o?o:void ve(he(s))}function jn(s){return{toString:s}.toString()}var yn=(()=>((yn=yn||{})[yn.OnPush=0]="OnPush",yn[yn.Default=1]="Default",yn))(),it=(()=>{return(s=it||(it={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",it;var s})();const Ze=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_n={},Lt=[],Xn=fe({\u0275cmp:fe}),Ss=fe({\u0275dir:fe}),Yt=fe({\u0275pipe:fe}),Li=fe({\u0275mod:fe}),jt=fe({\u0275fac:fe}),Y=fe({__NG_ELEMENT_ID__:fe});let G=0;function B(s){return jn(()=>{const l=!0===s.standalone,u={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===yn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Lt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||it.Emulated,id:"c"+G++,styles:s.styles||Lt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return h.inputs=hn(s.inputs,u),h.outputs=hn(s.outputs),v&&v.forEach(E=>E(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(W).filter(xe):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(vn).filter(xe):null,h})}function W(s){return tt(s)||fn(s)}function xe(s){return null!==s}function Ve(s){return jn(()=>({type:s.type,bootstrap:s.bootstrap||Lt,declarations:s.declarations||Lt,imports:s.imports||Lt,exports:s.exports||Lt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function hn(s,o){if(null==s)return _n;const l={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=u,o&&(o[h]=g)}return l}const Zt=B;function ar(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function tt(s){return s[Xn]||null}function fn(s){return s[Ss]||null}function vn(s){return s[Yt]||null}function Sr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ei(s){return Array.isArray(s)&&!0===s[1]}function zo(s){return 0!=(8&s.flags)}function ro(s){return 2==(2&s.flags)}function qo(s){return 1==(1&s.flags)}function ti(s){return null!==s.template}function cg(s){return 0!=(256&s[2])}function bi(s,o){return s.hasOwnProperty(jt)?s[jt]:null}class Md{constructor(o,l,u){this.previousValue=o,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ko(){return Vi}function Vi(s){return s.type.prototype.ngOnChanges&&(s.setInput=Yo),io}function io(){const s=qa(this),o=s?.current;if(o){const l=s.previous;if(l===_n)s.previous=o;else for(let u in o)l[u]=o[u];s.current=null,this.ngOnChanges(o)}}function Yo(s,o,l,u){const h=qa(s)||function kd(s,o){return s[Zo]=o}(s,{previous:_n,current:null}),g=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[l],C=v[E];g[E]=new Md(C&&C.currentValue,o,v===_n),s[u]=o}Ko.ngInherit=!0;const Zo="__ngSimpleChanges__";function qa(s){return s[Zo]||null}function $n(s){for(;Array.isArray(s);)s=s[0];return s}function Xo(s,o){return $n(o[s])}function ui(s,o){return $n(o[s.index])}function Wa(s,o){return s.data[o]}function rs(s,o){return s[o]}function Tr(s,o){const l=o[s];return Sr(l)?l:l[0]}function Jo(s){return 4==(4&s[2])}function Ei(s){return 64==(64&s[2])}function ss(s,o){return null==o?null:s[o]}function os(s){s[18]=0}function ea(s,o){s[5]+=o;let l=s,u=s[3];for(;null!==u&&(1===o&&1===l[5]||-1===o&&0===l[5]);)u[5]+=o,l=u,u=u[3]}const Et={lFrame:Kl(null),bindingsEnabled:!0};function Ps(){return Et.bindingsEnabled}function Ee(){return Et.lFrame.lView}function Bt(){return Et.lFrame.tView}function Ls(s){return Et.lFrame.contextLView=s,s[8]}function na(s){return Et.lFrame.contextLView=null,s}function bn(){let s=Ka();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ka(){return Et.lFrame.currentTNode}function di(s,o){const l=Et.lFrame;l.currentTNode=s,l.isParent=o}function Ya(){return Et.lFrame.isParent}function Za(){Et.lFrame.isParent=!1}function er(){const s=Et.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function oo(){return Et.lFrame.bindingIndex++}function ls(s){const o=Et.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Pd(s,o){const l=Et.lFrame;l.bindingIndex=l.bindingRootIndex=s,eu(o)}function eu(s){Et.lFrame.currentDirectiveIndex=s}function ao(s){const o=Et.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function zl(){return Et.lFrame.currentQueryIndex}function el(s){Et.lFrame.currentQueryIndex=s}function tu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ia(s,o,l){if(l&gt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&gt.Host||(h=tu(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const u=Et.lFrame=Wl();return u.currentTNode=o,u.lView=s,!0}function ql(s){const o=Wl(),l=s[1];Et.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Wl(){const s=Et.lFrame,o=null===s?null:s.child;return null===o?Kl(s):o}function Kl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Yl(){const s=Et.lFrame;return Et.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Zl=Yl;function sa(){const s=Yl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ur(){return Et.lFrame.selectedIndex}function hi(s){Et.lFrame.selectedIndex=s}function wn(){const s=Et.lFrame;return Wa(s.tView,s.selectedIndex)}function oa(){Et.lFrame.currentNamespace="svg"}function Xl(s,o){for(let l=o.directiveStart,u=o.directiveEnd;l<u;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:I,ngOnDestroy:k}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),I&&((s.viewHooks||(s.viewHooks=[])).push(l,I),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,I)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(l,k)}}function Ef(s,o,l){lo(s,o,3,l)}function Cf(s,o,l,u){(3&s[2])===l&&lo(s,o,l,u)}function tl(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function lo(s,o,l,u){const g=u??-1,v=o.length-1;let E=0;for(let C=void 0!==u?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=u&&E>=u)break}else o[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(Hy(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Hy(s,o,l,u){const h=l[u]<0,g=l[u+1],E=s[h?-l[u]:l[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class aa{constructor(o,l,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function rl(s,o,l){let u=0;for(;u<l.length;){const h=l[u];if("number"==typeof h){if(0!==h)break;u++;const g=l[u++],v=l[u++],E=l[u++];s.setAttribute(o,v,E,g)}else{const g=h,v=l[++u];Ud(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),u++}}return u}function il(s){return 3===s||4===s||6===s}function Ud(s){return 64===s.charCodeAt(0)}function Bs(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?l=h:0===l||jd(s,l,h,null,-1===l||2===l?o[++u]:null)}}return s}function jd(s,o,l,u,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===u)return void(null!==h&&(s[g+1]=h));if(u===s[g+1])return void(s[g+2]=h)}g++,null!==u&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==u&&s.splice(g++,0,u),null!==h&&s.splice(g++,0,h)}function Af(s){return-1!==s}function sl(s){return 32767&s}function Mr(s,o){let l=function pg(s){return s>>16}(s),u=o;for(;l>0;)u=u[15],l--;return u}let cs=!0;function ru(s){const o=cs;return cs=s,o}let us=0;const ln={};function fi(s,o){const l=Nn(s,o);if(-1!==l)return l;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,An(u.data,s),An(o,null),An(u.blueprint,null));const h=la(s,o),g=s.injectorIndex;if(Af(h)){const v=sl(h),E=Mr(h,o),C=E[1].data;for(let I=0;I<8;I++)o[g+I]=E[v+I]|C[v+I]}return o[g+8]=h,g}function An(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Nn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function la(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,h=o;for(;null!==h;){if(u=ua(h),null===u)return-1;if(l++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function Jl(s,o,l){!function Qt(s,o,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(Y)&&(u=l[Y]),null==u&&(u=l[Y]=us++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function In(s,o,l){if(l&gt.Optional)return s;ve()}function co(s,o,l,u){if(l&gt.Optional&&void 0===u&&(u=null),0==(l&(gt.Self|gt.Host))){const h=s[9],g=Un(void 0);try{return h?h.get(o,u,l&gt.Optional):Pi(o,u,l&gt.Optional)}finally{Un(g)}}return In(u,0,l)}function gn(s,o,l,u=gt.Default,h){if(null!==s){if(1024&o[2]){const v=function fo(s,o,l,u,h){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=al(g,v,l,u|gt.Self,ln);if(E!==ln)return E;let C=g.parent;if(!C){const I=v[21];if(I){const k=I.get(l,ln,u);if(k!==ln)return k}C=ua(v),v=v[15]}g=C}return h}(s,o,l,u,ln);if(v!==ln)return v}const g=al(s,o,l,u,ln);if(g!==ln)return g}return co(o,l,u,h)}function al(s,o,l,u,h){const g=function ca(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Y)?s[Y]:void 0;return"number"==typeof o?o>=0?255&o:Vr:o}(l);if("function"==typeof g){if(!ia(o,s,u))return u&gt.Host?In(h,0,u):co(o,l,u,h);try{const v=g(u);if(null!=v||u&gt.Optional)return v;ve()}finally{Zl()}}else if("number"==typeof g){let v=null,E=Nn(s,o),C=-1,I=u&gt.Host?o[16][6]:null;for((-1===E||u&gt.SkipSelf)&&(C=-1===E?la(s,o):o[E+8],-1!==C&&ec(u,!1)?(v=o[1],E=sl(C),o=Mr(C,o)):E=-1);-1!==E;){const k=o[1];if(ho(g,E,k.data)){const N=Ot(E,o,l,v,u,I);if(N!==ln)return N}C=o[E+8],-1!==C&&ec(u,o[1].data[E+8]===I)&&ho(g,E,o)?(v=k,E=sl(C),o=Mr(C,o)):E=-1}}return h}function Ot(s,o,l,u,h,g){const v=o[1],E=v.data[s+8],k=uo(E,v,l,null==u?ro(E)&&cs:u!=v&&0!=(3&E.type),h&gt.Host&&g===E);return null!==k?ds(o,v,k,E):ln}function uo(s,o,l,u,h){const g=s.providerIndexes,v=o.data,E=1048575&g,C=s.directiveStart,k=g>>20,q=h?E+k:s.directiveEnd;for(let ee=u?E:E+k;ee<q;ee++){const be=v[ee];if(ee<C&&l===be||ee>=C&&be.type===l)return ee}if(h){const ee=v[C];if(ee&&ti(ee)&&ee.type===l)return C}return null}function ds(s,o,l,u){let h=s[l];const g=o.data;if(function Df(s){return s instanceof aa}(h)){const v=h;v.resolving&&function Ye(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${l}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(g[l]));const E=ru(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Un(v.injectImpl):null;ia(s,u,gt.Default);try{h=s[l]=v.factory(void 0,g,s,u),o.firstCreatePass&&l>=u.directiveStart&&function nu(s,o,l){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(u){const v=Vi(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==C&&Un(C),ru(E),v.resolving=!1,Zl()}}return h}function ho(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function ec(s,o){return!(s&gt.Self||s&gt.Host&&o)}class rn{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,u){return gn(this._tNode,this._lView,o,u,l)}}function Vr(){return new rn(bn(),Ee())}function iu(s){return jn(()=>{const o=s.prototype.constructor,l=o[jt]||tc(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const g=h[jt]||tc(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function tc(s){return je(s)?()=>{const o=tc(X(s));return o&&o()}:bi(s)}function ua(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Br(s){return function ol(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const u=l.length;let h=0;for(;h<u;){const g=l[h];if(il(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<u&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(bn(),s)}const da="__parameters__";function ft(s,o,l){return jn(()=>{const u=function ha(s){return function(...l){if(s){const u=s(...l);for(const h in u)this[h]=u[h]}}}(o);function h(...g){if(this instanceof h)return u.apply(this,g),this;const v=new h(...g);return E.annotation=v,E;function E(C,I,k){const N=C.hasOwnProperty(da)?C[da]:Object.defineProperty(C,da,{value:[]})[da];for(;N.length<=k;)N.push(null);return(N[k]=N[k]||[]).push(v),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Ut{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Kt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(o===s&&(o=s.slice(0,l)),Rr(u,o)):o!==s&&o.push(u)}return o}function Ur(s,o){s.forEach(l=>Array.isArray(l)?Ur(l,o):o(l))}function lu(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function zn(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function po(s,o){const l=[];for(let u=0;u<s;u++)l.push(o);return l}function qn(s,o,l){let u=pa(s,o);return u>=0?s[1|u]=l:(u=~u,function rc(s,o,l,u){let h=s.length;if(h==o)s.push(l,u);else if(1===h)s.push(u,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=u}}(s,u,o,l)),u}function mo(s,o){const l=pa(s,o);if(l>=0)return s[1|l]}function pa(s,o){return function hs(s,o,l){let u=0,h=s.length>>l;for(;h!==u;){const g=u+(h-u>>1),v=s[g<<l];if(o===v)return g<<l;v>o?h=g:u=g+1}return~(h<<l)}(s,o,1)}const yo={},js="__NG_DI_FLAG__",Ci="ngTempTokenPath",Mf=/\n/gm,nr="__source";let vr;function fl(s){const o=vr;return vr=s,o}function va(s,o=gt.Default){if(void 0===vr)throw new Ie(-203,!1);return null===vr?Pi(s,void 0,o):vr.get(s,o&gt.Optional?null:void 0,o)}function Tn(s,o=gt.Default){return(function _i(){return pn}()||va)(X(s),o)}function pl(s,o=gt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Tn(s,o)}function gl(s){const o=[];for(let l=0;l<s.length;l++){const u=X(s[l]);if(Array.isArray(u)){if(0===u.length)throw new Ie(900,!1);let h,g=gt.Default;for(let v=0;v<u.length;v++){const E=u[v],C=A(E);"number"==typeof C?-1===C?h=E.token:g|=C:h=E}o.push(Tn(h,g))}else o.push(Tn(u))}return o}function D(s,o){return s[js]=o,s.prototype[js]=o,s}function A(s){return s[js]}const se=D(ft("Optional"),8),Ue=D(ft("SkipSelf"),4);let pu,wa;function vg(s){pu=s}function bo(s){return function qd(){if(void 0===wa&&(wa=null,Ze.trustedTypes))try{wa=Ze.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return wa}()?.createHTML(s)||s}class Da{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Yd extends Da{getTypeName(){return"HTML"}}class Zd extends Da{getTypeName(){return"Style"}}class gu extends Da{getTypeName(){return"Script"}}class Qd extends Da{getTypeName(){return"URL"}}class ni extends Da{getTypeName(){return"ResourceURL"}}function ps(s){return s instanceof Da?s.changingThisBreaksApplicationSecurity:s}function Gs(s,o){const l=function cc(s){return s instanceof Da&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function Cg(s){return new Yd(s)}function Xd(s){return new Zd(s)}function Pf(s){return new gu(s)}function Dg(s){return new Qd(s)}function mu(s){return new ni(s)}class xg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(bo(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class wo{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=bo(o),l;const u=this.inertDocument.createElement("body");return u.innerHTML=bo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const v=l.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const yu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Eo(s){return(s=String(s)).match(yu)||s.match(qy)?s:"unsafe:"+s}function Hi(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function xa(...s){const o={};for(const l of s)for(const u in l)l.hasOwnProperty(u)&&(o[u]=!0);return o}const Vf=Hi("area,br,col,hr,img,wbr"),Bf=Hi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),th=Hi("rp,rt"),yl=xa(Vf,xa(Bf,Hi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xa(th,Hi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xa(th,Bf)),Co=Hi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uc=Hi("srcset"),_l=xa(Co,uc,Hi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vu=Hi("script,style,template");class Do{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,u=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?u=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,u&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!yl.hasOwnProperty(l))return this.sanitizedSomething=!0,!vu.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const u=o.attributes;for(let h=0;h<u.length;h++){const g=u.item(h),v=g.name,E=v.toLowerCase();if(!_l.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=g.value;Co[E]&&(C=Eo(C)),uc[E]&&(s=C,C=(s=String(s)).split(",").map(o=>Eo(o.trim())).join(", ")),this.buf.push(" ",v,'="',gs(C),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();yl.hasOwnProperty(l)&&!Vf.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(gs(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const Sg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ky=/([^\#-~ |!])/g;function gs(s){return s.replace(/&/g,"&amp;").replace(Sg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ky,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gi;function bu(s,o){let l=null;try{Gi=Gi||function Jd(s){const o=new wo(s);return function eh(){try{return!!(new window.DOMParser).parseFromString(bo(""),"text/html")}catch{return!1}}()?new xg(o):o}(s);let u=o?String(o):"";l=Gi.getInertBodyElement(u);let h=5,g=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=g,g=l.innerHTML,l=Gi.getInertBodyElement(u)}while(u!==g);return bo((new Do).sanitizeChildren(dc(l)||l))}finally{if(l){const u=dc(l)||l;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function dc(s){return"content"in s&&function wu(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();const Aa=new Ut("ENVIRONMENT_INITIALIZER"),$s=new Ut("INJECTOR",-1),jf=new Ut("INJECTOR_DEF_TYPES");class Cu{get(o,l=yo){if(l===yo){const u=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw u.name="NullInjectorError",u}return l}}function kg(...s){return{\u0275providers:br(0,s)}}function br(s,...o){const l=[],u=new Set;let h;return Ur(o,g=>{const v=g;ih(v,l,[],u)&&(h||(h=[]),h.push(v))}),void 0!==h&&pc(h,l),l}function pc(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];Ur(h,g=>{o.push(g)})}}function ih(s,o,l,u){if(!(s=X(s)))return!1;let h=null,g=qr(s);const v=!g&&tt(s);if(g||v){if(v&&!v.standalone)return!1;h=s}else{const C=s.ngModule;if(g=qr(C),!g)return!1;h=C}const E=u.has(h);if(v){if(E)return!1;if(u.add(h),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const I of C)ih(I,o,l,u)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let I;u.add(h);try{Ur(g.imports,k=>{ih(k,o,l,u)&&(I||(I=[]),I.push(k))})}finally{}void 0!==I&&pc(I,o)}if(!E){const I=bi(h)||(()=>new h);o.push({provide:h,useFactory:I,deps:Lt},{provide:jf,useValue:h,multi:!0},{provide:Aa,useValue:()=>Tn(h),multi:!0})}const C=g.providers;null==C||E||Ur(C,k=>{o.push(k)})}}return h!==s&&void 0!==s.providers}const Hf=fe({provide:String,useValue:fe});function gc(s){return null!==s&&"object"==typeof s&&Hf in s}function xo(s){return"function"==typeof s}const xu=new Ut("Set Injector scope."),mc={},Jy={};let $f;function Au(){return void 0===$f&&($f=new Cu),$f}class Kn{}class Ia extends Kn{constructor(o,l,u,h){super(),this.parent=l,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qf(o,v=>this.processProvider(v)),this.records.set($s,ms(void 0,this)),h.has("environment")&&this.records.set(Kn,ms(void 0,this));const g=this.records.get(xu);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(jf.multi,Lt,gt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=fl(this),u=Un(void 0);try{return o()}finally{fl(l),Un(u)}}get(o,l=yo,u=gt.Default){this.assertNotDestroyed();const h=fl(this),g=Un(void 0);try{if(!(u&gt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function sh(s){return"function"==typeof s||"object"==typeof s&&s instanceof Ut}(o)&&an(o);E=C&&this.injectableDefInScope(C)?ms(Sa(o),mc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(u&gt.Self?Au():this.parent).get(o,l=u&gt.Optional&&l===yo?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Ci]=v[Ci]||[]).unshift(he(o)),h)throw v;return function M(s,o,l,u){const h=s[Ci];throw o[nr]&&h.unshift(o[nr]),s.message=function P(s,o,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):he(E)))}h=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${h}]: ${s.replace(Mf,"\n  ")}`}("\n"+s.message,h,l,u),s.ngTokenPath=h,s[Ci]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Un(g),fl(h)}}resolveInjectorInitializers(){const o=fl(this),l=Un(void 0);try{const u=this.get(Aa.multi,Lt,gt.Self);for(const h of u)h()}finally{fl(o),Un(l)}}toString(){const o=[],l=this.records;for(const u of l.keys())o.push(he(u));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let l=xo(o=X(o))?o:X(o&&o.provide);const u=function zs(s){return gc(s)?ms(void 0,s.useValue):ms(qs(s),mc)}(o);if(xo(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=ms(void 0,mc,!0),h.factory=()=>gl(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,u)}hydrate(o,l){return l.value===mc&&(l.value=Jy,l.value=l.factory()),"object"==typeof l.value&&l.value&&function hr(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=X(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Sa(s){const o=an(s),l=null!==o?o.factory:bi(s);if(null!==l)return l;if(s instanceof Ut)throw new Ie(204,!1);if(s instanceof Function)return function zf(s){const o=s.length;if(o>0)throw po(o,"?"),new Ie(204,!1);const l=function ai(s){const o=s&&(s[Fi]||s[li]);if(o){const l=function Lr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ie(204,!1)}function qs(s,o,l){let u;if(xo(s)){const h=X(s);return bi(h)||Sa(h)}if(gc(s))u=()=>X(s.useValue);else if(function Du(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...gl(s.deps||[]));else if(function Gf(s){return!(!s||!s.useExisting)}(s))u=()=>Tn(X(s.useExisting));else{const h=X(s&&(s.useClass||s.provide));if(!function Rg(s){return!!s.deps}(s))return bi(h)||Sa(h);u=()=>new h(...gl(s.deps))}return u}function ms(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function e_(s){return!!s.\u0275providers}function qf(s,o){for(const l of s)Array.isArray(l)?qf(l,o):e_(l)?qf(l.\u0275providers,o):o(l)}class Og{}class b{resolveComponentFactory(o){throw function _(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let S=(()=>{class s{}return s.NULL=new b,s})();function R(){return K(bn(),Ee())}function K(s,o){return new ce(ui(s,o))}let ce=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=R,s})();function Le(s){return s instanceof ce?s.nativeElement:s}class mt{}let dt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Yn(){const s=Ee(),l=Tr(bn().index,s);return(Sr(l)?l:s)[11]}(),s})(),$i=(()=>{class s{}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:()=>null}),s})();class bl{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const yc=new bl("14.1.3"),Iu={};function bc(s){return s.ngOriginalError}class Xf{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&bc(o);for(;l&&bc(l);)l=bc(l);return l||null}}const Bg=new Map;let Yr=0;const nt="__ngContext__";function st(s,o){Sr(o)?(s[nt]=o[20],function wc(s){Bg.set(s[20],s)}(o)):s[nt]=o}function Jf(s){const o=s[nt];return"number"==typeof o?function Ug(s){return Bg.get(s)||null}(o):o||null}function Ke(s){const o=Jf(s);return o?Sr(o)?o:o.lView:null}const vw=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ze))();var Ta=(()=>((Ta=Ta||{})[Ta.Important=1]="Important",Ta[Ta.DashCase=2]="DashCase",Ta))();function $e(s,o){return undefined(s,o)}function ep(s){const o=s[3];return ei(o)?o[3]:o}function Mu(s){return o_(s[13])}function zg(s){return o_(s[4])}function o_(s){for(;null!==s&&!ei(s);)s=s[4];return s}function Ec(s,o,l,u,h){if(null!=u){let g,v=!1;ei(u)?g=u:Sr(u)&&(v=!0,u=u[0]);const E=$n(u);0===s&&null!==l?null==h?u_(o,l,E):ys(o,l,E,h||null,!0):1===s&&null!==l?ys(o,l,E,h||null,!0):2===s?function d_(s,o,l){const u=un(s,o);u&&function Kg(s,o,l,u){s.removeChild(o,l,u)}(s,u,o,l)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function op(s,o,l,u,h){const g=l[7];g!==$n(l)&&Ec(o,s,u,g,h);for(let E=10;E<l.length;E++){const C=l[E];sp(C[1],C,s,o,u,g)}}(o,s,g,l,h)}}function tp(s,o,l){return s.createElement(o,l)}function Ew(s,o){const l=s[9],u=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,ea(h,-1)),l.splice(u,1)}function Cl(s,o){if(s.length<=10)return;const l=10+o,u=s[l];if(u){const h=u[17];null!==h&&h!==s&&Ew(h,u),o>0&&(s[l-1][4]=u[4]);const g=zn(s,10+o);!function le(s,o){sp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const v=g[19];null!==v&&v.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function l_(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&sp(s,o,l,3,null,null),function pD(s){let o=s[13];if(!o)return rp(s[1],s);for(;o;){let l=null;if(Sr(o))l=o[13];else{const u=o[10];u&&(l=u)}if(!l){for(;o&&!o[4]&&o!==s;)Sr(o)&&rp(o[1],o),o=o[3];null===o&&(o=s),Sr(o)&&rp(o[1],o),l=o&&o[4]}o=l}}(o)}}function rp(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function mD(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const h=o[l[u]];if(!(h instanceof aa)){const g=l[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=h[g[v]],C=g[v+1];try{C.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function gD(s,o){const l=s.cleanup,u=o[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(o):$n(o[v]),C=u[h=l[g+2]],I=l[g+3];"boolean"==typeof I?E.removeEventListener(l[g],C,I):I>=0?u[h=I]():u[h=-I].unsubscribe(),g+=2}else{const v=u[h=l[g+1]];l[g].call(v)}if(null!==u){for(let g=h+1;g<u.length;g++)(0,u[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&ei(o[3])){l!==o[3]&&Ew(l,o);const u=o[19];null!==u&&u.detachView(s)}!function lD(s){Bg.delete(s[20])}(o)}}function Di(s,o,l){return function c_(s,o,l){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return l[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===it.None||h===it.Emulated)return null}return ui(u,l)}(s,o.parent,l)}function ys(s,o,l,u,h){s.insertBefore(o,l,u,h)}function u_(s,o,l){s.appendChild(o,l)}function ir(s,o,l,u,h){null!==u?ys(s,o,l,u,h):u_(s,o,l)}function un(s,o){return s.parentNode(o)}function ku(s,o,l){return Dw(s,o,l)}let Dw=function qi(s,o,l){return 40&s.type?ui(s,l):null};function So(s,o,l,u){const h=Di(s,u,o),g=o[11],E=ku(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)ir(g,h,l[C],E,!1);else ir(g,h,l,E,!1)}function Ln(s,o){if(null!==o){const l=o.type;if(3&l)return ui(o,s);if(4&l)return ip(-1,s[o.index]);if(8&l){const u=o.child;if(null!==u)return Ln(s,u);{const h=s[o.index];return ei(h)?ip(-1,h):$n(h)}}if(32&l)return $e(o,s)()||$n(s[o.index]);{const u=xc(s,o);return null!==u?Array.isArray(u)?u[0]:Ln(ep(s[16]),u):Ln(s,o.next)}}return null}function xc(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ip(s,o){const l=10+s+1;if(l<o.length){const u=o[l],h=u[1].firstChild;if(null!==h)return Ln(u,h)}return o[7]}function Ru(s,o,l,u,h,g,v){for(;null!=l;){const E=u[l.index],C=l.type;if(v&&0===o&&(E&&st($n(E),u),l.flags|=4),64!=(64&l.flags))if(8&C)Ru(s,o,l.child,u,h,g,!1),Ec(o,s,h,E,g);else if(32&C){const I=$e(l,u);let k;for(;k=I();)Ec(o,s,h,k,g);Ec(o,s,h,E,g)}else 16&C?uh(s,o,u,l,h,g):Ec(o,s,h,E,g);l=v?l.projectionNext:l.next}}function sp(s,o,l,u,h,g){Ru(l,u,s.firstChild,o,h,g,!1)}function uh(s,o,l,u,h,g){const v=l[16],C=v[6].projection[u.projection];if(Array.isArray(C))for(let I=0;I<C.length;I++)Ec(o,s,h,C[I],g);else Ru(s,o,C,v[3],h,g,!0)}function xl(s,o,l){s.setAttribute(o,"style",l)}function dh(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function Ac(s,o,l){let u=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===u||s.charCodeAt(h+g)<=32)return h}l=h+1}}const hh="ng-template";function Ic(s,o,l){let u=0;for(;u<s.length;){let h=s[u++];if(l&&"class"===h){if(h=s[u],-1!==Ac(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function h_(s){return 4===s.type&&s.value!==hh}function fh(s,o,l){return o===(4!==s.type||l?s.value:hh)}function f_(s,o,l){let u=4;const h=s.attrs||[],g=function Sw(s){for(let o=0;o<s.length;o++)if(il(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!v)if(4&u){if(u=2|1&u,""!==C&&!fh(s,C,l)||""===C&&1===o.length){if(ri(u))return!1;v=!0}}else{const I=8&u?C:o[++E];if(8&u&&null!==s.attrs){if(!Ic(s.attrs,I,l)){if(ri(u))return!1;v=!0}continue}const N=p_(8&u?"class":C,h,h_(s),l);if(-1===N){if(ri(u))return!1;v=!0;continue}if(""!==I){let q;q=N>g?"":h[N+1].toLowerCase();const ee=8&u?q:null;if(ee&&-1!==Ac(ee,I,0)||2&u&&I!==q){if(ri(u))return!1;v=!0}}}}else{if(!v&&!ri(u)&&!ri(C))return!1;if(v&&ri(C))continue;v=!1,u=C|1&u}}return ri(u)||v}function ri(s){return 0==(1&s)}function p_(s,o,l,u){if(null===o)return-1;let h=0;if(u||!l){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function Yg(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===o)return l;l++}return-1}(o,s)}function ph(s,o,l=!1){for(let u=0;u<o.length;u++)if(f_(s,o[u],l))return!0;return!1}function ap(s,o){e:for(let l=0;l<o.length;l++){const u=o[l];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function g_(s,o){return s?":not("+o.trim()+")":o}function yD(s){let o=s[0],l=1,u=2,h="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&u){const E=s[++l];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!ri(v)&&(o+=g_(g,h),h=""),u=v,g=g||!ri(u);l++}return""!==h&&(o+=g_(g,h)),o}const Ft={};function Zr(s){m_(Bt(),Ee(),ur()+s,!1)}function m_(s,o,l,u){if(!u)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Ef(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Cf(o,g,0,l)}hi(l)}function y_(s,o=null,l=null,u){const h=Qr(s,o,l,u);return h.resolveInjectorInitializers(),h}function Qr(s,o=null,l=null,u,h=new Set){const g=[l||Lt,kg(s)];return u=u||("object"==typeof s?void 0:he(s)),new Ia(g,o||Au(),u||null,h)}let Ou=(()=>{class s{static create(l,u){if(Array.isArray(l))return y_({name:""},u,l,"");{const h=l.name??"";return y_({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=yo,s.NULL=new Cu,s.\u0275prov=Kt({token:s,providedIn:"any",factory:()=>Tn($s)}),s.__NG_ELEMENT_ID__=-1,s})();function Pu(s,o=gt.Default){const l=Ee();return null===l?Tn(s,o):gn(bn(),l,X(s),o)}function lp(){throw new Error("invalid")}function im(s,o){return s<<17|o<<2}function Ks(s){return s>>17&32767}function sm(s){return 2|s}function xi(s){return(131068&s)>>2}function om(s,o){return-131069&s|o<<2}function am(s){return 1|s}function Hw(s,o){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const h=l[u],g=l[u+1];if(-1!==g){const v=s.data[g];el(h),v.contentQueries(2,o[g],g)}}}function fm(s,o,l,u,h,g,v,E,C,I,k){const N=o.blueprint.slice();return N[0]=h,N[2]=76|u,(null!==k||s&&1024&s[2])&&(N[2]|=1024),os(N),N[3]=N[15]=s,N[8]=l,N[10]=v||s&&s[10],N[11]=E||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=I||s&&s[9]||null,N[6]=g,N[20]=function ah(){return Yr++}(),N[21]=k,N[16]=2==o.type?s[16]:N,N}function Ch(s,o,l,u,h){let g=s.data[o];if(null===g)g=function C_(s,o,l,u,h){const g=Ka(),v=Ya(),C=s.data[o]=function LD(s,o,l,u,h,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,u,h);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,l,u,h),function Xc(){return Et.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=h;const v=function Vs(){const s=Et.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return di(g,!0),g}function ka(s,o,l,u){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function hp(s,o,l){ql(o);try{const u=s.viewQuery;null!==u&&vm(1,u,l);const h=s.template;null!==h&&pm(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Hw(s,o),s.staticViewQueries&&vm(2,s.viewQuery,l);const g=s.components;null!==g&&function $w(s,o){for(let l=0;l<o.length;l++)qD(s,o[l])}(o,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,sa()}}function fp(s,o,l,u){const h=o[2];if(128!=(128&h)){ql(o);try{os(o),function Xa(s){return Et.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&pm(s,o,l,2,u);const v=3==(3&h);if(v){const I=s.preOrderCheckHooks;null!==I&&Ef(o,I,null)}else{const I=s.preOrderHooks;null!==I&&Cf(o,I,0,null),tl(o,0)}if(function $D(s){for(let o=Mu(s);null!==o;o=zg(o)){if(!o[2])continue;const l=o[9];for(let u=0;u<l.length;u++){const h=l[u],g=h[3];0==(512&h[2])&&ea(g,1),h[2]|=512}}}(o),function GD(s){for(let o=Mu(s);null!==o;o=zg(o))for(let l=10;l<o.length;l++){const u=o[l],h=u[1];Ei(u)&&fp(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&Hw(s,o),v){const I=s.contentCheckHooks;null!==I&&Ef(o,I)}else{const I=s.contentHooks;null!==I&&Cf(o,I,1),tl(o,1)}!function jw(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const h=l[u];if(h<0)hi(~h);else{const g=h,v=l[++u],E=l[++u];Pd(v,g),E(2,o[g])}}}finally{hi(-1)}}(s,o);const E=s.components;null!==E&&function Gw(s,o){for(let l=0;l<o.length;l++)zD(s,o[l])}(o,E);const C=s.viewQuery;if(null!==C&&vm(2,C,u),v){const I=s.viewCheckHooks;null!==I&&Ef(o,I)}else{const I=s.viewHooks;null!==I&&Cf(o,I,2),tl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ea(o[3],-1))}finally{sa()}}}function Xr(s,o,l,u){const h=o[10],v=Jo(o);try{!v&&h.begin&&h.begin(),v&&hp(s,o,u),fp(s,o,l,u)}finally{!v&&h.end&&h.end()}}function pm(s,o,l,u,h){const g=ur(),v=2&u;try{hi(-1),v&&o.length>22&&m_(s,o,22,!1),l(u,h)}finally{hi(g)}}function Gu(s,o,l){!Ps()||(function xh(s,o,l,u){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||fi(l,o),st(u,o);const v=l.initialInputs;for(let E=h;E<g;E++){const C=s.data[E],I=ti(C);I&&Ra(o,l,C);const k=ds(o,s,E,l);st(k,o),null!==v&&Jw(0,E-h,k,C,0,v),I&&(Tr(l.index,o)[8]=k)}}(s,o,l,ui(l,o)),128==(128&l.flags)&&function Ah(s,o,l){const u=l.directiveStart,h=l.directiveEnd,g=l.index,v=function Ja(){return Et.lFrame.currentDirectiveIndex}();try{hi(g);for(let E=u;E<h;E++){const C=s.data[E],I=o[E];eu(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Yw(C,I)}}finally{hi(-1),eu(v)}}(s,o,l))}function Zs(s,o,l=ui){const u=o.localNames;if(null!==u){let h=o.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],E=-1===v?l(o,s):s[v];s[h++]=E}}}function gm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=mm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function mm(s,o,l,u,h,g,v,E,C,I){const k=22+u,N=k+h,q=function pp(s,o){const l=[];for(let u=0;u<o;u++)l.push(u<s?null:Ft);return l}(k,N),ee="function"==typeof I?I():I;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:E,declTNode:o,data:q.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function x_(s,o,l,u){const h=bm(o);null===l?h.push(u):(h.push(l),s.firstCreatePass&&Gr(s).push(u,h.length-1))}function qw(s,o,l){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(o,h):l[u]=[o,h]}return l}function Dh(s,o){const u=o.directiveEnd,h=s.data,g=o.attrs,v=[];let E=null,C=null;for(let I=o.directiveStart;I<u;I++){const k=h[I],N=k.inputs,q=null===g||h_(o)?null:HD(N,g);v.push(q),E=qw(N,I,E),C=qw(k.outputs,I,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=C}function vs(s,o,l,u,h,g,v,E){const C=ui(o,l);let k,I=o.inputs;!E&&null!=I&&(k=I[u])?(gp(s,l,k,u,h),ro(o)&&I_(l,o.index)):3&o.type&&(u=function A_(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,o.value||"",u):h,g.setProperty(C,u,h))}function I_(s,o){const l=Tr(o,s);16&l[2]||(l[2]|=32)}function ym(s,o,l,u){let h=!1;if(Ps()){const g=function jD(s,o,l){const u=s.directiveRegistry;let h=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];ph(l,v.selectors,!1)&&(h||(h=[]),Jl(fi(l,o),s,v.type),ti(v)?(Zw(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===u?null:{"":-1};if(null!==g){h=!0,Xw(l,s.data.length,g.length);for(let k=0;k<g.length;k++){const N=g[k];N.providersResolver&&N.providersResolver(N)}let E=!1,C=!1,I=ka(s,o,g.length,null);for(let k=0;k<g.length;k++){const N=g[k];l.mergedAttrs=Bs(l.mergedAttrs,N.hostAttrs),S_(s,l,o,I,N),Ai(I,N,v),null!==N.contentQueries&&(l.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(l.flags|=128);const q=N.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),I++}Dh(s,l)}v&&function Qw(s,o,l){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new Ie(-301,!1);u.push(o[h],g)}}}(l,u,v)}return l.mergedAttrs=Bs(l.mergedAttrs,l.attrs),h}function Kw(s,o,l,u,h,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function UD(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(E)!=C&&E.push(C),E.push(u,h,v)}}function Yw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Zw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Ai(s,o,l){if(l){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)l[o.exportAs[u]]=s;ti(o)&&(l[""]=s)}}function Xw(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function S_(s,o,l,u,h){s.data[u]=h;const g=h.factory||(h.factory=bi(h.type)),v=new aa(g,ti(h),Pu);s.blueprint[u]=v,l[u]=v,Kw(s,o,0,u,ka(s,l,h.hostVars,Ft),h)}function Ra(s,o,l){const u=ui(o,s),h=gm(l),g=s[10],v=_m(s,fm(s,h,null,l.onPush?32:16,u,o,g,g.createRenderer(u,l),null,null,null));s[o.index]=v}function To(s,o,l,u,h,g){const v=ui(s,o);!function Ih(s,o,l,u,h,g,v){if(null==g)s.removeAttribute(o,h,l);else{const E=null==v?ge(g):v(g,u||"",h);s.setAttribute(o,h,E,l)}}(o[11],v,g,s.value,l,u,h)}function Jw(s,o,l,u,h,g){const v=g[o];if(null!==v){const E=u.setInput;for(let C=0;C<v.length;){const I=v[C++],k=v[C++],N=v[C++];null!==E?u.setInput(l,N,I,k):l[k]=N}}}function HD(s,o){let l=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return l}function eE(s,o,l,u){return new Array(s,!0,!1,o,null,0,u,l,null,null)}function zD(s,o){const l=Tr(o,s);if(Ei(l)){const u=l[1];48&l[2]?fp(u,l,u.template,l[8]):l[5]>0&&T_(l)}}function T_(s){for(let u=Mu(s);null!==u;u=zg(u))for(let h=10;h<u.length;h++){const g=u[h];if(Ei(g))if(512&g[2]){const v=g[1];fp(v,g,v.template,g[8])}else g[5]>0&&T_(g)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const h=Tr(l[u],s);Ei(h)&&h[5]>0&&T_(h)}}function qD(s,o){const l=Tr(o,s),u=l[1];(function WD(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(u,l),hp(u,l,l[8])}function _m(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function M_(s){for(;s;){s[2]|=32;const o=ep(s);if(cg(s)&&!o)return s;s=o}return null}function nE(s){!function tE(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],u=Ke(l);if(null!==u){const h=u[1];Xr(h,u,h.template,l)}}}(s[8])}function vm(s,o,l){el(0),o(s,l)}const QD=(()=>Promise.resolve(null))();function bm(s){return s[7]||(s[7]=[])}function Gr(s){return s.cleanup||(s.cleanup=[])}function wm(s,o,l){return(null===s||ti(s))&&(l=function Fd(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}function Em(s,o){const l=s[9],u=l?l.get(Xf,null):null;u&&u.handleError(o)}function gp(s,o,l,u,h){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],C=o[v],I=s.data[v];null!==I.setInput?I.setInput(C,h,u,E):C[E]=h}}function gi(s,o,l){const u=Xo(o,s);!function a_(s,o,l){s.setValue(o,l)}(s[11],u,l)}function mp(s,o,l){let u=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?h=pe(h,E):2==g&&(u=pe(u,E+": "+o[++v]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=h:s.classesWithoutHost=h}function Cm(s,o,l,u,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&u.push($n(g)),ei(g))for(let E=10;E<g.length;E++){const C=g[E],I=C[1].firstChild;null!==I&&Cm(C[1],C,I,u)}const v=l.type;if(8&v)Cm(s,o,l.child,u);else if(32&v){const E=$e(l,o);let C;for(;C=E();)u.push(C)}else if(16&v){const E=xc(o,l);if(Array.isArray(E))u.push(...E);else{const C=ep(o[16]);Cm(C[1],C,E,u,!0)}}l=h?l.projectionNext:l.next}return u}class Sh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Cm(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ei(o)){const l=o[8],u=l?l.indexOf(this):-1;u>-1&&(Cl(o,u),zn(l,u))}this._attachedToViewContainer=!1}l_(this._lView[1],this._lView)}onDestroy(o){x_(this._lView[1],this._lView,null,o)}markForCheck(){M_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function k_(s,o,l){const u=o[10];u.begin&&u.begin();try{fp(s,o,s.template,l)}catch(h){throw Em(o,h),h}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Io(s,o){sp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class Dm extends Sh{constructor(o){super(o),this._view=o}detectChanges(){nE(this._view)}checkNoChanges(){}get context(){return null}}class kl extends S{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=tt(o);return new Th(l,this.ngModule)}}function Mc(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class yp{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,u){const h=this.injector.get(o,Iu,u);return h!==Iu||l===Iu?h:this.parentInjector.get(o,l,u)}}class Th extends Og{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function _D(s){return s.map(yD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Mc(this.componentDef.inputs)}get outputs(){return Mc(this.componentDef.outputs)}create(o,l,u,h){let g=(h=h||this.ngModule)instanceof Kn?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new yp(o,g):o,E=v.get(mt,null);if(null===E)throw new Ie(407,!1);const C=v.get($i,null),I=E.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",N=u?function zw(s,o,l){return s.selectRootElement(o,l===it.ShadowDom)}(I,u,this.componentDef.encapsulation):tp(E.createRenderer(null,this.componentDef),k,function $u(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(k)),q=this.componentDef.onPush?288:272,ee=function oE(s,o){return{components:[],scheduler:s||vw,clean:QD,playerHandler:o||null,flags:0}}(),be=mm(0,null,null,1,0,null,null,null,null,null),Re=fm(null,be,ee,q,null,null,E,I,C,v,null);let ze,et;ql(Re);try{const Dt=function JD(s,o,l,u,h,g){const v=l[1];l[22]=s;const C=Ch(v,22,2,"#host",null),I=C.mergedAttrs=o.hostAttrs;null!==I&&(mp(C,I,!0),null!==s&&(rl(h,s,I),null!==C.classes&&dh(h,s,C.classes),null!==C.styles&&xl(h,s,C.styles)));const k=u.createRenderer(s,o),N=fm(l,gm(o),null,o.onPush?32:16,l[22],C,u,k,g||null,null,null);return v.firstCreatePass&&(Jl(fi(C,l),v,o.type),Zw(v,C),Xw(C,l.length,1)),_m(l,N),l[22]=N}(N,this.componentDef,Re,E,I);if(N)if(u)rl(I,N,["ng-version",yc.full]);else{const{attrs:Me,classes:yt}=function Tw(s){const o=[],l=[];let u=1,h=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++u]):8===h&&l.push(g);else{if(!ri(h))break;h=g}u++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Me&&rl(I,N,Me),yt&&yt.length>0&&dh(I,N,yt.join(" "))}if(et=Wa(be,22),void 0!==l){const Me=et.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Gt=l[yt];Me.push(null!=Gt?Array.from(Gt):null)}}ze=function sE(s,o,l,u,h){const g=l[1],v=function BD(s,o,l){const u=bn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),S_(s,u,o,ka(s,o,1,null),l),Dh(s,u));const h=ds(o,s,u.directiveStart,u);st(h,o);const g=ui(u,o);return g&&st(g,o),h}(g,l,o);if(u.components.push(v),s[8]=v,null!==h)for(const C of h)C(v,o);if(o.contentQueries){const C=bn();o.contentQueries(1,v,C.directiveStart)}const E=bn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(hi(E.index),Kw(l[1],E,0,E.directiveStart,E.directiveEnd,o),Yw(o,v)),v}(Dt,this.componentDef,Re,ee,[xm]),hp(be,Re,null)}finally{sa()}return new iE(this.componentType,ze,K(et,Re),Re,et)}}class iE extends class t_{}{constructor(o,l,u,h,g){super(),this.location=u,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new Dm(h),this.componentType=o}setInput(o,l){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[o])){const g=this._rootLView;gp(g[1],g,h,o,l),I_(g,this._tNode.index)}}get injector(){return new rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function xm(){const s=bn();Xl(Ee()[1],s)}function O_(s){let o=function kc(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;o;){let h;if(ti(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);h=o.\u0275dir}if(h){if(l){u.push(h);const v=s;v.inputs=F_(s.inputs),v.declaredInputs=F_(s.declaredInputs),v.outputs=F_(s.outputs);const E=h.hostBindings;E&&_p(s,E);const C=h.viewQuery,I=h.contentQueries;if(C&&ex(s,C),I&&tx(s,I),ne(s.inputs,h.inputs),ne(s.declaredInputs,h.declaredInputs),ne(s.outputs,h.outputs),ti(h)&&h.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===O_&&(l=!1)}}o=Object.getPrototypeOf(o)}!function aE(s){let o=0,l=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=Bs(h.hostAttrs,l=Bs(l,h.hostAttrs))}}(u)}function F_(s){return s===_n?{}:s===Lt?[]:s}function ex(s,o){const l=s.viewQuery;s.viewQuery=l?(u,h)=>{o(u,h),l(u,h)}:o}function tx(s,o){const l=s.contentQueries;s.contentQueries=l?(u,h,g)=>{o(u,h,g),l(u,h,g)}:o}function _p(s,o){const l=s.hostBindings;s.hostBindings=l?(u,h)=>{o(u,h),l(u,h)}:o}let Im=null;function Wu(){if(!Im){const s=Ze.Symbol;if(s&&s.iterator)Im=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const u=o[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Im=u)}}}return Im}function Rc(s){return!!Ku(s)&&(Array.isArray(s)||!(s instanceof Map)&&Wu()in s)}function Ku(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ii(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function kh(s,o,l,u){const h=Ee();return ii(h,oo(),o)&&(Bt(),To(wn(),h,s,o,l,u)),kh}function Mo(s,o,l,u,h,g){const E=function Or(s,o,l,u){const h=ii(s,o,l);return ii(s,o+1,u)||h}(s,function Bi(){return Et.lFrame.bindingIndex}(),l,h);return ls(2),E?o+ge(l)+u+ge(h)+g:Ft}function Oh(s,o,l,u,h,g,v,E){const C=Ee(),I=Bt(),k=s+22,N=I.firstCreatePass?function Xu(s,o,l,u,h,g,v,E,C){const I=o.consts,k=Ch(o,s,4,v||null,ss(I,E));ym(o,l,k,ss(I,C)),Xl(o,k);const N=k.tViews=mm(2,k,u,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,I);return null!==o.queries&&(o.queries.template(o,k),N.queries=o.queries.embeddedTView(k)),k}(k,I,C,o,l,u,h,g,v):I.data[k];di(N,!1);const q=C[11].createComment("");So(I,C,q,N),st(q,C),_m(C,C[k]=eE(q,C,q,N)),qo(N)&&Gu(I,C,N),null!=v&&Zs(C,N,E)}function V_(s){return rs(function Qa(){return Et.lFrame.contextLView}(),22+s)}function B_(s,o,l){const u=Ee();return ii(u,oo(),o)&&vs(Bt(),wn(),u,s,o,u[11],l,!1),B_}function Tm(s,o,l,u,h){const v=h?"class":"style";gp(s,l,o.inputs[v],v,u)}function Mm(s,o,l,u){const h=Ee(),g=Bt(),v=22+s,E=h[11],C=h[v]=tp(E,o,function wf(){return Et.lFrame.currentNamespace}()),I=g.firstCreatePass?function ix(s,o,l,u,h,g,v){const E=o.consts,I=Ch(o,s,2,h,ss(E,g));return ym(o,l,I,ss(E,v)),null!==I.attrs&&mp(I,I.attrs,!1),null!==I.mergedAttrs&&mp(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(v,g,h,0,o,l,u):g.data[v];di(I,!0);const k=I.mergedAttrs;null!==k&&rl(E,C,k);const N=I.classes;null!==N&&dh(E,C,N);const q=I.styles;return null!==q&&xl(E,C,q),64!=(64&I.flags)&&So(g,h,C,I),0===function Gl(){return Et.lFrame.elementDepthCount}()&&st(C,h),function Qc(){Et.lFrame.elementDepthCount++}(),qo(I)&&(Gu(g,h,I),function D_(s,o,l){if(zo(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,I,h)),null!==u&&Zs(h,I),Mm}function Fh(){let s=bn();Ya()?Za():(s=s.parent,di(s,!1));const o=s;!function so(){Et.lFrame.elementDepthCount--}();const l=Bt();return l.firstCreatePass&&(Xl(l,s),zo(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function _r(s){return 0!=(16&s.flags)}(o)&&Tm(l,o,Ee(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xf(s){return 0!=(32&s.flags)}(o)&&Tm(l,o,Ee(),o.stylesWithoutHost,!1),Fh}function Fr(s,o,l,u){return Mm(s,o,l,u),Fh(),Fr}function H_(){return Ee()}function G_(s){return!!s&&"function"==typeof s.then}function wp(s){return!!s&&"function"==typeof s.subscribe}const vE=wp;function km(s,o,l,u){const h=Ee(),g=Bt(),v=bn();return Nh(g,h,h[11],v,s,o,0,u),km}function Ep(s,o){const l=bn(),u=Ee(),h=Bt();return Nh(h,u,wm(ao(h.data),l,u),l,s,o),Ep}function Nh(s,o,l,u,h,g,v,E){const C=qo(u),k=s.firstCreatePass&&Gr(s),N=o[8],q=bm(o);let ee=!0;if(3&u.type||E){const ze=ui(u,o),et=E?E(ze):ze,Dt=q.length,Me=E?Gt=>E($n(Gt[u.index])):u.index;let yt=null;if(!E&&C&&(yt=function $_(s,o,l,u){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===u){const E=o[7],C=h[g+2];return E.length>C?E[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,u.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=g,yt.__ngLastListenerFn__=g,ee=!1;else{g=Rm(u,o,N,g,!1);const Gt=l.listen(et,h,g);q.push(g,Gt),k&&k.push(h,Me,Dt,Dt+1)}}else g=Rm(u,o,N,g,!1);const be=u.outputs;let Re;if(ee&&null!==be&&(Re=be[h])){const ze=Re.length;if(ze)for(let et=0;et<ze;et+=2){const On=o[Re[et]][Re[et+1]].subscribe(g),jc=q.length;q.push(g,On),k&&k.push(h,u.index,jc,-(jc+1))}}}function Cp(s,o,l,u){try{return!1!==l(u)}catch(h){return Em(s,h),!1}}function Rm(s,o,l,u,h){return function g(v){if(v===Function)return u;M_(2&s.flags?Tr(s.index,o):o);let C=Cp(o,0,u,v),I=g.__ngNextListenerFn__;for(;I;)C=Cp(o,0,I,v)&&C,I=I.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Om(s=1){return function vf(s){return(Et.lFrame.contextLView=function Ql(s,o){for(;s>0;)o=o[15],s--;return o}(s,Et.lFrame.contextLView))[8]}(s)}function bE(s,o){let l=null;const u=function Iw(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const g=o[h];if("*"!==g){if(null===u?ph(s,g,!0):ap(u,g))return h}else l=h}return l}function wE(s){const o=Ee()[16][6];if(!o.projection){const u=o.projection=po(s?s.length:1,null),h=u.slice();let g=o.child;for(;null!==g;){const v=s?bE(g,s):0;null!==v&&(h[v]?h[v].projectionNext=g:u[v]=g,h[v]=g),g=g.next}}}function z_(s,o=0,l){const u=Ee(),h=Bt(),g=Ch(h,22+s,16,null,l||null);null===g.projection&&(g.projection=o),Za(),64!=(64&g.flags)&&function Dl(s,o,l){uh(o[11],0,o,l,Di(s,l,o),ku(l.parent||o[6],l,o))}(h,u,g)}function Z_(s,o,l,u,h){const g=s[l+1],v=null===o;let E=u?Ks(g):xi(g),C=!1;for(;0!==E&&(!1===C||v);){const k=s[E+1];ox(s[E],o)&&(C=!0,s[E+1]=u?am(k):sm(k)),E=u?Ks(k):xi(k)}C&&(s[l+1]=u?sm(g):am(g))}function ox(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&pa(s,o)>=0}const Er={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function IE(s){return s.substring(Er.key,Er.keyEnd)}function X_(s,o){const l=Er.textEnd;return l===o?-1:(o=Er.keyEnd=function ev(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Er.key=o,l),Rl(s,o,l))}function Rl(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function nv(s,o,l){return Es(s,o,l,!1),nv}function rv(s,o){return Es(s,o,null,!0),rv}function Ap(s){!function Xs(s,o,l,u){const h=Bt(),g=ls(2);h.firstUpdatePass&&OE(h,null,g,u);const v=Ee();if(l!==Ft&&ii(v,g,l)){const E=h.data[ur()];if(Ol(E,u)&&!RE(h,g)){let C=u?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(l=pe(C,l||"")),Tm(h,E,v,l,u)}else!function Mp(s,o,l,u,h,g,v,E){h===Ft&&(h=Lt);let C=0,I=0,k=0<h.length?h[0]:null,N=0<g.length?g[0]:null;for(;null!==k||null!==N;){const q=C<h.length?h[C+1]:void 0,ee=I<g.length?g[I+1]:void 0;let Re,be=null;k===N?(C+=2,I+=2,q!==ee&&(be=N,Re=ee)):null===N||null!==k&&k<N?(C+=2,be=k):(I+=2,be=N,Re=ee),null!==be&&Pm(s,o,l,u,be,Re,v,E),k=C<h.length?h[C]:null,N=I<g.length?g[I]:null}}(h,E,v,v[11],v[g+1],v[g+1]=function iv(s,o,l){if(null==l||""===l)return Lt;const u=[],h=ps(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(u,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(u,g,h[g]);else"string"==typeof h&&o(u,h);return u}(s,o,l),u,g)}}(qn,Yi,s,!0)}function Yi(s,o){for(let l=function SE(s){return function Ph(s){Er.key=0,Er.keyEnd=0,Er.value=0,Er.valueEnd=0,Er.textEnd=s.length}(s),X_(s,Rl(s,0,Er.textEnd))}(o);l>=0;l=X_(o,l))qn(s,IE(o),!0)}function Es(s,o,l,u){const h=Ee(),g=Bt(),v=ls(2);g.firstUpdatePass&&OE(g,s,v,u),o!==Ft&&ii(h,v,o)&&Pm(g,g.data[ur()],h,h[11],s,h[v+1]=function ov(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(ps(s)))),s}(o,l),u,v)}function RE(s,o){return o>=s.expandoStartIndex}function OE(s,o,l,u){const h=s.data;if(null===h[l+1]){const g=h[ur()],v=RE(s,l);Ol(g,u)&&null===o&&!v&&(o=!1),o=function lx(s,o,l,u){const h=ao(s);let g=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(l=Fa(l=Sp(null,s,o,l,u),o.attrs,u),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Sp(h,s,o,l,u),null===g){let C=function cx(s,o,l){const u=l?o.classBindings:o.styleBindings;if(0!==xi(u))return s[Ks(u)]}(s,o,u);void 0!==C&&Array.isArray(C)&&(C=Sp(null,s,o,C[1],u),C=Fa(C,o.attrs,u),function ux(s,o,l,u){s[Ks(l?o.classBindings:o.styleBindings)]=u}(s,o,u,C))}else g=function Ip(s,o,l){let u;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)u=Fa(u,s[g].hostAttrs,l);return Fa(u,o.attrs,l)}(s,o,u)}return void 0!==g&&(u?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,u),function xE(s,o,l,u,h,g){let v=g?o.classBindings:o.styleBindings,E=Ks(v),C=xi(v);s[u]=l;let k,I=!1;if(Array.isArray(l)){const N=l;k=N[1],(null===k||pa(N,k)>0)&&(I=!0)}else k=l;if(h)if(0!==C){const q=Ks(s[E+1]);s[u+1]=im(q,E),0!==q&&(s[q+1]=om(s[q+1],u)),s[E+1]=function Vu(s,o){return 131071&s|o<<17}(s[E+1],u)}else s[u+1]=im(E,0),0!==E&&(s[E+1]=om(s[E+1],u)),E=u;else s[u+1]=im(C,0),0===E?E=u:s[C+1]=om(s[C+1],u),C=u;I&&(s[u+1]=sm(s[u+1])),Z_(s,k,u,!0),Z_(s,k,u,!1),function AE(s,o,l,u,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&pa(g,o)>=0&&(l[u+1]=am(l[u+1]))}(o,k,s,u,g),v=im(E,C),g?o.classBindings=v:o.styleBindings=v}(h,g,o,l,v,u)}}function Sp(s,o,l,u,h){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=o[E],u=Fa(u,g.hostAttrs,h),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),u}function Fa(s,o,l){const u=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),qn(s,v,!!l||o[++g]))}return void 0===s?null:s}function Pm(s,o,l,u,h,g,v,E){if(!(3&o.type))return;const C=s.data,I=C[E+1];Lh(function Bu(s){return 1==(1&s)}(I)?sv(C,o,l,h,xi(I),v):void 0)||(Lh(g)||function Lu(s){return 2==(2&s)}(I)&&(g=sv(C,null,l,h,E,v)),function Aw(s,o,l,u,h){if(o)h?s.addClass(l,u):s.removeClass(l,u);else{let g=-1===u.indexOf("-")?void 0:Ta.DashCase;null==h?s.removeStyle(l,u,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Ta.Important),s.setStyle(l,u,h,g))}}(u,v,Xo(ur(),l),h,g))}function sv(s,o,l,u,h,g){const v=null===o;let E;for(;h>0;){const C=s[h],I=Array.isArray(C),k=I?C[1]:C,N=null===k;let q=l[h+1];q===Ft&&(q=N?Lt:void 0);let ee=N?mo(q,u):k===u?q:void 0;if(I&&!Lh(ee)&&(ee=mo(C,u)),Lh(ee)&&(E=ee,v))return E;const be=s[h+1];h=v?Ks(be):xi(be)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(E=mo(C,u))}return E}function Lh(s){return void 0!==s}function Ol(s,o){return 0!=(s.flags&(o?16:32))}function av(s,o=""){const l=Ee(),u=Bt(),h=s+22,g=u.firstCreatePass?Ch(u,h,1,o,null):u.data[h],v=l[h]=function qg(s,o){return s.createText(o)}(l[11],o);So(u,l,v,g),di(g,!1)}function lv(s){return Vh("",s,""),lv}function Vh(s,o,l){const u=Ee(),h=function bs(s,o,l,u){return ii(s,oo(),l)?o+ge(l)+u:Ft}(u,s,o,l);return h!==Ft&&gi(u,ur(),h),Vh}function cv(s,o,l,u,h){const g=Ee(),v=Mo(g,s,o,l,u,h);return v!==Ft&&gi(g,ur(),v),cv}function Rp(s,o,l){const u=Ee();return ii(u,oo(),o)&&vs(Bt(),wn(),u,s,o,u[11],l,!0),Rp}function Op(s,o,l){const u=Ee();if(ii(u,oo(),o)){const g=Bt(),v=wn();vs(g,v,u,s,o,wm(ao(g.data),v,u),l,!0)}return Op}const Nl=void 0;var _x=["en",[["a","p"],["AM","PM"],Nl],[["AM","PM"],Nl,Nl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nl,"{1} 'at' {0}",Nl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yx(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let Oc={};function bv(s){const o=function HE(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=wv(o);if(l)return l;const u=o.split("-")[0];if(l=wv(u),l)return l;if("en"===u)return _x;throw new Ie(701,!1)}function jE(s){return bv(s)[wt.PluralCase]}function wv(s){return s in Oc||(Oc[s]=Ze.ng&&Ze.ng.common&&Ze.ng.common.locales&&Ze.ng.common.locales[s]),Oc[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Uh="en-US";let Hm=Uh;function ey(s,o,l,u,h){if(s=X(s),Array.isArray(s))for(let g=0;g<s.length;g++)ey(s[g],o,l,u,h);else{const g=Bt(),v=Ee();let E=xo(s)?s:X(s.provide),C=qs(s);const I=bn(),k=1048575&I.providerIndexes,N=I.directiveStart,q=I.providerIndexes>>20;if(xo(s)||!s.multi){const ee=new aa(C,h,Pu),be=ty(E,o,h?k:k+q,N);-1===be?(Jl(fi(I,v),g,E),qh(g,s,o.length),o.push(E),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),l.push(ee),v.push(ee)):(l[be]=ee,v[be]=ee)}else{const ee=ty(E,o,k+q,N),be=ty(E,o,k,k+q),Re=ee>=0&&l[ee],ze=be>=0&&l[be];if(h&&!ze||!h&&!Re){Jl(fi(I,v),g,E);const et=function Vn(s,o,l,u,h){const g=new aa(s,l,Pu);return g.multi=[],g.index=o,g.componentProviders=0,zt(g,h,u&&!l),g}(h?Vp:l0,l.length,h,u,C);!h&&ze&&(l[be].providerFactory=et),qh(g,s,o.length,0),o.push(E),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),l.push(et),v.push(et)}else qh(g,s,ee>-1?ee:be,zt(l[h?be:ee],C,!h&&u));!h&&u&&ze&&l[be].componentProviders++}}}function qh(s,o,l,u){const h=xo(o),g=function Ao(s){return!!s.useClass}(o);if(h||g){const C=(g?X(o.useClass):o).prototype.ngOnDestroy;if(C){const I=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const k=I.indexOf(l);-1===k?I.push(l,[u,C]):I[k+1].push(u,C)}else I.push(l,C)}}}function zt(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function ty(s,o,l,u){for(let h=l;h<u;h++)if(o[h]===s)return h;return-1}function l0(s,o,l,u){return qv(this.multi,[])}function Vp(s,o,l,u){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=ds(l,l[1],this.providerFactory.index,u);g=E.slice(0,v),qv(h,g);for(let C=v;C<E.length;C++)g.push(E[C])}else g=[],qv(h,g);return g}function qv(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function si(s,o=[]){return l=>{l.providersResolver=(u,h)=>function a0(s,o,l){const u=Bt();if(u.firstCreatePass){const h=ti(s);ey(l,u.data,u.blueprint,h,!0),ey(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class Si{}function jx(s,o){return new Kv(s,o??null)}class Kv extends Si{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kl(this);const u=function mr(s,o){const l=s[Li]||null;if(!l&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return l}(o);this._bootstrapComponents=function bt(s){return s instanceof Function?s():s}(u.bootstrap),this._r3Injector=Qr(o,l,[{provide:Si,useValue:this},{provide:S,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ny extends class c0{}{constructor(o){super(),this.moduleType=o}create(o){return new Kv(this.moduleType,o)}}function Fc(s,o,l,u){return Wh(Ee(),er(),s,o,l,u)}function Wh(s,o,l,u,h,g){const v=o+l;return ii(s,v,h)?function Ki(s,o,l){return s[o]=l}(s,v+1,g?u.call(g,h):u(h)):function Nc(s,o){const l=s[o];return l===Ft?void 0:l}(s,v+1)}function y0(s,o){const l=Bt();let u;const h=s+22;l.firstCreatePass?(u=function Qv(s,o){if(o)for(let l=o.length-1;l>=0;l--){const u=o[l];if(s===u.name)return u}}(o,l.pipeRegistry),l.data[h]=u,u.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,u.onDestroy)):u=l.data[h];const g=u.factory||(u.factory=bi(u.type)),v=Un(Pu);try{const E=ru(!1),C=g();return ru(E),function yE(s,o,l,u){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=u}(l,Ee(),h,C),C}finally{Un(v)}}function Xv(s,o,l){const u=s+22,h=Ee(),g=rs(h,u);return function ud(s,o){return s[1].data[o].pure}(h,u)?Wh(h,er(),o,g.transform,l,g):g.transform(l)}function Kh(s){return o=>{setTimeout(s,void 0,o)}}const Cs=class tA extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,u){let h=o,g=l||(()=>null),v=u;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=Kh(g),h&&(h=Kh(h)),v&&(v=Kh(v)));const E=super.subscribe({next:h,error:g,complete:v});return o instanceof te.w0&&o.add(E),E}};function w0(){return this._results[Wu()]()}class Pc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Wu(),u=Pc.prototype;u[l]||(u[l]=w0)}get changes(){return this._changes||(this._changes=new Cs)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const u=this;u.dirty=!1;const h=Rr(o);(this._changesDetected=!function au(s,o,l){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],g=o[u];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(u._results,h,l))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Bp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Vl,s})();const ay=Bp,dd=class extends ay{constructor(o,l,u){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(o,l){const u=this._declarationTContainer.tViews,h=fm(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(u)),hp(u,h,o),new Sh(h)}};function Vl(){return Lc(bn(),Ee())}function Lc(s,o){return 4&s.type?new dd(o,s,K(s,o)):null}let Ro=(()=>{class s{}return s.__NG_ELEMENT_ID__=nA,s})();function nA(){return C0(bn(),Ee())}const E0=Ro,eb=class extends E0{constructor(o,l,u){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=u}get element(){return K(this._hostTNode,this._hostLView)}get injector(){return new rn(this._hostTNode,this._hostLView)}get parentInjector(){const o=la(this._hostTNode,this._hostLView);if(Af(o)){const l=Mr(o,this._hostLView),u=sl(o);return new rn(l[1].data[u+8],l)}return new rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Yh(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,u){let h,g;"number"==typeof u?h=u:null!=u&&(h=u.index,g=u.injector);const v=o.createEmbeddedView(l||{},g);return this.insert(v,h),v}createComponent(o,l,u,h,g){const v=o&&!function ul(s){return"function"==typeof s}(o);let E;if(v)E=l;else{const N=l||{};E=N.index,u=N.injector,h=N.projectableNodes,g=N.environmentInjector||N.ngModuleRef}const C=v?o:new Th(tt(o)),I=u||this.parentInjector;if(!g&&null==C.ngModule){const q=(v?I:this.parentInjector).get(Kn,null);q&&(g=q)}const k=C.create(I,h,void 0,g);return this.insert(k.hostView,E),k}insert(o,l){const u=o._lView,h=u[1];if(function is(s){return ei(s[3])}(u)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const N=u[3],q=new eb(N,N[6],N[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function np(s,o,l,u){const h=10+u,g=l.length;u>0&&(l[h-1][4]=o),u<g-10?(o[4]=l[h],lu(l,10+u,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function Dc(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,u,v,g);const E=ip(g,v),C=u[11],I=un(C,v[7]);return null!==I&&function Wg(s,o,l,u,h,g){u[0]=h,u[6]=o,sp(s,u,l,1,h,g)}(h,v[6],C,u,I,E),o.attachToViewContainerRef(),lu(Pa(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Yh(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),u=Cl(this._lContainer,l);u&&(zn(Pa(this._lContainer),l),l_(u[1],u))}detach(o){const l=this._adjustIndex(o,-1),u=Cl(this._lContainer,l);return u&&null!=zn(Pa(this._lContainer),l)?new Sh(u):null}_adjustIndex(o,l=0){return o??this.length+l}};function Yh(s){return s[8]}function Pa(s){return s[8]||(s[8]=[])}function C0(s,o){let l;const u=o[s.index];if(ei(u))l=u;else{let h;if(8&s.type)h=$n(u);else{const g=o[11];h=g.createComment("");const v=ui(s,o);ys(g,un(g,v),h,function Cw(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=l=eE(u,o,h,s),_m(o,l)}return new eb(l,s,o)}class ly{constructor(o){this.queryList=o,this.matches=null}clone(){return new ly(this.queryList)}setDirty(){this.queryList.setDirty()}}class tb{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const u=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<u;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new tb(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==S0(o,l).matches&&this.queries[l].setDirty()}}class D0{constructor(o,l,u=null){this.predicate=o,this.flags=l,this.read=u}}class cy{constructor(o=[]){this.queries=o}elementStart(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let u=0;u<this.length;u++){const h=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(o,h);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new cy(l):null}template(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class nb{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new nb(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const g=u[h];this.matchTNodeWithReadOption(o,l,sA(l,g)),this.matchTNodeWithReadOption(o,l,uo(l,o,g,!1,!1))}else u===Bp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,uo(l,o,u,!1,!1))}matchTNodeWithReadOption(o,l,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===ce||h===Ro||h===Bp&&4&l.type)this.addMatch(l.index,-2);else{const g=uo(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function sA(s,o){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===o)return l[u+1];return null}function oA(s,o,l,u){return-1===l?function x0(s,o){return 11&s.type?K(s,o):4&s.type?Lc(s,o):null}(o,s):-2===l?function aA(s,o,l){return l===ce?K(o,s):l===Bp?Lc(o,s):l===Ro?C0(o,s):void 0}(s,o,u):ds(s,s[1],l,o)}function rb(s,o,l,u){const h=o[19].queries[u];if(null===h.matches){const g=s.data,v=l.matches,E=[];for(let C=0;C<v.length;C+=2){const I=v[C];E.push(I<0?null:oA(o,g[I],v[C+1],l.metadata.read))}h.matches=E}return h.matches}function uy(s,o,l,u){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const v=rb(s,o,h,l);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)u.push(v[E/2]);else{const I=g[E+1],k=o[-C];for(let N=10;N<k.length;N++){const q=k[N];q[17]===q[3]&&uy(q[1],q,I,u)}if(null!==k[9]){const N=k[9];for(let q=0;q<N.length;q++){const ee=N[q];uy(ee[1],ee,I,u)}}}}}return u}function ib(s){const o=Ee(),l=Bt(),u=zl();el(u+1);const h=S0(l,u);if(s.dirty&&Jo(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?uy(l,o,u,[]):rb(l,o,h,u);s.reset(g,Le),s.notifyOnChanges()}return!0}return!1}function sb(s,o,l){const u=Bt();u.firstCreatePass&&(ob(u,new D0(s,o,l),-1),2==(2&o)&&(u.staticViewQueries=!0)),I0(u,Ee(),o)}function A0(s,o,l,u){const h=Bt();if(h.firstCreatePass){const g=bn();ob(h,new D0(o,l,u),g.index),function Vc(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}I0(h,Ee(),l)}function dy(){return function hy(s,o){return s[19].queries[o].queryList}(Ee(),zl())}function I0(s,o,l){const u=new Pc(4==(4&l));x_(s,o,u,u.destroy),null===o[19]&&(o[19]=new tb),o[19].queries.push(new ly(u))}function ob(s,o,l){null===s.queries&&(s.queries=new cy),s.queries.track(new nb(o,l))}function S0(s,o){return s.queries.getByIndex(o)}function $p(...s){}const U0=new Ut("Application Initializer");let zp=(()=>{class s{constructor(l){this.appInits=l,this.resolve=$p,this.reject=$p,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(G_(g))l.push(g);else if(vE(g)){const v=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(h=>{this.reject(h)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Tn(U0,8))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gb=new Ut("AppId",{providedIn:"root",factory:function ki(){return`${mb()}${mb()}${mb()}`}});function mb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const j0=new Ut("Platform Initializer"),bA=new Ut("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ds=new Ut("appBootstrapListener"),yb=new Ut("AnimationModuleType"),_y=new Ut("LocaleId",{providedIn:"root",factory:()=>pl(_y,gt.Optional|gt.SkipSelf)||function yy(){return typeof $localize<"u"&&$localize.locale||Uh}()}),tT=new Ut("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),oT=(()=>Promise.resolve(0))();function G0(s){typeof Zone>"u"?oT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class xs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cs(!1),this.onMicrotaskEmpty=new Cs(!1),this.onStable=new Cs(!1),this.onError=new Cs(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&l,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function $0(){let s=Ze.requestAnimationFrame,o=Ze.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function vy(s){const o=()=>{!function Fo(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ze,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,qp(s),s.isCheckStableRunning=!0,Nr(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),qp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,h,g,v,E)=>{try{return z0(s),l.invokeTask(h,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),q0(s)}},onInvoke:(l,u,h,g,v,E,C)=>{try{return z0(s),l.invoke(h,g,v,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),q0(s)}},onHasTask:(l,u,h,g)=>{l.hasTask(h,g),u===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,qp(s),Nr(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xs.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(xs.isInAngularZone())throw new Ie(909,!1)}run(o,l,u){return this._inner.run(o,l,u)}runTask(o,l,u,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,AA,$p,$p);try{return g.runTask(v,l,u)}finally{g.cancelTask(v)}}runGuarded(o,l,u){return this._inner.runGuarded(o,l,u)}runOutsideAngular(o){return this._outer.run(o)}}const AA={};function Nr(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function qp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function z0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function q0(s){s._nesting--,Nr(s)}class IA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cs,this.onMicrotaskEmpty=new Cs,this.onStable=new Cs,this.onError=new Cs}run(o,l,u){return o.apply(l,u)}runGuarded(o,l,u){return o.apply(l,u)}runOutsideAngular(o){return o()}runTask(o,l,u,h){return o.apply(l,u)}}const _b=new Ut(""),W0=new Ut("");let oi,SA=(()=>{class s{constructor(l,u,h){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,oi||(function TA(s){oi=s}(h),h.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xs.assertNotInAngularZone(),G0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())G0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,h){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Tn(xs),Tn(K0),Tn(W0))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac}),s})(),K0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return oi?.findTestabilityInTree(this,l,u)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),No=null;const vb=new Ut("AllowMultipleToken"),Wp=new Ut("PlatformDestroyListeners");function wb(s,o,l=[]){const u=`Platform: ${o}`,h=new Ut(u);return(g=[])=>{let v=Cb();if(!v||v.injector.get(vb,!1)){const E=[...l,...g,{provide:h,useValue:!0}];s?s(E):function kA(s){if(No&&!No.get(vb,!1))throw new Ie(400,!1);No=s;const o=s.get(Q0);(function Z0(s){const o=s.get(j0,null);o&&o.forEach(l=>l())})(s)}(function Eb(s=[],o){return Ou.create({name:o,providers:[{provide:xu,useValue:"platform"},{provide:Wp,useValue:new Set([()=>No=null])},...s]})}(E,u))}return function wy(s){const o=Cb();if(!o)throw new Ie(401,!1);return o}()}}function Cb(){return No?.get(Q0)??null}let Q0=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const h=function J0(s,o){let l;return l="noop"===s?new IA:("zone.js"===s?void 0:s)||new xs(o),l}(u?.ngZone,function X0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:xs,useValue:h}];return h.run(()=>{const v=Ou.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(v),C=E.injector.get(Xf,null);if(!C)throw new Ie(402,!1);return h.runOutsideAngular(()=>{const I=h.onError.subscribe({next:k=>{C.handleError(k)}});E.onDestroy(()=>{Kp(this._modules,E),I.unsubscribe()})}),function Ey(s,o,l){try{const u=l();return G_(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(C,h,()=>{const I=E.injector.get(zp);return I.runInitializers(),I.donePromise.then(()=>(function GE(s){Ht(s,"Expected localeId to be defined"),"string"==typeof s&&(Hm=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(_y,Uh)||Uh),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,u=[]){const h=Db({},u);return function bb(s,o,l){const u=new ny(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const u=l.injector.get(tf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ie(403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(Wp,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Tn(Ou))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Db(s,o){return Array.isArray(o)?o.reduce(Db,s):{...s,...o}}let tf=(()=>{class s{constructor(l,u,h){this._zone=l,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{xs.assertNotInAngularZone(),G0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),I.unsubscribe()}});this.isStable=(0,ue.T)(g,v.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const h=l instanceof Og;if(!this._injector.get(zp).done)throw!h&&function jp(s){const o=tt(s)||fn(s)||vn(s);return null!==o&&o.standalone}(l),new Ie(405,false);let v;v=h?l:this._injector.get(S).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const E=function MA(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Si),I=v.create(Ou.NULL,[],u||v.selector,E),k=I.location.nativeElement,N=I.injector.get(_b,null);return N?.registerApplication(k),I.onDestroy(()=>{this.detachView(I.hostView),Kp(this.components,I),N?.unregisterApplication(k)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;Kp(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Ds,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Kp(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ie(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Tn(xs),Tn(Kn),Tn(Xf))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Kp(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Cy=!0,xb=!1;function FA(){return xb=!0,Cy}function Ab(){if(xb)throw new Error("Cannot enable prod mode after platform setup.");Cy=!1}let LA=(()=>{class s{}return s.__NG_ELEMENT_ID__=VA,s})();function VA(s){return function BA(s,o,l){if(ro(s)&&!l){const u=Tr(s.index,o);return new Sh(u,u)}return 47&s.type?new Sh(o[16],o):null}(bn(),Ee(),16==(16&s))}class oC{constructor(){}supports(o){return Rc(o)}create(o){return new WA(o)}}const qA=(s,o)=>o;class WA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||qA}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,u=this._removalsHead,h=0,g=null;for(;l||u;){const v=!u||l&&l.currentIndex<Fb(u,h,g)?l:u,E=Fb(v,h,g),C=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const I=E-h,k=C-h;if(I!=k){for(let q=0;q<I;q++){const ee=q<g.length?g[q]:g[q]=0,be=ee+q;k<=be&&be<I&&(g[q]=ee+1)}g[v.previousIndex]=k-I}}E!==C&&o(v,E,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Rc(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,l=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),u=!0),l=l._next}else h=0,function uE(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Wu()]();let u;for(;!(u=l.next()).done;)o(u.value)}}(o,E=>{v=this._trackByFn(h,E),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,E,v,h)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,h),u=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,u,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new aC(l,u),g,h),o}_verifyReinsertion(o,l,u,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,u),this._addToMoves(o,u),o}_moveAfter(o,l,u){return this._unlink(o),this._insertAfter(o,l,u),this._addToMoves(o,u),o}_addAfter(o,l,u){return this._insertAfter(o,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,u){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ob),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,u=o._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ob),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class aC{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lC{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const l=o._prevDup,u=o._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class Ob{constructor(){this.map=new Map}put(o){const l=o.trackById;let u=this.map.get(l);u||(u=new lC,this.map.set(l,u)),u.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fb(s,o,l){const u=s.previousIndex;if(null===u)return u;let h=0;return l&&u<l.length&&(h=l[u]),u+o+h}class Nb{constructor(){}supports(o){return o instanceof Map||Ku(o)}create(){return new cT}}class cT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Ku(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const u=o._prev;return l._next=o,l._prev=u,o._prev=l,u&&(u._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const u=new KA(o);return this._records.set(o,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(u=>l(o[u],u))}}class KA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function YA(){return new cC([new oC])}let cC=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||YA()),deps:[[s,new Ue,new se]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(null!=u)return u;throw new Ie(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:YA}),s})();function ZA(){return new Pb([new Nb])}let Pb=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||ZA()),deps:[[s,new Ue,new se]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(u)return u;throw new Ie(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:ZA}),s})();const Lb=wb(null,"core",[]);let uT=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Tn(tf))},s.\u0275mod=Ve({type:s}),s.\u0275inj=Pt({}),s})();function Vb(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(at,Ae,F)=>{F.d(Ae,{Z:()=>Ie});var c=F(2090),te=F(4859),O=F(9681),ue=F(1877);class ae{constructor(ge,me){this._delegate=ge,this.firebase=me,(0,O._addComponent)(ge,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,me=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(ge);return!Je.isInitialized()&&"EXPLICIT"===(null===(Ye=Je.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:me})}_removeServiceInstance(ge,me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(me)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ne=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function pe(){const Ge=function he(Ge){const ge={},me={__esModule:!0,initializeApp:function De(He,U={}){const _e=O.initializeApp(He,U);if((0,c.r3)(ge,_e.name))return ge[_e.name];const Z=new Ge(_e,me);return ge[_e.name]=Z,Z},app:Je,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(He){const U=He.name,_e=U.replace("-compat","");if(O._registerComponent(He)&&"PUBLIC"===He.type){const Z=(J=Je())=>{if("function"!=typeof J[_e])throw ne.create("invalid-app-argument",{appName:U});return J[_e]()};void 0!==He.serviceProps&&(0,c.ZB)(Z,He.serviceProps),me[_e]=Z,Ge.prototype[_e]=function(...J){return this._getService.bind(this,U).apply(this,He.multipleInstances?J:[])}}return"PUBLIC"===He.type?me[_e]:null},removeApp:function Ye(He){delete ge[He]},useAsService:function Be(He,U){return"serverAuth"===U?null:U},modularAPIs:O}};function Je(He){if(!(0,c.r3)(ge,He=He||O._DEFAULT_ENTRY_NAME))throw ne.create("no-app",{appName:He});return ge[He]}return me.default=me,Object.defineProperty(me,"apps",{get:function ve(){return Object.keys(ge).map(He=>ge[He])}}),Je.App=Ge,me}(ae);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(me){(0,c.ZB)(Ge,me)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Ge}(),H=new ue.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=j;!function Se(Ge){(0,O.registerVersion)("@firebase/app-compat","0.1.32",Ge)}()},9681:(at,Ae,F)=>{F.r(Ae),F.d(Ae,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Fi,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Kt,_apps:()=>on,_clearComponents:()=>Uo,_components:()=>Bn,_getProvider:()=>Pt,_registerComponent:()=>zr,_removeServiceInstance:()=>an,deleteApp:()=>gt,getApp:()=>li,getApps:()=>Ni,initializeApp:()=>Qi,onLog:()=>Un,registerVersion:()=>_i,setLogLevel:()=>Pi});var c=F(5861),te=F(4859),O=F(1877),ue=F(2090),ae=F(8766);class fe{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function ne(B){return"VERSION"===B.getComponent()?.type}(W)){const xe=W.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(W=>W).join(" ")}}const he="@firebase/app",j=new O.Yd("@firebase/app"),Ht="[DEFAULT]",qe={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,Bn=new Map;function Wt(B,$){try{B.container.addComponent($)}catch(W){j.debug(`Component ${$.name} failed to register with FirebaseApp ${B.name}`,W)}}function Kt(B,$){B.container.addOrOverwriteComponent($)}function zr(B){const $=B.name;if(Bn.has($))return j.debug(`There were multiple attempts to register component ${$}.`),!1;Bn.set($,B);for(const W of on.values())Wt(W,B);return!0}function Pt(B,$){const W=B.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),B.container.getProvider($)}function an(B,$,W=Ht){Pt(B,$).clearInstance(W)}function Uo(){Bn.clear()}const Lr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qr{constructor($,W,xe){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}const Fi="9.9.3";function Qi(B,$={}){"object"!=typeof $&&($={name:$});const W=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},$),xe=W.name;if("string"!=typeof xe||!xe)throw Lr.create("bad-app-name",{appName:String(xe)});const Ve=on.get(xe);if(Ve){if((0,ue.vZ)(B,Ve.options)&&(0,ue.vZ)(W,Ve.config))return Ve;throw Lr.create("duplicate-app",{appName:xe})}const lt=new te.H0(xe);for(const Zt of Bn.values())lt.addComponent(Zt);const hn=new qr(B,W,lt);return on.set(xe,hn),hn}function li(B=Ht){const $=on.get(B);if(!$)throw Lr.create("no-app",{appName:B});return $}function Ni(){return Array.from(on.values())}function gt(B){return pn.apply(this,arguments)}function pn(){return(pn=(0,c.Z)(function*(B){const $=B.name;on.has($)&&(on.delete($),yield Promise.all(B.container.getProviders().map(W=>W.delete())),B.isDeleted=!0)})).apply(this,arguments)}function _i(B,$,W){var xe;let Ve=null!==(xe=qe[B])&&void 0!==xe?xe:B;W&&(Ve+=`-${W}`);const lt=Ve.match(/\s|\//),hn=$.match(/\s|\//);if(lt||hn){const Zt=[`Unable to register library "${Ve}" with version "${$}":`];return lt&&Zt.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),lt&&hn&&Zt.push("and"),hn&&Zt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void j.warn(Zt.join(" "))}zr(new te.wA(`${Ve}-version`,()=>({library:Ve,version:$}),"VERSION"))}function Un(B,$){if(null!==B&&"function"!=typeof B)throw Lr.create("invalid-log-argument");(0,O.Am)(B,$)}function Pi(B){(0,O.Ub)(B)}const yn="firebase-heartbeat-store";let to=null;function mn(){return to||(to=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(B,$)=>{0===$&&B.createObjectStore(yn)}}).catch(B=>{throw Lr.create("idb-open",{originalErrorMessage:B.message})})),to}function Ze(){return(Ze=(0,c.Z)(function*(B){var $;try{return(yield mn()).transaction(yn).objectStore(yn).get(_n(B))}catch(W){if(W instanceof ue.ZR)j.warn(W.message);else{const xe=Lr.create("idb-get",{originalErrorMessage:null===($=W)||void 0===$?void 0:$.message});j.warn(xe.message)}}})).apply(this,arguments)}function jo(B,$){return gr.apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(B,$){var W;try{const Ve=(yield mn()).transaction(yn,"readwrite");return yield Ve.objectStore(yn).put($,_n(B)),Ve.done}catch(xe){if(xe instanceof ue.ZR)j.warn(xe.message);else{const Ve=Lr.create("idb-set",{originalErrorMessage:null===(W=xe)||void 0===W?void 0:W.message});j.warn(Ve.message)}}})).apply(this,arguments)}function _n(B){return`${B.name}!${B.options.appId}`}class Ss{constructor($){this.container=$,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new jt(W),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var $=this;return(0,c.Z)(function*(){const xe=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ve=Yt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ve&&!$._heartbeatsCache.heartbeats.some(lt=>lt.date===Ve))return $._heartbeatsCache.heartbeats.push({date:Ve,agent:xe}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(lt=>{const hn=new Date(lt.date).valueOf();return Date.now()-hn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,c.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const W=Yt(),{heartbeatsToSend:xe,unsentEntries:Ve}=function Li(B,$=1024){const W=[];let xe=B.slice();for(const Ve of B){const lt=W.find(hn=>hn.agent===Ve.agent);if(lt){if(lt.dates.push(Ve.date),Y(W)>$){lt.dates.pop();break}}else if(W.push({agent:Ve.agent,dates:[Ve.date]}),Y(W)>$){W.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:W,unsentEntries:xe}}($._heartbeatsCache.heartbeats),lt=(0,ue.L)(JSON.stringify({version:2,heartbeats:xe}));return $._heartbeatsCache.lastSentHeartbeatDate=W,Ve.length>0?($._heartbeatsCache.heartbeats=Ve,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),lt})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class jt{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,c.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function it(B){return Ze.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var W=this;return(0,c.Z)(function*(){var xe;if(yield W._canUseIndexedDBPromise){const lt=yield W.read();return jo(W.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:lt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var W=this;return(0,c.Z)(function*(){var xe;if(yield W._canUseIndexedDBPromise){const lt=yield W.read();return jo(W.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...$.heartbeats]})}})()}}function Y(B){return(0,ue.L)(JSON.stringify({version:2,heartbeats:B})).length}!function G(B){zr(new te.wA("platform-logger",$=>new fe($),"PRIVATE")),zr(new te.wA("heartbeat",$=>new Ss($),"PRIVATE")),_i(he,"0.7.31",B),_i(he,"0.7.31","esm2017"),_i("fire-js","")}("")},4859:(at,Ae,F)=>{F.d(Ae,{H0:()=>he,wA:()=>O});var c=F(5861),te=F(2090);class O{constructor(j,H,X){this.name=j,this.instanceFactory=H,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ue="[DEFAULT]";class ae{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const X=new te.BH;if(this.instancesDeferred.set(H,X),this.isInitialized(H)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:H});je&&X.resolve(je)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const X=this.normalizeInstanceIdentifier(j?.identifier),je=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Se){if(je)return null;throw Se}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ne(pe){return"EAGER"===pe.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[H,X]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:je});X.resolve(Se)}catch{}}}}clearInstance(j=ue){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,c.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...H.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ue){return this.instances.has(j)}getOptions(j=ue){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,X=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:X,options:H});for(const[Se,Ie]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Se)&&Ie.resolve(je);return je}onInit(j,H){var X;const je=this.normalizeInstanceIdentifier(H),Se=null!==(X=this.onInitCallbacks.get(je))&&void 0!==X?X:new Set;Se.add(j),this.onInitCallbacks.set(je,Se);const Ie=this.instances.get(je);return Ie&&j(Ie,je),()=>{Se.delete(j)}}invokeOnInitCallbacks(j,H){const X=this.onInitCallbacks.get(H);if(X)for(const je of X)try{je(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let X=this.instances.get(j);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=j,pe===ue?void 0:pe),options:H}),this.instances.set(j,X),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(X,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,X)}catch{}var pe;return X||null}normalizeInstanceIdentifier(j=ue){return this.component?this.component.multipleInstances?j:ue:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new ae(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ae,F)=>{F.d(Ae,{Am:()=>pe,Ub:()=>he,Yd:()=>ne,in:()=>te});const c=[];var te=(()=>{return(j=te||(te={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",te;var j})();const O={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ue=te.INFO,ae={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},fe=(j,H,...X)=>{if(H<j.logLevel)return;const je=(new Date).toISOString(),Se=ae[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${je}]  ${j.name}:`,...X)};class ne{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=fe,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in te))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...H),this._logHandler(this,te.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...H),this._logHandler(this,te.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,te.INFO,...H),this._logHandler(this,te.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,te.WARN,...H),this._logHandler(this,te.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...H),this._logHandler(this,te.ERROR,...H)}}function he(j){c.forEach(H=>{H.setLogLevel(j)})}function pe(j,H){for(const X of c){let je=null;H&&H.level&&(je=O[H.level]),X.userLogHandler=null===j?null:(Se,Ie,...Ge)=>{const ge=Ge.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ie>=(je??Se.logLevel)&&j({level:te[Ie].toLowerCase(),message:ge,args:Ge,type:Se.name})}}}},8766:(at,Ae,F)=>{F.d(Ae,{Lj:()=>De,X3:()=>Je});var c=F(5861);let O,ue;const ne=new WeakMap,he=new WeakMap,pe=new WeakMap,j=new WeakMap,H=new WeakMap;let Se={get(U,_e,Z){if(U instanceof IDBTransaction){if("done"===_e)return he.get(U);if("objectStoreNames"===_e)return U.objectStoreNames||pe.get(U);if("store"===_e)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return me(U[_e])},set:(U,_e,Z)=>(U[_e]=Z,!0),has:(U,_e)=>U instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in U};function ge(U){return"function"==typeof U?function Ge(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(..._e){return U.apply(Ye(this),_e),me(ne.get(this))}:function(..._e){return me(U.apply(Ye(this),_e))}:function(_e,...Z){const J=U.call(Ye(this),_e,...Z);return pe.set(J,_e.sort?_e.sort():[_e]),me(J)}}(U):(U instanceof IDBTransaction&&function je(U){if(he.has(U))return;const _e=new Promise((Z,J)=>{const oe=()=>{U.removeEventListener("complete",ie),U.removeEventListener("error",Ne),U.removeEventListener("abort",Ne)},ie=()=>{Z(),oe()},Ne=()=>{J(U.error||new DOMException("AbortError","AbortError")),oe()};U.addEventListener("complete",ie),U.addEventListener("error",Ne),U.addEventListener("abort",Ne)});he.set(U,_e)}(U),((U,_e)=>_e.some(Z=>U instanceof Z))(U,function ae(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Se):U)}function me(U){if(U instanceof IDBRequest)return function X(U){const _e=new Promise((Z,J)=>{const oe=()=>{U.removeEventListener("success",ie),U.removeEventListener("error",Ne)},ie=()=>{Z(me(U.result)),oe()},Ne=()=>{J(U.error),oe()};U.addEventListener("success",ie),U.addEventListener("error",Ne)});return _e.then(Z=>{Z instanceof IDBCursor&&ne.set(Z,U)}).catch(()=>{}),H.set(_e,U),_e}(U);if(j.has(U))return j.get(U);const _e=ge(U);return _e!==U&&(j.set(U,_e),H.set(_e,U)),_e}const Ye=U=>H.get(U);function Je(U,_e,{blocked:Z,upgrade:J,blocking:oe,terminated:ie}={}){const Ne=indexedDB.open(U,_e),Oe=me(Ne);return J&&Ne.addEventListener("upgradeneeded",ht=>{J(me(Ne.result),ht.oldVersion,ht.newVersion,me(Ne.transaction))}),Z&&Ne.addEventListener("blocked",()=>Z()),Oe.then(ht=>{ie&&ht.addEventListener("close",()=>ie()),oe&&ht.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Oe}function De(U,{blocked:_e}={}){const Z=indexedDB.deleteDatabase(U);return _e&&Z.addEventListener("blocked",()=>_e()),me(Z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],Be=new Map;function He(U,_e){if(!(U instanceof IDBDatabase)||_e in U||"string"!=typeof _e)return;if(Be.get(_e))return Be.get(_e);const Z=_e.replace(/FromIndex$/,""),J=_e!==Z,oe=we.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!oe&&!ve.includes(Z))return;const ie=function(){var Ne=(0,c.Z)(function*(Oe,...ht){const $t=this.transaction(Oe,oe?"readwrite":"readonly");let Ht=$t.store;return J&&(Ht=Ht.index(ht.shift())),(yield Promise.all([Ht[Z](...ht),oe&&$t.done]))[0]});return function(ht){return Ne.apply(this,arguments)}}();return Be.set(_e,ie),ie}!function Ie(U){Se=U(Se)}(U=>({...U,get:(_e,Z,J)=>He(_e,Z)||U.get(_e,Z,J),has:(_e,Z)=>!!He(_e,Z)||U.has(_e,Z)}))},5861:(at,Ae,F)=>{function c(O,ue,ae,fe,ne,he,pe){try{var j=O[he](pe),H=j.value}catch(X){return void ae(X)}j.done?ue(H):Promise.resolve(H).then(fe,ne)}function te(O){return function(){var ue=this,ae=arguments;return new Promise(function(fe,ne){var he=O.apply(ue,ae);function pe(H){c(he,fe,ne,pe,j,"next",H)}function j(H){c(he,fe,ne,pe,j,"throw",H)}pe(void 0)})}}F.d(Ae,{Z:()=>te})}},at=>{at(at.s=8236)}]);