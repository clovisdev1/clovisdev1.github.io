"use strict";(self.webpackChunkcopa=self.webpackChunkcopa||[]).push([[179],{2011:(ut,Ce,F)=>{F.d(Ce,{Dh:()=>ge,GT:()=>pe,cc:()=>Re,hO:()=>$e,on:()=>j,pX:()=>le,xv:()=>me});var f=F(4650),re=F(127),N=F(5813);ut=F.hmd(ut);const he=["ngOnDestroy"],le=(_e,Qe,tt,Ae={})=>new Proxy(_e,{get:(we,De)=>tt.runOutsideAngular(()=>{var He;if(_e[De])return!(null===(He=Ae?.spy)||void 0===He)&&He.get&&Ae.spy.get(De,_e[De]),_e[De];if(he.indexOf(De)>-1)return()=>{};const Ge=Qe.toPromise().then(U=>{const ve=U&&U[De];return"function"==typeof ve?ve.bind(U):ve&&ve.then?ve.then(X=>tt.run(()=>X)):tt.run(()=>ve)});return new Proxy(()=>{},{get:(U,ve)=>Ge[ve],apply:(U,ve,X)=>Ge.then(te=>{var oe;const ie=te&&te(...X);return!(null===(oe=Ae?.spy)||void 0===oe)&&oe.apply&&Ae.spy.apply(De,X,ie),ie})})})}),pe=(_e,Qe)=>{Qe.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(Ae=>{Object.defineProperty(_e.prototype,Ae,Object.getOwnPropertyDescriptor(tt.prototype||tt,Ae))})})};class ue{constructor(Qe){return Qe}}const ge=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function j(_e,Qe,tt){const we="object"==typeof tt&&tt||{};we.name=we.name||"string"==typeof tt&&tt||"[DEFAULT]";const He=re.Z.apps.filter(Ge=>Ge&&Ge.name===we.name)[0]||Qe.runOutsideAngular(()=>re.Z.initializeApp(_e,we));try{JSON.stringify(_e)!==JSON.stringify(He.options)&&H("error",`${He.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(He)}const H=(_e,...Qe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[_e](...Qe)},ee={provide:ue,useFactory:j,deps:[ge,f.R0b,[new f.FiY,me]]};let $e=(()=>{class _e{constructor(tt){re.Z.registerVersion("angularfire",N.q4.full,"core"),re.Z.registerVersion("angularfire",N.q4.full,"app-compat"),re.Z.registerVersion("angular",f.q4F.full,tt.toString())}static initializeApp(tt,Ae){return{ngModule:_e,providers:[{provide:ge,useValue:tt},{provide:me,useValue:Ae}]}}}return _e.\u0275fac=function(tt){return new(tt||_e)(f.LFG(f.Lbi))},_e.\u0275mod=f.oAB({type:_e}),_e.\u0275inj=f.cJS({providers:[ee]}),_e})();function Re(_e,Qe,tt,Ae,we){const[,De,He]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===_e)||[];if(De)return function Me(_e,Qe){try{return _e.toString()===Qe.toString()}catch{return _e===Qe}}(we,He)||(ye("error",`${Qe} was already initialized on the ${tt} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:we,was:He})),De;{const Ge=Ae();return globalThis.\u0275AngularfireInstanceCache.push([_e,Ge,we]),Ge}}const Ye=!!ut.hot,ye=(_e,...Qe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[_e](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ce,F)=>{F.d(Ce,{q4:()=>ha,iC:()=>An,HU:()=>Ef,vb:()=>go,JM:()=>ru});var f=F(4650),re=F(5867),N=F(5861),he=F(9681),le=F(2090),pe=F(4859),ue=F(1877),ge=F(8766);const me="@firebase/installations",j="0.5.12",ee=`w:${j}`,$e="FIS_v2",Qe=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(I){return I instanceof le.ZR&&I.code.includes("request-failed")}function Ae({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function we(I){return{token:I.token,requestStatus:2,expiresIn:te(I.expiresIn),creationTime:Date.now()}}function De(I,x){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*(I,x){const L=(yield x.json()).error;return Qe.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ge({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function U(I,{refreshToken:x}){const M=Ge(I);return M.append("Authorization",function oe(I){return`${$e} ${I}`}(x)),M}function ve(I){return X.apply(this,arguments)}function X(){return(X=(0,N.Z)(function*(I){const x=yield I();return x.status>=500&&x.status<600?I():x})).apply(this,arguments)}function te(I){return Number(I.replace("s","000"))}function ie(I,x){return Le.apply(this,arguments)}function Le(){return(Le=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:x},{fid:M}){const L=Ae(I),J=Ge(I),se=x.getImmediate({optional:!0});if(se){const xt=yield se.getHeartbeatsHeader();xt&&J.append("x-firebase-client",xt)}const je={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:$e,appId:I.appId,sdkVersion:ee})},mt=yield ve(()=>fetch(L,je));if(mt.ok){const xt=yield mt.json();return{fid:xt.fid||M,registrationStatus:2,refreshToken:xt.refreshToken,authToken:we(xt.authToken)}}throw yield De("Create Installation",mt)})).apply(this,arguments)}function Ne(I){return new Promise(x=>{setTimeout(x,I)})}const qt=/^[cdef][\w-]{21}$/;function We(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function sn(I){return function pt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return qt.test(M)?M:""}catch{return""}}function Ln(I){return`${I.appName}!${I.appId}`}const Zt=new Map;function Yt(I,x){const M=Ln(I);on(M,x),function Lo(I,x){const M=function Br(){return!si&&"BroadcastChannel"in self&&(si=new BroadcastChannel("[Firebase] FID Change"),si.onmessage=I=>{on(I.data.key,I.data.fid)}),si}();M&&M.postMessage({key:I,fid:x}),function qr(){0===Zt.size&&si&&(si.close(),si=null)}()}(M,x)}function on(I,x){const M=Zt.get(I);if(M)for(const L of M)L(x)}let si=null;const oi="firebase-installations-store";let Ri=null;function yt(){return Ri||(Ri=(0,ge.X3)("firebase-installations-database",1,{upgrade:(I,x)=>{0===x&&I.createObjectStore(oi)}})),Ri}function hn(I,x){return mi.apply(this,arguments)}function mi(){return(mi=(0,N.Z)(function*(I,x){const M=Ln(I),J=(yield yt()).transaction(oi,"readwrite"),se=J.objectStore(oi),Se=yield se.get(M);return yield se.put(x,M),yield J.done,(!Se||Se.fid!==x.fid)&&Yt(I,x.fid),x})).apply(this,arguments)}function Bn(I){return ki.apply(this,arguments)}function ki(){return(ki=(0,N.Z)(function*(I){const x=Ln(I),L=(yield yt()).transaction(oi,"readwrite");yield L.objectStore(oi).delete(x),yield L.done})).apply(this,arguments)}function Yi(I,x){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,N.Z)(function*(I,x){const M=Ln(I),J=(yield yt()).transaction(oi,"readwrite"),se=J.objectStore(oi),Se=yield se.get(M),je=x(Se);return void 0===je?yield se.delete(M):yield se.put(je,M),yield J.done,je&&(!Se||Se.fid!==je.fid)&&Yt(I,je.fid),je})).apply(this,arguments)}function gn(I){return to.apply(this,arguments)}function to(){return(to=(0,N.Z)(function*(I){let x;const M=yield Yi(I.appConfig,L=>{const J=fn(L),se=ot(I,J);return x=se.registrationPromise,se.installationEntry});return""===M.fid?{installationEntry:yield x}:{installationEntry:M,registrationPromise:x}})).apply(this,arguments)}function fn(I){return Qn(I||{fid:We(),registrationStatus:0})}function ot(I,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(Qe.create("app-offline"))};const M={fid:x.fid,registrationStatus:1,registrationTime:Date.now()},L=function Xe(I,x){return Bo.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:L}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:yr(I)}:{installationEntry:x}}function Bo(){return(Bo=(0,N.Z)(function*(I,x){try{const M=yield ie(I,x);return hn(I.appConfig,M)}catch(M){throw tt(M)&&409===M.customData.serverCode?yield Bn(I.appConfig):yield hn(I.appConfig,{fid:x.fid,registrationStatus:0}),M}})).apply(this,arguments)}function yr(I){return mn.apply(this,arguments)}function mn(){return(mn=(0,N.Z)(function*(I){let x=yield Bt(I.appConfig);for(;1===x.registrationStatus;)yield Ne(100),x=yield Bt(I.appConfig);if(0===x.registrationStatus){const{installationEntry:M,registrationPromise:L}=yield gn(I);return L||M}return x})).apply(this,arguments)}function Bt(I){return Yi(I,x=>{if(!x)throw Qe.create("installation-not-found");return Qn(x)})}function Qn(I){return function xs(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Qt(I,x){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:x},M){const L=Ht(I,M),J=U(I,M),se=x.getImmediate({optional:!0});if(se){const xt=yield se.getHeartbeatsHeader();xt&&J.append("x-firebase-client",xt)}const je={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},mt=yield ve(()=>fetch(L,je));if(mt.ok)return we(yield mt.json());throw yield De("Generate Auth Token",mt)})).apply(this,arguments)}function Ht(I,{fid:x}){return`${Ae(I)}/${x}/authTokens:generate`}function Y(I){return G.apply(this,arguments)}function G(){return(G=(0,N.Z)(function*(I,x=!1){let M;const L=yield Yi(I.appConfig,se=>{if(!ct(se))throw Qe.create("not-registered");const Se=se.authToken;if(!x&&cn(Se))return se;if(1===Se.requestStatus)return M=B(I,x),se;{if(!navigator.onLine)throw Qe.create("app-offline");const je=sr(se);return M=xe(I,je),je}});return M?yield M:L.authToken})).apply(this,arguments)}function B(I,x){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*(I,x){let M=yield q(I.appConfig);for(;1===M.authToken.requestStatus;)yield Ne(100),M=yield q(I.appConfig);const L=M.authToken;return 0===L.requestStatus?Y(I,x):L})).apply(this,arguments)}function q(I){return Yi(I,x=>{if(!ct(x))throw Qe.create("not-registered");return function rt(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function xe(I,x){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(I,x){try{const M=yield Qt(I,x),L=Object.assign(Object.assign({},x),{authToken:M});return yield hn(I.appConfig,L),M}catch(M){if(!tt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const L=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield hn(I.appConfig,L)}else yield Bn(I.appConfig);throw M}})).apply(this,arguments)}function ct(I){return void 0!==I&&2===I.registrationStatus}function cn(I){return 2===I.requestStatus&&!function Xt(I){const x=Date.now();return x<I.creationTime||I.creationTime+I.expiresIn<x+36e5}(I)}function sr(I){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:x})}function yn(){return(yn=(0,N.Z)(function*(I){const x=I,{installationEntry:M,registrationPromise:L}=yield gn(x);return L?L.catch(console.error):Y(x).catch(console.error),M.fid})).apply(this,arguments)}function Sr(){return(Sr=(0,N.Z)(function*(I,x=!1){const M=I;return yield Ke(M),(yield Y(M,x)).token})).apply(this,arguments)}function Ke(I){return wt.apply(this,arguments)}function wt(){return(wt=(0,N.Z)(function*(I){const{registrationPromise:x}=yield gn(I);x&&(yield x)})).apply(this,arguments)}function kt(I){return Qe.create("missing-app-config-values",{valueName:I})}const Ua="installations",Dn=I=>{const x=I.getProvider("app").getImmediate(),M=function Cs(I){if(!I||!I.options)throw kt("App Configuration");if(!I.name)throw kt("App Name");const x=["projectId","apiKey","appId"];for(const M of x)if(!I.options[M])throw kt(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(x);return{app:x,appConfig:M,heartbeatServiceProvider:(0,he._getProvider)(x,"heartbeat"),_delete:()=>Promise.resolve()}},As=I=>{const x=I.getProvider("app").getImmediate(),M=(0,he._getProvider)(x,Ua).getImmediate();return{getId:()=>function dn(I){return yn.apply(this,arguments)}(M),getToken:J=>function _r(I){return Sr.apply(this,arguments)}(M,J)}};(function Tr(){(0,he._registerComponent)(new pe.wA(Ua,Dn,"PUBLIC")),(0,he._registerComponent)(new pe.wA("installations-internal",As,"PRIVATE"))})(),(0,he.registerVersion)(me,j),(0,he.registerVersion)(me,j,"esm2017");const Ss="@firebase/remote-config",Vt=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vd{constructor(x,M,L,J){this.client=x,this.storage=M,this.storageCache=L,this.logger=J}isCachedDataFresh(x,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-M,J=L<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${J}.`),J}fetch(x){var M=this;return(0,N.Z)(function*(){const[L,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(x.cacheMaxAgeMillis,L))return J;x.eTag=J&&J.eTag;const se=yield M.client.fetch(x),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Se),se})()}}function bd(I=navigator){return I.languages&&I.languages[0]||I.language}class Hu{constructor(x,M,L,J,se,Se){this.firebaseInstallations=x,this.sdkVersion=M,this.namespace=L,this.projectId=J,this.apiKey=se,this.appId=Se}fetch(x){var M=this;return(0,N.Z)(function*(){var L,J,se;const[Se,je]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},ht={sdk_version:M.sdkVersion,app_instance_id:Se,app_instance_id_token:je,app_id:M.appId,language_code:bd()},Fn={method:"POST",headers:St,body:JSON.stringify(ht)},Hr=fetch(xt,Fn),mo=new Promise((yo,_a)=>{x.signal.addEventListener(()=>{const Ud=new Error("The operation was aborted.");Ud.name="AbortError",_a(Ud)})});let rn;try{yield Promise.race([Hr,mo]),rn=yield Hr}catch(yo){let _a="fetch-client-network";throw"AbortError"===(null===(L=yo)||void 0===L?void 0:L.name)&&(_a="fetch-timeout"),Vt.create(_a,{originalErrorMessage:null===(J=yo)||void 0===J?void 0:J.message})}let an=rn.status;const iu=rn.headers.get("ETag")||void 0;let pl,Us;if(200===rn.status){let yo;try{yo=yield rn.json()}catch(_a){throw Vt.create("fetch-client-parse",{originalErrorMessage:null===(se=_a)||void 0===se?void 0:se.message})}pl=yo.entries,Us=yo.state}if("INSTANCE_STATE_UNSPECIFIED"===Us?an=500:"NO_CHANGE"===Us?an=304:("NO_TEMPLATE"===Us||"EMPTY_CONFIG"===Us)&&(pl={}),304!==an&&200!==an)throw Vt.create("fetch-status",{httpStatus:an});return{status:an,eTag:iu,config:pl}})()}}class Wp{constructor(x,M){this.client=x,this.storage=M}fetch(x){var M=this;return(0,N.Z)(function*(){const L=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(x,L)})()}attemptFetch(x,{throttleEndTimeMillis:M,backoffCount:L}){var J=this;return(0,N.Z)(function*(){yield function or(I,x){return new Promise((M,L)=>{const J=Math.max(x-Date.now(),0),se=setTimeout(M,J);I.addEventListener(()=>{clearTimeout(se),L(Vt.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,M);try{const se=yield J.client.fetch(x);return yield J.storage.deleteThrottleMetadata(),se}catch(se){if(!function wd(I){if(!(I instanceof le.ZR&&I.customData))return!1;const x=Number(I.customData.httpStatus);return 429===x||500===x||503===x||504===x}(se))throw se;const Se={throttleEndTimeMillis:Date.now()+(0,le.$s)(L),backoffCount:L+1};return yield J.storage.setThrottleMetadata(Se),J.attemptFetch(x,Se)}})()}}class Gu{constructor(x,M,L,J,se){this.app=x,this._client=M,this._storageCache=L,this._storage=J,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $u(I,x){var M;const L=I.target.error||void 0;return Vt.create(x,{originalErrorMessage:L&&(null===(M=L)||void 0===M?void 0:M.message)})}const Rs="app_namespace_store";class Dd{constructor(x,M,L,J=function Yp(){return new Promise((I,x)=>{var M;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=J=>{x($u(J,"storage-open"))},L.onsuccess=J=>{I(J.target.result)},L.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Rs,{keyPath:"compositeKey"})}}catch(L){x(Vt.create("storage-open",{originalErrorMessage:null===(M=L)||void 0===M?void 0:M.message}))}})}()){this.appId=x,this.appName=M,this.namespace=L,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var M=this;return(0,N.Z)(function*(){const L=yield M.openDbPromise;return new Promise((J,se)=>{var Se;const mt=L.transaction([Rs],"readonly").objectStore(Rs),xt=M.createCompositeKey(x);try{const St=mt.get(xt);St.onerror=ht=>{se($u(ht,"storage-get"))},St.onsuccess=ht=>{const Fn=ht.target.result;J(Fn?Fn.value:void 0)}}catch(St){se(Vt.create("storage-get",{originalErrorMessage:null===(Se=St)||void 0===Se?void 0:Se.message}))}})})()}set(x,M){var L=this;return(0,N.Z)(function*(){const J=yield L.openDbPromise;return new Promise((se,Se)=>{var je;const xt=J.transaction([Rs],"readwrite").objectStore(Rs),St=L.createCompositeKey(x);try{const ht=xt.put({compositeKey:St,value:M});ht.onerror=Fn=>{Se($u(Fn,"storage-set"))},ht.onsuccess=()=>{se()}}catch(ht){Se(Vt.create("storage-set",{originalErrorMessage:null===(je=ht)||void 0===je?void 0:je.message}))}})})()}delete(x){var M=this;return(0,N.Z)(function*(){const L=yield M.openDbPromise;return new Promise((J,se)=>{var Se;const mt=L.transaction([Rs],"readwrite").objectStore(Rs),xt=M.createCompositeKey(x);try{const St=mt.delete(xt);St.onerror=ht=>{se($u(ht,"storage-delete"))},St.onsuccess=()=>{J()}}catch(St){se(Vt.create("storage-delete",{originalErrorMessage:null===(Se=St)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Ga{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,N.Z)(function*(){const M=x.storage.getLastFetchStatus(),L=x.storage.getLastSuccessfulFetchTimestampMillis(),J=x.storage.getActiveConfig(),se=yield M;se&&(x.lastFetchStatus=se);const Se=yield L;Se&&(x.lastSuccessfulFetchTimestampMillis=Se);const je=yield J;je&&(x.activeConfig=je)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function _i(){return xd.apply(this,arguments)}function xd(){return(xd=(0,N.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function $o(){(0,he._registerComponent)(new pe.wA("remote-config",function I(x,{instanceIdentifier:M}){const L=x.getProvider("app").getImmediate(),J=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vt.create("registration-window");if(!(0,le.hl)())throw Vt.create("indexed-db-unavailable");const{projectId:se,apiKey:Se,appId:je}=L.options;if(!se)throw Vt.create("registration-project-id");if(!Se)throw Vt.create("registration-api-key");if(!je)throw Vt.create("registration-app-id");const mt=new Dd(je,L.name,M=M||"firebase"),xt=new Ga(mt),St=new ue.Yd(Ss);St.logLevel=ue.in.ERROR;const ht=new Hu(J,he.SDK_VERSION,M,se,Se,je),Fn=new Wp(ht,mt),Hr=new vd(Fn,mt,xt,St),mo=new Gu(L,Hr,xt,mt,St);return function Vr(I){const x=(0,le.m9)(I);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(mo),mo},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(Ss,"0.3.11"),(0,he.registerVersion)(Ss,"0.3.11","esm2017")}();const zo="/firebase-messaging-sw.js",Fi="/firebase-cloud-messaging-push-scope",io="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wo="google.c.a.c_id",$a="google.c.a.c_l",Cd="google.c.a.ts",Ad="google.c.a.e";var ar=(()=>{return(I=ar||(ar={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ar;var I})();function Kr(I){const x=new Uint8Array(I);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sd(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(M),J=new Uint8Array(L.length);for(let se=0;se<L.length;++se)J[se]=L.charCodeAt(se);return J}const Zo="fcm_token_details_db",Xn="fcm_token_object_Store";function Hn(I){return Td.apply(this,arguments)}function Td(){return Td=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Zo))return null;let x=null;return(yield(0,ge.X3)(Zo,5,{upgrade:(L=(0,N.Z)(function*(J,se,Se,je){var mt;if(se<2||!J.objectStoreNames.contains(Xn))return;const xt=je.objectStore(Xn),St=yield xt.index("fcmSenderId").get(I);if(yield xt.clear(),St)if(2===se){const ht=St;if(!ht.auth||!ht.p256dh||!ht.endpoint)return;x={token:ht.fcmToken,createTime:null!==(mt=ht.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:ht.auth,p256dh:ht.p256dh,endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:"string"==typeof ht.vapidKey?ht.vapidKey:Kr(ht.vapidKey)}}}else if(3===se){const ht=St;x={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Kr(ht.auth),p256dh:Kr(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Kr(ht.vapidKey)}}}else if(4===se){const ht=St;x={token:ht.fcmToken,createTime:ht.createTime,subscriptionOptions:{auth:Kr(ht.auth),p256dh:Kr(ht.p256dh),endpoint:ht.endpoint,swScope:ht.swScope,vapidKey:Kr(ht.vapidKey)}}}}),function(se,Se,je,mt){return L.apply(this,arguments)})})).close(),yield(0,ge.Lj)(Zo),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),uf(x)?x:null;var L}),Td.apply(this,arguments)}function uf(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:x}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const es="firebase-messaging-store";let za=null;function ts(){return za||(za=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(I,x)=>{0===x&&I.createObjectStore(es)}})),za}function Mr(I){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(I){const x=Xo(I),L=yield(yield ts()).transaction(es).objectStore(es).get(x);if(L)return L;{const J=yield Hn(I.appConfig.senderId);if(J)return yield bi(I,J),J}})).apply(this,arguments)}function bi(I,x){return ns.apply(this,arguments)}function ns(){return(ns=(0,N.Z)(function*(I,x){const M=Xo(I),J=(yield ts()).transaction(es,"readwrite");return yield J.objectStore(es).put(x,M),yield J.done,x})).apply(this,arguments)}function rs(I){return is.apply(this,arguments)}function is(){return(is=(0,N.Z)(function*(I){const x=Xo(I),L=(yield ts()).transaction(es,"readwrite");yield L.objectStore(es).delete(x),yield L.done})).apply(this,arguments)}function Xo({appConfig:I}){return I.appId}const kn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Md(I,x){return jl.apply(this,arguments)}function jl(){return(jl=(0,N.Z)(function*(I,x){var M;const L=yield Ie(I),J=Os(x),se={method:"POST",headers:L,body:JSON.stringify(J)};let Se;try{Se=yield(yield fetch(Jo(I.appConfig),se)).json()}catch(je){throw kn.create("token-subscribe-failed",{errorInfo:null===(M=je)||void 0===M?void 0:M.toString()})}if(Se.error)throw kn.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw kn.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function zu(I,x){return so.apply(this,arguments)}function so(){return(so=(0,N.Z)(function*(I,x){var M;const L=yield Ie(I),J=Os(x.subscriptionOptions),se={method:"PATCH",headers:L,body:JSON.stringify(J)};let Se;try{Se=yield(yield fetch(`${Jo(I.appConfig)}/${x.token}`,se)).json()}catch(je){throw kn.create("token-update-failed",{errorInfo:null===(M=je)||void 0===M?void 0:M.toString()})}if(Se.error)throw kn.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw kn.create("token-update-no-token");return Se.token})).apply(this,arguments)}function ks(I,x){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,N.Z)(function*(I,x){var M;const J={method:"DELETE",headers:yield Ie(I)};try{const Se=yield(yield fetch(`${Jo(I.appConfig)}/${x}`,J)).json();if(Se.error)throw kn.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(se){throw kn.create("token-unsubscribe-failed",{errorInfo:null===(M=se)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Jo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ie(I){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,N.Z)(function*({appConfig:I,installations:x}){const M=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Os({p256dh:I,auth:x,endpoint:M,vapidKey:L}){const J={web:{endpoint:M,auth:x,p256dh:I}};return L!==io&&(J.web.applicationPubKey=L),J}const ea=6048e5;function _n(I){return qa.apply(this,arguments)}function qa(){return(qa=(0,N.Z)(function*(I){const x=yield cf(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:x.endpoint,auth:Kr(x.getKey("auth")),p256dh:Kr(x.getKey("p256dh"))},L=yield Mr(I.firebaseDependencies);if(L){if(Jn(L.subscriptionOptions,M))return Date.now()>=L.createTime+ea?Wa(I,{token:L.token,createTime:Date.now(),subscriptionOptions:M}):L.token;try{yield ks(I.firebaseDependencies,L.token)}catch(J){console.warn(J)}return ta(I.firebaseDependencies,M)}return ta(I.firebaseDependencies,M)})).apply(this,arguments)}function Fs(I){return ui.apply(this,arguments)}function ui(){return(ui=(0,N.Z)(function*(I){const x=yield Mr(I.firebaseDependencies);x&&(yield ks(I.firebaseDependencies,x.token),yield rs(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Wa(I,x){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,N.Z)(function*(I,x){try{const M=yield zu(I.firebaseDependencies,x),L=Object.assign(Object.assign({},x),{token:M,createTime:Date.now()});return yield bi(I.firebaseDependencies,L),M}catch(M){throw yield Fs(I),M}})).apply(this,arguments)}function ta(I,x){return Za.apply(this,arguments)}function Za(){return(Za=(0,N.Z)(function*(I,x){const L={token:yield Md(I,x),createTime:Date.now(),subscriptionOptions:x};return yield bi(I,L),L.token})).apply(this,arguments)}function cf(I,x){return ss.apply(this,arguments)}function ss(){return(ss=(0,N.Z)(function*(I,x){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sd(x)})})).apply(this,arguments)}function Jn(I,x){return x.vapidKey===I.vapidKey&&x.endpoint===I.endpoint&&x.auth===I.auth&&x.p256dh===I.p256dh}function Ni(I){const x={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ya(I,x){if(!x.notification)return;I.notification={};const M=x.notification.title;M&&(I.notification.title=M);const L=x.notification.body;L&&(I.notification.body=L);const J=x.notification.image;J&&(I.notification.image=J)}(x,I),function oo(I,x){!x.data||(I.data=x.data)}(x,I),function os(I,x){var M,L,J,se,Se;if(!(x.fcmOptions||null!==(M=x.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const je=null!==(J=null===(L=x.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==J?J:null===(se=x.notification)||void 0===se?void 0:se.click_action;je&&(I.fcmOptions.link=je);const mt=null===(Se=x.fcmOptions)||void 0===Se?void 0:Se.analytics_label;mt&&(I.fcmOptions.analyticsLabel=mt)}(x,I),x}function qu(I){return"object"==typeof I&&!!I&&Wo in I}function Wu(I,x){const M=[];for(let L=0;L<I.length;L++)M.push(I.charAt(L)),L<x.length&&M.push(x.charAt(L));return M.join("")}function Qa(I){return kn.create("missing-app-config-values",{valueName:I})}Wu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ku{constructor(x,M,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Rd(I){if(!I||!I.options)throw Qa("App Configuration Object");if(!I.name)throw Qa("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const L of x)if(!M[L])throw Qa(L);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:J,installations:M,analyticsProvider:L}}_delete(){return Promise.resolve()}}function ao(I){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,N.Z)(function*(I){var x;try{I.swRegistration=yield navigator.serviceWorker.register(zo,{scope:Fi}),I.swRegistration.update().catch(()=>{})}catch(M){throw kn.create("failed-service-worker-registration",{browserErrorMessage:null===(x=M)||void 0===x?void 0:x.message})}})).apply(this,arguments)}function Xa(I,x){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,N.Z)(function*(I,x){if(!x&&!I.swRegistration&&(yield ao(I)),x||!I.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");I.swRegistration=x}})).apply(this,arguments)}function na(I,x){return $l.apply(this,arguments)}function $l(){return($l=(0,N.Z)(function*(I,x){x?I.vapidKey=x:I.vapidKey||(I.vapidKey=io)})).apply(this,arguments)}function ql(){return(ql=(0,N.Z)(function*(I,x){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield na(I,x?.vapidKey),yield Xa(I,x?.serviceWorkerRegistration),_n(I)})).apply(this,arguments)}function Wl(I,x,M){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,N.Z)(function*(I,x,M){const L=ra(x);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:M[Wo],message_name:M[$a],message_time:M[Cd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ra(I){switch(I){case ar.NOTIFICATION_CLICKED:return"notification_open";case ar.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zl(){return(Zl=(0,N.Z)(function*(I,x){const M=x.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===ar.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ni(M)):I.onMessageHandler.next(Ni(M)));const L=M.data;qu(L)&&"1"===L[Ad]&&(yield Wl(I,M.messageType,L))})).apply(this,arguments)}const lr="@firebase/messaging",vn=I=>{const x=new Ku(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function df(I,x){return Zl.apply(this,arguments)}(x,M)),x},ia=I=>{const x=I.getProvider("messaging").getImmediate();return{getToken:L=>function zl(I,x){return ql.apply(this,arguments)}(x,L)}};function hf(){return Od.apply(this,arguments)}function Od(){return(Od=(0,N.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kd(){(0,he._registerComponent)(new pe.wA("messaging",vn,"PUBLIC")),(0,he._registerComponent)(new pe.wA("messaging-internal",ia,"PRIVATE")),(0,he.registerVersion)(lr,"0.9.16"),(0,he.registerVersion)(lr,"0.9.16","esm2017")}();const Pi="analytics",sa="firebase_id",Li="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",el="https://www.googletagmanager.com/gtag/js",br=new ue.Yd("@firebase/analytics");function yf(I){return Promise.all(I.map(x=>x.catch(M=>M)))}function Ay(I,x){const M=document.createElement("script");M.src=`${el}?l=${I}&id=${x}`,M.async=!0,document.head.appendChild(M)}function tl(I,x,M,L,J,se){return nl.apply(this,arguments)}function nl(){return(nl=(0,N.Z)(function*(I,x,M,L,J,se){const Se=L[J];try{if(Se)yield x[Se];else{const mt=(yield yf(M)).find(xt=>xt.measurementId===J);mt&&(yield x[mt.appId])}}catch(je){br.error(je)}I("config",J,se)})).apply(this,arguments)}function Nd(I,x,M,L,J){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,N.Z)(function*(I,x,M,L,J){try{let se=[];if(J&&J.send_to){let Se=J.send_to;Array.isArray(Se)||(Se=[Se]);const je=yield yf(M);for(const mt of Se){const xt=je.find(ht=>ht.measurementId===mt),St=xt&&x[xt.appId];if(!St){se=[];break}se.push(St)}}0===se.length&&(se=Object.values(x)),yield Promise.all(se),I("event",L,J||{})}catch(se){br.error(se)}})).apply(this,arguments)}function rl(){const I=window.document.getElementsByTagName("script");for(const x of Object.values(I))if(x.src&&x.src.includes(el))return x;return null}const Rr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ld=new class Ps{constructor(x={},M=1e3){this.throttleMetadata=x,this.intervalMillis=M}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,M){this.throttleMetadata[x]=M}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function oa(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ur(I){return On.apply(this,arguments)}function On(){return(On=(0,N.Z)(function*(I){var x;const{appId:M,apiKey:L}=I,J={method:"GET",headers:oa(L)},se=Li.replace("{app-id}",M),Se=yield fetch(se,J);if(200!==Se.status&&304!==Se.status){let je="";try{const mt=yield Se.json();null!==(x=mt.error)&&void 0!==x&&x.message&&(je=mt.error.message)}catch{}throw Rr.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:je})}return Se.json()})).apply(this,arguments)}function pn(I){return In.apply(this,arguments)}function In(){return(In=(0,N.Z)(function*(I,x=Ld,M){const{appId:L,apiKey:J,measurementId:se}=I.options;if(!L)throw Rr.create("no-app-id");if(!J){if(se)return{measurementId:se,appId:L};throw Rr.create("no-api-key")}const Se=x.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new cr;return setTimeout((0,N.Z)(function*(){je.abort()}),void 0!==M?M:6e4),xn({appId:L,apiKey:J,measurementId:se},Se,je,x)})).apply(this,arguments)}function xn(I,x,M){return il.apply(this,arguments)}function il(){return(il=(0,N.Z)(function*(I,{throttleEndTimeMillis:x,backoffCount:M},L,J=Ld){var se,Se;const{appId:je,measurementId:mt}=I;try{yield aa(L,x)}catch(xt){if(mt)return br.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null===(se=xt)||void 0===se?void 0:se.message}]`),{appId:je,measurementId:mt};throw xt}try{const xt=yield ur(I);return J.deleteThrottleMetadata(je),xt}catch(xt){const St=xt;if(!Ls(St)){if(J.deleteThrottleMetadata(je),mt)return br.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:je,measurementId:mt};throw xt}const ht=503===Number(null===(Se=St?.customData)||void 0===Se?void 0:Se.httpStatus)?(0,le.$s)(M,J.intervalMillis,30):(0,le.$s)(M,J.intervalMillis),Fn={throttleEndTimeMillis:Date.now()+ht,backoffCount:M+1};return J.setThrottleMetadata(je,Fn),br.debug(`Calling attemptFetch again in ${ht} millis`),xn(I,Fn,L,J)}})).apply(this,arguments)}function aa(I,x){return new Promise((M,L)=>{const J=Math.max(x-Date.now(),0),se=setTimeout(M,J);I.addEventListener(()=>{clearTimeout(se),L(Rr.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function Ls(I){if(!(I instanceof le.ZR&&I.customData))return!1;const x=Number(I.customData.httpStatus);return 429===x||500===x||503===x||504===x}class cr{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}let Bs,Xl;function ls(){return(ls=(0,N.Z)(function*(I,x,M,L,J){if(J&&J.global)I("event",M,L);else{const se=yield x;I("event",M,Object.assign(Object.assign({},L),{send_to:se}))}})).apply(this,arguments)}function Jl(I){Xl=I}function be(I){Bs=I}function co(){return la.apply(this,arguments)}function la(){return(la=(0,N.Z)(function*(){var I;if(!(0,le.hl)())return br.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(x){return br.warn(Rr.create("indexeddb-unavailable",{errorInfo:null===(I=x)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Mt(){return(Mt=(0,N.Z)(function*(I,x,M,L,J,se,Se){var je;const mt=pn(I);mt.then(Hr=>{M[Hr.measurementId]=Hr.appId,I.options.measurementId&&Hr.measurementId!==I.options.measurementId&&br.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Hr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hr=>br.error(Hr)),x.push(mt);const xt=co().then(Hr=>{if(Hr)return L.getId()}),[St,ht]=yield Promise.all([mt,xt]);rl()||Ay(se,St.measurementId),Xl&&(J("consent","default",Xl),Jl(void 0)),J("js",new Date);const Fn=null!==(je=Se?.config)&&void 0!==je?je:{};return Fn.origin="firebase",Fn.update=!0,null!=ht&&(Fn[sa]=ht),J("config",St.measurementId,Fn),Bs&&(J("set",Bs),be(void 0)),St.measurementId})).apply(this,arguments)}class ua{constructor(x){this.app=x}_delete(){return delete Cn[this.app.options.appId],Promise.resolve()}}let Cn={},Je=[];const ca={};let eu,jt,gt="dataLayer",al=!1;function Jp(I,x,M){!function Xp(){const I=[];if((0,le.ru)()&&I.push("This is a browser extension environment."),(0,le.zI)()||I.push("Cookies are not available."),I.length>0){const x=I.map((L,J)=>`(${J+1}) ${L}`).join(" "),M=Rr.create("invalid-analytics-context",{errorInfo:x});br.warn(M.message)}}();const L=I.options.appId;if(!L)throw Rr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Rr.create("no-api-key");br.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Cn[L])throw Rr.create("already-exists",{id:L});if(!al){!function Sy(I){let x=[];Array.isArray(window[I])?x=window[I]:window[I]=x}(gt);const{wrappedGtag:se,gtagCore:Se}=function _f(I,x,M,L,J){let se=function(...Se){window[L].push(arguments)};return window[J]&&"function"==typeof window[J]&&(se=window[J]),window[J]=function Pd(I,x,M,L){function se(){return(se=(0,N.Z)(function*(Se,je,mt){try{"event"===Se?yield Nd(I,x,M,je,mt):"config"===Se?yield tl(I,x,M,L,je,mt):"consent"===Se?I("consent","update",mt):I("set",je)}catch(xt){br.error(xt)}})).apply(this,arguments)}return function J(Se,je,mt){return se.apply(this,arguments)}}(se,I,x,M),{gtagCore:se,wrappedGtag:window[J]}}(Cn,Je,ca,gt,"gtag");jt=se,eu=Se,al=!0}return Cn[L]=function Ur(I,x,M,L,J,se,Se){return Mt.apply(this,arguments)}(I,Je,ca,x,eu,gt,M),new ua(I)}function Xu(){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const Or="@firebase/analytics";!function tc(){(0,he._registerComponent)(new pe.wA(Pi,(x,{options:M})=>Jp(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,he._registerComponent)(new pe.wA("analytics-internal",function I(x){try{const M=x.getProvider(Pi).getImmediate();return{logEvent:(L,J,se)=>function eg(I,x,M,L){I=(0,le.m9)(I),function Gn(I,x,M,L,J){return ls.apply(this,arguments)}(jt,Cn[I.app.options.appId],x,M,L).catch(J=>br.error(J))}(M,L,J,se)}}catch(M){throw Rr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,he.registerVersion)(Or,"0.8.0"),(0,he.registerVersion)(Or,"0.8.0","esm2017")}();var $n=F(4408),fr=F(7565);const tu=new class ul extends fr.v{}(class ho extends $n.o{constructor(x,M){super(x,M),this.scheduler=x,this.work=M}schedule(x,M=0){return M>0?super.schedule(x,M):(this.delay=M,this.state=x,this.scheduler.flush(this),this)}execute(x,M){return M>0||this.closed?super.execute(x,M):this._execute(x,M)}requestAsyncId(x,M,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(x,M,L):x.flush(this)}});var nc=F(4986),fo=F(8505),zn=F(9468),po=F(5363);const ha=new f.GfV("7.4.1"),Bd="__angularfire_symbol__analyticsIsSupportedValue",cs="__angularfire_symbol__analyticsIsSupported",fa="__angularfire_symbol__remoteConfigIsSupportedValue",pa="__angularfire_symbol__remoteConfigIsSupported",nu="__angularfire_symbol__messagingIsSupportedValue",rc="__angularfire_symbol__messagingIsSupported";function ru(I,x,M){if(x){if(1===x.length)return x[0];const se=x.filter(Se=>Se.app===M);if(1===se.length)return se[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[cs]||(globalThis[cs]=Xu().then(I=>globalThis[Bd]=I).catch(()=>globalThis[Bd]=!1)),globalThis[rc]||(globalThis[rc]=hf().then(I=>globalThis[nu]=I).catch(()=>globalThis[nu]=!1)),globalThis[pa]||(globalThis[pa]=_i().then(I=>globalThis[fa]=I).catch(()=>globalThis[fa]=!1));const go=(I,x)=>{const M=x?[x]:(0,re.C6)(),L=[];return M.forEach(J=>{J.container.getProvider(I).instances.forEach(Se=>{L.includes(Se)||L.push(Se)})}),L};function Vs(){}class wi{constructor(x,M=tu){this.zone=x,this.delegate=M}now(){return this.delegate.now()}schedule(x,M,L){const J=this.zone;return this.delegate.schedule(function(Se){J.runGuarded(()=>{x.apply(this,[Se])})},M,L)}}class Vd{constructor(x){this.zone=x,this.task=null}call(x,M){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vs,{},Vs,Vs)),M.pipe((0,fo.b)({next:L,complete:L,error:L})).subscribe(x).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ef=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new wi(Zone.current)),this.insideAngular=M.run(()=>new wi(Zone.current,nc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ds(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function An(I){return ds(),function sc(I){return function(M){return(M=M.lift(new Vd(I.ngZone))).pipe((0,zn.R)(I.outsideAngular),(0,po.Q)(I.insideAngular))}}(ds())(I)}},2090:(ut,Ce,F)=>{F.d(Ce,{$s:()=>xs,BH:()=>$e,G6:()=>Ge,L:()=>ge,LL:()=>Le,Mn:()=>De,Sg:()=>Re,UG:()=>ye,US:()=>pe,ZB:()=>H,ZR:()=>ie,b$:()=>tt,d:()=>Ae,eu:()=>ve,hl:()=>U,jU:()=>_e,m9:()=>Ht,ne:()=>yt,pd:()=>oi,r3:()=>zr,ru:()=>Qe,tV:()=>me,uI:()=>Ye,vZ:()=>si,w1:()=>we,xO:()=>Mi,xb:()=>on,z$:()=>Me,zI:()=>X,zd:()=>Zi});const he=function(Y){const G=[];let B=0;for(let $=0;$<Y.length;$++){let q=Y.charCodeAt($);q<128?G[B++]=q:q<2048?(G[B++]=q>>6|192,G[B++]=63&q|128):55296==(64512&q)&&$+1<Y.length&&56320==(64512&Y.charCodeAt($+1))?(q=65536+((1023&q)<<10)+(1023&Y.charCodeAt(++$)),G[B++]=q>>18|240,G[B++]=q>>12&63|128,G[B++]=q>>6&63|128,G[B++]=63&q|128):(G[B++]=q>>12|224,G[B++]=q>>6&63|128,G[B++]=63&q|128)}return G},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,G){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let q=0;q<Y.length;q+=3){const xe=Y[q],Ue=q+1<Y.length,ct=Ue?Y[q+1]:0,cn=q+2<Y.length,Xt=cn?Y[q+2]:0;let dn=(15&ct)<<2|Xt>>6,yn=63&Xt;cn||(yn=64,Ue||(dn=64)),$.push(B[xe>>2],B[(3&xe)<<4|ct>>4],B[dn],B[yn])}return $.join("")},encodeString(Y,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(Y):this.encodeByteArray(he(Y),G)},decodeString(Y,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(Y):function(Y){const G=[];let B=0,$=0;for(;B<Y.length;){const q=Y[B++];if(q<128)G[$++]=String.fromCharCode(q);else if(q>191&&q<224){const xe=Y[B++];G[$++]=String.fromCharCode((31&q)<<6|63&xe)}else if(q>239&&q<365){const cn=((7&q)<<18|(63&Y[B++])<<12|(63&Y[B++])<<6|63&Y[B++])-65536;G[$++]=String.fromCharCode(55296+(cn>>10)),G[$++]=String.fromCharCode(56320+(1023&cn))}else{const xe=Y[B++],Ue=Y[B++];G[$++]=String.fromCharCode((15&q)<<12|(63&xe)<<6|63&Ue)}}return G.join("")}(this.decodeStringToByteArray(Y,G))},decodeStringToByteArray(Y,G){this.init_();const B=G?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let q=0;q<Y.length;){const xe=B[Y.charAt(q++)],ct=q<Y.length?B[Y.charAt(q)]:0;++q;const Xt=q<Y.length?B[Y.charAt(q)]:64;++q;const rt=q<Y.length?B[Y.charAt(q)]:64;if(++q,null==xe||null==ct||null==Xt||null==rt)throw Error();$.push(xe<<2|ct>>4),64!==Xt&&($.push(ct<<4&240|Xt>>2),64!==rt&&$.push(Xt<<6&192|rt))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},ge=function(Y){return function(Y){const G=he(Y);return pe.encodeByteArray(G,!0)}(Y).replace(/\./g,"")},me=function(Y){try{return pe.decodeString(Y,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function H(Y,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return G}for(const B in G)!G.hasOwnProperty(B)||!ee(B)||(Y[B]=H(Y[B],G[B]));return Y}function ee(Y){return"__proto__"!==Y}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,B)=>{this.resolve=G,this.reject=B})}wrapCallback(G){return(B,$)=>{B?this.reject(B):this.resolve($),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(B):G(B,$))}}}function Re(Y,G){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=G||"demo-project",q=Y.iat||0,xe=Y.sub||Y.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:q,exp:q+3600,auth_time:q,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ue)),""].join(".")}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function Qe(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return Me().indexOf("Electron/")>=0}function we(){const Y=Me();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function De(){return Me().indexOf("MSAppHost/")>=0}function Ge(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function ve(){return new Promise((Y,G)=>{try{let B=!0;const $="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open($);q.onsuccess=()=>{q.result.close(),B||self.indexedDB.deleteDatabase($),Y(!0)},q.onupgradeneeded=()=>{B=!1},q.onerror=()=>{var xe;G((null===(xe=q.error)||void 0===xe?void 0:xe.message)||"")}}catch(B){G(B)}})}function X(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ie extends Error{constructor(G,B,$){super(B),this.code=G,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(G,B,$){this.service=G,this.serviceName=B,this.errors=$}create(G,...B){const $=B[0]||{},q=`${this.service}/${G}`,xe=this.errors[G],Ue=xe?function Ne(Y,G){return Y.replace(pt,(B,$)=>{const q=G[$];return null!=q?String(q):`<${$}?>`})}(xe,$):"Error";return new ie(q,`${this.serviceName}: ${Ue} (${q}).`,$)}}const pt=/\{\$([^}]+)}/g;function zr(Y,G){return Object.prototype.hasOwnProperty.call(Y,G)}function on(Y){for(const G in Y)if(Object.prototype.hasOwnProperty.call(Y,G))return!1;return!0}function si(Y,G){if(Y===G)return!0;const B=Object.keys(Y),$=Object.keys(G);for(const q of B){if(!$.includes(q))return!1;const xe=Y[q],Ue=G[q];if(Br(xe)&&Br(Ue)){if(!si(xe,Ue))return!1}else if(xe!==Ue)return!1}for(const q of $)if(!B.includes(q))return!1;return!0}function Br(Y){return null!==Y&&"object"==typeof Y}function Mi(Y){const G=[];for(const[B,$]of Object.entries(Y))Array.isArray($)?$.forEach(q=>{G.push(encodeURIComponent(B)+"="+encodeURIComponent(q))}):G.push(encodeURIComponent(B)+"="+encodeURIComponent($));return G.length?"&"+G.join("&"):""}function Zi(Y){const G={};return Y.replace(/^\?/,"").split("&").forEach($=>{if($){const[q,xe]=$.split("=");G[decodeURIComponent(q)]=decodeURIComponent(xe)}}),G}function oi(Y){const G=Y.indexOf("?");if(!G)return"";const B=Y.indexOf("#",G);return Y.substring(G,B>0?B:void 0)}function yt(Y,G){const B=new hn(Y,G);return B.subscribe.bind(B)}class hn{constructor(G,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{G(this)}).catch($=>{this.error($)})}next(G){this.forEachObserver(B=>{B.next(G)})}error(G){this.forEachObserver(B=>{B.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,B,$){let q;if(void 0===G&&void 0===B&&void 0===$)throw new Error("Missing Observer.");q=function Bn(Y,G){if("object"!=typeof Y||null===Y)return!1;for(const B of G)if(B in Y&&"function"==typeof Y[B])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:B,complete:$},void 0===q.next&&(q.next=ki),void 0===q.error&&(q.error=ki),void 0===q.complete&&(q.complete=ki);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),xe}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,G)}sendOne(G,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{B(this.observers[G])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ki(){}function xs(Y,G=1e3,B=2){const $=G*Math.pow(B,Y),q=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+q)}function Ht(Y){return Y&&Y._delegate?Y._delegate:Y}},6593:(ut,Ce,F)=>{var f=F(4650);let re=null;function N(){return re}const ue=new f.OlP("DocumentToken");class jo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,l,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new jo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===l?void 0:l);else if(null!==l){const g=r.get(l);r.move(g,c),jn(g,i)}});for(let i=0,l=r.length;i<l;i++){const g=r.get(i).context;g.index=i,g.count=l,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{jn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function jn(n,e){n.context.$implicit=e.item}let Vr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Jr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ho("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ho("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Jr{constructor(){this.$implicit=null,this.ngIf=null}}function Ho(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class ro{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Go=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),ei=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new ro(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Go,9))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})();class wd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Wp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Ji=new Wp,Kp=new wd;let Gu=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return Ji;if((0,f.F4k)(t))return Kp;throw function or(n,e){return new f.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Ko=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const ar="browser";function vi(n){return n===ar}function Xn(n){return"server"===n}class bi extends class Qo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){re||(re=n)}(new bi)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rs(){return ns=ns||document.querySelector("base"),ns?ns.getAttribute("href"):null}();return null==t?null:function Xo(n){is=is||document.createElement("a"),is.setAttribute("href",n);const e=is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Uu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let is,ns=null;const It=new f.OlP("TRANSITION_ID"),Md=[{provide:f.ip1,useFactory:function kn(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[It,ue,f.zs3],multi:!0}];let zu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const so=new f.OlP("EventManagerPlugins");let ks=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const c=i[l];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(so),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Hl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends Jo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const c=this._doc.createElement("style");c.textContent=l,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ut),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ut))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ut(n){N().remove(n)}const Os={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ea=/%COMP%/g;function ta(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ta(n,i,t):(i=i.replace(ea,n),t.push(i))}return t}function Za(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ss=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Jn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new os(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new qu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ta(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ks),f.LFG(Ie),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Jn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Os[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(oo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=Os[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Os[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Za(r)):this.eventManager.addEventListener(e,t,Za(r))}}function oo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class os extends Jn{constructor(e,t,r,i){super(e),this.component=r;const l=ta(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Wa(n){return"_ngcontent-%COMP%".replace(ea,n)}(i+"-"+r.id),this.hostAttr=function Ka(n){return"_nghost-%COMP%".replace(ea,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class qu extends Jn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ta(i.id,i.styles,[]);for(let c=0;c<l.length;c++){const g=document.createElement("style");g.textContent=l[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Wu=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Rd=["alt","control","meta","shift"],Ku={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ao={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xa=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),c=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,l.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let c="";if(Rd.forEach(v=>{const E=r.indexOf(v);E>-1&&(r.splice(E,1),c+=v+".")}),c+=l,0!=r.length||0===l.length)return null;const g={};return g.domEventName=i,g.fullKey=c,g}static getEventFullKey(t){let r="",i=function Zu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ao.hasOwnProperty(e)&&(e=ao[e]))}return Ku[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Rd.forEach(l=>{l!=i&&(0,Gl[l])(t)&&(r+=l+".")}),r+=i,r}static eventCallback(t,r,i){return l=>{n.getEventFullKey(l)===t&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const df=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:ar},{provide:f.g9A,useValue:function ql(){bi.makeCurrent()},multi:!0},{provide:ue,useFactory:function Kl(){return(0,f.RDi)(document),document},deps:[]}]),Zl=new f.OlP(""),lr=[{provide:f.rWj,useClass:class jl{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let l=i.length,c=!1;const g=function(v){c=c||v,l--,0==l&&r(c)};i.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],ci=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Wl(){return new f.qLn},deps:[]},{provide:so,useClass:Wu,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:so,useClass:Xa,multi:!0,deps:[ue]},{provide:ss,useClass:ss,deps:[ks,Ie,f.AFp]},{provide:f.FYo,useExisting:ss},{provide:Jo,useExisting:Ie},{provide:Ie,useClass:Ie,deps:[ue]},{provide:ks,useClass:ks,deps:[so,f.R0b]},{provide:class Mr{},useClass:zu,deps:[]},[]];let vn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:It,useExisting:f.AFp},Md]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Zl,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...ci,...lr],imports:[Ko,f.hGG]}),n})();typeof window<"u"&&window;let as=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):f.LFG(Ps),r},providedIn:"root"}),n})(),Ps=(()=>{class n extends as{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case f.q3G.NONE:return r;case f.q3G.HTML:return(0,f.qzn)(r,"HTML")?(0,f.z3N)(r):(0,f.EiD)(this._doc,String(r)).toString();case f.q3G.STYLE:return(0,f.qzn)(r,"Style")?(0,f.z3N)(r):r;case f.q3G.SCRIPT:if((0,f.qzn)(r,"Script"))return(0,f.z3N)(r);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.qzn)(r,"URL")?(0,f.z3N)(r):(0,f.mCW)(String(r));case f.q3G.RESOURCE_URL:if((0,f.qzn)(r,"ResourceURL"))return(0,f.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,f.JVY)(t)}bypassSecurityTrustStyle(t){return(0,f.L6k)(t)}bypassSecurityTrustScript(t){return(0,f.eBb)(t)}bypassSecurityTrustUrl(t){return(0,f.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,f.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Qu(n){return new Ps(n.get(ue))}(f.LFG(f.zs3)),r},providedIn:"root"}),n})();var oa=F(4986),ur=F(8306),On=F(8996),pn=F(3269);function In(...n){const e=(0,pn.yG)(n);return(0,On.D)(n,e)}var xn=F(5813),il=F(8189);function Ls(...n){return function aa(){return(0,il.J)(1)}()((0,On.D)(n,(0,pn.yG)(n)))}var cr=F(4482);function Bs(...n){const e=(0,pn.yG)(n);return(0,cr.e)((t,r)=>{(e?Ls(n,t,e):Ls(n,t)).subscribe(r)})}var Gn=F(5403);function ls(){return(0,cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}var $t=F(4004);function uo(n,e,t,r,i){return(l,c)=>{let g=t,v=e,E=0;l.subscribe((0,Gn.x)(c,S=>{const R=E++;v=g?n(v,S,R):(g=!0,S),r&&c.next(v)},i&&(()=>{g&&c.next(v),c.complete()})))}}function us(n,e){return(0,cr.e)(uo(n,e,arguments.length>=2,!0))}var Bi=F(4671);function Ql(n,e=Bi.y){return n=n??sl,(0,cr.e)((t,r)=>{let i,l=!0;t.subscribe((0,Gn.x)(r,c=>{const g=e(c);(l||!n(i,g))&&(l=!1,i=g,r.next(c))}))})}function sl(n,e){return n===e}function dr(n,e){return(0,cr.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,l=>n.call(e,l,i++)&&r.next(l)))})}var Je,hr=F(2011),Jl=(F(1451),F(3942)),be=F(5861),co=F(9681),la=F(4859),Ur=F(1877),Mt=F(2090),ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={},ca=ca||{},gt=ua||self;function ol(){}function eu(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jt(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vf="closure_uid_"+(1e9*Math.random()>>>0),Xp=0;function Jp(n,e,t){return n.call.apply(n.bind,arguments)}function bf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function kr(n,e,t){return(kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jp:bf).apply(null,arguments)}function Xu(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[i].apply(r,c)}}function da(){this.s=this.s,this.o=this.o}var er={};da.prototype.s=!1,da.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function al(n){return Object.prototype.hasOwnProperty.call(n,vf)&&n[vf]||(n[vf]=++Xp)}(this);delete er[n]}},da.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ju=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ll=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&e.call(t,i[l],l,n)};function ec(n){return Array.prototype.concat.apply([],arguments)}function Or(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function jr(n){return/^[\s\xa0]*$/.test(n)}var fr,tc=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $n(n,e){return-1!=n.indexOf(e)}function ho(n,e){return n<e?-1:n>e?1:0}e:{var ul=gt.navigator;if(ul){var tu=ul.userAgent;if(tu){fr=tu;break e}}fr=""}function wf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nc(n){const e={};for(const t in n)e[t]=n[t];return e}var fo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zn(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<fo.length;l++)t=fo[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function po(n){return po[" "](n),n}po[" "]=ol;var ic,n,Bd=$n(fr,"Opera"),cs=$n(fr,"Trident")||$n(fr,"MSIE"),fa=$n(fr,"Edge"),pa=fa||cs,nu=$n(fr,"Gecko")&&!($n(fr.toLowerCase(),"webkit")&&!$n(fr,"Edge"))&&!($n(fr,"Trident")||$n(fr,"MSIE"))&&!$n(fr,"Edge"),rc=$n(fr.toLowerCase(),"webkit")&&!$n(fr,"Edge");function ga(){var n=gt.document;return n?n.documentMode:void 0}e:{var ma="",cl=(n=fr,nu?/rv:([^\);]+)(\)|;)/.exec(n):fa?/Edge\/([\d\.]+)/.exec(n):cs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):rc?/WebKit\/(\S+)/.exec(n):Bd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cl&&(ma=cl?cl[1]:""),cs){var ru=ga();if(null!=ru&&ru>parseFloat(ma)){ic=String(ru);break e}}ic=ma}var go={};var Ef=gt.document&&cs&&(ga()||parseInt(ic,10))||void 0,ds=function(){if(!gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{gt.addEventListener("test",ol,e),gt.removeEventListener("test",ol,e)}catch{}return n}();function tr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function wr(n,e){if(tr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(nu){e:{try{po(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dl[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wr.Z.h.call(this)}}tr.prototype.h=function(){this.defaultPrevented=!0},bn(wr,tr);var dl={2:"touch",3:"pen",4:"mouse"};wr.prototype.h=function(){wr.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ya="closure_listenable_"+(1e6*Math.random()|0),An=0;function sc(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++An,this.ca=this.fa=!1}function hl(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function fl(n){this.src=n,this.g={},this.h=0}function I(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=Ju(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(hl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function x(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return i}return-1}fl.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var c=x(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new sc(e,this.src,l,!!r,i)).fa=t,n.push(e)),e};var M="closure_lm_"+(1e6*Math.random()|0),L={};function J(n,e,t,r,i){if(r&&r.once)return je(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)J(n,e[l],t,r,i);return null}return t=mo(t),n&&n[ya]?n.N(e,t,jt(r)?!!r.capture:!!r,i):se(n,e,t,!1,r,i)}function se(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var c=jt(i)?!!i.capture:!!i,g=Fn(n);if(g||(n[M]=g=new fl(n)),(t=g.add(e,t,r,c,l)).proxy)return t;if(r=function Se(){var e=ht;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ds||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(St(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function je(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)je(n,e[l],t,r,i);return null}return t=mo(t),n&&n[ya]?n.O(e,t,jt(r)?!!r.capture:!!r,i):se(n,e,t,!0,r,i)}function mt(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)mt(n,e[l],t,r,i);else r=jt(r)?!!r.capture:!!r,t=mo(t),n&&n[ya]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=x(l=n.g[e],t,r,i))&&(hl(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Fn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=x(e,t,r,i)),(t=-1<n?e[n]:null)&&xt(t))}function xt(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ya])I(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(St(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fn(e))?(I(t,n),0==t.h&&(t.src=null,e[M]=null)):hl(n)}}}function St(n){return n in L?L[n]:L[n]="on"+n}function ht(n,e){if(n.ca)n=!0;else{e=new wr(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&xt(n),n=t.call(r,e)}return n}function Fn(n){return(n=n[M])instanceof fl?n:null}var Hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function mo(n){return"function"==typeof n?n:(n[Hr]||(n[Hr]=function(e){return n.handleEvent(e)}),n[Hr])}function rn(){da.call(this),this.i=new fl(this),this.P=this,this.I=null}function an(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new tr(e,n);else if(e instanceof tr)e.target=e.target||n;else{var i=e;zn(e=new tr(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var c=e.g=t[l];i=iu(c,r,!0,e)&&i}if(i=iu(c=e.g=n,r,!0,e)&&i,i=iu(c,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=iu(c=e.g=t[l],r,!1,e)&&i}function iu(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.ca&&c.capture==t){var g=c.listener,v=c.ia||c.src;c.fa&&I(n.i,c),i=!1!==g.call(v,r)&&i}}return i&&!r.defaultPrevented}bn(rn,da),rn.prototype[ya]=!0,rn.prototype.removeEventListener=function(n,e,t,r){mt(this,n,e,t,r)},rn.prototype.M=function(){if(rn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hl(t[r]);delete n.g[e],n.h--}}this.I=null},rn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},rn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var pl=gt.JSON.stringify;function Us(){var n=ou;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var su,_a=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ud,n=>n.reset());class Ud{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Df(n){gt.setTimeout(()=>{throw n},0)}function If(n,e){su||function xf(){var n=gt.Promise.resolve(void 0);su=function(){n.then(Hb)}}(),Cf||(su(),Cf=!0),ou.add(n,e)}var Cf=!1,ou=new class yo{constructor(){this.h=this.g=null}add(e,t){const r=_a.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Hb(){for(var n;n=Us();){try{n.h.call(n.g)}catch(t){Df(t)}var e=_a;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cf=!1}function oc(n,e){rn.call(this),this.h=n||1,this.g=e||gt,this.j=kr(this.kb,this),this.l=Date.now()}function tg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ac(n,e,t){if("function"==typeof n)t&&(n=kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:gt.setTimeout(n,e||0)}function ng(n){n.g=ac(()=>{n.g=null,n.i&&(n.i=!1,ng(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bn(oc,rn),(Je=oc.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),an(this,"tick"),this.da&&(tg(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){oc.Z.M.call(this),tg(this),delete this.g};class rg extends da{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ng(this)}M(){super.M(),this.g&&(gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(n){da.call(this),this.h=n,this.g={}}bn(va,da);var jd=[];function _o(n,e,t,r){Array.isArray(t)||(t&&(jd[0]=t.toString()),t=jd);for(var i=0;i<t.length;i++){var l=J(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function ig(n){wf(n.g,function(e,t){this.g.hasOwnProperty(t)&&xt(e)},n),n.g={}}function Hd(){this.g=!0}function ba(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var c=1;c<i.length;c++)i[c]=""}}}return pl(t)}catch{return e}}(n,t)+(r?" "+r:"")})}va.prototype.M=function(){va.Z.M.call(this),ig(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hd.prototype.Aa=function(){this.g=!1},Hd.prototype.info=function(){};var wa={},Ea=null;function $d(){return Ea=Ea||new rn}function zd(n){tr.call(this,wa.Ma,n)}function lc(n){const e=$d();an(e,new zd(e,n))}function qd(n,e){tr.call(this,wa.STAT_EVENT,n),this.stat=e}function ti(n){const e=$d();an(e,new qd(e,n))}function hs(n,e){tr.call(this,wa.Na,n),this.size=e}function js(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return gt.setTimeout(function(){n()},e)}wa.Ma="serverreachability",bn(zd,tr),wa.STAT_EVENT="statevent",bn(qd,tr),wa.Na="timingevent",bn(hs,tr);var au={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},og={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Wd(){}function ag(){}Wd.prototype.h=null;var vo,uc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kd(){tr.call(this,"d")}function lg(){tr.call(this,"c")}function Zd(){}function cc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new va(this),this.P=My,this.W=new oc(n=pa?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tf}function Tf(){this.i=null,this.g="",this.h=!1}bn(Kd,tr),bn(lg,tr),bn(Zd,Wd),Zd.prototype.g=function(){return new XMLHttpRequest},Zd.prototype.i=function(){return{}},vo=new Zd;var My=45e3,bo={},dc={};function Vi(n,e,t){n.K=1,n.v=Xd(Ui(e)),n.s=t,n.U=!0,Da(n,null)}function Da(n,e){n.F=Date.now(),Qd(n),n.A=Ui(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),fg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Tf,n.g=_g(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rg(kr(n.Ia,n,n.g),n.O)),_o(n.V,n.g,"readystatechange",n.gb),e=n.H?nc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),lc(1),function Gb(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var c="",g=l.split("&"),v=0;v<g.length;v++){var E=g[v].split("=");if(1<E.length){var S=E[0];E=E[1];var R=S.split("_");c=2<=R.length&&"type"==R[1]?c+(S+"=")+E+"&":c+(S+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Mf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Rf(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Yd(n,t),i==dc){4==e&&(n.o=4,ti(14),r=!1),ba(n.j,n.m,null,"[Incomplete Response]");break}if(i==bo){n.o=4,ti(15),ba(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ba(n.j,n.m,i,null),lu(n,i)}Mf(n)&&i!=dc&&i!=bo&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ti(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),vl(e),e.L=!0,ti(11))):(ba(n.j,n.m,t,"[Invalid Chunked Response]"),wo(n),gl(n))}function Yd(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?dc:(t=Number(e.substring(t,r)),isNaN(t)?bo:(r+=1)+t>e.length?dc:(e=e.substr(r,t),n.C=r+t,e))}function Qd(n){n.Y=Date.now()+n.P,Ry(n,n.P)}function Ry(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=js(kr(n.eb,n),e)}function kf(n){n.B&&(gt.clearTimeout(n.B),n.B=null)}function gl(n){0==n.l.G||n.I||Gf(n.l,n)}function wo(n){kf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,tg(n.W),ig(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function lu(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||yc(t.i,n)))if(t.I=n.N,!n.J&&yc(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Hf(t),Kn(t)}jf(t),ti(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=js(kr(t.ab,t),6e3));if(1>=Pf(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else th(t,11)}else if((n.J||t.g==n)&&Hf(t),!jr(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const S=E[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const R=E[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const V=E[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const Q=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var l=r.i;!l.g&&($n(Q,"spdy")||$n(Q,"quic")||$n(Q,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Do(l,l.h),l.h=null))}if(r.D){const ae=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.sa=ae,Sn(r.F,r.D,ae))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=jy(r,r.H?r.la:null,r.W),c.J){Io(r.i,c);var g=c,v=r.K;v&&g.setTimeout(v),g.B&&(kf(g),Qd(g)),r.g=c}else mg(r);0<t.l.length&&gu(t)}else"stop"!=E[0]&&"close"!=E[0]||th(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?th(t,7):ft(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}lc(4)}catch{}}function cg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(eu(n)||"string"==typeof n)ll(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(eu(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function ug(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(eu(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}}function ml(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ml)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function hc(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Eo(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Eo(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Eo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=cc.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==O(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const S=O(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>S)&&(3!=S||pa||this.g&&(this.h.h||this.g.ga()||W(this.g)))){this.I||4!=S||7==e||lc(8==e||0>=R?3:2),kf(this);var t=this.g.ba();this.N=t;t:if(Mf(this)){var r=W(this.g);n="";var i=r.length,l=4==O(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wo(this),gl(this);var c="";break t}this.h.i=new gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Gd(n,e,t,r,i,l,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jr(g)){var E=g;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,ti(12),wo(this),gl(this);break e}ba(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lu(this,t)}this.U?(Rf(this,S,c),pa&&this.i&&3==S&&(_o(this.V,this.W,"tick",this.fb),this.W.start())):(ba(this.j,this.m,c,null),lu(this,c)),4==S&&wo(this),this.i&&!this.I&&(4==S?Gf(this.l,this):(this.i=!1,Qd(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,ti(12)):(this.o=0,ti(13)),wo(this),gl(this)}}}catch{}},Je.fb=function(){if(this.g){var n=O(this.g),e=this.g.ga();this.C<e.length&&(kf(this),Rf(this,n,e),this.i&&4!=n&&Qd(this))}},Je.cancel=function(){this.I=!0,wo(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Af(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lc(3),ti(17)),wo(this),this.o=2,gl(this)):Ry(this,this.Y-n)},(Je=ml.prototype).R=function(){hc(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return hc(this),this.g.concat()},Je.get=function(n,e){return Eo(this.h,n)?this.h[n]:e},Je.set=function(n,e){Eo(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],l=this.get(i);n.call(e,l,i,this)}};var dg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fs(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof fs){this.g=void 0!==e?e:n.g,fc(this,n.j),this.s=n.s,uu(this,n.i),pc(this,n.m),this.l=n.l,e=n.h;var t=new Ia;t.i=e.i,e.g&&(t.g=new ml(e.g),t.h=e.h),qn(this,t),this.o=n.o}else n&&(t=String(n).match(dg))?(this.g=!!e,fc(this,t[1]||"",!0),this.s=gc(t[2]||""),uu(this,t[3]||"",!0),pc(this,t[4]),this.l=gc(t[5]||"",!0),qn(this,t[6]||"",!0),this.o=gc(t[7]||"")):(this.g=!!e,this.h=new Ia(null,this.g))}function Ui(n){return new fs(n)}function fc(n,e,t){n.j=t?gc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function uu(n,e,t){n.i=t?gc(e,!0):e}function pc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qn(n,e,t){e instanceof Ia?(n.h=e,function hu(n,e){e&&!n.j&&(Hs(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ff(this,r),fg(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=du(e,Ny)),n.h=new Ia(e,n.g))}function Sn(n,e,t){n.h.set(e,t)}function Xd(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function gc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function du(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Oy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Oy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(du(e,hg,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(du(e,hg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(du(t,"/"==t.charAt(0)?$b:Fy,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",du(t,yl)),n.join("")};var hg=/[#\/\?@]/g,Fy=/[#\?:]/g,$b=/[#\?]/g,Ny=/[#\?@]/g,yl=/#/g;function Ia(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Hs(n){n.g||(n.g=new ml,n.h=0,n.i&&function ky(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ff(n,e){Hs(n),e=Er(n,e),Eo(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Eo((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&hc(n)))}function mc(n,e){return Hs(n),e=Er(n,e),Eo(n.g.h,e)}function fg(n,e,t){Ff(n,e),0<t.length&&(n.i=null,n.g.set(Er(n,e),Or(t)),n.h+=t.length)}function Er(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Py(n){this.l=n||Nf,n=gt.PerformanceNavigationTiming?0<(n=gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(gt.g&&gt.g.Ea&&gt.g.Ea()&&gt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Ia.prototype).add=function(n,e){Hs(this),this.i=null,n=Er(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Hs(this),this.g.forEach(function(t,r){ll(t,function(i){n.call(e,i,r,this)},this)},this)},Je.T=function(){Hs(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],l=0;l<i.length;l++)t.push(e[r]);return t},Je.R=function(n){Hs(this);var e=[];if("string"==typeof n)mc(this,n)&&(e=ec(e,this.g.get(Er(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ec(e,n[t])}return e},Je.set=function(n,e){return Hs(this),this.i=null,mc(this,n=Er(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var c=i;""!==r[l]&&(c+="="+encodeURIComponent(String(r[l]))),n.push(c)}}return this.i=n.join("&")};var Nf=10;function fu(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pf(n){return n.h?1:n.g?n.g.size:0}function yc(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Do(n,e){n.g?n.g.add(e):n.h=e}function Io(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _c(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Or(n.i)}function pu(){}function Ly(){this.g=new pu}function Lf(n,e,t){const r=t||"";try{cg(n,function(i,l){let c=i;jt(i)&&(c=pl(i)),e.push(r+l+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wn(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xa(n){this.l=n.$b||null,this.j=n.ib||!1}function Ca(n,e){rn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Bf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Py.prototype.cancel=function(){if(this.i=_c(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pu.prototype.stringify=function(n){return gt.JSON.stringify(n,void 0)},pu.prototype.parse=function(n){return gt.JSON.parse(n,void 0)},bn(xa,Wd),xa.prototype.g=function(){return new Ca(this.l,this.j)},xa.prototype.i=function(n){return function(){return n}}({}),bn(Ca,rn);var Bf=0;function Gs(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function $s(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ps(n)}function ps(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=Ca.prototype).open=function(n,e){if(this.readyState!=Bf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ps(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||gt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$s(this)),this.readyState=Bf},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gs(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$s(this):ps(this),3==this.readyState&&Gs(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,$s(this))},Je.Ta=function(n){this.g&&(this.response=n,$s(this))},Je.ha=function(){this.g&&$s(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pg=gt.JSON.parse;function pr(n){rn.call(this),this.headers=new ml,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=eh,this.K=this.L=!1}bn(pr,rn);var eh="",By=/^https?$/i,Vf=["POST","PUT"];function gg(n){return"content-type"==n.toLowerCase()}function y(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,h(n),b(n)}function h(n){n.D||(n.D=!0,an(n,"complete"),an(n,"error"))}function m(n){if(n.h&&typeof ca<"u"&&(!n.C[1]||4!=O(n)||2!=n.ba()))if(n.v&&4==O(n))ac(n.Fa,0,n);else if(an(n,"readystatechange"),4==O(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var i=String(n.H).match(dg)[1]||null;if(!i&&gt.self&&gt.self.location){var l=gt.self.location.protocol;i=l.substr(0,l.length-1)}r=!By.test(i?i.toLowerCase():"")}t=r}if(t)an(n,"complete"),an(n,"success");else{n.m=6;try{var c=2<O(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",h(n)}}finally{b(n)}}}function b(n,e){if(n.g){T(n);const t=n.g,r=n.C[0]?ol:null;n.g=null,n.C=null,e||an(n,"ready");try{t.onreadystatechange=r}catch{}}}function T(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(gt.clearTimeout(n.A),n.A=null)}function O(n){return n.g?n.g.readyState:0}function W(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case eh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Ve(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function de(n){let e="";return wf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function et(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function _t(n){this.za=0,this.l=[],this.h=new Hd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=et("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=et("baseRetryDelayMs",5e3,n),this.$a=et("retryDelaySeedMs",1e4,n),this.Ya=et("forwardChannelMaxRetries",2,n),this.ra=et("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Py(n&&n.concurrentRequestLimit),this.Ca=new Ly,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ft(n){if(ji(n),3==n.G){var e=n.V++,t=Ui(n.F);Sn(t,"SID",n.J),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),mu(n,t),(e=new cc(n,n.h,e,void 0)).K=2,e.v=Xd(Ui(t)),t=!1,gt.navigator&&gt.navigator.sendBeacon&&(t=gt.navigator.sendBeacon(e.v.toString(),"")),!t&&gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_g(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Qd(e)}zb(n)}function Kn(n){n.g&&(vl(n),n.g.cancel(),n.g=null)}function ji(n){Kn(n),n.u&&(gt.clearTimeout(n.u),n.u=null),Hf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&gt.clearTimeout(n.m),n.m=null)}function _l(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&gu(n)}function gu(n){fu(n.i)||n.m||(n.m=!0,If(n.Ha,n),n.C=0)}function Uf(n,e){var t;t=e?e.m:n.V++;const r=Ui(n.F);Sn(r,"SID",n.J),Sn(r,"RID",t),Sn(r,"AID",n.U),mu(n,r),n.o&&n.s&&Ve(r,n.o,n.s),t=new cc(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=yu(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Do(n.i,t),Vi(t,r,e)}function mu(n,e){n.j&&cg({},function(t,r){Sn(e,r,t)})}function yu(n,e,t){t=Math.min(n.l.length,t);var r=n.j?kr(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const c=["count="+t];-1==l?0<t?(l=i[0].h,c.push("ofs="+l)):l=0:c.push("ofs="+l);let g=!0;for(let v=0;v<t;v++){let E=i[v].h;const S=i[v].g;if(E-=l,0>E)l=Math.max(0,i[v].h-100),g=!1;else try{Lf(S,c,"req"+E+"_")}catch{r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function mg(n){n.g||n.u||(n.Y=1,If(n.Ga,n),n.A=0)}function jf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=js(kr(n.Ga,n),Uy(n,n.A)),n.A++,0))}function vl(n){null!=n.B&&(gt.clearTimeout(n.B),n.B=null)}function yg(n){n.g=new cc(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ui(n.oa);Sn(e,"RID","rpc"),Sn(e,"SID",n.J),Sn(e,"CI",n.N?"0":"1"),Sn(e,"AID",n.U),mu(n,e),Sn(e,"TYPE","xmlhttp"),n.o&&n.s&&Ve(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Xd(Ui(e)),t.s=null,t.U=!0,Da(t,n)}function Hf(n){null!=n.v&&(gt.clearTimeout(n.v),n.v=null)}function Gf(n,e){var t=null;if(n.g==e){Hf(n),vl(n),n.g=null;var r=2}else{if(!yc(n.i,e))return;t=e.D,Io(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;an(r=$d(),new hs(r,t,e,i)),gu(n)}else mg(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function bc(n,e){return!(Pf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=js(kr(n.Ha,n,e),Uy(n,n.C)),n.C++,0)))}(n,e)||2==r&&jf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:th(n,5);break;case 4:th(n,10);break;case 3:th(n,6);break;default:th(n,2)}}function Uy(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function th(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=kr(n.jb,n);t||(t=new fs("//www.google.com/images/cleardot.gif"),gt.location&&"http"==gt.location.protocol||fc(t,"https"),Xd(t)),function vc(n,e){const t=new Hd;if(gt.Image){const r=new Image;r.onload=Xu(Wn,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xu(Wn,t,r,"TestLoadImage: error",!1,e),r.onabort=Xu(Wn,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xu(Wn,t,r,"TestLoadImage: timeout",!1,e),gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ti(2);n.G=0,n.j&&n.j.va(e),zb(n),ji(n)}function zb(n){n.G=0,n.I=-1,n.j&&((0!=_c(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Or(n.l),n.l.length=0),n.j.ua())}function jy(n,e,t){let r=function Of(n){return n instanceof fs?Ui(n):new fs(n,void 0)}(t);if(""!=r.i)e&&uu(r,e+"."+r.i),pc(r,r.m);else{const i=gt.location;r=function cu(n,e,t,r){var i=new fs(null,void 0);return n&&fc(i,n),e&&uu(i,e),t&&pc(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&wf(n.aa,function(i,l){Sn(r,l,i)}),t=n.sa,(e=n.D)&&t&&Sn(r,e,t),Sn(r,"VER",n.ma),mu(n,r),r}function _g(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pr(t&&n.Ba&&!n.qa?new xa({ib:!0}):n.qa)).L=n.H,e}function Hy(){}function $f(){if(cs&&!(10<=Number(Ef)))throw Error("Environmental error: no available transport.")}function Hi(n,e){rn.call(this),this.g=new _t(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!jr(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jr(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _u(this)}function vg(n){Kd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function qb(){lg.call(this),this.status=1}function _u(n){this.g=n}(Je=pr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():vo.g(),this.C=function Sf(n){return n.h||(n.h=n.i())}(this.u?this.u:vo),this.g.onreadystatechange=kr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void y(this,l)}n=t||"";const i=new ml(this.headers);r&&cg(r,function(l,c){i.set(c,l)}),r=function eg(n){e:{var e=gg;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=gt.FormData&&n instanceof gt.FormData,!(0<=Ju(Vf,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,c){this.g.setRequestHeader(c,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{T(this),0<this.B&&((this.K=function Vy(n){return cs&&function Vs(){return function ha(n){var e=go;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=tc(String(ic)).split("."),t=tc("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",l=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=ho(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||ho(0==i[2].length,0==l[2].length)||ho(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.pa,this)):this.A=ac(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){y(this,l)}},Je.pa=function(){typeof ca<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,an(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,an(this,"complete"),an(this,"abort"),b(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),b(this,!0)),pr.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?m(this):this.cb())},Je.cb=function(){m(this)},Je.ba=function(){try{return 2<O(this)?this.g.status:-1}catch{return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pg(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=_t.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new cc(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=nc(l),zn(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yu(this,i,e),Sn(t=Ui(this.F),"RID",n),Sn(t,"CVER",22),this.D&&Sn(t,"X-HTTP-Session-Id",this.D),mu(this,t),this.o&&l&&Ve(t,this.o,l),Do(this.i,i),this.Ra&&Sn(t,"TYPE","init"),this.ja?(Sn(t,"$req",e),Sn(t,"SID","null"),i.$=!0,Vi(i,t,null)):Vi(i,t,e),this.G=2}}else 3==this.G&&(n?Uf(this,n):0==this.l.length||fu(this.i)||Uf(this))},Je.Ga=function(){if(this.u=null,yg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=js(kr(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ti(10),Kn(this),yg(this))},Je.ab=function(){null!=this.v&&(this.v=null,Kn(this),jf(this),ti(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ti(2)):(this.h.info("Failed to ping google.com"),ti(1))},(Je=Hy.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},$f.prototype.g=function(n,e){return new Hi(n,e)},bn(Hi,rn),Hi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),If(kr(n.hb,n,e))),ti(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=jy(n,null,n.W),gu(n)},Hi.prototype.close=function(){ft(this.g)},Hi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_l(this.g,e)}else this.v?((e={}).__data__=pl(n),_l(this.g,e)):_l(this.g,n)},Hi.prototype.M=function(){this.g.j=null,delete this.j,ft(this.g),delete this.g,Hi.Z.M.call(this)},bn(vg,Kd),bn(qb,lg),bn(_u,Hy),_u.prototype.xa=function(){an(this.g,"a")},_u.prototype.wa=function(n){an(this.g,new vg(n))},_u.prototype.va=function(n){an(this.g,new qb(n))},_u.prototype.ua=function(){an(this.g,"b")},$f.prototype.createWebChannel=$f.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,au.NO_ERROR=0,au.TIMEOUT=8,au.HTTP_ERROR=6,og.COMPLETE="complete",ag.EventType=uc,uc.OPEN="a",uc.CLOSE="b",uc.ERROR="c",uc.MESSAGE="d",rn.prototype.listen=rn.prototype.N,pr.prototype.listenOnce=pr.prototype.O,pr.prototype.getLastError=pr.prototype.La,pr.prototype.getLastErrorCode=pr.prototype.Da,pr.prototype.getStatus=pr.prototype.ba,pr.prototype.getResponseJson=pr.prototype.Qa,pr.prototype.getResponseText=pr.prototype.ga,pr.prototype.send=pr.prototype.ea;var zf=Cn.createWebChannelTransport=function(){return new $f},AD=Cn.getStatEventTarget=function(){return $d()},Gy=Cn.ErrorCode=au,SD=Cn.EventType=og,Wb=Cn.Event=wa,Kb=Cn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},TD=Cn.FetchXmlHttpFactory=xa,bg=Cn.WebChannel=ag,MD=Cn.XhrIo=pr;const wg="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let nh="9.9.2";const vu=new Ur.Yd("@firebase/firestore");function Eg(){return vu.logLevel}function Pe(n,...e){if(vu.logLevel<=Ur.in.DEBUG){const t=e.map(Dg);vu.debug(`Firestore (${nh}): ${n}`,...t)}}function Kt(n,...e){if(vu.logLevel<=Ur.in.ERROR){const t=e.map(Dg);vu.error(`Firestore (${nh}): ${n}`,...t)}}function bl(n,...e){if(vu.logLevel<=Ur.in.WARN){const t=e.map(Dg);vu.warn(`Firestore (${nh}): ${n}`,...t)}}function Dg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${nh}) INTERNAL ASSERTION FAILED: `+n;throw Kt(e),new Error(e)}function at(n,e){n||it()}function Ze(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Mt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class kD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qb{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let c=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Gr,e.enqueueRetryable(()=>l(this.currentUser))};const g=()=>{const E=c;e.enqueueRetryable((0,be.Z)(function*(){yield E.promise,yield l(r.currentUser)}))},v=E=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(E=>v(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Gr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at("string"==typeof r.accessToken),new Zb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return at(null===e||"string"==typeof e),new Zr(e)}}class OD{constructor(e,t,r){this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class FD{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new OD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ND{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.p;return this.p=l.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at("string"==typeof t.token),this.p=t.token,new Xb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function PD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wc{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PD(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function Et(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Jb(n){return n+"\0"}class nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new nr(0,0))}static max(){return new Rt(new nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ih{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ih?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),c=t.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends ih{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const Aa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends ih{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return Aa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Oe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new Oe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Oe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===g?(c=!c,i++):"."!==g||c?(r+=g,i++):(l(),i++)}if(l(),c)throw new Oe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Jt.fromString(e))}static fromName(e){return new ze(Jt.fromString(e).popFirst(5))}static empty(){return new ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Jt(e.slice()))}}class Ig{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function xg(n){return n.fields.find(e=>2===e.kind)}function Ec(n){return n.fields.filter(e=>2!==e.kind)}Ig.UNKNOWN_ID=-1;class Cg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dc(0,zs.min())}}function Ag(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new nr(t+1,0):new nr(t,r));return new zs(i,ze.empty(),e)}function $y(n){return new zs(n.readTime,n.key,-1)}class zs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zs(Rt.min(),ze.empty(),-1)}static max(){return new zs(Rt.max(),ze.empty(),-1)}}function bu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Et(n.largestBatchId,e.largestBatchId))}const Sg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wu(n){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,be.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Sg)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Kf.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,l=0,c=!1;e.forEach(g=>{++i,g.next(()=>{++l,c&&l===i&&t()},v=>r(v))}),c=!0,l===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const l=e.length,c=new Array(l);let g=0;for(let v=0;v<l;v++){const E=v;t(e[E]).next(S=>{c[E]=S,++g,g===l&&r(c)},S=>i(S))}})}static doWhile(e,t){return new ce((r,i)=>{const l=()=>{!0===e()?t().next(()=>{l()},i):r()};l()})}}class Tg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Gr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Zf(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Yf(r.target.error);this.T.reject(new Zf(e,i))}}static open(e,t,r,i){try{return new Tg(t,e.transaction(i,r))}catch(l){throw new Zf(t,l)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new tw(t)}}class xo{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===xo.v((0,Mt.z$)())&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),wl(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Mt.hl)())return!1;if(xo.S())return!0;const e=(0,Mt.z$)(),t=xo.v(e),r=0<t&&t<10,i=xo.D(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,be.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=c=>{r(c.target.result)},l.onblocked=()=>{i(new Zf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const g=c.target.error;i("VersionError"===g.name?new Oe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Oe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Zf(e,g))},l.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.M(c.target.result,l.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,be.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{l.db=yield l.k(e);const v=Tg.open(l.db,e,c?"readonly":"readwrite",r),E=i(v).next(S=>(v.R(),S)).catch(S=>(v.abort(S),ce.reject(S))).toPromise();return E.catch(()=>{}),yield v.A,E}catch(v){const E=v,S="FirebaseError"!==E.name&&g<3;if(Pe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",S),l.close(),!S)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class LD{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return wl(this.$.delete())}}class Zf extends Oe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Eu(n){return"IndexedDbTransactionError"===n.name}class tw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wl(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),wl(this.store.add(e))}get(e){return wl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),wl(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),wl(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.G(i,(c,g)=>{l.push(g)}).next(()=>l)}{const i=this.store.getAll(r.range);return new ce((l,c)=>{i.onerror=g=>{c(g.target.error)},i.onsuccess=g=>{l(g.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(l,c,g)=>g.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=l=>{const c=Yf(l.target.error);i(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}G(e,t){const r=[];return new ce((i,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void i();const v=new LD(g),E=t(g.primaryKey,g.value,v);if(E instanceof ce){const S=E.catch(R=>(v.done(),ce.reject(R)));r.push(S)}v.isDone?i():null===v.U?g.continue():g.continue(v.U)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wl(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Yf(r.target.error);t(i)}})}let qy=!1;function Yf(n){const e=xo.v((0,Mt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qy||(qy=!0,setTimeout(()=>{throw r},0)),r}}return n}class BD{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Eu(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wu(r)}yield t.Z(1)}))}}class VD{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,l=!0;return ce.doWhile(()=>!0===l&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Pe("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(g=>{i-=g,r.add(c)});l=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,l)).next(g=>(Pe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,l)=>{const c=$y(l);bu(c,r)>0&&(r=c)}),new zs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Wy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ky(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ei.ot=-1;class rr{constructor(e,t){this.comparator=e,this.root=t||di.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mg(this.root,e,this.comparator,!0)}}class Mg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class di{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??di.RED,this.left=i??di.EMPTY,this.right=l??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new di(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}di.EMPTY=null,di.RED=!0,di.BLACK=!1,di.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nw(this.data.getIterator())}getIteratorFrom(e){return new nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ic(n){return n.hasNext()?n.getNext():void 0}class Gi{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new Gi([])}unionWith(e){let t=new ln(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const iw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(n){if(at(!!n),"string"==typeof n){let e=0;const t=iw.exec(n);if(at(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nn(n.seconds),nanos:Nn(n.nanos)}}function Nn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Du(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function Qf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zy(n){const e=n.mapValue.fields.__previous_value__;return Qf(e)?Zy(e):e}function xc(n){const e=Co(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(e.seconds,e.nanos)}class Xf{constructor(e,t,r,i,l,c,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class El{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new El("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}function sh(n){return null==n}function Jf(n){return 0===n&&1/n==-1/0}function sw(n){return"number"==typeof n&&Number.isInteger(n)&&!Jf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oh={nullValue:"NULL_VALUE"};function Iu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qf(n)?4:Jy(n)?9007199254740991:10:it()}function Il(n,e){if(n===e)return!0;const t=Iu(n);if(t!==Iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xc(n).isEqual(xc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Co(r.timestampValue),c=Co(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Du(n.bytesValue).isEqual(Du(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Nn(r.geoPointValue.latitude)===Nn(i.geoPointValue.latitude)&&Nn(r.geoPointValue.longitude)===Nn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Nn(r.integerValue)===Nn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Nn(r.doubleValue),c=Nn(i.doubleValue);return l===c?Jf(l)===Jf(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],Il);case 10:return function(r,i){const l=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Wy(l)!==Wy(c))return!1;for(const g in l)if(l.hasOwnProperty(g)&&(void 0===c[g]||!Il(l[g],c[g])))return!1;return!0}(n,e);default:return it()}var i}function ah(n,e){return void 0!==(n.values||[]).find(t=>Il(t,e))}function xu(n,e){if(n===e)return 0;const t=Iu(n),r=Iu(e);if(t!==r)return Et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,e.booleanValue);case 2:return function(i,l){const c=Nn(i.integerValue||i.doubleValue),g=Nn(l.integerValue||l.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return Yy(n.timestampValue,e.timestampValue);case 4:return Yy(xc(n),xc(e));case 5:return Et(n.stringValue,e.stringValue);case 6:return function(i,l){const c=Du(i),g=Du(l);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const c=i.split("/"),g=l.split("/");for(let v=0;v<c.length&&v<g.length;v++){const E=Et(c[v],g[v]);if(0!==E)return E}return Et(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const c=Et(Nn(i.latitude),Nn(l.latitude));return 0!==c?c:Et(Nn(i.longitude),Nn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const c=i.values||[],g=l.values||[];for(let v=0;v<c.length&&v<g.length;++v){const E=xu(c[v],g[v]);if(E)return E}return Et(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===Dl.mapValue&&l===Dl.mapValue)return 0;if(i===Dl.mapValue)return 1;if(l===Dl.mapValue)return-1;const c=i.fields||{},g=Object.keys(c),v=l.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const R=Et(g[S],E[S]);if(0!==R)return R;const V=xu(c[g[S]],v[E[S]]);if(0!==V)return V}return Et(g.length,E.length)}(n.mapValue,e.mapValue);default:throw it()}}function Yy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Et(n,e);const t=Co(n),r=Co(e),i=Et(t.seconds,r.seconds);return 0!==i?i:Et(t.nanos,r.nanos)}function lh(n){return Qy(n)}function Qy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Co(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Du(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const c of r.values||[])l?l=!1:i+=",",i+=Qy(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const g of i)c?c=!1:l+=",",l+=`${g}:${Qy(r.fields[g])}`;return l+"}"}(n.mapValue):it();var e}function ni(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xy(n){return!!n&&"integerValue"in n}function uh(n){return!!n&&"arrayValue"in n}function ow(n){return!!n&&"nullValue"in n}function aw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rg(n){return!!n&&"mapValue"in n}function ep(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ep(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ep(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Jy(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function UD(n){return"nullValue"in n?oh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ni(El.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function jD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ni(El.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Dl:it()}function lw(n,e){const t=xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Nt(n,e){const t=xu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Yr{constructor(e){this.value=e}static empty(){return new Yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ep(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=g.popLast()}c?r[g.lastSegment()]=ep(c):i.push(g.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Rg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Il(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gs(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new Yr(ep(this.value))}}function e_(n){const e=[];return gs(n.fields,(t,r)=>{const i=new Zn([t]);if(Rg(r)){const l=e_(r.mapValue).fields;if(0===l.length)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)}),new Gi(e)}class wn{constructor(e,t,r,i,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=l,this.documentState=c}static newInvalidDocument(e){return new wn(e,0,Rt.min(),Rt.min(),Yr.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new wn(e,2,t,Rt.min(),Yr.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Rt.min(),Yr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class HD{constructor(e,t=null,r=[],i=[],l=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=g,this.ut=null}}function uw(n,e=null,t=[],r=[],i=null,l=null,c=null){return new HD(n,e,t,r,i,l,c)}function Cu(n){const e=Ze(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+lh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lh(r)).join(",")),e.ut=t}return e.ut}function ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!EA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Il(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Sc(n.startAt,e.startAt)&&Sc(n.endAt,e.endAt)}function kg(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Og(n,e){return n.filters.filter(t=>t instanceof Qr&&t.field.isEqual(e))}function $D(n,e,t){let r=oh,i=!0;for(const l of Og(n,e)){let c=oh,g=!0;switch(l.op){case"<":case"<=":c=UD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,g=!1;break;case"!=":case"not-in":c=oh}lw({value:r,inclusive:i},{value:c,inclusive:g})<0&&(r=c,i=g)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];lw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function t_(n,e,t){let r=Dl,i=!0;for(const l of Og(n,e)){let c=Dl,g=!0;switch(l.op){case">=":case">":c=jD(l.value),g=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,g=!1;break;case"!=":case"not-in":c=Dl}Nt({value:r,inclusive:i},{value:c,inclusive:g})>0&&(r=c,i=g)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Nt({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Cc(e,t,r):"array-contains"===t?new qD(e,r):"in"===t?new vA(e,r):"not-in"===t?new bA(e,r):"array-contains-any"===t?new wA(e,r):new Qr(e,t,r)}static ct(e,t,r){return"in"===t?new zD(e,r):new n_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(xu(t,this.value)):null!==t&&Iu(this.value)===Iu(t)&&this.at(xu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Cc extends Qr{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.at(t)}}class zD extends Qr{constructor(e,t){super(e,"in",t),this.keys=Fg(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class n_ extends Qr{constructor(e,t){super(e,"not-in",t),this.keys=Fg(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fg(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class qD extends Qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uh(t)&&ah(t.arrayValue,this.value)}}class vA extends Qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ah(this.value.arrayValue,t)}}class bA extends Qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ah(this.value.arrayValue,t)}}class wA extends Qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}class Au{constructor(e,t){this.position=e,this.inclusive=t}}class Ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function EA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function cw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(r=l.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):xu(c,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Sc(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Il(n.position[t],e.position[t]))return!1;return!0}class xl{constructor(e,t=null,r=[],i=[],l=null,c="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=g,this.endAt=v,this.lt=null,this.ft=null}}function r_(n,e,t,r,i,l,c,g){return new xl(n,e,t,r,i,l,c,g)}function Cl(n){return new xl(n)}function dw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ng(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function i_(n){for(const e of n.filters)if(e.ht())return e.field;return null}function s_(n){return null!==n.collectionGroup}function dh(n){const e=Ze(n);if(null===e.lt){e.lt=[];const t=i_(e),r=Ng(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Ac(t)),e.lt.push(new Ac(Zn.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.lt.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ac(Zn.keyField(),l))}}}return e.lt}function $i(n){const e=Ze(n);if(!e.ft)if("F"===e.limitType)e.ft=uw(e.path,e.collectionGroup,dh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of dh(e))t.push(new Ac(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Au(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Au(e.startAt.position,e.startAt.inclusive):null;e.ft=uw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function Pg(n,e,t){return new xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return ch($i(n),$i(e))&&n.limitType===e.limitType}function hw(n){return`${Cu($i(n))}|lt:${n.limitType}`}function Lg(n){return`Query(target=${function GD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${lh(r.value)}`;var r}).join(", ")}]`),sh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>lh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>lh(t)).join(",")),`Target(${e})`}($i(n))}; limitType=${n.limitType})`}function Bg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,c){const g=cw(i,l,c);return i.inclusive?g<=0:g<0}(t.startAt,dh(t),r)||t.endAt&&!function(i,l,c){const g=cw(i,l,c);return i.inclusive?g>=0:g>0}(t.endAt,dh(t),r)));var t,r}function Vg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WD(n){return(e,t)=>{let r=!1;for(const i of dh(n)){const l=o_(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function o_(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,l,c){const g=l.data.field(i),v=c.data.field(i);return null!==g&&null!==v?xu(g,v):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function fw(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jf(e)?"-0":e}}function KD(n){return{integerValue:""+n}}function Tc(n,e){return sw(e)?KD(e):fw(n,e)}class Ug{constructor(){this._=void 0}}function pw(n,e,t){return n instanceof Mc?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Rc?Hg(n,e):n instanceof Di?Gg(n,e):function(r,i){const l=qs(r,i),c=$g(l)+$g(r._t);return Xy(l)&&Xy(r._t)?KD(c):fw(r.wt,c)}(n,e)}function jg(n,e,t){return n instanceof Rc?Hg(n,e):n instanceof Di?Gg(n,e):t}function qs(n,e){return n instanceof kc?Xy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Mc extends Ug{}class Rc extends Ug{constructor(e){super(),this.elements=e}}function Hg(n,e){const t=ZD(e);for(const r of n.elements)t.some(i=>Il(i,r))||t.push(r);return{arrayValue:{values:t}}}class Di extends Ug{constructor(e){super(),this.elements=e}}function Gg(n,e){let t=ZD(e);for(const r of n.elements)t=t.filter(i=>!Il(i,r));return{arrayValue:{values:t}}}class kc extends Ug{constructor(e,t){super(),this.wt=e,this._t=t}}function $g(n){return Nn(n.integerValue||n.doubleValue)}function ZD(n){return uh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fh{constructor(e,t){this.field=e,this.transform=t}}class zg{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ph(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gh{}function qg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Oc(n.key,Tn.none()):new mh(n.key,n.data,Tn.none());{const t=n.data,r=Yr.empty();let i=new ln(Zn.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);null===c&&l.length>1&&(l=l.popLast(),c=t.field(l)),null===c?r.delete(l):r.set(l,c),i=i.add(l)}return new Sa(n.key,r,new Gi(i.toArray()),Tn.none())}}function IA(n,e,t){n instanceof mh?function(r,i,l){const c=r.value.clone(),g=mw(r.fieldTransforms,i,l.transformResults);c.setAll(g),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Sa?function(r,i,l){if(!ph(r.precondition,i))return void i.convertToUnknownDocument(l.version);const c=mw(r.fieldTransforms,i,l.transformResults),g=i.data;g.setAll(QD(r)),g.setAll(c),i.convertToFoundDocument(l.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tp(n,e,t,r){return n instanceof mh?function(i,l,c,g){if(!ph(i.precondition,l))return c;const v=i.value.clone(),E=XD(i.fieldTransforms,g,l);return v.setAll(E),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Sa?function(i,l,c,g){if(!ph(i.precondition,l))return c;const v=XD(i.fieldTransforms,g,l),E=l.data;return E.setAll(QD(i)),E.setAll(v),l.convertToFoundDocument(l.version,E).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(S=>S.field))}(n,e,t,r):(c=t,ph(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c);var l,c}function YD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=qs(r.transform,i||null);null!=l&&(null===t&&(t=Yr.empty()),t.set(r.field,l))}return t||null}function gw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rh(t,r,(i,l)=>function DA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rc&&r instanceof Rc||t instanceof Di&&r instanceof Di?rh(t.elements,r.elements,Il):t instanceof kc&&r instanceof kc?Il(t._t,r._t):t instanceof Mc&&r instanceof Mc);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class mh extends gh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sa extends gh{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function QD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mw(n,e,t){const r=new Map;at(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,g=e.data.field(l.field);r.set(l.field,jg(c,g,t[i]))}return r}function XD(n,e,t){const r=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);r.set(i.field,pw(l,c,e))}return r}class Oc extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wg extends gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JD{constructor(e){this.count=e}}var gr,en;function eI(n){switch(n){default:return it();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function tI(n){if(void 0===n)return Kt("GRPC error has no .code"),fe.UNKNOWN;switch(n){case gr.OK:return fe.OK;case gr.CANCELLED:return fe.CANCELLED;case gr.UNKNOWN:return fe.UNKNOWN;case gr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case gr.INTERNAL:return fe.INTERNAL;case gr.UNAVAILABLE:return fe.UNAVAILABLE;case gr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case gr.NOT_FOUND:return fe.NOT_FOUND;case gr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case gr.ABORTED:return fe.ABORTED;case gr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case gr.DATA_LOSS:return fe.DATA_LOSS;default:return it()}}(en=gr||(gr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return Ky(this.inner)}size(){return this.innerSize}}const xA=new rr(ze.comparator);function ms(){return xA}const nI=new rr(ze.comparator);function Kg(...n){let e=nI;for(const t of n)e=e.insert(t.key,t);return e}function rI(n){let e=nI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Al(){return Nc()}function Sl(){return Nc()}function Nc(){return new Fc(n=>n.toString(),(n,e)=>n.isEqual(e))}const iI=new rr(ze.comparator),yw=new ln(ze.comparator);function Pt(...n){let e=yw;for(const t of n)e=e.add(t);return e}const _w=new ln(Et);function yh(){return _w}class np{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ws.createSynthesizedTargetChangeForCurrentChange(e,t)),new np(Rt.min(),r,yh(),ms(),Pt())}}class Ws{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ws(Dr.EMPTY_BYTE_STRING,t,Pt(),Pt(),Pt())}}class rp{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class vw{constructor(e,t){this.targetId=e,this.It=t}}class Zg{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class bw{constructor(){this.Tt=0,this.Et=Dw(),this.At=Dr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Pt(),t=Pt(),r=Pt();return this.Et.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Ws(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Dw()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class ww{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=ms(),this.Bt=Ew(),this.Lt=new ln(Et)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const l=i.target;if(kg(l))if(0===r){const c=new ze(l.path);this.Kt(t,c,wn.newNoDocument(c,Rt.min()))}else at(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((l,c)=>{const g=this.Ht(c);if(g){if(l.current&&kg(g.target)){const v=new ze(g.target.path);null!==this.$t.get(v)||this.Xt(c,v)||this.Kt(c,v,wn.newNoDocument(v,e))}l.vt&&(t.set(c,l.St()),l.Dt())}});let r=Pt();this.Bt.forEach((l,c)=>{let g=!0;c.forEachWhile(v=>{const E=this.Ht(v);return!E||2===E.purpose||(g=!1,!1)}),g&&(r=r.add(l))}),this.$t.forEach((l,c)=>c.setReadTime(e));const i=new np(e,t,this.Lt,this.$t,r);return this.$t=ms(),this.Bt=Ew(),this.Lt=new ln(Et),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new bw,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new ln(Et),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new bw),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function Ew(){return new rr(ze.comparator)}function Dw(){return new rr(ze.comparator)}const Yg={asc:"ASCENDING",desc:"DESCENDING"},_h={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class a_{constructor(e,t){this.databaseId=e,this.dt=t}}function Ta(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ip(n,e){return n.dt?e.toBase64():e.toUint8Array()}function sp(n,e){return Ta(n,e.toTimestamp())}function Xr(n){return at(!!n),Rt.fromTimestamp(function(e){const t=Co(e);return new nr(t.seconds,t.nanos)}(n))}function Qg(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function l_(n){const e=Jt.fromString(n);return at(Mw(e)),e}function Pc(n,e){return Qg(n.databaseId,e.path)}function Ks(n,e){const t=l_(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(sI(t))}function Xg(n,e){return Qg(n.databaseId,e)}function Jg(n){const e=l_(n);return 4===e.length?Jt.emptyPath():sI(e)}function op(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sI(n){return at(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Iw(n,e,t){return{name:Pc(n,e),fields:t.value.mapValue.fields}}function u_(n,e,t){const r=Ks(n,e.name),i=Xr(e.updateTime),l=new Yr({mapValue:{fields:e.fields}}),c=wn.newFoundDocument(r,i,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function vh(n,e){let t;if(e instanceof mh)t={update:Iw(n,e.key,e.value)};else if(e instanceof Oc)t={delete:Pc(n,e.key)};else if(e instanceof Sa)t={update:Iw(n,e.key,e.data),updateMask:Tw(e.fieldMask)};else{if(!(e instanceof Wg))return it();t={verify:Pc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const c=l.transform;if(c instanceof Mc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Rc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Di)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof kc)return{fieldPath:l.field.canonicalString(),increment:c._t};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:sp(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function c_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Tn.updateTime(Xr(i.updateTime)):void 0!==i.exists?Tn.exists(i.exists):Tn.none():Tn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,c){let g=null;"setToServerValue"in c?(at("REQUEST_TIME"===c.setToServerValue),g=new Mc):"appendMissingElements"in c?g=new Rc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new Di(c.removeAllFromArray.values||[]):"increment"in c?g=new kc(l,c.increment):it();const v=Zn.fromServerFormat(c.fieldPath);return new fh(v,g)}(n,i)):[];var i;if(e.update){const i=Ks(n,e.update.name),l=new Yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Gi((e.updateMask.fieldPaths||[]).map(E=>Zn.fromServerFormat(E)));return new Sa(i,l,c,t,r)}return new mh(i,l,t,r)}if(e.delete){const i=Ks(n,e.delete);return new Oc(i,t)}if(e.verify){const i=Ks(n,e.verify);return new Wg(i,t)}return it()}function d_(n,e){return{documents:[Xg(n,e.path)]}}function Cw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Xg(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xg(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0===v.length)return;const E=v.map(S=>function(R){if("=="===R.op){if(aw(R.value))return{unaryFilter:{field:bh(R.field),op:"IS_NAN"}};if(ow(R.value))return{unaryFilter:{field:bh(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(aw(R.value))return{unaryFilter:{field:bh(R.field),op:"IS_NOT_NAN"}};if(ow(R.value))return{unaryFilter:{field:bh(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(R.field),op:uI(R.op),value:R.value}}}(S));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const l=function(v){if(0!==v.length)return v.map(E=>{return{field:bh((S=E).field),direction:Aw(S.dir)};var S})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=(E=e.limit,n.dt||sh(E)?E:{value:E});var E,g,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function aI(n){let e=Jg(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){at(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let l=[];t.where&&(l=em(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Ac(wh((R=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let g=null;t.limit&&(g=function(S){let R;return R="object"==typeof S?S.value:S,sh(R)?null:R}(t.limit));let v=null;var S;t.startAt&&(v=new Au((S=t.startAt).values||[],!!S.before));let E=null;return t.endAt&&(E=function(S){return new Au(S.values||[],!S.before)}(t.endAt)),r_(e,i,c,l,g,"F",v,E)}function em(n){return n?void 0!==n.unaryFilter?[cI(n)]:void 0!==n.fieldFilter?[Sw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>em(e)).reduce((e,t)=>e.concat(t)):it():[]}function Aw(n){return Yg[n]}function uI(n){return _h[n]}function bh(n){return{fieldPath:n.canonicalString()}}function wh(n){return Zn.fromServerFormat(n.fieldPath)}function Sw(n){return Qr.create(wh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function cI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=wh(n.unaryFilter.field);return Qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=wh(n.unaryFilter.field);return Qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wh(n.unaryFilter.field);return Qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wh(n.unaryFilter.field);return Qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function Tw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=h_(e)),e=Rw(n.get(t),e);return h_(e)}function Rw(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function h_(n){return n+"\x01\x01"}function Ma(n){const e=n.length;if(at(e>=2),2===e)return at("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const c=n.indexOf("\x01",l);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const g=n.substring(l,c);let v;0===i.length?v=g:(i+=g,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(l,c),i+="\0";break;case"\x11":i+=n.substring(l,c+1);break;default:it()}l=c+2}return new Jt(r)}const Ao=["userId","batchId"];function Eh(n,e){return[n,Ii(e)]}function kw(n,e,t){return[n,Ii(e),t]}const dI={},CA=["prefixPath","collectionGroup","readTime","documentId"],Ow=["prefixPath","collectionGroup","documentId"],hI=["collectionGroup","readTime","prefixPath","documentId"],fI=["canonicalId","targetId"],pI=["targetId","path"],f_=["path","targetId"],gI=["collectionId","parent"],mI=["indexId","uid"],tm=["uid","sequenceNumber"],p_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yI=["indexId","uid","orderedDocumentKey"],Fw=["userId","collectionPath","documentId"],g_=["userId","collectionPath","largestBatchId"],Nw=["userId","collectionGroup","largestBatchId"],_I=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AA=[..._I,"documentOverlays"],nm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vI=nm,bI=[...vI,"indexConfiguration","indexState","indexEntries"];class rm extends zy{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function $r(n,e){const t=Ze(n);return xo.N(t.ee,e)}class im{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&IA(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=tp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=tp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Sl();return this.mutations.forEach(i=>{const l=e.get(i.key),c=l.overlayedDocument;let g=this.applyToLocalView(c,l.mutatedFields);g=t.has(i.key)?null:g;const v=qg(c,g);null!==v&&r.set(i.key,v),c.isValidDocument()||c.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>gw(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>gw(t,r))}}class sm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){at(e.mutations.length===r.length);let i=iI;const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new sm(e,t,r,i)}}class ap{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hi{constructor(e,t,r,i,l=Rt.min(),c=Rt.min(),g=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lp{constructor(e){this.ne=e}}function Dh(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:am(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pc(i=n.ne,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Ta(i,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tl(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Tl(e.version)}}var i,l;return r}function am(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Su(n){const e=new nr(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Lc(n,e){const t=(e.baseMutations||[]).map(l=>c_(n.ne,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(c.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>c_(n.ne,l)),i=nr.fromMillis(e.localWriteTimeMs);return new im(e.batchId,i,t,r)}function up(n){const e=Su(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Su(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(at(1===(i=n.query).documents.length),r=$i(Cl(Jg(i.documents[0])))):r=$i(aI(n.query)),new hi(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function Ih(n,e){const t=Tl(e.snapshotVersion),r=Tl(e.lastLimboFreeSnapshotVersion);let i;i=kg(e.target)?d_(n.ne,e.target):Cw(n.ne,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cu(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function m_(n){const e=aI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Pg(e,e.limit,"L"):e}function Pw(n,e){return new ap(e.largestBatchId,c_(n.ne,e.overlayMutation))}function Lw(n,e){const t=e.path.lastSegment();return[n,Ii(e.path.popLast()),t]}function wI(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tl(r.readTime),documentKey:Ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class EI{getBundleMetadata(e,t){return Bw(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Su(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Bw(e).put({bundleId:(r=t).id,createTime:Tl(Xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Vw(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:m_(i.bundledQuery),readTime:Su(i.readTime)};var i})}saveNamedQuery(e,t){return Vw(e).put({name:(r=t).name,readTime:Tl(Xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Bw(n){return $r(n,"bundles")}function Vw(n){return $r(n,"namedQueries")}class lm{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new lm(e,t.uid||"")}getOverlay(e,t){return um(e).get(Lw(this.userId,t)).next(r=>r?Pw(this.wt,r):null)}getOverlays(e,t){const r=Al();return ce.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((l,c)=>{const g=new ap(t,c);i.push(this.ie(e,g))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ii(c.getCollectionPath())));const l=[];return i.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(um(e).W("collectionPathOverlayIndex",g))}),ce.waitFor(l)}getOverlaysForCollection(e,t,r){const i=Al(),l=Ii(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return um(e).K("collectionPathOverlayIndex",c).next(g=>{for(const v of g){const E=Pw(this.wt,v);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=Al();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return um(e).J({index:"collectionGroupOverlayIndex",range:g},(v,E,S)=>{const R=Pw(this.wt,E);l.size()<i||R.largestBatchId===c?(l.set(R.getKey(),R),c=R.largestBatchId):S.done()}).next(()=>l)}ie(e,t){return um(e).put(function(r,i,l){const[c,g,v]=Lw(i,l.mutation.key);return{userId:i,collectionPath:g,documentId:v,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:vh(r.ne,l.mutation)}}(this.wt,this.userId,t))}}function um(n){return $r(n,"documentOverlays")}class Tu{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Nn(e.integerValue));else if("doubleValue"in e){const r=Nn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Jf(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Du(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Jy(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):it()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),ze.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function y_(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Uw(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=y_(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Tu.ye=new Tu;class __{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=Uw(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=Uw(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class DI{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class II{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class cp{constructor(){this.Oe=new __,this.Fe=new DI(this.Oe),this.$e=new II(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Bc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Bc(this.indexId,this.documentKey,this.arrayValue,r)}}function Vc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=jw(n.arrayValue,e.arrayValue),0!==t?t:(t=jw(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function jw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=xg(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Ec(e);let i=0,l=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[l++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(l>=this.Ue.length||!this.We(this.Ue[l++],c))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Uc{constructor(){this.ze=new Hw}addToCollectionParentIndex(e,t){return this.ze.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(zs.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Hw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ln(Jt.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(Jt.comparator)).toArray()}}const Mu=new Uint8Array(0);class xI{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Hw,this.Je=new Fc(r=>Cu(r),(r,i)=>ch(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const l={collectionId:r,parent:Ii(i)};return Gw(e).put(l)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Jb(t),""],!1,!0);return Gw(e).K(i).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Ma(c.parent))}return r})}addFieldIndex(e,t){const r=dm(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var c;delete i.indexId;const l=r.add(i);if(t.indexState){const c=zi(e);return l.next(g=>{c.put(wI(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=dm(e),i=zi(e),l=jc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=jc(e);let i=!0;const l=new Map;return ce.forEach(this.Ye(t),c=>this.Xe(e,c).next(g=>{i&&(i=!!g),l.set(c,g)})).next(()=>{if(i){let c=Pt();const g=[];return ce.forEach(l,(v,E)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(bt=>`${bt.fieldPath}:${bt.kind}`).join(",")}`} to execute ${Cu(t)}`);const R=function(bt,lt){const Tt=xg(lt);if(void 0===Tt)return null;for(const Ot of Og(bt,Tt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(E,v),V=function(bt,lt){const Tt=new Map;for(const Ot of Ec(lt))for(const tn of Og(bt,Ot.fieldPath))switch(tn.op){case"==":case"in":Tt.set(Ot.fieldPath.canonicalString(),tn.value);break;case"not-in":case"!=":return Tt.set(Ot.fieldPath.canonicalString(),tn.value),Array.from(Tt.values())}return null}(E,v),K=function(bt,lt){const Tt=[];let Ot=!0;for(const tn of Ec(lt)){const Is=0===tn.kind?$D(bt,tn.fieldPath,bt.startAt):t_(bt,tn.fieldPath,bt.startAt);Tt.push(Is.value),Ot&&(Ot=Is.inclusive)}return new Au(Tt,Ot)}(E,v),Q=function(bt,lt){const Tt=[];let Ot=!0;for(const tn of Ec(lt)){const Is=0===tn.kind?t_(bt,tn.fieldPath,bt.endAt):$D(bt,tn.fieldPath,bt.endAt);Tt.push(Is.value),Ot&&(Ot=Is.inclusive)}return new Au(Tt,Ot)}(E,v),ae=this.Ze(v,E,K),Te=this.Ze(v,E,Q),Be=this.tn(v,E,V),st=this.en(v.indexId,R,ae,K.inclusive,Te,Q.inclusive,Be);return ce.forEach(st,bt=>r.j(bt,t.limit).next(lt=>{lt.forEach(Tt=>{const Ot=ze.fromSegments(Tt.documentKey);c.has(Ot)||(c=c.add(Ot),g.push(Ot))})}))}).next(()=>g)}return ce.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,l,c,g){const v=(null!=t?t.length:1)*Math.max(r.length,l.length),E=v/(null!=t?t.length:1),S=[];for(let R=0;R<v;++R){const V=t?this.nn(t[R/E]):Mu,K=this.sn(e,V,r[R%E],i),Q=this.rn(e,V,l[R%E],c),ae=g.map(Te=>this.sn(e,V,Te,!0));S.push(...this.createRange(K,Q,ae))}return S}sn(e,t,r,i){const l=new Bc(e,ze.empty(),t,r);return i?l:l.Le()}rn(e,t,r,i){const l=new Bc(e,ze.empty(),t,r);return i?l.Le():l}Xe(e,t){const r=new cm(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(l=>{let c=null;for(const g of l)r.Ge(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;return ce.forEach(this.Ye(t),i=>this.Xe(e,i).next(l=>{l?0!==r&&l.fields.length<function(c){let g=new ln(Zn.comparator),v=!1;for(const E of c.filters){const S=E;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:g=g.add(S.field))}for(const E of c.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(v?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new cp;for(const i of Ec(e)){const l=t.data.field(i.fieldPath);if(null==l)return null;const c=r.Be(i.kind);Tu.ye.re(l,c)}return r.Me()}nn(e){const t=new cp;return Tu.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new cp;return Tu.ye.re(ni(this.databaseId,t),r.Be(function(i){const l=Ec(i);return 0===l.length?0:l[l.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new cp);let l=0;for(const c of Ec(e)){const g=r[l++];for(const v of i)if(this.cn(t,c.fieldPath)&&uh(g))i=this.an(i,c,g);else{const E=v.Be(c.kind);Tu.ye.re(g,E)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const i=[...e],l=[];for(const c of r.arrayValue.values||[])for(const g of i){const v=new cp;v.seed(g.Me()),Tu.ye.re(c,v.Be(t.kind)),l.push(v)}return l}cn(e,t){return!!e.filters.find(r=>r instanceof Qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dm(e),i=zi(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(l=>{const c=[];return ce.forEach(l,g=>i.get([g.indexId,this.uid]).next(v=>{c.push(function(E,S){const R=S?new Dc(S.sequenceNumber,new zs(Su(S.readTime),new ze(Ma(S.documentKey)),S.largestBatchId)):Dc.empty(),V=E.fields.map(([K,Q])=>new Cg(Zn.fromServerFormat(K),Q));return new Ig(E.indexId,E.collectionGroup,V,R)}(g,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:Et(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=dm(e),l=zi(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ce.forEach(g,v=>l.put(wI(v.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,l)=>{const c=r.get(i.collectionGroup);return(c?ce.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),ce.forEach(g,v=>this.fn(e,i,v).next(E=>{const S=this.dn(l,v);return E.isEqual(S)?ce.resolve():this._n(e,l,v,E,S)}))))})}wn(e,t,r,i){return jc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return jc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=jc(e);let l=new ln(Vc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,g)=>{l=l.add(new Bc(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>l)}dn(e,t){let r=new ln(Vc);const i=this.on(t,e);if(null==i)return r;const l=xg(t);if(null!=l){const c=e.data.field(l.fieldPath);if(uh(c))for(const g of c.arrayValue.values||[])r=r.add(new Bc(t.indexId,e.key,this.nn(g),i))}else r=r.add(new Bc(t.indexId,e.key,Mu,i));return r}_n(e,t,r,i,l){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,v,E,S,R){const V=g.getIterator(),K=v.getIterator();let Q=Ic(V),ae=Ic(K);for(;Q||ae;){let Te=!1,Be=!1;if(Q&&ae){const st=E(Q,ae);st<0?Be=!0:st>0&&(Te=!0)}else null!=Q?Be=!0:Te=!0;Te?(S(ae),ae=Ic(K)):Be?(R(Q),Q=Ic(V)):(Q=Ic(V),ae=Ic(K))}}(i,l,Vc,g=>{c.push(this.wn(e,t,r,g))},g=>{c.push(this.mn(e,t,r,g))}),ce.waitFor(c)}ln(e){let t=1;return zi(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Vc(c,g)).filter((c,g,v)=>!g||0!==Vc(c,v[g-1]));const i=[];i.push(e);for(const c of r){const g=Vc(c,e),v=Vc(c,t);if(0===g)i[0]=e.Le();else if(g>0&&v<0)i.push(c),i.push(c.Le());else if(v>0)break}i.push(t);const l=[];for(let c=0;c<i.length;c+=2)l.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Mu,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Mu,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xh)}getMinOffset(e,t){return ce.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||it())).next(xh)}}function Gw(n){return $r(n,"collectionParents")}function jc(n){return $r(n,"indexEntries")}function dm(n){return $r(n,"indexConfiguration")}function zi(n){return $r(n,"indexState")}function xh(n){at(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;bu(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new zs(e.readTime,e.documentKey,t)}const ri={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fr(e,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dp(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],c=IDBKeyRange.only(t.batchId);let g=0;const v=r.J({range:c},(S,R,V)=>(g++,V.delete()));l.push(v.next(()=>{at(1===g)}));const E=[];for(const S of t.mutations){const R=kw(e,S.key.path,t.batchId);l.push(i.delete(R)),E.push(S.key)}return ce.waitFor(l).next(()=>E)}function xi(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);class Ch{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){at(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Ch(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).J({index:"userMutationsIndex",range:r},(i,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=So(e),c=_s(e);return c.add({}).next(g=>{at("number"==typeof g);const v=new im(g,t,r,i),E=function(V,K,Q){const ae=Q.baseMutations.map(Be=>vh(V.ne,Be)),Te=Q.mutations.map(Be=>vh(V.ne,Be));return{userId:K,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:ae,mutations:Te}}(this.wt,this.userId,v),S=[];let R=new ln((V,K)=>Et(V.canonicalString(),K.canonicalString()));for(const V of i){const K=kw(this.userId,V.key.path,g);R=R.add(V.key.path.popLast()),S.push(c.put(E)),S.push(l.put(K,dI))}return R.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.gn[g]=v.keys()}),ce.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return _s(e).get(t).next(r=>r?(at(r.userId===this.userId),Lc(this.wt,r)):null)}yn(e,t){return this.gn[t]?ce.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return _s(e).J({index:"userMutationsIndex",range:i},(c,g,v)=>{g.userId===this.userId&&(at(g.batchId>=r),l=Lc(this.wt,g)),v.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _s(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).K("userMutationsIndex",t).next(r=>r.map(i=>Lc(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Eh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return So(e).J({range:i},(c,g,v)=>{const[E,S,R]=c,V=Ma(S);if(E===this.userId&&t.path.isEqual(V))return _s(e).get(R).next(K=>{if(!K)throw it();at(K.userId===this.userId),l.push(Lc(this.wt,K))});v.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Et);const i=[];return t.forEach(l=>{const c=Eh(this.userId,l.path),g=IDBKeyRange.lowerBound(c),v=So(e).J({range:g},(E,S,R)=>{const[V,K,Q]=E,ae=Ma(K);V===this.userId&&l.path.isEqual(ae)?r=r.add(Q):R.done()});i.push(v)}),ce.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=Eh(this.userId,r),c=IDBKeyRange.lowerBound(l);let g=new ln(Et);return So(e).J({range:c},(v,E,S)=>{const[R,V,K]=v,Q=Ma(V);R===this.userId&&r.isPrefixOf(Q)?Q.length===i&&(g=g.add(K)):S.done()}).next(()=>this.pn(e,g))}pn(e,t){const r=[],i=[];return t.forEach(l=>{i.push(_s(e).get(l).next(c=>{if(null===c)throw it();at(c.userId===this.userId),r.push(Lc(this.wt,c))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return dp(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return So(e).J({range:r},(l,c,g)=>{if(l[0]===this.userId){const v=Ma(l[1]);i.push(v)}else g.done()}).next(()=>{at(0===i.length)})})}containsKey(e,t){return Hc(e,this.userId,t)}Tn(e){return Gc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hc(n,e,t){const r=Eh(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return So(n).J({range:l,H:!0},(g,v,E)=>{const[S,R,V]=g;S===e&&R===i&&(c=!0),E.done()}).next(()=>c)}function _s(n){return $r(n,"mutations")}function So(n){return $r(n,"documentMutations")}function Gc(n){return $r(n,"mutationQueues")}class Zs{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Zs(0)}static Rn(){return new Zs(-1)}}class Ah{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Zs(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Rt.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>To(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(at(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return To(e).J((c,g)=>{const v=up(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,l.push(this.removeTargetData(e,v)))}).next(()=>ce.waitFor(l)).next(()=>i)}forEachTarget(e,t){return To(e).J((r,i)=>{const l=up(i);t(l)})}bn(e){return $c(e).get("targetGlobalKey").next(t=>(at(null!==t),t))}Pn(e,t){return $c(e).put("targetGlobalKey",t)}vn(e,t){return To(e).put(Ih(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Cu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return To(e).J({range:i,index:"queryTargetsIndex"},(c,g,v)=>{const E=up(g);ch(t,E.target)&&(l=E,v.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=vs(e);return t.forEach(c=>{const g=Ii(c.path);i.push(l.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,c))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=vs(e);return ce.forEach(t,l=>{const c=Ii(l.path);return ce.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=vs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vs(e);let l=Pt();return i.J({range:r,H:!0},(c,g,v)=>{const E=Ma(c[1]),S=new ze(E);l=l.add(S)}).next(()=>l)}containsKey(e,t){const r=Ii(t.path),i=IDBKeyRange.bound([r],[Jb(r)],!1,!0);let l=0;return vs(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,g],v,E)=>{0!==c&&(l++,E.done())}).next(()=>l>0)}te(e,t){return To(e).get(t).next(r=>r?up(r):null)}}function To(n){return $r(n,"targets")}function $c(n){return $r(n,"targetGlobal")}function vs(n){return $r(n,"targetDocuments")}function v_([n,e],[t,r]){const i=Et(n,t);return 0===i?Et(e,r):i}class $w{constructor(e){this.Sn=e,this.buffer=new ln(v_),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();v_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Eu(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wu(r)}yield t.kn(3e5)}))}}class qw{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Ei.ot);const r=new $w(t);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(ri)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ri):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,i,l,c,g,v,E;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),i=this.params.maximumSequenceNumbersToCollect):i=R,c=Date.now(),this.nthSequenceNumber(e,i))).next(R=>(r=R,g=Date.now(),this.removeTargets(e,r,t))).next(R=>(l=R,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(E=Date.now(),Eg()<=Ur.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(g-c)+`ms\n\tRemoved ${l} targets in `+(v-g)+`ms\n\tRemoved ${R} documents in `+(E-v)+`ms\nTotal Duration: ${E-S}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:R})))}}class Ww{constructor(e,t){this.db=e,this.garbageCollector=new qw(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return hp(e,r)}removeReference(e,t,r){return hp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hp(e,t)}Un(e,t){return function(r,i){let l=!1;return Gc(r).Y(c=>Hc(r,c,i).next(g=>(g&&(l=!0),ce.resolve(!g)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Ln(e,(c,g)=>{if(g<=t){const v=this.Un(e,c).next(E=>{if(!E)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Rt.min()),vs(e).delete([0,Ii(c.path)])))});i.push(v)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hp(e,t)}Ln(e,t){const r=vs(e);let i,l=Ei.ot;return r.J({index:"documentTargetsIndex"},([c,g],{path:v,sequenceNumber:E})=>{0===c?(l!==Ei.ot&&t(new ze(Ma(i)),l),l=E,i=v):l=Ei.ot}).next(()=>{l!==Ei.ot&&t(new ze(Ma(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hp(n,e){return vs(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ii(e.path),sequenceNumber:r}));var r}class b_{constructor(){this.changes=new Fc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kw{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zc(e).put(r)}removeEntry(e,t,r){return zc(e).delete(function(i,l){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],am(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=wn.newInvalidDocument(t);return zc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(i,l)=>{r=this.Kn(t,l)}).next(()=>r)}Gn(e,t){let r={size:0,document:wn.newInvalidDocument(t)};return zc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(t))},(i,l)=>{r={document:this.Kn(t,l),size:xi(l)}}).next(()=>r)}getEntries(e,t){let r=ms();return this.Qn(e,t,(i,l)=>{const c=this.Kn(i,l);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=ms(),i=new rr(ze.comparator);return this.Qn(e,t,(l,c)=>{const g=this.Kn(l,c);r=r.insert(l,g),i=i.insert(l,xi(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new ln(E_);t.forEach(v=>i=i.add(v));const l=IDBKeyRange.bound(Sh(i.first()),Sh(i.last())),c=i.getIterator();let g=c.getNext();return zc(e).J({index:"documentKeyIndex",range:l},(v,E,S)=>{const R=ze.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;g&&E_(g,R)<0;)r(g,null),g=c.getNext();g&&g.isEqual(R)&&(r(g,E),g=c.hasNext()?c.getNext():null),g?S.q(Sh(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),am(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zc(e).K(IDBKeyRange.bound(i,l,!0)).next(c=>{let g=ms();for(const v of c){const E=this.Kn(ze.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(E.key,E)}return g})}getAllFromCollectionGroup(e,t,r,i){let l=ms();const c=Yw(t,r),g=Yw(t,zs.max());return zc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(v,E,S)=>{const R=this.Kn(ze.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);l=l.insert(R.key,R),l.size===i&&S.done()}).next(()=>l)}newChangeBuffer(e){return new CI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zw(e).get("remoteDocumentGlobalKey").next(t=>(at(!!t),t))}qn(e,t){return Zw(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function om(n,e){let t;if(e.document)t=u_(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Su(e.noDocument.readTime);t=wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=ze.fromSegments(e.unknownDocument.path),i=Su(e.unknownDocument.version);t=wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new nr(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return wn.newInvalidDocument(e)}}function w_(n){return new Kw(n)}class CI extends b_{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Fc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ln((l,c)=>Et(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const g=this.Hn.get(l);if(t.push(this.zn.removeEntry(e,l,g.readTime)),c.isValidDocument()){const v=Dh(this.zn.wt,c);i=i.add(l.path.popLast()),r+=xi(v)-g.size,t.push(this.zn.addEntry(e,l,v))}else if(r-=g.size,this.trackRemovals){const v=Dh(this.zn.wt,c.convertToNoDocument(Rt.min()));t.push(this.zn.addEntry(e,l,v))}}),i.forEach(l=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.zn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((l,c)=>{this.Hn.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function Zw(n){return $r(n,"remoteDocumentGlobal")}function zc(n){return $r(n,"remoteDocumentsV14")}function Sh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yw(n,e){const t=e.documentKey.path.toArray();return[n,am(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function E_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(i=Et(t[l],r[l]),i)return i;return i=Et(t.length,r.length),i||(i=Et(t[t.length-2],r[r.length-2]),i||Et(t[t.length-1],r[r.length-1]))}class D_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hm{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&tp(r.mutation,i,Gi.empty(),nr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const i=Al();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(l=>{let c=Kg();return l.forEach((g,v)=>{c=c.insert(g,v.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Al();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((c,g)=>{t.set(c,g)})})}computeViews(e,t,r,i){let l=ms();const c=Nc(),g=Nc();return t.forEach((v,E)=>{const S=r.get(E.key);i.has(E.key)&&(void 0===S||S.mutation instanceof Sa)?l=l.insert(E.key,E):void 0!==S&&(c.set(E.key,S.mutation.getFieldMask()),tp(S.mutation,E,S.mutation.getFieldMask(),nr.now()))}),this.recalculateAndSaveOverlays(e,l).next(v=>(v.forEach((E,S)=>c.set(E,S)),t.forEach((E,S)=>{var R;return g.set(E,new D_(S,null!==(R=c.get(E))&&void 0!==R?R:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Nc();let i=new rr((c,g)=>c-g),l=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const g of c)g.keys().forEach(v=>{const E=t.get(v);if(null===E)return;let S=r.get(v)||Gi.empty();S=g.applyToLocalView(E,S),r.set(v,S);const R=(i.get(g.batchId)||Pt()).add(v);i=i.insert(g.batchId,R)})}).next(()=>{const c=[],g=i.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),E=v.key,S=v.value,R=Sl();S.forEach(V=>{if(!l.has(V)){const K=qg(t.get(V),r.get(V));null!==K&&R.set(V,K),l=l.add(V)}}),c.push(this.documentOverlayCache.saveOverlays(e,E,R))}return ce.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):s_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):ce.resolve(Al());let g=-1,v=l;return c.next(E=>ce.forEach(E,(S,R)=>(g<R.largestBatchId&&(g=R.largestBatchId),l.get(S)?ce.resolve():this.getBaseDocument(e,S,R).next(V=>{v=v.insert(S,V)}))).next(()=>this.populateOverlays(e,E,l)).next(()=>this.computeViews(e,v,E,Pt())).next(S=>({batchId:g,changes:rI(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Kg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let l=Kg();return this.indexManager.getCollectionParents(e,i).next(c=>ce.forEach(c,g=>{const v=(E=t,S=g.child(i),new xl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,S;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(E=>{E.forEach((S,R)=>{l=l.insert(S,R)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(i=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((g,v)=>{const E=v.getKey();null===i.get(E)&&(i=i.insert(E,wn.newInvalidDocument(E)))});let c=Kg();return i.forEach((g,v)=>{const E=l.get(g);void 0!==E&&tp(E.mutation,v,Gi.empty(),nr.now()),Bg(t,v)&&(c=c.insert(g,v))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(wn.newInvalidDocument(t))}}class AI{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ce.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Xr(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:m_(r.bundledQuery),readTime:Xr(r.readTime)}),ce.resolve();var r}}class fm{constructor(){this.overlays=new rr(ze.comparator),this.Xn=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Al();return ce.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.ie(e,t,l)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Al(),l=t.length+1,c=new ze(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const v=g.getNext().value,E=v.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===l&&v.largestBatchId>r&&i.set(v.getKey(),v)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new rr((E,S)=>E-S);const c=this.overlays.getIterator();for(;c.hasNext();){const E=c.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let S=l.get(E.largestBatchId);null===S&&(S=Al(),l=l.insert(E.largestBatchId,S)),S.set(E.getKey(),E)}}const g=Al(),v=l.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((E,S)=>g.set(E,S)),!(g.size()>=i)););return ce.resolve(g)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ap(t,r));let l=this.Xn.get(t);void 0===l&&(l=Pt(),this.Xn.set(t,l)),this.Xn.set(t,l.add(r.key))}}class Th{constructor(){this.Zn=new ln(Nr.ts),this.es=new ln(Nr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Nr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Nr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new ze(new Jt([])),r=new Nr(t,e),i=new Nr(t,e+1),l=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),l.push(c.key)}),l}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ze(new Jt([])),r=new Nr(t,e),i=new Nr(t,e+1);let l=Pt();return this.es.forEachInRange([r,i],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Nr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Nr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ze.comparator(e.key,t.key)||Et(e.ls,t.ls)}static ns(e,t){return Et(e.ls,t.ls)||ze.comparator(e.key,t.key)}}class SI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new ln(Nr.ts)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const l=this.fs;this.fs++;const c=new im(l,t,r,i);this.mutationQueue.push(c);for(const g of i)this.ds=this.ds.add(new Nr(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),l=i<0?0:i;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nr(t,0),i=new Nr(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,i],c=>{const g=this._s(c.ls);l.push(g)}),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(Et);return t.forEach(i=>{const l=new Nr(i,0),c=new Nr(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,c],g=>{r=r.add(g.ls)})}),ce.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;ze.isDocumentKey(l)||(l=l.child(""));const c=new Nr(new ze(l),0);let g=new ln(Et);return this.ds.forEachWhile(v=>{const E=v.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(g=g.add(v.ls)),!0)},c),ce.resolve(this.gs(g))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){at(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ce.forEach(t.mutations,i=>{const l=new Nr(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Nr(t,0),i=this.ds.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class I_{constructor(e){this.ps=e,this.docs=new rr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=ms();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():wn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=ms();const l=new ze(t.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:g,value:{document:v}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||bu($y(v),r)<=0||(i=i.insert(v.key,v.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Is(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new x_(this)}getSize(e){return ce.resolve(this.size)}}class x_ extends b_{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Qw{constructor(e){this.persistence=e,this.Ts=new Fc(t=>Cu(t),ch),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Es=0,this.As=new Th,this.targetCount=0,this.Rs=Zs.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ce.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.vn(t),ce.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.Ts.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Ts.delete(c),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),ce.waitFor(l).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(c=>{l.push(i.markPotentiallyOrphaned(e,c))}),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.As.containsKey(t))}}class C_{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ei(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Qw(this),this.indexManager=new Uc,this.remoteDocumentCache=new I_(r=>this.referenceDelegate.Ss(r)),this.wt=new lp(t),this.Ds=new AI(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new SI(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new A_(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(l=>this.referenceDelegate.xs(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ns(e,t){return ce.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class A_ extends zy{constructor(e){super(),this.currentSequenceNumber=e}}class fp{constructor(e){this.persistence=e,this.ks=new Th,this.Ms=null}static Os(e){return new fp(e)}get Fs(){if(this.Ms)return this.Ms;throw it()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ce.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.Fs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Fs,r=>{const i=ze.fromPath(r);return this.$s(e,i).next(l=>{l||t.removeEntry(i,Rt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ce.or([()=>ce.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class TI{constructor(e){this.wt=e}M(e,t,r,i){const l=new Tg("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ao,{unique:!0}),g.createObjectStore("documentMutations"),pm(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),pm(e)),c=c.next(()=>function(g){const v=g.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",E)}(l))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(g,v){return v.store("mutations").K().next(E=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ao,{unique:!0});const S=v.store("mutations"),R=E.map(V=>S.put(V));return ce.waitFor(R)})}(e,l))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(l))),r<6&&i>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(l)))),r<7&&i>=7&&(c=c.next(()=>this.Us(l))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,l))),r<9&&i>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(l))),r<11&&i>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:Fw});v.createIndex("collectionPathOverlayIndex",g_,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",Nw,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:CA});v.createIndex("documentKeyIndex",Ow),v.createIndex("collectionGroupIndex",hI)}(e)).next(()=>this.Gs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,l))),r<15&&i>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:mI}).createIndex("sequenceNumberIndex",tm,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:p_}).createIndex("documentKeyIndex",yI,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=xi(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ce.forEach(i,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(g=>ce.forEach(g,v=>{at(v.userId===l.userId);const E=Lc(this.wt,v);return dp(e,l.userId,E).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.J((c,g)=>{const v=new Jt(c),E=[0,Ii(v)];l.push(t.get(E).next(S=>S?ce.resolve():t.put({targetId:0,path:Ii(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(l))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:gI});const r=t.store("collectionParents"),i=new Hw,l=c=>{if(i.add(c)){const g=c.lastSegment(),v=c.popLast();return r.put({collectionId:g,parent:Ii(v)})}};return t.store("remoteDocuments").J({H:!0},(c,g)=>{const v=new Jt(c);return l(v.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,g,v],E)=>{const S=Ma(g);return l(S.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const l=up(i),c=Ih(this.wt,l);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((l,c)=>{const g=t.store("remoteDocumentsV14"),v=(E=c,E.document?new ze(Jt.fromString(E.document.name).popFirst(5)):E.noDocument?ze.fromSegments(E.noDocument.path):E.unknownDocument?ze.fromSegments(E.unknownDocument.path):it()).path.toArray();var E;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(g.put(S))}).next(()=>ce.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=w_(this.wt),l=new C_(fp.Os,this.wt.ne);return r.K().next(c=>{const g=new Map;return c.forEach(v=>{var E;let S=null!==(E=g.get(v.userId))&&void 0!==E?E:Pt();Lc(this.wt,v).keys().forEach(R=>S=S.add(R)),g.set(v.userId,S)}),ce.forEach(g,(v,E)=>{const S=new Zr(E),R=lm.se(this.wt,S),V=l.getIndexManager(S),K=Ch.se(S,this.wt,V,l.referenceDelegate);return new hm(i,K,R,V).recalculateAndSaveOverlaysForDocumentKeys(new rm(t,Ei.ot),v).next()})})}}function pm(n){n.createObjectStore("targetDocuments",{keyPath:pI}).createIndex("documentTargetsIndex",f_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fI,{unique:!0}),n.createObjectStore("targetGlobal")}const gm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class S_{constructor(e,t,r,i,l,c,g,v,E,S,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=l,this.window=c,this.document=g,this.Ws=E,this.zs=S,this.Hs=R,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=V=>Promise.resolve(),!S_.V())throw new Oe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ww(this,i),this.ei=t+"main",this.wt=new lp(v),this.ni=new xo(this.ei,this.Hs,new TI(this.wt)),this.Vs=new Ah(this.referenceDelegate,this.wt),this.remoteDocumentCache=w_(this.wt),this.Ds=new EI,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===S&&Kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(fe.FAILED_PRECONDITION,gm);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ei(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Eu(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Mh(e).get("owner").next(t=>ce.resolve(this.di(t)))}_i(e){return pp(e).delete(this.clientId)}wi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=$r(r,"clientMetadata");return i.K().next(l=>{const c=e.gi(l,18e5),g=l.filter(v=>-1===c.indexOf(v));return ce.forEach(g,v=>i.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ce.resolve(!0):Mh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Oe(fe.FAILED_PRECONDITION,gm);return!1}}return!(!this.networkEnabled||!this.inForeground)||pp(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,g=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new rm(t,Ei.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>pp(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Ch.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xI(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return lm.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=15===(c=this.Hs)?bI:14===c?vI:13===c?nm:12===c?AA:11===c?_I:void it();var c;let g;return this.ni.runTransaction(e,i,l,v=>(g=new rm(v,this.Ps?this.Ps.next():Ei.ot),"readwrite-primary"===t?this.ai(g).next(E=>!!E||this.hi(g)).next(E=>{if(!E)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Oe(fe.FAILED_PRECONDITION,Sg);return r(g)}).next(E=>this.fi(g).next(()=>E)):this.bi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}bi(e){return Mh(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(fe.FAILED_PRECONDITION,gm)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mh(e).put("owner",t)}static V(){return xo.V()}li(e){const t=Mh(e);return t.get("owner").next(r=>this.di(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kt(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Mt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mh(n){return $r(n,"owner")}function pp(n){return $r(n,"clientMetadata")}function mm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ym{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Pt(),i=Pt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new ym(e,t.fromCache,r,i)}}class Xw{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(l=>l||this.xi(e,t,i,r)).next(l=>l||this.Ni(e,t))}Ci(e,t){if(dw(t))return ce.resolve(null);let r=$i(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Pg(t,null,"F"),r=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Pt(...l);return this.Di.getDocuments(e,c).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const E=this.ki(t,g);return this.Mi(t,E,c,v.readTime)?this.Ci(e,Pg(t,null,"F")):this.Oi(e,E,t,v)}))})))}xi(e,t,r,i){return dw(t)||i.isEqual(Rt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(l=>{const c=this.ki(t,l);return this.Mi(t,c,r,i)?this.Ni(e,t):(Eg()<=Ur.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lg(t)),this.Oi(e,c,t,Ag(i,-1)))})}ki(e,t){let r=new ln(WD(e));return t.forEach((i,l)=>{Bg(e,l)&&(r=r.add(l))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ni(e,t){return Eg()<=Ur.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Lg(t)),this.Di.getDocumentsMatchingQuery(e,t,zs.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}class Jw{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new rr(Et),this.Bi=new Fc(l=>Cu(l),ch),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hm(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function T_(n,e,t,r){return new Jw(n,e,t,r)}function M_(n,e){return gp.apply(this,arguments)}function gp(){return gp=(0,be.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],g=[];let v=Pt();for(const E of i){c.push(E.batchId);for(const S of E.mutations)v=v.add(S.key)}for(const E of l){g.push(E.batchId);for(const S of E.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next(E=>({Ki:E,removedBatchIds:c,addedBatchIds:g}))})})}),gp.apply(this,arguments)}function e0(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,g,v,E){const S=v.batch,R=S.keys();let V=ce.resolve();return R.forEach(K=>{V=V.next(()=>E.getEntry(g,K)).next(Q=>{const ae=v.docVersions.get(K);at(null!==ae),Q.version.compareTo(ae)<0&&(S.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),E.addEntry(Q)))})}),V.next(()=>c.mutationQueue.removeMutationBatch(g,S))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let g=Pt();for(let v=0;v<c.mutationResults.length;++v)c.mutationResults[v].transformResults.length>0&&(g=g.add(c.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function R_(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function t0(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const g=[];e.targetChanges.forEach((S,R)=>{const V=i.get(R);if(!V)return;g.push(t.Vs.removeMatchingKeys(l,S.removedDocuments,R).next(()=>t.Vs.addMatchingKeys(l,S.addedDocuments,R)));let K=V.withSequenceNumber(l.currentSequenceNumber);var Q,ae,Te;e.targetMismatches.has(R)?K=K.withResumeToken(Dr.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),i=i.insert(R,K),ae=K,Te=S,(0===(Q=V).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size>0)&&g.push(t.Vs.updateTargetData(l,K))});let v=ms(),E=Pt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,S))}),g.push(k_(l,c,e.documentUpdates).next(S=>{v=S.Gi,E=S.Qi})),!r.isEqual(Rt.min())){const S=t.Vs.getLastRemoteSnapshotVersion(l).next(R=>t.Vs.setTargetsMetadata(l,l.currentSequenceNumber,r));g.push(S)}return ce.waitFor(g).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,v,E)).next(()=>v)}).then(l=>(t.$i=i,l))}function k_(n,e,t){let r=Pt(),i=Pt();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=ms();return t.forEach((g,v)=>{const E=l.get(g);v.isFoundDocument()!==E.isFoundDocument()&&(i=i.add(g)),v.isNoDocument()&&v.version.isEqual(Rt.min())?(e.removeEntry(g,v.readTime),c=c.insert(g,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||0===v.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(v),c=c.insert(g,v)):Pe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",E.version," Watch version:",v.version)}),{Gi:c,Qi:i}})}function n0(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qc(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(l=>l?(i=l,ce.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new hi(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Wc(n,e,t){return _m.apply(this,arguments)}function _m(){return _m=(0,be.Z)(function*(n,e,t){const r=Ze(n),i=r.$i.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Eu(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),_m.apply(this,arguments)}function O_(n,e,t){const r=Ze(n);let i=Rt.min(),l=Pt();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,v,E){const S=Ze(g),R=S.Bi.get(E);return void 0!==R?ce.resolve(S.$i.get(R)):S.Vs.getTargetData(v,E)}(r,c,$i(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,g.targetId).next(v=>{l=v})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:Rt.min(),t?l:Pt())).next(g=>(F_(r,Vg(e),g),{documents:g,ji:l})))}function r0(n,e){const t=Ze(n),r=Ze(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.te(l,e).next(c=>c?c.target:null))}function s0(n,e){const t=Ze(n),r=t.Li.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,Ag(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(F_(t,e,i),i))}function F_(n,e,t){let r=Rt.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Li.set(e,r)}function Ir(){return Ir=(0,be.Z)(function*(n,e,t,r){const i=Ze(n);let l=Pt(),c=ms();for(const E of t){const S=e.Wi(E.metadata.name);E.document&&(l=l.add(S));const R=e.zi(E);R.setReadTime(e.Hi(E.metadata.readTime)),c=c.insert(S,R)}const g=i.Ui.newChangeBuffer({trackRemovals:!0}),v=yield qc(i,(E=r,$i(Cl(Jt.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>k_(E,g,c).next(S=>(g.apply(E),S)).next(S=>i.Vs.removeMatchingKeysForTargetId(E,v.targetId).next(()=>i.Vs.addMatchingKeys(E,l,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(E,S.Gi,S.Qi)).next(()=>S.Gi)))}),Ir.apply(this,arguments)}function o0(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,be.Z)(function*(n,e,t=Pt()){const r=yield qc(n,$i(m_(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const c=Xr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(l,e);const g=r.withResumeToken(Dr.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(g.targetId,g),i.Vs.updateTargetData(l,g).next(()=>i.Vs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.Vs.addMatchingKeys(l,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(l,e))})}),N_.apply(this,arguments)}function a0(n,e){return`firestore_clients_${n}_${e}`}function P_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function L_(n,e){return`firestore_targets_${n}_${e}`}class mp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let l,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(l=new Oe(i.error.code,i.error.message))),c?new mp(e,t,i.state,l):(Kt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Oe(r.error.code,r.error.message))),l?new Rh(e,r.state,i):(Kt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ml{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=yh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=sw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return i?new Ml(e,l):(Kt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class B_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new B_(t.clientId,t.onlineState):(Kt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class V_{constructor(){this.activeTargetIds=yh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vm{constructor(e,t,r,i,l){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new rr(Et),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=a0(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new V_),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const l=e.getItem(a0(e.persistenceKey,i));if(l){const c=Ml.Ji(i,l);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(L_(this.persistenceKey,e));if(r){const i=Rh.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(L_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(l){let c=Ei.ot;if(null!=l)try{const g=JSON.parse(l);at("number"==typeof g),c=g}catch(g){Kt("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);i!==Ei.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new mp(this.currentUser,e,t,r),l=P_(this.persistenceKey,this.currentUser,e);this.setItem(l,i.Yi())}pr(e){const t=P_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=L_(this.persistenceKey,e),l=new Rh(e,t,r);this.setItem(i,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Ml.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return mp.Ji(new Zr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Rh.Ji(i,t)}wr(e){return B_.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),l=this.gr(r),c=[],g=[];return l.forEach(v=>{i.has(v)||c.push(v)}),i.forEach(v=>{l.has(v)||g.push(v)}),this.syncEngine.Or(c,g).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=yh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class l0{constructor(){this.Fr=new V_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new V_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class u0{Br(e){}shutdown(){}}class RI{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const U_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class j_{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ra extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,l){const c=this.oo(e,t);Pe("RestConnection","Sending: ",c,r);const g={};return this.uo(g,i,l),this.co(e,c,g,r).then(v=>(Pe("RestConnection","Received: ",v),v),v=>{throw bl("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}ao(e,t,r,i,l,c){return this.ro(e,t,r,i,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}oo(e,t){return`${this.so}/v1/${t}:${U_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((l,c)=>{const g=new MD;g.listenOnce(SD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Gy.NO_ERROR:const E=g.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(E)),l(E);break;case Gy.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Oe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Gy.HTTP_ERROR:const S=g.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const R=g.getResponseJson().error;if(R&&R.status&&R.message){const V=function(K){const Q=K.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Q)>=0?Q:fe.UNKNOWN}(R.status);c(new Oe(V,R.message))}else c(new Oe(fe.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new Oe(fe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(i);g.send(t,"POST",v,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=zf(),c=AD(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new TD({})),this.uo(g.initMessageHeaders,t,r),(0,Mt.uI)()||(0,Mt.b$)()||(0,Mt.d)()||(0,Mt.w1)()||(0,Mt.Mn)()||(0,Mt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=i.join("");Pe("Connection","Creating WebChannel: "+v,g);const E=l.createWebChannel(v,g);let S=!1,R=!1;const V=new j_({jr:Q=>{R?Pe("Connection","Not sending because WebChannel is closed:",Q):(S||(Pe("Connection","Opening WebChannel transport."),E.open(),S=!0),Pe("Connection","WebChannel sending:",Q),E.send(Q))},Wr:()=>E.close()}),K=(Q,ae,Te)=>{Q.listen(ae,Be=>{try{Te(Be)}catch(st){setTimeout(()=>{throw st},0)}})};return K(E,bg.EventType.OPEN,()=>{R||Pe("Connection","WebChannel transport opened.")}),K(E,bg.EventType.CLOSE,()=>{R||(R=!0,Pe("Connection","WebChannel transport closed"),V.eo())}),K(E,bg.EventType.ERROR,Q=>{R||(R=!0,bl("Connection","WebChannel transport errored:",Q),V.eo(new Oe(fe.UNAVAILABLE,"The operation could not be completed")))}),K(E,bg.EventType.MESSAGE,Q=>{var ae;if(!R){const Te=Q.data[0];at(!!Te);const Be=Te,st=Be.error||(null===(ae=Be[0])||void 0===ae?void 0:ae.error);if(st){Pe("Connection","WebChannel received error:",st);const bt=st.status;let lt=function(Ot){const tn=gr[Ot];if(void 0!==tn)return tI(tn)}(bt),Tt=st.message;void 0===lt&&(lt=fe.INTERNAL,Tt="Unknown error status: "+bt+" with message "+st.message),R=!0,V.eo(new Oe(lt,Tt)),E.close()}else Pe("Connection","WebChannel received:",Te),V.no(Te)}}),K(c,Wb.STAT_EVENT,Q=>{Q.stat===Kb.PROXY?Pe("Connection","Detected buffering proxy"):Q.stat===Kb.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.Zr()},0),V}}function c0(){return typeof window<"u"?window:null}function bm(){return typeof document<"u"?document:null}function qi(n){return new a_(n,!0)}class bs{constructor(e,t,r=1e3,i=1.5,l=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Ys{constructor(e,t,r,i,l,c,g,v){this.js=e,this.Ao=r,this.Ro=i,this.bo=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new bs(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,be.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,be.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Oe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,be.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d0 extends Ys{constructor(e,t,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=l}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function xw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:it(),i=e.targetChange.targetIds||[],l=function(v,E){return v.dt?(at(void 0===E||"string"==typeof E),Dr.fromBase64String(E||"")):(at(void 0===E||E instanceof Uint8Array),Dr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(v){const E=void 0===v.code?fe.UNKNOWN:tI(v.code);return new Oe(E,v.message||"")}(c);t=new Zg(r,i,l,g||null)}else if("documentChange"in e){const r=e.documentChange,i=Ks(n,r.document.name),l=Xr(r.document.updateTime),c=new Yr({mapValue:{fields:r.document.fields}}),g=wn.newFoundDocument(i,l,c);t=new rp(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=Ks(n,r.document),l=r.readTime?Xr(r.readTime):Rt.min(),c=wn.newNoDocument(i,l);t=new rp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ks(n,r.document);t=new rp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,l=new JD(r.count||0);t=new vw(r.targetId,l)}}var v;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Rt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Rt.min():l.readTime?Xr(l.readTime):Rt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=op(this.wt),t.addTarget=function(i,l){let c;const g=l.target;return c=kg(g)?{documents:d_(i,g)}:{query:Cw(i,g)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?c.resumeToken=ip(i,l.resumeToken):l.snapshotVersion.compareTo(Rt.min())>0&&(c.readTime=Ta(i,l.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function lI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=op(this.wt),t.removeTarget=e,this.Oo(t)}}class h0 extends Ys{constructor(e,t,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function ys(n,e){return n&&n.length>0?(at(void 0!==e),n.map(t=>function(r,i){let l=Xr(r.updateTime?r.updateTime:i);return l.isEqual(Rt.min())&&(l=Xr(i)),new zg(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.Jo(r,t)}return at(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=op(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vh(this.wt,r))};this.Oo(t)}}class kI extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ro(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(fe.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.bo.ao(e,t,r,l,c,i)).catch(l=>{throw"FirebaseError"===l.name?(l.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Oe(fe.UNKNOWN,l.toString())})}terminate(){this.Zo=!0}}class OI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Kt(t),this.su=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class FI{constructor(e,t,r,i,l){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(g=>{r.enqueueAndForget((0,be.Z)(function*(){var v;Rl(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,be.Z)(function*(E){const S=Ze(E);S.lu.add(4),yield ka(S),S._u.set("Unknown"),S.lu.delete(4),yield yp(S)}),function(E){return v.apply(this,arguments)})(c))}))}),this._u=new OI(r,i)}}function yp(n){return _p.apply(this,arguments)}function _p(){return _p=(0,be.Z)(function*(n){if(Rl(n))for(const e of n.fu)yield e(!0)}),_p.apply(this,arguments)}function ka(n){return H_.apply(this,arguments)}function H_(){return H_=(0,be.Z)(function*(n){for(const e of n.fu)yield e(!1)}),H_.apply(this,arguments)}function vp(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),$_(t)?kh(t):Fh(t).Co()&&wm(t,e))}function bp(n,e){const t=Ze(n),r=Fh(t);t.hu.delete(e),r.Co()&&G_(t,e),0===t.hu.size&&(r.Co()?r.ko():Rl(t)&&t._u.set("Unknown"))}function wm(n,e){n.wu.Nt(e.targetId),Fh(n).Qo(e)}function G_(n,e){n.wu.Nt(e),Fh(n).jo(e)}function kh(n){n.wu=new ww({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Fh(n).start(),n._u.iu()}function $_(n){return Rl(n)&&!Fh(n).Do()&&n.hu.size>0}function Rl(n){return 0===Ze(n).lu.size}function z_(n){n.wu=void 0}function f0(n){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,be.Z)(function*(n){n.hu.forEach((e,t)=>{wm(n,e)})}),Oh.apply(this,arguments)}function q_(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,be.Z)(function*(n,e){z_(n),$_(n)?(n._u.uu(e),kh(n)):n._u.set("Unknown")}),Em.apply(this,arguments)}function p0(n,e,t){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,be.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Zg&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,l){const c=l.cause;for(const g of l.targetIds)i.hu.has(g)&&(yield i.remoteSyncer.rejectListen(g,c),i.hu.delete(g),i.wu.removeTarget(g))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wp(n,r)}else if(e instanceof rp?n.wu.Ut(e):e instanceof vw?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Rt.min()))try{const r=yield R_(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const c=i.wu.Yt(l);return c.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=i.hu.get(v);E&&i.hu.set(v,E.withResumeToken(g.resumeToken,l))}}),c.targetMismatches.forEach(g=>{const v=i.hu.get(g);if(!v)return;i.hu.set(g,v.withResumeToken(Dr.EMPTY_BYTE_STRING,v.snapshotVersion)),G_(i,g);const E=new hi(v.target,g,1,v.sequenceNumber);wm(i,E)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield wp(n,r)}var r}),Dm.apply(this,arguments)}function wp(n,e,t){return Im.apply(this,arguments)}function Im(){return Im=(0,be.Z)(function*(n,e,t){if(!Eu(e))throw e;n.lu.add(1),yield ka(n),n._u.set("Offline"),t||(t=()=>R_(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield yp(n)}))}),Im.apply(this,arguments)}function W_(n,e){return e().catch(t=>wp(n,t,e))}function Kc(n){return K_.apply(this,arguments)}function K_(){return K_=(0,be.Z)(function*(n){const e=Ze(n),t=kl(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;NI(e);)try{const i=yield n0(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,PI(e,i)}catch(i){yield wp(e,i)}g0(e)&&m0(e)}),K_.apply(this,arguments)}function NI(n){return Rl(n)&&n.au.length<10}function PI(n,e){n.au.push(e);const t=kl(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function g0(n){return Rl(n)&&!kl(n).Do()&&n.au.length>0}function m0(n){kl(n).start()}function LI(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,be.Z)(function*(n){kl(n).Xo()}),Z_.apply(this,arguments)}function BI(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,be.Z)(function*(n){const e=kl(n);for(const t of n.au)e.Ho(t.mutations)}),Y_.apply(this,arguments)}function VI(n,e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,be.Z)(function*(n,e,t){const r=n.au.shift(),i=sm.from(r,e,t);yield W_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kc(n)}),Q_.apply(this,arguments)}function UI(n,e){return X_.apply(this,arguments)}function X_(){return X_=(0,be.Z)(function*(n,e){var t;e&&kl(n).zo&&(yield(t=(0,be.Z)(function*(r,i){if(eI(l=i.code)&&l!==fe.ABORTED){const c=r.au.shift();kl(r).No(),yield W_(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Kc(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),g0(n)&&m0(n)}),X_.apply(this,arguments)}function y0(n,e){return J_.apply(this,arguments)}function J_(){return J_=(0,be.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Rl(t);t.lu.add(3),yield ka(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield yp(t)}),J_.apply(this,arguments)}function ev(n,e){return tv.apply(this,arguments)}function tv(){return tv=(0,be.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield yp(t)):e||(t.lu.add(2),yield ka(t),t._u.set("Unknown"))}),tv.apply(this,arguments)}function Fh(n){return n.mu||(n.mu=function(e,t,r){const i=Ze(e);return i.tu(),new d0(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:f0.bind(null,n),Jr:q_.bind(null,n),Go:p0.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.mu.No(),$_(n)?kh(n):n._u.set("Unknown")):(yield n.mu.stop(),z_(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function kl(n){return n.gu||(n.gu=function(e,t,r){const i=Ze(e);return i.tu(),new h0(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:LI.bind(null,n),Jr:UI.bind(null,n),Yo:BI.bind(null,n),Jo:VI.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.gu.No(),yield Kc(n)):(yield n.gu.stop(),n.au.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class xm{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,l){const c=Date.now()+r,g=new xm(e,t,c,i,l);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zc(n,e){if(Kt("AsyncQueue",`${e}: ${n}`),Eu(n))return new Oe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Yc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Kg(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Yc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class nv{constructor(){this.yu=new rr(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qc{constructor(e,t,r,i,l,c,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,i){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Qc(e,t,Yc.emptySet(t),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class _0{constructor(){this.Iu=void 0,this.listeners=[]}}class v0{constructor(){this.queries=new Fc(e=>hw(e),hh),this.onlineState="Unknown",this.Tu=new Set}}function Cm(n,e){return Am.apply(this,arguments)}function Am(){return Am=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new _0),i)try{l.Iu=yield t.onListen(r)}catch(c){const g=Zc(c,`Initialization of query '${Lg(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&Ru(t)}),Am.apply(this,arguments)}function Sm(n,e){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Ol.apply(this,arguments)}function jI(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const g of c.listeners)g.Au(i)&&(r=!0);c.Iu=i}}r&&Ru(t)}function HI(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function Ru(n){n.Tu.forEach(e=>{e.next()})}class b0{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class rv{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class GI{constructor(e){this.wt=e}Wi(e){return Ks(this.wt,e)}zi(e){return e.metadata.exists?u_(this.wt,e.document,!1):wn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Xr(e)}}class w0{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iv(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new GI(this.wt);for(const i of e)if(i.metadata.queries){const l=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const g=(t.get(c)||Pt()).add(l);t.set(c,g)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function MI(n,e,t,r){return Ir.apply(this,arguments)}(e.localStore,new GI(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield o0(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function iv(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $I{constructor(e){this.key=e}}class Dt{constructor(e){this.key=e}}class E0{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Pt(),this.mutatedKeys=Pt(),this.Lu=WD(e),this.Uu=new Yc(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new nv,i=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,g=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,R)=>{const V=i.get(S),K=Bg(this.query,R)?R:null,Q=!!V&&this.mutatedKeys.has(V.key),ae=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Te=!1;V&&K?V.data.isEqual(K.data)?Q!==ae&&(r.track({type:3,doc:K}),Te=!0):this.Qu(V,K)||(r.track({type:2,doc:K}),Te=!0,(v&&this.Lu(K,v)>0||E&&this.Lu(K,E)<0)&&(g=!0)):!V&&K?(r.track({type:0,doc:K}),Te=!0):V&&!K&&(r.track({type:1,doc:V}),Te=!0,(v||E)&&(g=!0)),Te&&(K?(c=c.add(K),l=ae?l.add(S):l.delete(S)):(c=c.delete(S),l=l.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),l=l.delete(S.key),r.track({type:1,doc:S})}return{Uu:c,Gu:r,Mi:g,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Gu.pu();l.sort((E,S)=>function(R,V){const K=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return K(R)-K(V)}(E.type,S.type)||this.Lu(E.doc,S.doc)),this.ju(r);const c=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,v=g!==this.$u;return this.$u=g,0!==l.length||v?{snapshot:new Qc(this.query,e.Uu,i,l,e.mutatedKeys,0===g,v,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new nv,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Pt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new Dt(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new $I(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Pt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Qc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class zI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class qI{constructor(e){this.key=e,this.Xu=!1}}class Nh{constructor(e,t,r,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Fc(g=>hw(g),hh),this.ec=new Map,this.nc=new Set,this.sc=new rr(ze.comparator),this.ic=new Map,this.rc=new Th,this.oc={},this.uc=new Map,this.cc=Zs.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function WI(n,e){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,be.Z)(function*(n,e){const t=_v(n);let r,i;const l=t.tc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.Yu();else{const c=yield qc(t.localStore,$i(e));t.isPrimaryClient&&vp(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Lh(t,e,r,"current"===g)}return i}),Ph.apply(this,arguments)}function Lh(n,e,t,r){return Yn.apply(this,arguments)}function Yn(){return Yn=(0,be.Z)(function*(n,e,t,r){n.hc=(S,R,V)=>{return(K=(0,be.Z)(function*(Q,ae,Te,Be){let st=ae.view.Ku(Te);st.Mi&&(st=yield O_(Q.localStore,ae.query,!1).then(({documents:Tt})=>ae.view.Ku(Tt,st)));const bt=Be&&Be.targetChanges.get(ae.targetId),lt=ae.view.applyChanges(st,Q.isPrimaryClient,bt);return fv(Q,ae.targetId,lt.zu),lt.snapshot}),function(Q,ae,Te,Be){return K.apply(this,arguments)})(n,S,R,V);var K};const i=yield O_(n.localStore,e,!0),l=new E0(e,i.ji),c=l.Ku(i.documents),g=Ws.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=l.applyChanges(c,n.isPrimaryClient,g);fv(n,t,v.zu);const E=new zI(e,t,l);return n.tc.set(e,E),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),v.snapshot}),Yn.apply(this,arguments)}function SA(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,be.Z)(function*(n,e){const t=Ze(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(l=>!hh(l,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bp(t.remoteStore,r.targetId),Xc(t,r.targetId)}).catch(wu))):(Xc(t,r.targetId),yield Wc(t.localStore,r.targetId,!0))}),Tm.apply(this,arguments)}function sv(){return sv=(0,be.Z)(function*(n,e,t){const r=vv(n);try{const i=yield function(l,c){const g=Ze(l),v=nr.now(),E=c.reduce((V,K)=>V.add(K.key),Pt());let S,R;return g.persistence.runTransaction("Locally write mutations","readwrite",V=>{let K=ms(),Q=Pt();return g.Ui.getEntries(V,E).next(ae=>{K=ae,K.forEach((Te,Be)=>{Be.isValidDocument()||(Q=Q.add(Te))})}).next(()=>g.localDocuments.getOverlayedDocuments(V,K)).next(ae=>{S=ae;const Te=[];for(const Be of c){const st=YD(Be,S.get(Be.key).overlayedDocument);null!=st&&Te.push(new Sa(Be.key,st,e_(st.value.mapValue),Tn.exists(!0)))}return g.mutationQueue.addMutationBatch(V,v,Te,c)}).next(ae=>{R=ae;const Te=ae.applyToLocalDocumentSet(S,Q);return g.documentOverlayCache.saveOverlays(V,ae.batchId,Te)})}).then(()=>({batchId:R.batchId,changes:rI(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,g){let v=l.oc[l.currentUser.toKey()];v||(v=new rr(Et)),v=v.insert(c,g),l.oc[l.currentUser.toKey()]=v}(r,i.batchId,t),yield Fl(r,i.changes),yield Kc(r.remoteStore)}catch(i){const l=Zc(i,"Failed to persist write");t.reject(l)}}),sv.apply(this,arguments)}function ov(n,e){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,be.Z)(function*(n,e){const t=Ze(n);try{const r=yield t0(t.localStore,e);e.targetChanges.forEach((i,l)=>{const c=t.ic.get(l);c&&(at(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?at(c.Xu):i.removedDocuments.size>0&&(at(c.Xu),c.Xu=!1))}),yield Fl(t,r,e)}catch(r){yield wu(r)}}),Mm.apply(this,arguments)}function av(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((l,c)=>{const g=c.view.Eu(e);g.snapshot&&i.push(g.snapshot)}),function(l,c){const g=Ze(l);g.onlineState=c;let v=!1;g.queries.forEach((E,S)=>{for(const R of S.listeners)R.Eu(c)&&(v=!0)}),v&&Ru(g)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I0(n,e,t){return lv.apply(this,arguments)}function lv(){return lv=(0,be.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),l=i&&i.key;if(l){let c=new rr(ze.comparator);c=c.insert(l,wn.newNoDocument(l,Rt.min()));const g=Pt().add(l),v=new np(Rt.min(),new Map,new ln(Et),c,g);yield ov(r,v),r.sc=r.sc.remove(l),r.ic.delete(e),Jc(r)}else yield Wc(r.localStore,e,!1).then(()=>Xc(r,e,t)).catch(wu)}),lv.apply(this,arguments)}function KI(n,e){return uv.apply(this,arguments)}function uv(){return uv=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield e0(t.localStore,e);Rm(t,r,null),Bh(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fl(t,i)}catch(i){yield wu(i)}}),uv.apply(this,arguments)}function Ep(n,e,t){return cv.apply(this,arguments)}function cv(){return cv=(0,be.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(l,c){const g=Ze(l);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return g.mutationQueue.lookupMutationBatch(v,c).next(S=>(at(null!==S),E=S.keys(),g.mutationQueue.removeMutationBatch(v,S))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,c)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>g.localDocuments.getDocuments(v,E))})}(r.localStore,e);Rm(r,e,t),Bh(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fl(r,i)}catch(i){yield wu(i)}}),cv.apply(this,arguments)}function dv(){return dv=(0,be.Z)(function*(n,e){const t=Ze(n);Rl(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const c=Ze(l);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Zc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dv.apply(this,arguments)}function Bh(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Rm(n,e,t){const r=Ze(n);let i=r.oc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Xc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||hv(n,r)})}function hv(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(bp(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),Jc(n))}function fv(n,e,t){for(const r of t)r instanceof $I?(n.rc.addReference(r.key,e),Dp(n,r)):r instanceof Dt?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||hv(n,r.key)):it()}function Dp(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.nc.add(r),Jc(n))}function Jc(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new ze(Jt.fromString(e)),r=n.cc.next();n.ic.set(r,new qI(t)),n.sc=n.sc.insert(t,r),vp(n.remoteStore,new hi($i(Cl(t.path)),r,2,Ei.ot))}}function Fl(n,e,t){return pv.apply(this,arguments)}function pv(){return pv=(0,be.Z)(function*(n,e,t){const r=Ze(n),i=[],l=[],c=[];var g;r.tc.isEmpty()||(r.tc.forEach((g,v)=>{c.push(r.hc(v,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,E.fromCache?"not-current":"current"),i.push(E);const S=ym.Vi(v.targetId,E);l.push(S)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(g=(0,be.Z)(function*(v,E){const S=Ze(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ce.forEach(E,V=>ce.forEach(V.Pi,K=>S.persistence.referenceDelegate.addReference(R,V.targetId,K)).next(()=>ce.forEach(V.vi,K=>S.persistence.referenceDelegate.removeReference(R,V.targetId,K)))))}catch(R){if(!Eu(R))throw R;Pe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of E){const V=R.targetId;if(!R.fromCache){const K=S.$i.get(V),ae=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);S.$i=S.$i.insert(V,ae)}}}),function(v,E){return g.apply(this,arguments)})(r.localStore,l))}),pv.apply(this,arguments)}function YI(n,e){return km.apply(this,arguments)}function km(){return km=(0,be.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield M_(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(g=>{g.reject(new Oe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fl(t,r.Ki)}var i}),km.apply(this,arguments)}function x0(n,e){const t=Ze(n),r=t.ic.get(e);if(r&&r.Xu)return Pt().add(r.key);{let i=Pt();const l=t.ec.get(e);if(!l)return i;for(const c of l){const g=t.tc.get(c);i=i.unionWith(g.view.qu)}return i}}function C0(n,e){return gv.apply(this,arguments)}function gv(){return gv=(0,be.Z)(function*(n,e){const t=Ze(n),r=yield O_(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&fv(t,e.targetId,i.zu),i}),gv.apply(this,arguments)}function A0(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,be.Z)(function*(n,e){const t=Ze(n);return s0(t.localStore,e).then(r=>Fl(t,r))}),mv.apply(this,arguments)}function QI(n,e,t,r){return S0.apply(this,arguments)}function S0(){return S0=(0,be.Z)(function*(n,e,t,r){const i=Ze(n),l=yield function(c,g){const v=Ze(c),E=Ze(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>E.yn(S,g).next(R=>R?v.localDocuments.getDocuments(S,R):ce.resolve(null)))}(i.localStore,e);var g;null!==l?("pending"===t?yield Kc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Rm(i,e,r||null),Bh(i,e),g=e,Ze(Ze(i.localStore).mutationQueue).In(g)):it(),yield Fl(i,l)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),S0.apply(this,arguments)}function T0(){return T0=(0,be.Z)(function*(n,e){const t=Ze(n);if(_v(t),vv(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield XI(t,r.toArray());t.ac=!0,yield ev(t.remoteStore,!0);for(const l of i)vp(t.remoteStore,l)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Xc(t,c),Wc(t.localStore,c,!0))),bp(t.remoteStore,c)}),yield i,yield XI(t,r),function(l){const c=Ze(l);c.ic.forEach((g,v)=>{bp(c.remoteStore,v)}),c.rc.cs(),c.ic=new Map,c.sc=new rr(ze.comparator)}(t),t.ac=!1,yield ev(t.remoteStore,!1)}}),T0.apply(this,arguments)}function XI(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,be.Z)(function*(n,e,t){const r=Ze(n),i=[],l=[];for(const c of e){let g;const v=r.ec.get(c);if(v&&0!==v.length){g=yield qc(r.localStore,$i(v[0]));for(const E of v){const S=r.tc.get(E),R=yield C0(r,S);R.snapshot&&l.push(R.snapshot)}}else{const E=yield r0(r.localStore,c);g=yield qc(r.localStore,E),yield Lh(r,Ip(E),c,!1)}i.push(g)}return r.Zu.Go(l),i}),Om.apply(this,arguments)}function Ip(n){return r_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JI(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Ri()}function ex(n,e,t,r){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,be.Z)(function*(n,e,t,r){const i=Ze(n);if(i.ac)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const l=i.ec.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=yield s0(i.localStore,Vg(l[0])),g=np.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fl(i,c,g);break}case"rejected":yield Wc(i.localStore,e,!0),Xc(i,e,r);break;default:it()}}),Fm.apply(this,arguments)}function xp(n,e,t){return yv.apply(this,arguments)}function yv(){return yv=(0,be.Z)(function*(n,e,t){const r=_v(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const l=yield r0(r.localStore,i),c=yield qc(r.localStore,l);yield Lh(r,Ip(l),c.targetId,!1),vp(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield Wc(r.localStore,i,!1).then(()=>{bp(r.remoteStore,i),Xc(r,i)}).catch(wu))}}),yv.apply(this,arguments)}function _v(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ov.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I0.bind(null,e),e.Zu.Go=jI.bind(null,e.eventManager),e.Zu.lc=HI.bind(null,e.eventManager),e}function vv(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ep.bind(null,e),e}class M0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.wt=qi(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return T_(this.persistence,new Xw,e.initialUser,this.wt)}_c(e){return new C_(fp.Os,this.wt)}dc(e){return new l0}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bv extends M0{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield vv(r.yc.syncEngine),yield Kc(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return T_(this.persistence,new Xw,e.initialUser,this.wt)}mc(e,t){return new zw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new VD(t,this.persistence);return new BD(e.asyncQueue,r)}_c(e){const t=mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new S_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,c0(),bm(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new l0}}class nx extends bv{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof vm&&(r.sharedClientState.syncEngine={kr:QI.bind(null,i),Mr:ex.bind(null,i),Or:xp.bind(null,i),Ri:JI.bind(null,i),Nr:A0.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var l=(0,be.Z)(function*(c){yield function TA(n,e){return T0.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return l.apply(this,arguments)}}())})()}dc(e){const t=c0();if(!vm.V(t))throw new Oe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wv{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>av(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=YI.bind(null,r.syncEngine),yield ev(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new v0}createDatastore(e){const t=qi(e.databaseInfo.databaseId),r=new Ra(e.databaseInfo);return new kI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=g=>av(this.syncEngine,g,0),c=RI.V()?new RI:new u0,new FI(t,r,i,l,c);var t,r,i,l,c}createSyncEngine(e,t){return function(r,i,l,c,g,v,E){const S=new Nh(r,i,l,c,g,v);return E&&(S.ac=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Ze(t);Pe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield ka(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ed(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class R0{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,be.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const l=yield e.vc(i);return new rv(JSON.parse(l),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,be.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(l,c){const g=Ze(l),v=op(g.wt)+"/documents",E={documents:c.map(K=>Pc(g.wt,K))},S=yield g.ao("BatchGetDocuments",v,E,c.length),R=new Map;S.forEach(K=>{const Q=function oI(n,e){return"found"in e?function(t,r){at(!!r.found);const i=Ks(t,r.found.name),l=Xr(r.found.updateTime),c=new Yr({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(i,l,c)}(n,e):"missing"in e?function(t,r){at(!!r.missing),at(!!r.readTime);const i=Ks(t,r.missing),l=Xr(r.readTime);return wn.newNoDocument(i,l)}(n,e):it()}(g.wt,K);R.set(Q.key.toString(),Q)});const V=[];return c.forEach(K=>{const Q=R.get(K.toString());at(!!Q),V.push(Q)}),V}),function(l,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=ze.fromPath(i);e.mutations.push(new Wg(l,e.precondition(l)))}),yield(r=(0,be.Z)(function*(i,l){const c=Ze(i),g=op(c.wt)+"/documents",v={writes:l.map(E=>vh(c.wt,E))};yield c.ro("Commit",g,v)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Tn.updateTime(t):Tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Oe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(t)}return Tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class k0{constructor(e,t,r,i,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=l,this.Dc=r.maxAttempts,this.So=new bs(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,be.Z)(function*(){const t=new rx(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.Nc(l)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!sh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!eI(t)}return!1}}class ix{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zr.UNAUTHENTICATED,this.clientId=wc.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(g){Pe("FirestoreClient","Received user=",g.uid),yield l.authCredentialListener(g),l.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zc(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Ev(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(l){r.isEqual(l)||(yield M_(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Dv.apply(this,arguments)}function Pm(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Lm(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>y0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>y0(e.remoteStore,l)),n.onlineComponents=e}),Iv.apply(this,arguments)}function Lm(n){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,be.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield Ev(n,new M0)),n.offlineComponents}),Bm.apply(this,arguments)}function Vm(n){return xv.apply(this,arguments)}function xv(){return xv=(0,be.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield Pm(n,new wv)),n.onlineComponents}),xv.apply(this,arguments)}function O0(n){return Lm(n).then(e=>e.persistence)}function Vh(n){return Lm(n).then(e=>e.localStore)}function F0(n){return Vm(n).then(e=>e.remoteStore)}function Um(n){return Vm(n).then(e=>e.syncEngine)}function Uh(n){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,be.Z)(function*(n){const e=yield Vm(n),t=e.eventManager;return t.onListen=WI.bind(null,e.syncEngine),t.onUnlisten=SA.bind(null,e.syncEngine),t}),Cv.apply(this,arguments)}function N0(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,l,c,g,v){const E=new Nm({next:R=>{l.enqueueAndForget(()=>Sm(i,S));const V=R.docs.has(c);!V&&R.fromCache?v.reject(new Oe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&R.fromCache&&g&&"server"===g.source?v.reject(new Oe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(R)},error:R=>v.reject(R)}),S=new b0(Cl(c.path),E,{includeMetadataChanges:!0,Du:!0});return Cm(i,S)}(yield Uh(n),n.asyncQueue,e,t,r)})),r.promise}function P0(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,l,c,g,v){const E=new Nm({next:R=>{l.enqueueAndForget(()=>Sm(i,S)),R.fromCache&&"server"===g.source?v.reject(new Oe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),S=new b0(c,E,{includeMetadataChanges:!0,Du:!0});return Cm(i,S)}(yield Uh(n),n.asyncQueue,e,t,r)})),r.promise}const Av=new Map;function Sv(n,e,t){if(!t)throw new Oe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V0(n,e,t,r){if(!0===e&&!0===r)throw new Oe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U0(n){if(!ze.isDocumentKey(n))throw new Oe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jm(n){if(ze.isDocumentKey(n))throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jh(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jh(n);throw new Oe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Hm(n,e){if(e<=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class j0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,V0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cp{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1,e instanceof El?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Oe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(i.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Yb;switch(t.type){case"gapi":const r=t.client;return at(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new FD(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Av.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),Av.delete(e),t.terminate())}(this),Promise.resolve()}}class Pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class fi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class Ci extends fi{constructor(e,t,r){super(e,t,Cl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new ze(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function H0(n,e,...t){if(n=(0,Mt.m9)(n),Sv("collection","path",e),n instanceof Cp){const r=Jt.fromString(e,...t);return jm(r),new Ci(n,null,r)}{if(!(n instanceof Pn||n instanceof Ci))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return jm(r),new Ci(n.firestore,null,r)}}function Mv(n,e,...t){if(n=(0,Mt.m9)(n),1===arguments.length&&(e=wc.I()),Sv("doc","path",e),n instanceof Cp){const r=Jt.fromString(e,...t);return U0(r),new Pn(n,null,new ze(r))}{if(!(n instanceof Pn||n instanceof Ci))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return U0(r),new Pn(n.firestore,n instanceof Ci?n.converter:null,new ze(r))}}function Rv(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),(n instanceof Pn||n instanceof Ci)&&(e instanceof Pn||e instanceof Ci)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Gm(n,e){return n=(0,Mt.m9)(n),e=(0,Mt.m9)(e),n instanceof fi&&e instanceof fi&&n.firestore===e.firestore&&hh(n._query,e._query)&&n.converter===e.converter}class hx{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new bs(this,"async_queue_retry"),this.Kc=()=>{const t=bm();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=bm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=bm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Gr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!Eu(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Kt("INTERNAL UNHANDLED ERROR: ",function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=xm.createAndSchedule(this,e,t,r,l=>this.Wc(l));return this.$c.push(i),i}Gc(){this.Bc&&it()}verifyOperationInProgress(){}zc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function $m(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class fx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Mn extends Cp{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new hx,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||kv(this),this._firestoreClient.terminate()}}function xr(n){return n._firestoreClient||kv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kv(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Xf(n._databaseId,l,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var l,g;n._firestoreClient=new ix(n._authCredentials,n._appCheckCredentials,n._queue,r)}function G0(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield Ev(n,t),yield Pm(n,e),r.resolve()}catch(i){const l=i;if(!("FirebaseError"===(c=l).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw l;bl("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var c})).then(()=>r.promise)}function wx(n){if(n._initialized||n._terminated)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(Dr.fromBase64String(e))}catch(t){throw new Oe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oa(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(e){this._methodName=e}}class zm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const Ex=/^__.*__$/;class Dx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new mh(e,this.data,t,this.fieldTransforms)}}class q0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class qm{constructor(e,t,r,i,l,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new qm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return ws(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(W0(this.Zc)&&Ex.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Ix{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||qi(e)}aa(e,t,r,i=!1){return new qm({Zc:e,methodName:t,ca:r,path:Zn.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function nd(n){const e=n._freezeSettings(),t=qi(n._databaseId);return new Ix(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ku(n,e,t,r,i,l={}){const c=n.aa(l.merge||l.mergeFields?2:0,e,t,i);Pv("Data must be an object, but it was:",c,r);const g=X0(r,c);let v,E;if(l.merge)v=new Gi(c.fieldMask),E=c.fieldTransforms;else if(l.mergeFields){const S=[];for(const R of l.mergeFields){const V=id(e,R,t);if(!c.contains(V))throw new Oe(fe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);eE(S,V)||S.push(V)}v=new Gi(S),E=c.fieldTransforms.filter(R=>v.covers(R.field))}else v=null,E=c.fieldTransforms;return new Dx(new Yr(g),v,E)}class Hh extends td{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function Ov(n,e,t){return new qm({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Wm extends td{_toFieldTransform(e){return new fh(e.path,new Mc)}isEqual(e){return e instanceof Wm}}class K0 extends td{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ov(this,e,!0),r=this.ha.map(l=>rd(l,t)),i=new Rc(r);return new fh(e.path,i)}isEqual(e){return this===e}}class Z0 extends td{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ov(this,e,!0),r=this.ha.map(l=>rd(l,t)),i=new Di(r);return new fh(e.path,i)}isEqual(e){return this===e}}class Y0 extends td{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new kc(e.wt,Tc(e.wt,this.la));return new fh(e.path,t)}isEqual(e){return this===e}}function Fv(n,e,t,r){const i=n.aa(1,e,t);Pv("Data must be an object, but it was:",i,r);const l=[],c=Yr.empty();gs(r,(v,E)=>{const S=Gh(e,v,t);E=(0,Mt.m9)(E);const R=i.ia(S);if(E instanceof Hh)l.push(S);else{const V=rd(E,R);null!=V&&(l.push(S),c.set(S,V))}});const g=new Gi(l);return new q0(c,g,i.fieldTransforms)}function Q0(n,e,t,r,i,l){const c=n.aa(1,e,t),g=[id(e,r,t)],v=[i];if(l.length%2!=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<l.length;V+=2)g.push(id(e,l[V])),v.push(l[V+1]);const E=[],S=Yr.empty();for(let V=g.length-1;V>=0;--V)if(!eE(E,g[V])){const K=g[V];let Q=v[V];Q=(0,Mt.m9)(Q);const ae=c.ia(K);if(Q instanceof Hh)E.push(K);else{const Te=rd(Q,ae);null!=Te&&(E.push(K),S.set(K,Te))}}const R=new Gi(E);return new q0(S,R,c.fieldTransforms)}function Nv(n,e,t,r=!1){return rd(t,n.aa(r?4:3,e))}function rd(n,e){if(J0(n=(0,Mt.m9)(n)))return Pv("Unsupported field value:",e,n),X0(n,e);if(n instanceof td)return function(t,r){if(!W0(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const c of t){let g=rd(c,r.ra(l));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Mt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tc(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=nr.fromDate(t);return{timestampValue:Ta(r.wt,i)}}if(t instanceof nr){const i=new nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ta(r.wt,i)}}if(t instanceof zm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oa)return{bytesValue:ip(r.wt,t._byteString)};if(t instanceof Pn){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${jh(t)}`)}(n,e)}function X0(n,e){const t={};return Ky(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(n,(r,i)=>{const l=rd(i,e.ea(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function J0(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof zm||n instanceof Oa||n instanceof Pn||n instanceof td)}function Pv(n,e,t){if(!J0(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jh(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function id(n,e,t){if((e=(0,Mt.m9)(e))instanceof Nl)return e._internalPath;if("string"==typeof e)return Gh(n,e);throw ws("Field path arguments must be of type string or ",n,!1,void 0,t)}const xx=new RegExp("[~\\*/\\[\\]]");function Gh(n,e,t){if(e.search(xx)>=0)throw ws(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw ws(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ws(n,e,t,r,i){const l=r&&!r.isEmpty(),c=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(l||c)&&(v+=" (found",l&&(v+=` in field ${r}`),c&&(v+=` in document ${i}`),v+=")"),new Oe(fe.INVALID_ARGUMENT,g+n+v)}function eE(n,e){return n.some(t=>t.isEqual(e))}class sd{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ap(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Km("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ap extends sd{data(){return super.data()}}function Km(n,e){return"string"==typeof e?Gh(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}class od{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pl extends sd{constructor(e,t,r,i,l,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Km("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ou extends Pl{data(e={}){return super.data(e)}}class Mo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new od(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ou(this._firestore,this._userDataWriter,r.key,r,new od(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Ou(r._firestore,r._userDataWriter,c.doc.key,c.doc,new od(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const g=new Ou(r._firestore,r._userDataWriter,c.doc.key,c.doc,new od(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,E=-1;return 0!==c.type&&(v=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),1!==c.type&&(l=l.add(c.doc),E=l.indexOf(c.doc.key)),{type:Cx(c.type),doc:g,oldIndex:v,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Cx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function tE(n,e){return n instanceof Pl&&e instanceof Pl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Mo&&e instanceof Mo&&n._firestore===e._firestore&&Gm(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Lv(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $h{}function Fa(n,...e){for(const t of e)n=t._apply(n);return n}class nE extends $h{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=nd(e.firestore),r=function(i,l,c,g,v,E,S){let R;if(v.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){jv(S,E);const K=[];for(const Q of S)K.push(Qm(g,i,Q));R={arrayValue:{values:K}}}else R=Qm(g,i,S)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||jv(S,E),R=Nv(c,"where",S,"in"===E||"not-in"===E);const V=Qr.create(v,E,R);return function(K,Q){if(Q.ht()){const Te=i_(K);if(null!==Te&&!Te.isEqual(Q.field))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${Q.field.toString()}'`);const Be=Ng(K);null!==Be&&Hv(0,Q.field,Be)}const ae=function(Te,Be){for(const st of Te.filters)if(Be.indexOf(st.op)>=0)return st.op;return null}(K,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==ae)throw new Oe(fe.INVALID_ARGUMENT,ae===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${ae.toString()}' filters.`)}(i,V),V}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new fi(e.firestore,e.converter,function(i,l){const c=i.filters.concat([l]);return new xl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Sx extends $h{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ac(i,l);return function(g,v){if(null===Ng(g)){const E=i_(g);null!==E&&Hv(0,E,v.field)}}(r,c),c}(e._query,this.fa,this.wa);return new fi(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new xl(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Zm extends $h{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new fi(e.firestore,e.converter,Pg(e._query,this.ma,this.ga))}}class Ym extends $h{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Uv(e,this.type,this.ya,this.pa);return new fi(e.firestore,e.converter,(i=t,new xl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class iE extends $h{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Uv(e,this.type,this.ya,this.pa);return new fi(e.firestore,e.converter,(i=t,new xl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Uv(n,e,t,r){if(t[0]=(0,Mt.m9)(t[0]),t[0]instanceof sd)return function(i,l,c,g,v){if(!g)throw new Oe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const E=[];for(const S of dh(i))if(S.field.isKeyField())E.push(ni(l,g.key));else{const R=g.data.field(S.field);if(Qf(R))throw new Oe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const V=S.field.canonicalString();throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}E.push(R)}return new Au(E,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=nd(n.firestore);return function(l,c,g,v,E,S){const R=l.explicitOrderBy;if(E.length>R.length)throw new Oe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let K=0;K<E.length;K++){const Q=E[K];if(R[K].field.isKeyField()){if("string"!=typeof Q)throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Q}`);if(!s_(l)&&-1!==Q.indexOf("/"))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Q}' contains a slash.`);const ae=l.path.child(Jt.fromString(Q));if(!ze.isDocumentKey(ae))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const Te=new ze(ae);V.push(ni(c,Te))}else{const ae=Nv(g,v,Q);V.push(ae)}}return new Au(V,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Qm(n,e,t){if("string"==typeof(t=(0,Mt.m9)(t))){if(""===t)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(e)&&-1!==t.indexOf("/"))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!ze.isDocumentKey(r))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ni(n,new ze(r))}if(t instanceof Pn)return ni(n,t._key);throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jh(t)}.`)}function jv(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Hv(n,e,t){if(!t.isEqual(e))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const sE={maxAttempts:5};class Xm{convertValue(e,t="none"){switch(Iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return gs(e.fields,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new zm(Nn(e.latitude),Nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const t=Co(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);at(Mw(r));const i=new El(r.get(1),r.get(3)),l=new ze(r.popFirst(5));return i.isEqual(t)||Kt(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Jm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class oE extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}class Gv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nd(e)}set(e,t,r){this._verifyNotCommitted();const i=Fu(e,this._firestore),l=Jm(i.converter,t,r),c=ku(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Tn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Fu(e,this._firestore);let c;return c="string"==typeof(t=(0,Mt.m9)(t))||t instanceof Nl?Q0(this._dataReader,"WriteBatch.update",l._key,t,r,i):Fv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fu(e,this._firestore);return this._mutations=this._mutations.concat(new Oc(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fu(n,e){if((n=(0,Mt.m9)(n)).firestore!==e)throw new Oe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ad extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,t)}}function Fx(n,e,t){n=Wt(n,Pn);const r=Wt(n.firestore,Mn),i=Jm(n.converter,e,t);return qh(r,[ku(nd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Tn.none())])}function $v(n,e,t,...r){n=Wt(n,Pn);const i=Wt(n.firestore,Mn),l=nd(i);let c;return c="string"==typeof(e=(0,Mt.m9)(e))||e instanceof Nl?Q0(l,"updateDoc",n._key,e,t,r):Fv(l,"updateDoc",n._key,e),qh(i,[c.toMutation(n._key,Tn.exists(!0))])}function uE(n,...e){var t,r,i;n=(0,Mt.m9)(n);let l={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||$m(e[c])||(l=e[c],c++);const g={includeMetadataChanges:l.includeMetadataChanges};if($m(e[c])){const R=e[c];e[c]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[c+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[c+2]=null===(i=R.complete)||void 0===i?void 0:i.bind(R)}let v,E,S;if(n instanceof Pn)E=Wt(n.firestore,Mn),S=Cl(n._key.path),v={next:R=>{e[c]&&e[c](ey(E,n,R))},error:e[c+1],complete:e[c+2]};else{const R=Wt(n,fi);E=Wt(R.firestore,Mn),S=R._query;const V=new ad(E);v={next:K=>{e[c]&&e[c](new Mo(E,V,R,K))},error:e[c+1],complete:e[c+2]},Lv(n._query)}return function(R,V,K,Q){const ae=new Nm(Q),Te=new b0(V,ae,K);return R.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Cm(yield Uh(R),Te)})),()=>{ae.Tc(),R.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Sm(yield Uh(R),Te)}))}}(xr(E),S,g,v)}function qh(n,e){return function(t,r){const i=new Gr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function D0(n,e,t){return sv.apply(this,arguments)}(yield Um(t),r,i)})),i.promise}(xr(n),e)}function ey(n,e,t){const r=t.docs.get(e._key),i=new ad(n);return new Pl(n,i,e._key,r,new od(t.hasPendingWrites,t.fromCache),e.converter)}class Nx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nd(e)}get(e){const t=Fu(e,this._firestore),r=new oE(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const l=i[0];if(l.isFoundDocument())return new sd(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new sd(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Fu(e,this._firestore),l=Jm(i.converter,t,r),c=ku(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const l=Fu(e,this._firestore);let c;return c="string"==typeof(t=(0,Mt.m9)(t))||t instanceof Nl?Q0(this._dataReader,"Transaction.update",l._key,t,r,i):Fv(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Fu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fu(e,this._firestore),r=new ad(this._firestore);return super.get(e).then(i=>new Pl(this._firestore,r,t._key,i._document,new od(!1,!1),t.converter))}}function ty(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ld(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function pE(){if(!function rw(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nh=co.SDK_VERSION,(0,co._registerComponent)(new la.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),l=new Mn(i,new Qb(t.getProvider("auth-internal")),new ND(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,co.registerVersion)(wg,"3.4.14",n),(0,co.registerVersion)(wg,"3.4.14","esm2017")}();class Wh{constructor(e){this._delegate=e}static fromBase64String(e){return pE(),new Wh(Oa.fromBase64String(e))}static fromUint8Array(e){return ld(),new Wh(Oa.fromUint8Array(e))}toBase64(){return pE(),this._delegate.toBase64()}toUint8Array(){return ld(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Mp(n){return function PA(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Ux{enableIndexedDbPersistence(e,t){return function yx(n,e){wx(n=Wt(n,Mn));const t=xr(n),r=n._freezeSettings(),i=new wv;return G0(t,i,new bv(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _x(n){wx(n=Wt(n,Mn));const e=xr(n),t=n._freezeSettings(),r=new wv;return G0(e,r,new nx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vx(n){if(n._initialized&&!n._terminated)throw new Oe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!xo.V())return Promise.resolve();const i=r+"main";yield xo.delete(i)}),function(r){return t.apply(this,arguments)})(mm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof El||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Tv(n,e,t,r={}){var i;const l=(n=Wt(n,Cp))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&bl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=Zr.MOCK_USER;else{c=(0,Mt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Oe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Zr(v)}n._authCredentials=new kD(new Zb(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function MA(n){return function sx(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield O0(n),t=yield F0(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.lu.delete(0),yp(i)}(t)}))}(xr(n=Wt(n,Mn)))}(this._delegate)}disableNetwork(){return function z0(n){return function ox(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield O0(n),t=yield F0(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const l=Ze(i);l.lu.add(0),yield ka(l),l._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(xr(n=Wt(n,Mn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,V0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function $0(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function ZI(n,e){return dv.apply(this,arguments)}(yield Um(e),t)})),t.promise}(xr(n=Wt(n,Mn)))}(this._delegate)}onSnapshotsInSync(e){return function zv(n,e){return function L0(n,e){const t=new Nm(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Uh(n),i=t,Ze(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Uh(n),i=t,void Ze(r).Tu.delete(i);var r,i}))}}(xr(n=Wt(n,Mn)),$m(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ud(this,H0(this._delegate,e))}catch(t){throw pi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Qs(this,Mv(this._delegate,e))}catch(t){throw pi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Si(this,function dx(n,e){if(n=Wt(n,Cp),Sv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fi(n,null,(t=e,new xl(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw pi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Px(n,e,t){n=Wt(n,Mn);const r=Object.assign(Object.assign({},sE),t);return function(i){if(i.maxAttempts<1)throw new Oe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function B0(n,e,t){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(l=n,Vm(l).then(c=>c.datastore));var l;new k0(n.asyncQueue,i,t,e,r).run()})),r.promise}(xr(n),i=>e(new Nx(n,i)),r)}(this._delegate,t=>e(new gE(this,t)))}batch(){return xr(this._delegate),new Kv(new Gv(this._delegate,e=>qh(this._delegate,e)))}loadBundle(e){return function bx(n,e){const t=xr(n=Wt(n,Mn)),r=new fx;return function ux(n,e,t,r){const i=function(l,c){let g;return g="string"==typeof l?(new TextEncoder).encode(l):l,v=function(v,E){if(v instanceof Uint8Array)return ed(v,E);if(v instanceof ArrayBuffer)return ed(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new R0(v,c);var v}(t,qi(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function tx(n,e,t){const r=Ze(n);var i;(i=(0,be.Z)(function*(l,c,g){try{const v=yield c.getMetadata();if(yield function(V,K){const Q=Ze(V),ae=Xr(K.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",Te=>Q.Ds.getBundleMetadata(Te,K.id)).then(Te=>!!Te&&Te.createTime.compareTo(ae)>=0)}(l.localStore,v))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(V=v).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);g._updateProgress(iv(v));const E=new w0(v,l.localStore,c.wt);let S=yield c.fc();for(;S;){const V=yield E.Nu(S);V&&g._updateProgress(V),S=yield c.fc()}const R=yield E.complete();return yield Fl(l,R.Ou,void 0),yield function(V,K){const Q=Ze(V);return Q.persistence.runTransaction("Save bundle","readwrite",ae=>Q.Ds.saveBundleMetadata(ae,K))}(l.localStore,v),g._completeWith(R.progress),Promise.resolve(R.Mu)}catch(v){return bl("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var V}),function(l,c,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Um(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kA(n,e){return function cx(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.Ds.getNamedQuery(l,r))}(yield Vh(n),e)}))}(xr(n=Wt(n,Mn)),e).then(t=>t?new fi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Si(this,t):null)}}class ny extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wh(new Oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Qs.forKey(t,this.firestore,null)}}class gE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ny(e)}get(e){const t=Pu(e);return this._delegate.get(t).then(r=>new Rp(this._firestore,new Pl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Pu(e);return r?(ty("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Pu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Pu(e);return this._delegate.delete(t),this}}class Kv{constructor(e){this._delegate=e}set(e,t,r){const i=Pu(e);return r?(ty("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Pu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Pu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ou(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Nu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new Nu(e,new ny(e),t),i.set(t,l)),l}}Nu.INSTANCES=new WeakMap;class Qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ny(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qs(t,new Pn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Qs(t,new Pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ud(this.firestore,H0(this._delegate,e))}catch(t){throw pi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.m9)(e))instanceof Pn&&Rv(this._delegate,e)}set(e,t){t=ty("DocumentReference.set",t);try{return t?Fx(this._delegate,e,t):Fx(this._delegate,e)}catch(r){throw pi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$v(this._delegate,e):$v(this._delegate,e,t,...r)}catch(i){throw pi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function lE(n){return qh(Wt(n.firestore,Mn),[new Oc(n._key,Tn.none())])}(this._delegate)}onSnapshot(...e){const t=Zv(e),r=mE(e,i=>new Rp(this.firestore,new Pl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uE(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Ai(n){n=Wt(n,Pn);const e=Wt(n.firestore,Mn),t=xr(e),r=new ad(e);return function ax(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,l,c){try{const g=yield function(v,E){const S=Ze(v);return S.persistence.runTransaction("read document","readonly",R=>S.localDocuments.getDocument(R,E))}(i,l);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new Oe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=Zc(g,`Failed to get document '${l} from cache`);c.reject(v)}}),function(i,l,c){return r.apply(this,arguments)})(yield Vh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Pl(e,r,n._key,i,new od(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zh(n){n=Wt(n,Pn);const e=Wt(n.firestore,Mn);return N0(xr(e),n._key,{source:"server"}).then(t=>ey(e,n,t))}(this._delegate):function aE(n){n=Wt(n,Pn);const e=Wt(n.firestore,Mn);return N0(xr(e),n._key).then(t=>ey(e,n,t))}(this._delegate),t.then(r=>new Rp(this.firestore,new Pl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qs(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}function pi(n,e,t){return n.message=n.message.replace(e,t),n}function Zv(n){for(const e of n)if("object"==typeof e&&!Mp(e))return e;return{}}function mE(n,e){var t,r;let i;return i=Mp(n[0])?n[0]:Mp(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Rp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Qs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tE(this._delegate,e._delegate)}}class Kh extends Rp{data(e){const t=this._delegate.data(e);return function qf(n,e){n||it()}(void 0!==t),t}}class Si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ny(e)}where(e,t,r){try{return new Si(this.firestore,Fa(this._delegate,function Ax(n,e,t){const r=e,i=Km("where",n);return new nE(i,r,t)}(e,t,r)))}catch(i){throw pi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Si(this.firestore,Fa(this._delegate,function FA(n,e="asc"){const t=e,r=Km("orderBy",n);return new Sx(r,t)}(e,t)))}catch(r){throw pi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Si(this.firestore,Fa(this._delegate,function Bv(n){return Hm("limit",n),new Zm("limit",n,"F")}(e)))}catch(t){throw pi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Si(this.firestore,Fa(this._delegate,function rE(n){return Hm("limitToLast",n),new Zm("limitToLast",n,"L")}(e)))}catch(t){throw pi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Si(this.firestore,Fa(this._delegate,function Vv(...n){return new Ym("startAt",n,!0)}(...e)))}catch(t){throw pi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Si(this.firestore,Fa(this._delegate,function Tx(...n){return new Ym("startAfter",n,!1)}(...e)))}catch(t){throw pi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Si(this.firestore,Fa(this._delegate,function Mx(...n){return new iE("endBefore",n,!1)}(...e)))}catch(t){throw pi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Si(this.firestore,Fa(this._delegate,function Rx(...n){return new iE("endAt",n,!0)}(...e)))}catch(t){throw pi(t,"endAt()","Query.endAt()")}}isEqual(e){return Gm(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Ox(n){n=Wt(n,fi);const e=Wt(n.firestore,Mn),t=xr(e),r=new ad(e);return function lx(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,l,c){try{const g=yield O_(i,l,!0),v=new E0(l,g.ji),E=v.Ku(g.documents),S=v.applyChanges(E,!1);c.resolve(S.snapshot)}catch(g){const v=Zc(g,`Failed to execute query '${l} against cache`);c.reject(v)}}),function(i,l,c){return r.apply(this,arguments)})(yield Vh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Mo(e,r,n,i))}(this._delegate):"server"===e?.source?function NA(n){n=Wt(n,fi);const e=Wt(n.firestore,Mn),t=xr(e),r=new ad(e);return P0(t,n._query,{source:"server"}).then(i=>new Mo(e,r,n,i))}(this._delegate):function kx(n){n=Wt(n,fi);const e=Wt(n.firestore,Mn),t=xr(e),r=new ad(e);return Lv(n._query),P0(t,n._query).then(i=>new Mo(e,r,n,i))}(this._delegate),t.then(r=>new ry(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Zv(e),r=mE(e,i=>new ry(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uE(this._delegate,t,r)}withConverter(e){return new Si(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}class yE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ry{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Kh(this._firestore,r))})}isEqual(e){return tE(this._delegate,e._delegate)}}class ud extends Si{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qs(this.firestore,e):null}doc(e){try{return new Qs(this.firestore,void 0===e?Mv(this._delegate):Mv(this._delegate,e))}catch(t){throw pi(t,"doc()","CollectionReference.doc()")}}add(e){return function Sp(n,e){const t=Wt(n.firestore,Mn),r=Mv(n),i=Jm(n.converter,e);return qh(t,[ku(nd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Qs(this.firestore,t))}isEqual(e){return Rv(this._delegate,e._delegate)}withConverter(e){return new ud(this.firestore,this._delegate.withConverter(e?Nu.getInstance(this.firestore,e):null))}}function Pu(n){return Wt(n,Pn)}class Yv{constructor(...e){this._delegate=new Nl(...e)}static documentId(){return new Yv(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,Mt.m9)(e))instanceof Nl&&this._delegate._internalPath.isEqual(e._internalPath)}}class cd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Lx(){return new Wm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cd(e)}static delete(){const e=function Tp(){return new Hh("deleteField")}();return e._methodName="FieldValue.delete",new cd(e)}static arrayUnion(...e){const t=function qv(...n){return new K0("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cd(t)}static arrayRemove(...e){const t=function cE(...n){return new Z0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cd(t)}static increment(e){const t=function dE(n){return new Y0("increment",n)}(e);return t._methodName="FieldValue.increment",new cd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LA={Firestore:jx,GeoPoint:zm,Timestamp:nr,Blob:Wh,Transaction:gE,WriteBatch:Kv,DocumentReference:Qs,DocumentSnapshot:Rp,Query:Si,QueryDocumentSnapshot:Kh,QuerySnapshot:ry,CollectionReference:ud,FieldPath:Yv,FieldValue:cd,setLogLevel:function Hx(n){!function RD(n){vu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function BA(n){(function _E(n,e){n.INTERNAL.registerComponent(new la.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LA)))})(n,(e,t)=>new jx(e,t,new Ux)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(Jl.Z);var Xs=F(7579),iy=F(6451),Qv=F(5363),dd=F(8421);function Ro(n,e){return(0,cr.e)((t,r)=>{let i=null,l=0,c=!1;const g=()=>c&&!i&&r.complete();t.subscribe((0,Gn.x)(r,v=>{i?.unsubscribe();let E=0;const S=l++;(0,dd.Xf)(n(v,S)).subscribe(i=(0,Gn.x)(r,R=>r.next(e?e(v,R,S,E++):R),()=>{i=null,g()}))},()=>{c=!0,g()}))})}var VA=F(6063);class UA extends Xs.x{constructor(e=1/0,t=1/0,r=VA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:c}=this;t||(r.push(e),!i&&r.push(l.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let c=0;c<l.length&&!e.closed;c+=r?1:2)e.next(l[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const c=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)g=v;g&&r.splice(0,g+1)}}}var kp=F(3099);function Gx(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,kp.B)({connector:()=>new UA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Op=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var bE=F(515);function Js(n){return n<=0?()=>bE.E:(0,cr.e)((e,t)=>{let r=0;e.subscribe((0,Gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function jA(n){return(0,cr.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xv(n=wE){return(0,cr.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wE(){return new Op}var Es=F(576);function zx(n,e){return(0,Es.m)(e)?Ro(()=>n,e):Ro(()=>n)}var Jv=F(9468);F(5867);const IE=new Map,Ds={activated:!1,tokenObservers:[]},Yx={initialized:!1,enabled:!1};function Pr(n){return IE.get(n)||Ds}function ko(n,e){IE.set(n,e)}function ay(){return Yx}class Xx{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new Mt.BH,yield function SE(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Mt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ii=new Mt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tb(n){if(!Pr(n).activated)throw ii.create("use-before-activation",{appName:n.name})}function nb(n,e){return TE.apply(this,arguments)}function TE(){return TE=(0,be.Z)(function*({url:n,body:e},t){var r,i;const l={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const K=yield c.getHeartbeatsHeader();K&&(l["X-Firebase-Client"]=K)}const g={method:"POST",body:JSON.stringify(e),headers:l};let v,E;try{v=yield fetch(n,g)}catch(K){throw ii.create("fetch-network-error",{originalErrorMessage:null===(r=K)||void 0===r?void 0:r.message})}if(200!==v.status)throw ii.create("fetch-status-error",{httpStatus:v.status});try{E=yield v.json()}catch(K){throw ii.create("fetch-parse-error",{originalErrorMessage:null===(i=K)||void 0===i?void 0:i.message})}const S=E.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw ii.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${E.ttl}`});const R=1e3*Number(S[1]),V=Date.now();return{token:E.token,expireTimeMillis:V+R,issuedAtTimeMillis:V}}),TE.apply(this,arguments)}function tC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ly="firebase-app-check-store";let uy=null;function ib(){return uy||(uy=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var l;e(ii.create("storage-open",{originalErrorMessage:null===(l=i.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(ly,{keyPath:"compositeKey"})}}catch(r){e(ii.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),uy)}function cy(){return cy=(0,be.Z)(function*(n,e){const r=(yield ib()).transaction(ly,"readwrite"),l=r.objectStore(ly).put({compositeKey:n,value:e});return new Promise((c,g)=>{l.onsuccess=v=>{c()},r.onerror=v=>{var E;g(ii.create("storage-set",{originalErrorMessage:null===(E=v.target.error)||void 0===E?void 0:E.message}))}})}),cy.apply(this,arguments)}const Yh=new Ur.Yd("@firebase/app-check");function ab(n,e){return(0,Mt.hl)()?function sb(n,e){return function OE(n,e){return cy.apply(this,arguments)}(function Pp(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sC(){return ay().enabled}function oC(){return hy.apply(this,arguments)}function hy(){return hy=(0,be.Z)(function*(){const n=ay();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),hy.apply(this,arguments)}const lC={error:"UNKNOWN_ERROR"};function uC(n){return Mt.US.encodeString(JSON.stringify(n),!1)}function ub(n){return FE.apply(this,arguments)}function FE(){return FE=(0,be.Z)(function*(n,e=!1){const t=n.app;tb(t);const r=Pr(t);let l,i=r.token;if(!i){const v=yield r.cachedTokenPromise;v&&fy(v)&&(i=v)}if(!e&&i&&fy(i))return{token:i.token};let g,c=!1;if(sC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nb(tC(t,yield oC()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),c=!0);const v=yield r.exchangeTokenPromise;return yield ab(t,v),ko(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),i=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Yh.warn(v.message):Yh.error(v),l=v}return i?(g={token:i.token},ko(t,Object.assign(Object.assign({},r),{token:i})),yield ab(t,i)):g=hC(l),c&&Lp(t,g),g}),FE.apply(this,arguments)}function PE(n,e){const t=Pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ko(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function cC(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function dC(n){const{app:e}=n;return new Xx((0,be.Z)(function*(){let r;if(r=Pr(e).token?yield ub(n,!0):yield ub(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ko(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Lp(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function fy(n){return n.expireTimeMillis-Date.now()>0}function hC(n){return{token:uC(lC),error:n}}class LE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)PE(this.app,t.next);return Promise.resolve()}}const zE="app-check-internal";!function wC(){(0,co._registerComponent)(new la.wA("app-check",n=>function hd(n,e){return new LE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zE).initialize()})),(0,co._registerComponent)(new la.wA(zE,n=>function BE(n){return{getToken:e=>ub(n,e),addTokenListener:e=>function NE(n,e,t,r){const{app:i}=n,l=Pr(i),c={next:t,error:r,type:e};if(ko(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,c]})),l.token&&fy(l.token)){const g=l.token;Promise.resolve().then(()=>{t({token:g.token}),cC(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>cC(n))}(n,"INTERNAL",e),removeTokenListener:e=>PE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,co.registerVersion)("@firebase/app-check","0.5.12")}();class vb{constructor(){return(0,xn.vb)("app-check")}}typeof window<"u"&&window;var o=F(127);const u=new f.OlP("angularfire2.auth.use-emulator"),d=new f.OlP("angularfire2.auth.settings"),p=new f.OlP("angularfire2.auth.tenant-id"),_=new f.OlP("angularfire2.auth.langugage-code"),w=new f.OlP("angularfire2.auth.use-device-language"),D=new f.OlP("angularfire.auth.persistence"),C=(n,e,t,r,i,l,c,g)=>(0,hr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,l&&v.useDeviceLanguage(),c)for(const[E,S]of Object.entries(c))v.settings[E]=S;return g&&v.setPersistence(g),v},[t,r,i,l,c,g]);let k=(()=>{class n{constructor(t,r,i,l,c,g,v,E,S,R,V,K){const Q=new Xs.x,ae=In(void 0).pipe((0,Qv.Q)(c.outsideAngular),Ro(()=>l.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1451)))),(0,$t.U)(()=>(0,hr.on)(t,l,r)),(0,$t.U)(Te=>C(Te,l,g,E,S,R,v,V)),Gx({bufferSize:1,refCount:!1}));if(Xn(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=In(null);else{ae.pipe(function $x(n,e){const t=arguments.length>=2;return r=>r.pipe(n?dr((i,l)=>n(i,l,r)):Bi.y,Js(1),t?jA(e):Xv(()=>new Op))}()).subscribe();const Be=ae.pipe(Ro(lt=>lt.getRedirectResult().then(Tt=>Tt,()=>null)),xn.iC,Gx({bufferSize:1,refCount:!1})),st=ae.pipe(Ro(lt=>new ur.y(Tt=>({unsubscribe:l.runOutsideAngular(()=>lt.onAuthStateChanged(Ot=>Tt.next(Ot),Ot=>Tt.error(Ot),()=>Tt.complete()))})))),bt=ae.pipe(Ro(lt=>new ur.y(Tt=>({unsubscribe:l.runOutsideAngular(()=>lt.onIdTokenChanged(Ot=>Tt.next(Ot),Ot=>Tt.error(Ot),()=>Tt.complete()))}))));this.authState=Be.pipe(zx(st),(0,Jv.R)(c.outsideAngular),(0,Qv.Q)(c.insideAngular)),this.user=Be.pipe(zx(bt),(0,Jv.R)(c.outsideAngular),(0,Qv.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ro(lt=>lt?(0,On.D)(lt.getIdToken()):In(null))),this.idTokenResult=this.user.pipe(Ro(lt=>lt?(0,On.D)(lt.getIdTokenResult()):In(null))),this.credential=(0,iy.T)(Be,Q,this.authState.pipe(dr(lt=>!lt))).pipe((0,$t.U)(lt=>lt?.user?lt:null),(0,Jv.R)(c.outsideAngular),(0,Qv.Q)(c.insideAngular))}return(0,hr.pX)(this,ae,l,{spy:{apply:(Te,Be,st)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&st.then(bt=>Q.next(bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hr.Dh),f.LFG(hr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(xn.HU),f.LFG(u,8),f.LFG(d,8),f.LFG(p,8),f.LFG(_,8),f.LFG(w,8),f.LFG(D,8),f.LFG(vb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ne(n,e){return function z(n,e=oa.z){return new ur.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Fe(n,e){return ne(n,e).pipe((0,$t.U)(t=>({payload:t,type:"query"})))}function qe(n,e){return Fe(n,e).pipe(Bs(void 0),ls(),(0,$t.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const v=i.find(S=>S.doc.ref.isEqual(c.ref)),E=t?.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&E&&JSON.stringify(E.metadata)===JSON.stringify(c.metadata)||l.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),l}))}function nt(n,e,t){return qe(n,t).pipe(us((r,i)=>function Ct(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function vt(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ke(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ke(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ke(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),Ql(),(0,$t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ke(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function zt(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Rn{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qe(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,$t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Bs(void 0),ls(),dr(([r,i])=>i.length>0||!r),(0,$t.U)(([r,i])=>i),xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(us((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zt(e);return nt(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return Fe(this.query,this.afs.schedulers.outsideAngular).pipe((0,$t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xn.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(xn.iC)}add(e){return this.ref.add(e)}doc(e){return new Lu(this.ref.doc(e),this.afs)}}class Lu{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=yy(r,t);return new Rn(i,l,this.afs)}snapshotChanges(){return function Ee(n,e){return ne(n,e).pipe(Bs(void 0),ls(),(0,$t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,$t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(xn.iC)}}class bb{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qe(this.query,this.afs.schedulers.outsideAngular).pipe((0,$t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),dr(t=>t.length>0),xn.iC):qe(this.query,this.afs.schedulers.outsideAngular).pipe(xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(us((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zt(e);return nt(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return Fe(this.query,this.afs.schedulers.outsideAngular).pipe((0,$t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),xn.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(xn.iC)}}const gy=new f.OlP("angularfire2.enableFirestorePersistence"),my=new f.OlP("angularfire2.firestore.persistenceSettings"),wb=new f.OlP("angularfire2.firestore.settings"),Eb=new f.OlP("angularfire2.firestore.use-emulator");function yy(n,e=(t=>t)){return{query:e(n),ref:n}}let _y=(()=>{class n{constructor(t,r,i,l,c,g,v,E,S,R,V,K,Q,ae,Te,Be,st){this.schedulers=v;const bt=(0,hr.on)(t,g,r),lt=S;R&&C(bt,g,V,Q,ae,Te,K,Be),[this.firestore,this.persistenceEnabled$]=(0,hr.cc)(`${bt.name}.firestore`,"AngularFirestore",bt.name,()=>{const Tt=g.runOutsideAngular(()=>bt.firestore());if(l&&Tt.settings(l),lt&&Tt.useEmulator(...lt),i&&!Xn(c)){const Ot=()=>{try{return(0,On.D)(Tt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(tn){return typeof console<"u"&&console.warn(tn),In(!1)}};return[Tt,g.runOutsideAngular(Ot)]}return[Tt,In(!1)]},[l,lt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:c}=yy(i,r),g=this.schedulers.ngZone.run(()=>l);return new Rn(g,c,this)}collectionGroup(t,r){const i=r||(c=>c),l=this.firestore.collectionGroup(t);return new bb(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Lu(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hr.Dh),f.LFG(hr.xv,8),f.LFG(gy,8),f.LFG(wb,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(xn.HU),f.LFG(my,8),f.LFG(Eb,8),f.LFG(k,8),f.LFG(u,8),f.LFG(d,8),f.LFG(p,8),f.LFG(_,8),f.LFG(w,8),f.LFG(D,8),f.LFG(vb,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Db=(()=>{class n{constructor(){o.Z.registerVersion("angularfire",xn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gy,useValue:!0},{provide:my,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[_y]}),n})(),DC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();class iS extends Xs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function sS(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const IC="inline",KE=["row","column","row-reverse","column-reverse"];function oS(n){let[e,t,r]=aS(n);return function GM(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,r)}function aS(n){n=n?.toLowerCase()??"";let[e,t,r]=n.split(" ");return KE.find(i=>i===e)||(e=KE[0]),t===IC&&(t=r!==IC?r:"",r=IC),[e,HM(t),!!r]}function xb(n){let[e]=aS(n);return e.indexOf("row")>-1}function HM(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function fd(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}var Cb=F(8505);const zM={provide:f.tb,useFactory:function $M(n,e){return()=>{if(vi(e)){const t=Array.from(n.querySelectorAll(`[class*=${lS}]`)),r=/\bflex-layout-.+?\b/g;t.forEach(i=>{i.classList.contains(`${lS}ssr`)&&i.parentNode?i.parentNode.removeChild(i):i.className.replace(r,"")})}}},deps:[ue,f.Lbi],multi:!0},lS="flex-layout-";let xC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[zM]}),n})();class Bp{constructor(e=!1,t="all",r="",i="",l=0){this.matches=e,this.mediaQuery=t,this.mqAlias=r,this.suffix=i,this.priority=l,this.property=""}clone(){return new Bp(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let qM=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,r,i){const l=this.stylesheet.get(t);l?l.set(r,i):this.stylesheet.set(t,new Map([[r,i]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,r){const i=this.stylesheet.get(t);let l="";if(i){const c=i.get(r);("number"==typeof c||"string"==typeof c)&&(l=c+"")}return l}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CC={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Ll=new f.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>CC}),vy=new f.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),AC=new f.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function uS(n,e){return n=n?.clone()??new Bp,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class Lr{constructor(){this.shouldCache=!0}sideEffect(e,t,r){}}let ir=(()=>{class n{constructor(t,r,i,l){this._serverStylesheet=t,this._serverModuleLoaded=r,this._platformId=i,this.layoutConfig=l}applyStyleToElement(t,r,i=null){let l={};"string"==typeof r&&(l[r]=i,r=l),l=this.layoutConfig.disableVendorPrefixes?r:sS(r),this._applyMultiValueStyleToElement(l,t)}applyStyleToElements(t,r=[]){const i=this.layoutConfig.disableVendorPrefixes?t:sS(t);r.forEach(l=>{this._applyMultiValueStyleToElement(i,l)})}getFlowDirection(t){const r="flex-direction";let i=this.lookupStyle(t,r);return[i||"row",this.lookupInlineStyle(t,r)||Xn(this._platformId)&&this._serverModuleLoaded?i:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,r){return t.getAttribute(r)??""}lookupInlineStyle(t,r){return vi(this._platformId)?t.style.getPropertyValue(r):function WM(n,e){return cS(n)[e]??""}(t,r)}lookupStyle(t,r,i=!1){let l="";return t&&((l=this.lookupInlineStyle(t,r))||(vi(this._platformId)?i||(l=getComputedStyle(t).getPropertyValue(r)):this._serverModuleLoaded&&(l=this._serverStylesheet.getStyleForElement(t,r)))),l?l.trim():""}_applyMultiValueStyleToElement(t,r){Object.keys(t).sort().forEach(i=>{const l=t[i],c=Array.isArray(l)?l:[l];c.sort();for(let g of c)g=g?g+"":"",vi(this._platformId)||!this._serverModuleLoaded?vi(this._platformId)?r.style.setProperty(i,g):KM(r,i,g):this._serverStylesheet.addStyleToElement(r,i,g)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qM),f.LFG(vy),f.LFG(f.Lbi),f.LFG(Ll))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KM(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=cS(n);r[e]=t??"",function ZM(n,e){let t="";for(const r in e)e[r]&&(t+=`${r}:${e[r]};`);n.setAttribute("style",t)}(n,r)}function cS(n){const e={},t=n.getAttribute("style");if(t){const r=t.split(/;+/g);for(let i=0;i<r.length;i++){const l=r[i].trim();if(l.length>0){const c=l.indexOf(":");if(-1===c)throw new Error(`Invalid CSS style: ${l}`);e[l.substr(0,c).trim()]=l.substr(c+1).trim()}}}return e}function Ab(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function YM(n,e){return(n.priority||0)-(e.priority||0)}let SC=(()=>{class n{constructor(t,r,i){this._zone=t,this._platformId=r,this._document=i,this.source=new iS(new Bp(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((r,i)=>{r.matches&&t.push(i)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(i=>i.matches)}observe(t,r=!1){if(t&&t.length){const i=this._observable$.pipe(dr(c=>!r||t.indexOf(c.mediaQuery)>-1)),l=new ur.y(c=>{const g=this.registerQuery(t);if(g.length){const v=g.pop();g.forEach(E=>{c.next(E)}),this.source.next(v)}c.complete()});return(0,iy.T)(l,i)}return this._observable$}registerQuery(t){const r=Array.isArray(t)?t:[t],i=[];return function QM(n,e){const t=n.filter(r=>!dS[r]);if(t.length>0){const r=t.join(", ");try{const i=e.createElement("style");i.setAttribute("type","text/css"),i.styleSheet||i.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${r} {.fx-query-test{ }}\n`)),e.head.appendChild(i),t.forEach(l=>dS[l]=i)}catch(i){console.error(i)}}}(r,this._document),r.forEach(l=>{const c=v=>{this._zone.run(()=>this.source.next(new Bp(v.matches,l)))};let g=this.registry.get(l);g||(g=this.buildMQL(l),g.addListener(c),this.pendingRemoveListenerFns.push(()=>g.removeListener(c)),this.registry.set(l,g)),g.matches&&i.push(new Bp(!0,l))}),i}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function XM(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,vi(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(f.Lbi),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dS={},JM=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],hS="(orientation: portrait) and (max-width: 599.98px)",fS="(orientation: landscape) and (max-width: 959.98px)",pS="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",gS="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",mS="(orientation: portrait) and (min-width: 840px)",yS="(orientation: landscape) and (min-width: 1280px)",pd={HANDSET:`${hS}, ${fS}`,TABLET:`${pS} , ${gS}`,WEB:`${mS}, ${yS} `,HANDSET_PORTRAIT:`${hS}`,TABLET_PORTRAIT:`${pS} `,WEB_PORTRAIT:`${mS}`,HANDSET_LANDSCAPE:`${fS}`,TABLET_LANDSCAPE:`${gS}`,WEB_LANDSCAPE:`${yS}`},eR=[{alias:"handset",priority:2e3,mediaQuery:pd.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:pd.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:pd.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:pd.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:pd.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:pd.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:pd.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:pd.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:pd.WEB_PORTRAIT,overlapping:!0}],tR=/(\.|-|_)/g;function nR(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const oR=new f.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=(0,f.f3M)(AC),e=(0,f.f3M)(Ll),t=[].concat.apply([],(n||[]).map(i=>Array.isArray(i)?i:[i]));return function sR(n,e=[]){const t={};return n.forEach(r=>{t[r.alias]=r}),e.forEach(r=>{t[r.alias]?fd(t[r.alias],r):t[r.alias]=r}),function iR(n){return n.forEach(e=>{e.suffix||(e.suffix=function rR(n){return n.replace(tR,"|").split("|").map(nR).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(r=>t[r]))}((e.disableDefaultBps?[]:JM).concat(e.addOrientationBps?eR:[]),t)}});let TC=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(YM)}findByAlias(t){return t?this.findWithPredicate(t,r=>r.alias===t):null}findByQuery(t){return this.findWithPredicate(t,r=>r.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,r){let i=this.findByMap.get(t);return i||(i=this.items.find(r)??null,this.findByMap.set(t,i)),i??null}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oR))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const by="print",aR={alias:by,mediaQuery:by,priority:1e3};let lR=(()=>{class n{constructor(t,r,i){this.breakpoints=t,this.layoutConfig=r,this._document=i,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new uR,this.deactivations=[]}withPrintQuery(t){return[...t,by]}isPrintEvent(t){return t.mediaQuery.startsWith(by)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const r=this.breakpoints.findByQuery(t);return(r?[...this.printBreakPoints,r]:this.printBreakPoints).sort(Ab)}updateEvent(t){let r=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(r=this.getEventBreakpoints(t)[0],t.mediaQuery=r?.mediaQuery??""),uS(t,r)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const r=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new Bp(!0,by))),t.updateStyles())},i=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",r),this._document.defaultView.addEventListener("afterprint",i),this.beforePrintEventListeners.push(r),this.afterPrintEventListeners.push(i)}interceptEvents(t){return r=>{this.isPrintEvent(r)?r.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(r)),t.updateStyles()):!r.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,r)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,r){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(r)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,r){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!r.matches){const i=this.breakpoints.findByQuery(r.mediaQuery);if(i){const l=this.formerActivations&&this.formerActivations.includes(i),c=!this.formerActivations&&t.activatedBreakpoints.includes(i);(l||c)&&(this.deactivations.push(i),this.deactivations.sort(Ab))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(TC),f.LFG(Ll),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uR{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(aR),e.sort(Ab),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(r=>r.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function cR(n){return n?.mediaQuery.startsWith(by)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let mr=(()=>{class n{constructor(t,r,i){this.matchMedia=t,this.breakpoints=r,this.hook=i,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new Xs.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const r=this.findByQuery(t.mediaQuery);if(r){t=uS(t,r);const i=this.activatedBreakpoints.indexOf(r);t.matches&&-1===i?(this._activatedBreakpoints.push(r),this._activatedBreakpoints.sort(Ab),this.updateStyles()):!t.matches&&-1!==i&&(this._activatedBreakpoints.splice(i,1),this._activatedBreakpoints.sort(Ab),this.updateStyles())}}init(t,r,i,l,c=[]){_S(this.updateMap,t,r,i),_S(this.clearMap,t,r,l),this.buildElementKeyMap(t,r),this.watchExtraTriggers(t,r,c)}getValue(t,r,i){const l=this.elementMap.get(t);if(l){const c=void 0!==i?l.get(i):this.getActivatedValues(l,r);if(c)return c.get(r)}}hasValue(t,r){const i=this.elementMap.get(t);if(i){const l=this.getActivatedValues(i,r);if(l)return void 0!==l.get(r)||!1}return!1}setValue(t,r,i,l){let c=this.elementMap.get(t);if(c){const v=(c.get(l)??new Map).set(r,i);c.set(l,v),this.elementMap.set(t,c)}else c=(new Map).set(l,(new Map).set(r,i)),this.elementMap.set(t,c);const g=this.getValue(t,r);void 0!==g&&this.updateElement(t,r,g)}trackValue(t,r){return this.subject.asObservable().pipe(dr(i=>i.element===t&&i.key===r))}updateStyles(){this.elementMap.forEach((t,r)=>{const i=new Set(this.elementKeyMap.get(r));let l=this.getActivatedValues(t);l&&l.forEach((c,g)=>{this.updateElement(r,g,c),i.delete(g)}),i.forEach(c=>{if(l=this.getActivatedValues(t,c),l){const g=l.get(c);this.updateElement(r,c,g)}else this.clearElement(r,c)})})}clearElement(t,r){const i=this.clearMap.get(t);if(i){const l=i.get(r);l&&(l(),this.subject.next({element:t,key:r,value:""}))}}updateElement(t,r,i){const l=this.updateMap.get(t);if(l){const c=l.get(r);c&&(c(i),this.subject.next({element:t,key:r,value:i}))}}releaseElement(t){const r=this.watcherMap.get(t);r&&(r.forEach(l=>l.unsubscribe()),this.watcherMap.delete(t));const i=this.elementMap.get(t);i&&(i.forEach((l,c)=>i.delete(c)),this.elementMap.delete(t))}triggerUpdate(t,r){const i=this.elementMap.get(t);if(i){const l=this.getActivatedValues(i,r);l&&(r?this.updateElement(t,r,l.get(r)):l.forEach((c,g)=>this.updateElement(t,g,c)))}}buildElementKeyMap(t,r){let i=this.elementKeyMap.get(t);i||(i=new Set,this.elementKeyMap.set(t,i)),i.add(r)}watchExtraTriggers(t,r,i){if(i&&i.length){let l=this.watcherMap.get(t);if(l||(l=new Map,this.watcherMap.set(t,l)),!l.get(r)){const g=(0,iy.T)(...i).subscribe(()=>{const v=this.getValue(t,r);this.updateElement(t,r,v)});l.set(r,g)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,r){for(let l=0;l<this.activatedBreakpoints.length;l++){const g=t.get(this.activatedBreakpoints[l].alias);if(g&&(void 0===r||g.has(r)&&null!=g.get(r)))return g}if(!this._useFallbacks)return;const i=t.get("");return void 0===r||i&&i.has(r)?i:void 0}observeActivations(){const t=this.breakpoints.items.map(r=>r.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe((0,Cb.b)(this.hook.interceptEvents(this)),dr(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(SC),f.LFG(TC),f.LFG(lR))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _S(n,e,t,r){if(void 0!==r){const i=n.get(e)??new Map;i.set(t,r),n.set(e,i)}}let Cr=(()=>{class n{constructor(t,r,i,l){this.elementRef=t,this.styleBuilder=r,this.styler=i,this.marshal=l,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new Xs.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(r=>{if(-1!==this.inputs.indexOf(r)){const i=r.split(".").slice(1).join(".");this.setValue(t[r].currentValue,i)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,r){const i=this.styleBuilder,l=i.shouldCache;let c=this.styleCache.get(t);(!c||!l)&&(c=i.buildStyles(t,r),l&&this.styleCache.set(t,c)),this.mru={...c},this.applyStyleToElement(c),i.sideEffect(t,c,r)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,r=!1){if(t){const[i,l]=this.styler.getFlowDirection(t);if(!l&&r){const c=oS(i);this.styler.applyStyleToElements(c,[t])}return i.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,r,i=this.nativeElement){this.styler.applyStyleToElement(i,t,r)}setValue(t,r){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,r)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(Lr),f.Y36(ir),f.Y36(mr))},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();function vS(n,e="1",t="1"){let r=[e,t,n],i=n.indexOf("calc");if(i>0){r[2]=bS(n.substring(i).trim());let l=n.substr(0,i).trim().split(" ");2==l.length&&(r[0]=l[0],r[1]=l[1])}else if(0==i)r[2]=bS(n.trim());else{let l=n.split(" ");r=3===l.length?l:[e,t,n]}return r}function bS(n){return n.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}var MC=F(5032);function Qh(n){return(0,cr.e)((e,t)=>{(0,dd.Xf)(n).subscribe((0,Gn.x)(t,()=>t.complete(),MC.Z)),!t.closed&&e.subscribe(t)})}let fR=(()=>{class n extends Lr{buildStyles(t,{display:r}){const i=oS(t);return{...i,display:"none"===r?r:i.display}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pR=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let gR=(()=>{class n extends Cr{constructor(t,r,i,l,c){super(t,i,r,l),this._config=c,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const i=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=DS.get(i)??new Map,DS.set(i,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:i}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(ir),f.Y36(fR),f.Y36(mr),f.Y36(Ll))},n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})(),ES=(()=>{class n extends gR{constructor(){super(...arguments),this.inputs=pR}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[f.qOj]}),n})();const DS=new Map;let AR=(()=>{class n extends Lr{constructor(t){super(),this.layoutConfig=t}buildStyles(t,r){let[i,l,...c]=t.split(" "),g=c.join(" ");const v=r.direction.indexOf("column")>-1?"column":"row",E=xb(v)?"max-width":"max-height",S=xb(v)?"min-width":"min-height",R=String(g).indexOf("calc")>-1,V=R||"auto"===g,K=String(g).indexOf("%")>-1&&!R,Q=String(g).indexOf("px")>-1||String(g).indexOf("rem")>-1||String(g).indexOf("em")>-1||String(g).indexOf("vw")>-1||String(g).indexOf("vh")>-1;let ae=R||Q;i="0"==i?0:i,l="0"==l?0:l;const Te=!i&&!l;let Be={};const st={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(g||""){case"":const bt=!1!==this.layoutConfig.useColumnBasisZero;g="row"===v?"0%":bt?"0.000000001px":"auto";break;case"initial":case"nogrow":i=0,g="auto";break;case"grow":g="100%";break;case"noshrink":l=0,g="auto";break;case"auto":break;case"none":i=0,l=0,g="auto";break;default:!ae&&!K&&!isNaN(g)&&(g+="%"),"0%"===g&&(ae=!0),"0px"===g&&(g="0%"),Be=fd(st,R?{"flex-grow":i,"flex-shrink":l,"flex-basis":ae?g:"100%"}:{flex:`${i} ${l} ${ae?g:"100%"}`})}return Be.flex||Be["flex-grow"]||(Be=fd(st,R?{"flex-grow":i,"flex-shrink":l,"flex-basis":g}:{flex:`${i} ${l} ${g}`})),"0%"!==g&&"0px"!==g&&"0.000000001px"!==g&&"auto"!==g&&(Be[S]=Te||ae&&i?g:null,Be[E]=Te||!V&&l?g:null),Be[S]||Be[E]?r.hasWrap&&(Be[R?"flex-basis":"flex"]=Be[E]?R?Be[E]:`${i} ${l} ${Be[E]}`:R?Be[S]:`${i} ${l} ${Be[S]}`):Be=fd(st,R?{"flex-grow":i,"flex-shrink":l,"flex-basis":g}:{flex:`${i} ${l} ${g}`}),fd(Be,{"box-sizing":"border-box"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ll))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SR=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let TR=(()=>{class n extends Cr{constructor(t,r,i,l,c){super(t,l,r,c),this.layoutConfig=i,this.marshal=c,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Qh(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Qh(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const i=t.value.split(" ");this.direction=i[0],this.wrap=void 0!==i[1]&&"wrap"===i[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const i=this.direction,l=i.startsWith("row"),c=this.wrap;l&&c?this.styleCache=kR:l&&!c?this.styleCache=MR:!l&&c?this.styleCache=OR:!l&&!c&&(this.styleCache=RR);const v=vS(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(v.join(" "),{direction:i,hasWrap:c})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const r=vS(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,r.join(" "))}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(ir),f.Y36(Ll),f.Y36(AR),f.Y36(mr))},n.\u0275dir=f.lG2({type:n,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[f.qOj]}),n})(),CS=(()=>{class n extends TR{constructor(){super(...arguments),this.inputs=SR}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[f.qOj]}),n})();const MR=new Map,RR=new Map,kR=new Map,OR=new Map;let nk=(()=>{class n extends Lr{buildStyles(t,r){const i={},[l,c]=t.split(" ");switch(l){case"center":i["justify-content"]="center";break;case"space-around":i["justify-content"]="space-around";break;case"space-between":i["justify-content"]="space-between";break;case"space-evenly":i["justify-content"]="space-evenly";break;case"end":case"flex-end":i["justify-content"]="flex-end";break;default:i["justify-content"]="flex-start"}switch(c){case"start":case"flex-start":i["align-items"]=i["align-content"]="flex-start";break;case"center":i["align-items"]=i["align-content"]="center";break;case"end":case"flex-end":i["align-items"]=i["align-content"]="flex-end";break;case"space-between":i["align-content"]="space-between",i["align-items"]="stretch";break;case"space-around":i["align-content"]="space-around",i["align-items"]="stretch";break;case"baseline":i["align-content"]="stretch",i["align-items"]="baseline";break;default:i["align-items"]=i["align-content"]="stretch"}return fd(i,{display:r.inline?"inline-flex":"flex","flex-direction":r.layout,"box-sizing":"border-box","max-width":"stretch"===c?xb(r.layout)?null:"100%":null,"max-height":"stretch"===c&&xb(r.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rk=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let ik=(()=>{class n extends Cr{constructor(t,r,i,l){super(t,i,r,l),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Qh(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const r=this.layout||"row",i=this.inline;"row"===r&&i?this.styleCache=uk:"row"!==r||i?"row-reverse"===r&&i?this.styleCache=dk:"row-reverse"!==r||i?"column"===r&&i?this.styleCache=ck:"column"!==r||i?"column-reverse"===r&&i?this.styleCache=hk:"column-reverse"===r&&!i&&(this.styleCache=lk):this.styleCache=ok:this.styleCache=ak:this.styleCache=sk,this.addStyles(t,{layout:r,inline:i})}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],this.inline=t.value.includes("inline"),KE.find(i=>i===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(ir),f.Y36(nk),f.Y36(mr))},n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})(),AS=(()=>{class n extends ik{constructor(){super(...arguments),this.inputs=rk}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[f.qOj]}),n})();const sk=new Map,ok=new Map,ak=new Map,lk=new Map,uk=new Map,ck=new Map,dk=new Map,hk=new Map;let RC,SS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[xC,DC]}),n})();try{RC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{RC=!1}let Sb,OC,Xh=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?vi(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!RC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kC(n){return function fk(){if(null==Sb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sb=!0}))}finally{Sb=Sb||!1}return Sb}()?n:!!n.capture}function MS(n){if(function pk(){if(null==OC){const n=typeof document<"u"?document.head:null;OC=!(!n||!n.createShadowRoot&&!n.attachShadow)}return OC}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Tb(n){return n.composedPath?n.composedPath()[0]:n.target}function RS(n){return dr((e,t)=>n<=t)}function Bl(n){return null!=n&&"false"!=`${n}`}function FC(n,e=0){return function wk(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function kS(n){return Array.isArray(n)?n:[n]}function Mb(n){return n instanceof f.SBq?n.nativeElement:n}let Ek=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Ek]}),n})();const{isArray:Ik}=Array,{getPrototypeOf:xk,prototype:Ck,keys:Ak}=Object;function OS(n){if(1===n.length){const e=n[0];if(Ik(e))return{args:e,keys:null};if(function Sk(n){return n&&"object"==typeof n&&xk(n)===Ck}(e)){const t=Ak(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Tk}=Array;function NC(n){return(0,$t.U)(e=>function Mk(n,e){return Tk(e)?n(...e):n(e)}(n,e))}function FS(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Rk=F(9672);function NS(n,e,t){n?(0,Rk.f)(t,n,e):e()}const PS=new Set;let Ey,Nk=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Lk}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Pk(n){if(!PS.has(n))try{Ey||(Ey=document.createElement("style"),Ey.setAttribute("type","text/css"),document.head.appendChild(Ey)),Ey.sheet&&(Ey.sheet.insertRule(`@media ${n} {body{ }}`,0),PS.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xh))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Lk(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Bk=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Xs.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return LS(kS(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let l=function kk(...n){const e=(0,pn.yG)(n),t=(0,pn.jO)(n),{args:r,keys:i}=OS(n);if(0===r.length)return(0,On.D)([],e);const l=new ur.y(function Ok(n,e,t=Bi.y){return r=>{NS(e,()=>{const{length:i}=n,l=new Array(i);let c=i,g=i;for(let v=0;v<i;v++)NS(e,()=>{const E=(0,On.D)(n[v],e);let S=!1;E.subscribe((0,Gn.x)(r,R=>{l[v]=R,S||(S=!0,g--),g||r.next(t(l.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>FS(i,c):Bi.y));return t?l.pipe(NC(t)):l}(LS(kS(t)).map(c=>this._registerQuery(c).observable));return l=Ls(l.pipe(Js(1)),l.pipe(RS(1),function Fk(n,e=oa.z){return(0,cr.e)((t,r)=>{let i=null,l=null,c=null;const g=()=>{if(i){i.unsubscribe(),i=null;const E=l;l=null,r.next(E)}};function v(){const E=c+n,S=e.now();if(S<E)return i=this.schedule(void 0,E-S),void r.add(i);g()}t.subscribe((0,Gn.x)(r,E=>{l=E,c=e.now(),i||(i=e.schedule(v,n),r.add(i))},()=>{g(),r.complete()},void 0,()=>{l=i=null}))})}(0))),l.pipe((0,$t.U)(c=>{const g={matches:!1,breakpoints:{}};return c.forEach(({matches:v,query:E})=>{g.matches=g.matches||v,g.breakpoints[E]=v}),g}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),l={observable:new ur.y(c=>{const g=v=>this._zone.run(()=>c.next(v));return r.addListener(g),()=>{r.removeListener(g)}}).pipe(Bs(r),(0,$t.U)(({matches:c})=>({query:t,matches:c})),Qh(this._destroySubject)),mql:r};return this._queries.set(t,l),l}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Nk),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LS(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function jS(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function HS(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const qk=new f.OlP("cdk-input-modality-detector-options"),Wk={ignoreKeys:[18,17,224,91,16]},Dy=kC({passive:!0,capture:!0});let Kk=(()=>{class n{constructor(t,r,i,l){this._platform=t,this._mostRecentTarget=null,this._modality=new iS(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(g=>g===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Tb(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(jS(c)?"keyboard":"mouse"),this._mostRecentTarget=Tb(c))},this._onTouchstart=c=>{HS(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Tb(c))},this._options={...Wk,...l},this.modalityDetected=this._modality.pipe(RS(1)),this.modalityChanged=this.modalityDetected.pipe(Ql()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Dy),i.addEventListener("mousedown",this._onMousedown,Dy),i.addEventListener("touchstart",this._onTouchstart,Dy)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Dy),document.removeEventListener("mousedown",this._onMousedown,Dy),document.removeEventListener("touchstart",this._onTouchstart,Dy))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xh),f.LFG(f.R0b),f.LFG(ue),f.LFG(qk,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yk=new f.OlP("cdk-focus-monitor-default-options"),XE=kC({passive:!0,capture:!0});let Qk=(()=>{class n{constructor(t,r,i,l,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Xs.x,this._rootNodeFocusAndBlurListener=g=>{for(let E=Tb(g);E;E=E.parentElement)"focus"===g.type?this._onFocus(g,E):this._onBlur(g,E)},this._document=l,this._detectionMode=c?.detectionMode||0}monitor(t,r=!1){const i=Mb(t);if(!this._platform.isBrowser||1!==i.nodeType)return In(null);const l=MS(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const g={checkChildren:r,subject:new Xs.x,rootNode:l};return this._elementInfo.set(i,g),this._registerGlobalListeners(g),g.subject}stopMonitoring(t){const r=Mb(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const l=Mb(t);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([g,v])=>this._originChanged(g,r,v)):(this._setOrigin(r),"function"==typeof l.focus&&l.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),l=Tb(t);!i||!i.checkChildren&&r!==l||this._originChanged(r,this._getFocusOrigin(l),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,XE),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,XE)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qh(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,XE),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,XE),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,l)=>{(l===t||i.checkChildren&&l.contains(t))&&r.push([l,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const l=t.labels;if(l)for(let c=0;c<l.length;c++)if(l[c].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(Xh),f.LFG(Kk),f.LFG(ue,8),f.LFG(Yk,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $S="cdk-high-contrast-black-on-white",zS="cdk-high-contrast-white-on-black",PC="cdk-high-contrast-active";let qS=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,f.f3M)(Bk).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,l=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(PC,$S,zS),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(PC,$S):2===r&&t.add(PC,zS)}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xh),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xk=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qS))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Dk]}),n})();const eO=new f.OlP("mat-sanity-checks",{providedIn:"root",factory:function Jk(){return!0}});let Wi=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function gk(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(qS),f.LFG(eO,8),f.LFG(ue))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[DC,DC]}),n})();function tO(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Bl(e)}}}function JE(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function nO(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Bl(e)}}}class iO{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ZS={enterDuration:225,exitDuration:150},LC=kC({passive:!0}),YS=["mousedown","touchstart"],QS=["mouseup","mouseleave","touchend","touchcancel"];class oO{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Mb(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l={...ZS,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function aO(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),g=e-i.left,v=t-i.top,E=l.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=g-c+"px",S.style.top=v-c+"px",S.style.height=2*c+"px",S.style.width=2*c+"px",null!=r.color&&(S.style.backgroundColor=r.color),S.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(S);const R=window.getComputedStyle(S),K=R.transitionDuration,Q="none"===R.transitionProperty||"0s"===K||"0s, 0s"===K,ae=new iO(this,S,r,Q);S.style.transform="scale3d(1, 1, 1)",ae.state=0,r.persistent||(this._mostRecentTransientRipple=ae);let Te=null;return!Q&&(E||l.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Be=()=>this._finishRippleTransition(ae),st=()=>this._destroyRipple(ae);S.addEventListener("transitionend",Be),S.addEventListener("transitioncancel",st),Te={onTransitionEnd:Be,onTransitionCancel:st}}),this._activeRipples.set(ae,Te),(Q||!E)&&this._finishRippleTransition(ae),ae}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...ZS,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Mb(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(YS))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(QS),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=jS(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!HS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,LC)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(YS.forEach(e=>{this._triggerElement.removeEventListener(e,this,LC)}),this._pointerUpEventsRegistered&&QS.forEach(e=>{this._triggerElement.removeEventListener(e,this,LC)}))}}const lO=new f.OlP("mat-ripple-global-options");let XS=(()=>{class n{constructor(t,r,i,l,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=l||{},this._rippleRenderer=new oO(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.R0b),f.Y36(Xh),f.Y36(lO,8),f.Y36(f.QbO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&f.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),uO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Wi,Wi]}),n})();const cO=["*",[["mat-toolbar-row"]]],dO=["*","mat-toolbar-row"],hO=JE(class{constructor(n){this._elementRef=n}});let fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),pO=(()=>{class n extends hO{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(Xh),f.Y36(ue))},n.\u0275cmp=f.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&f.Suo(i,fO,5),2&t){let l;f.iGM(l=f.CRH())&&(r._toolbarRows=l)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&f.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[f.qOj],ngContentSelectors:dO,decls:2,vars:0,template:function(t,r){1&t&&(f.F$t(cO),f.Hsn(0),f.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),gO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Wi,Wi]}),n})();function JS(n,e){const t=(0,Es.m)(n)?n:()=>n,r=i=>i.error(t());return new ur.y(e?i=>e.schedule(r,0,i):r)}var kb=F(727);function eT(n){return(0,cr.e)((e,t)=>{let l,r=null,i=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,c=>{l=(0,dd.Xf)(n(c,eT(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,l.subscribe(t))})}var eD=F(5577);class vO{}class Jh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),l=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(c):this.headers.set(l,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Jh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Jh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const l=e.value;if(l){let c=this.headers.get(t);if(!c)return;c=c.filter(g=>-1===l.indexOf(g)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class bO{encodeKey(e){return tT(e)}encodeValue(e){return tT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const EO=/%(\d[a-f0-9])/gi,DO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tT(n){return encodeURIComponent(n).replace(EO,(e,t)=>DO[t]??e)}function tD(n){return`${n}`}class ef{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bO,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wO(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[c,g]=-1==l?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,l)),e.decodeValue(i.slice(l+1))],v=t.get(c)||[];v.push(g),t.set(c,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(tD):[tD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ef({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(tD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class IO{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function nT(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function rT(n){return typeof Blob<"u"&&n instanceof Blob}function iT(n){return typeof FormData<"u"&&n instanceof FormData}class Ob{constructor(e,t,r,i){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xO(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Jh),this.context||(this.context=new IO),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+c}}else this.params=new ef,this.urlWithParams=t}serializeBody(){return null===this.body?null:nT(this.body)||rT(this.body)||iT(this.body)||function CO(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ef?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||iT(this.body)?null:rT(this.body)?this.body.type||null:nT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ef?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,E=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((R,V)=>R.set(V,e.setHeaders[V]),v)),e.setParams&&(E=Object.keys(e.setParams).reduce((R,V)=>R.set(V,e.setParams[V]),E)),new Ob(t,r,l,{params:E,headers:v,context:S,reportProgress:g,responseType:i,withCredentials:c})}}var Ti=(()=>((Ti=Ti||{})[Ti.Sent=0]="Sent",Ti[Ti.UploadProgress=1]="UploadProgress",Ti[Ti.ResponseHeader=2]="ResponseHeader",Ti[Ti.DownloadProgress=3]="DownloadProgress",Ti[Ti.Response=4]="Response",Ti[Ti.User=5]="User",Ti))();class BC extends class AO{constructor(e,t=200,r="OK"){this.headers=e.headers||new Jh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Ti.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new BC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function VC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let oT=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let l;if(t instanceof Ob)l=t;else{let v,E;v=i.headers instanceof Jh?i.headers:new Jh(i.headers),i.params&&(E=i.params instanceof ef?i.params:new ef({fromObject:i.params})),l=new Ob(t,r,void 0!==i.body?i.body:null,{headers:v,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=In(l).pipe(function _O(n,e){return(0,Es.m)(e)?(0,eD.z)(n,e,1):(0,eD.z)(n,1)}(v=>this.handler.handle(v)));if(t instanceof Ob||"events"===i.observe)return c;const g=c.pipe(dr(v=>v instanceof BC));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return g.pipe((0,$t.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return g.pipe((0,$t.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return g.pipe((0,$t.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return g.pipe((0,$t.U)(v=>v.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ef).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,VC(i,r))}post(t,r,i={}){return this.request("POST",t,VC(i,r))}put(t,r,i={}){return this.request("PUT",t,VC(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vO))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const TO=["*"];let nD;function Fb(n){return function MO(){if(void 0===nD&&(nD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(nD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return nD}()?.createHTML(n)||n}function aT(n){return Error(`Unable to find icon with the name "${n}"`)}function lT(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function uT(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Up{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let rD=(()=>{class n{constructor(t,r,i,l){this._httpClient=t,this._sanitizer=r,this._errorHandler=l,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,l){return this._addSvgIconConfig(t,r,new Up(i,null,l))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,l){const c=this._sanitizer.sanitize(f.q3G.HTML,i);if(!c)throw uT(i);const g=Fb(c);return this._addSvgIconConfig(t,r,new Up("",g,l))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Up(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const l=this._sanitizer.sanitize(f.q3G.HTML,r);if(!l)throw uT(r);const c=Fb(l);return this._addSvgIconSetConfig(t,new Up("",c,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(f.q3G.RESOURCE_URL,t);if(!r)throw lT(t);const i=this._cachedIconsByUrl.get(r);return i?In(iD(i)):this._loadSvgIconFromConfig(new Up(t,null)).pipe((0,Cb.b)(l=>this._cachedIconsByUrl.set(r,l)),(0,$t.U)(l=>iD(l)))}getNamedSvgIcon(t,r=""){const i=cT(r,t);let l=this._svgIconConfigs.get(i);if(l)return this._getSvgFromConfig(l);if(l=this._getIconConfigFromResolvers(r,t),l)return this._svgIconConfigs.set(i,l),this._getSvgFromConfig(l);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(t,c):JS(aT(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?In(iD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,$t.U)(r=>iD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?In(i):function mO(...n){const e=(0,pn.jO)(n),{args:t,keys:r}=OS(n),i=new ur.y(l=>{const{length:c}=t;if(!c)return void l.complete();const g=new Array(c);let v=c,E=c;for(let S=0;S<c;S++){let R=!1;(0,dd.Xf)(t[S]).subscribe((0,Gn.x)(l,V=>{R||(R=!0,E--),g[S]=V},()=>v--,void 0,()=>{(!v||!R)&&(E||l.next(r?FS(r,g):g),l.complete())}))}});return e?i.pipe(NC(e)):i}(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(eT(g=>{const E=`Loading icon set URL: ${this._sanitizer.sanitize(f.q3G.RESOURCE_URL,c.url)} failed: ${g.message}`;return this._errorHandler.handleError(new Error(E)),In(null)})))).pipe((0,$t.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,r);if(!c)throw aT(t);return c}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const l=r[i];if(l.svgText&&l.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(l),g=this._extractSvgIconFromSet(c,t,l.options);if(g)return g}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Cb.b)(r=>t.svgText=r),(0,$t.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?In(null):this._fetchIcon(t).pipe((0,Cb.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const l=t.querySelector(`[id="${r}"]`);if(!l)return null;const c=l.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const g=this._svgElementFromString(Fb("<svg></svg>"));return g.appendChild(c),this._setSvgAttributes(g,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Fb("<svg></svg>")),i=t.attributes;for(let l=0;l<i.length;l++){const{name:c,value:g}=i[l];"id"!==c&&r.setAttribute(c,g)}for(let l=0;l<t.childNodes.length;l++)t.childNodes[l].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[l].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,l=i?.withCredentials??!1;if(!this._httpClient)throw function RO(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(f.q3G.RESOURCE_URL,r);if(!c)throw lT(r);const g=this._inProgressUrlFetches.get(c);if(g)return g;const v=this._httpClient.get(c,{responseType:"text",withCredentials:l}).pipe((0,$t.U)(E=>Fb(E)),function yO(n){return(0,cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(c)),(0,kp.B)());return this._inProgressUrlFetches.set(c,v),v}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(cT(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const l=this._resolvers[i](r,t);if(l)return OO(l)?new Up(l.url,null,l.options):new Up(l,null)}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oT,8),f.LFG(as),f.LFG(ue,8),f.LFG(f.qLn))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iD(n){return n.cloneNode(!0)}function cT(n,e){return n+":"+e}function OO(n){return!(!n.url||!n.options)}const FO=JE(class{constructor(n){this._elementRef=n}}),NO=new f.OlP("MAT_ICON_DEFAULT_OPTIONS"),PO=new f.OlP("mat-icon-location",{providedIn:"root",factory:function LO(){const n=(0,f.f3M)(ue),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),dT=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],BO=dT.map(n=>`[${n}]`).join(", "),VO=/^url\(['"]?#(.*?)['"]?\)$/;let UO=(()=>{class n extends FO{constructor(t,r,i,l,c,g){super(t),this._iconRegistry=r,this._location=l,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=kb.w0.EMPTY,g&&(g.color&&(this.color=this.defaultColor=g.color),g.fontSet&&(this.fontSet=g.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Bl(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,l)=>{i.forEach(c=>{l.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(BO),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let l=0;l<r.length;l++)dT.forEach(c=>{const g=r[l],v=g.getAttribute(c),E=v?v.match(VO):null;if(E){let S=i.get(g);S||(S=[],i.set(g,S)),S.push({name:c,value:E[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Js(1)).subscribe(l=>this._setSvgElement(l),l=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${l.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(rD),f.$8M("aria-hidden"),f.Y36(PO),f.Y36(f.qLn),f.Y36(NO,8))},n.\u0275cmp=f.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(f.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),f.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[f.qOj],ngContentSelectors:TO,decls:1,vars:0,template:function(t,r){1&t&&(f.F$t(),f.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),jO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Wi,Wi]}),n})();const HO=["*",[["mat-card-footer"]]],GO=["*","mat-card-footer"];let $O=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.QbO,8))},n.\u0275cmp=f.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&f.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:GO,decls:2,vars:0,template:function(t,r){1&t&&(f.F$t(HO),f.Hsn(0),f.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),zO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Wi,Wi]}),n})();const qO=["mat-button",""],WO=["*"],ZO=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],YO=JE(tO(nO(class{constructor(n){this._elementRef=n}})));let QO=(()=>{class n extends YO{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const l of ZO)this._hasHostAttributes(l)&&this._getHostElement().classList.add(l);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(Qk),f.Y36(f.QbO,8))},n.\u0275cmp=f.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&f.Gf(XS,5),2&t){let i;f.iGM(i=f.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(f.uIk("disabled",r.disabled||null),f.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[f.qOj],attrs:qO,ngContentSelectors:WO,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(f.F$t(),f.TgZ(0,"span",0),f.Hsn(1),f.qZA(),f._UZ(2,"span",1)(3,"span",2)),2&t&&(f.xp6(2),f.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),f.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[XS],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[uO,Wi,Wi]}),n})();var hT=F(4408);const Nb={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Nb;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(l=>{t=void 0,n(l)});return new kb.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Nb;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Nb;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var fT=F(7565);new class eF extends fT.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class JO extends hT.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Nb.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Nb.cancelAnimationFrame(t),e._scheduled=void 0)}});let UC,nF=1;const sD={};function pT(n){return n in sD&&(delete sD[n],!0)}const rF={setImmediate(n){const e=nF++;return sD[e]=!0,UC||(UC=Promise.resolve()),UC.then(()=>pT(e)&&n()),e},clearImmediate(n){pT(n)}},{setImmediate:iF,clearImmediate:sF}=rF,oD={setImmediate(...n){const{delegate:e}=oD;return(e?.setImmediate||iF)(...n)},clearImmediate(n){const{delegate:e}=oD;return(e?.clearImmediate||sF)(n)},delegate:void 0};new class aF extends fT.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class oF extends hT.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=oD.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(oD.clearImmediate(t),e._scheduled=void 0)}});var cF=F(3532);function gT(n=0,e,t=oa.P){let r=-1;return null!=e&&((0,cF.K)(e)?t=e:r=e),new ur.y(i=>{let l=function dF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;l<0&&(l=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},l)})}let pF=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Xs.x,this._changeListener=l=>{this._change.next(l)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,l=i.getBoundingClientRect();return{top:-l.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-l.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function hF(n,e=oa.z){return function uF(n){return(0,cr.e)((e,t)=>{let r=!1,i=null,l=null,c=!1;const g=()=>{if(l?.unsubscribe(),l=null,r){r=!1;const E=i;i=null,t.next(E)}c&&t.complete()},v=()=>{l=null,c&&t.complete()};e.subscribe((0,Gn.x)(t,E=>{r=!0,i=E,l||(0,dd.Xf)(n(E)).subscribe(l=(0,Gn.x)(t,g,v))},()=>{c=!0,(!r||!l||l.closed)&&t.complete()}))})}(()=>gT(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xh),f.LFG(f.R0b),f.LFG(ue,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gF(n,e){if(1&n&&(f.O4$(),f._UZ(0,"circle",4)),2&n){const t=f.oxw(),r=f.MAs(1);f.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),f.uIk("r",t._getCircleRadius())}}function mF(n,e){if(1&n&&(f.O4$(),f._UZ(0,"circle",4)),2&n){const t=f.oxw(),r=f.MAs(1);f.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),f.uIk("r",t._getCircleRadius())}}const _F=JE(class{constructor(n){this._elementRef=n}},"primary"),vF=new f.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function bF(){return{diameter:100}}});class gd extends _F{constructor(e,t,r,i,l,c,g,v){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=kb.w0.EMPTY,this.mode="determinate";const E=gd._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),E.has(r.head)||E.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!l&&!l._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),l&&(l.color&&(this.color=this.defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth)),t.isBrowser&&t.SAFARI&&g&&c&&v&&(this._resizeSubscription=g.change(150).subscribe(()=>{"indeterminate"===this.mode&&v.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=FC(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=FC(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,FC(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=MS(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=gd._diameters;let i=r.get(e);if(!i||!i.has(t)){const l=this._document.createElement("style");l.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),l.textContent=this._getAnimationText(),e.appendChild(l),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}gd._diameters=new WeakMap,gd.\u0275fac=function(e){return new(e||gd)(f.Y36(f.SBq),f.Y36(Xh),f.Y36(ue,8),f.Y36(f.QbO,8),f.Y36(vF),f.Y36(f.sBO),f.Y36(pF),f.Y36(f.R0b))},gd.\u0275cmp=f.Xpm({type:gd,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(f.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),f.Udp("width",t.diameter,"px")("height",t.diameter,"px"),f.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[f.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(f.O4$(),f.TgZ(0,"svg",0,1),f.YNc(2,gF,1,11,"circle",2),f.YNc(3,mF,1,9,"circle",3),f.qZA()),2&e&&(f.Udp("width",t.diameter,"px")("height",t.diameter,"px"),f.Q6J("ngSwitch","indeterminate"===t.mode),f.uIk("viewBox",t._getViewBox()),f.xp6(2),f.Q6J("ngSwitchCase",!0),f.xp6(1),f.Q6J("ngSwitchCase",!1))},dependencies:[Go,ei],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let EF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Wi,Ko,Wi]}),n})();function DF(n,e){1&n&&(f.TgZ(0,"div",6)(1,"div",7),f._UZ(2,"mat-progress-spinner",8),f.qZA()())}function IF(n,e){if(1&n&&(f.TgZ(0,"a",9),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("href","#"+t.name,f.LSH),f.xp6(1),f.hij("| ",t.name," |")}}function xF(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",13)(1,"mat-icon",14),f.NdJ("click",function(){const l=f.CHM(t).$implicit,c=f.oxw().$implicit,g=f.oxw();return f.KtG(g.dec(l,c))}),f.qZA(),f._uU(2),f.TgZ(3,"mat-icon",15),f.NdJ("click",function(){const l=f.CHM(t).$implicit,c=f.oxw().$implicit,g=f.oxw();return f.KtG(g.inc(l,c))}),f.qZA()()}if(2&n){const t=e.$implicit,r=f.oxw().$implicit,i=f.oxw();f.Q6J("color",0==i.getQtd(t,r)?"warn":1==i.getQtd(t,r)?"success":"primary"),f.xp6(2),f.AsE(" ",t,": ",i.getQtd(t,r)," ")}}function CF(n,e){if(1&n&&(f.TgZ(0,"mat-card",10)(1,"button",11),f._uU(2),f.qZA(),f.YNc(3,xF,4,3,"button",12),f.qZA()),2&n){const t=e.$implicit,r=f.oxw();f.Q6J("id",t.name),f.xp6(2),f.AsE("",t.name," ",r.showvars(t),""),f.xp6(1),f.Q6J("ngForOf",t.stickers)}}let AF=(()=>{class n{constructor(t){this.firestore=t,this.showspiner=!1,this.title="copa",this.item$=t.collection("copa",r=>r.orderBy("order")).valueChanges(),this.itemA$=t.collection("copa",r=>r.orderBy("name")).valueChanges()}adddocs(){}getQtd(t,r){let i=r.stickers.indexOf(t);return r.qtds[i]}inc(t,r){this.showspiner=!0;let i=r.stickers.indexOf(t);r.qtds[i]++,this.firestore.doc("copa/"+r.name).update(r),this.showspiner=!1}dec(t,r){this.showspiner=!0;let i=r.stickers.indexOf(t);r.qtds[i]>0&&(r.qtds[i]--,this.firestore.doc("copa/"+r.name).update(r)),this.showspiner=!1}showvars(t){return console.log(JSON.stringify(t)),""}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_y))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:7,consts:[["color","primary"],["class","overlay",4,"ngIf"],[1,"container-wrapper"],[3,"href",4,"ngFor","ngForOf"],[1,"container"],["fxLayout","row wrap","fxLayoutAlign","space-between",3,"id",4,"ngFor","ngForOf"],[1,"overlay"],[1,"center"],["diameter","50","mode","indeterminate","color","primary"],[3,"href"],["fxLayout","row wrap","fxLayoutAlign","space-between",3,"id"],["mat-button","","color","basic","fxFlex","0 1 calc(16%)","fxFlex.lt-md","0 1 calc(25%)","fxFlex.lt-sm","0 1 calc(50%)","fxFlex.lt-xs","0 1 calc(50%)"],["mat-raised-button","","fxFlex","0 1 calc(16%)","fxFlex.lt-md","0 1 calc(25%)","fxFlex.lt-sm","0 1 calc(50%)","fxFlex.lt-xs","0 1 calc(50%)",3,"color",4,"ngFor","ngForOf"],["mat-raised-button","","fxFlex","0 1 calc(16%)","fxFlex.lt-md","0 1 calc(25%)","fxFlex.lt-sm","0 1 calc(50%)","fxFlex.lt-xs","0 1 calc(50%)",3,"color"],["aria-hidden","true","fontIcon","do_not_disturb_on",3,"click"],["aria-hidden","true","fontIcon","add_circle",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"mat-toolbar",0)(1,"mat-icon"),f._uU(2,"local_fire_department"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Copa 2022"),f.qZA()(),f.YNc(5,DF,3,0,"div",1),f.TgZ(6,"div",2),f.YNc(7,IF,2,2,"a",3),f.ALo(8,"async"),f.TgZ(9,"div",4),f.YNc(10,CF,4,4,"mat-card",5),f.ALo(11,"async"),f.qZA()()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.showspiner),f.xp6(2),f.Q6J("ngForOf",f.lcZ(8,3,r.itemA$)),f.xp6(3),f.Q6J("ngForOf",f.lcZ(11,5,r.item$)))},dependencies:[Xi,Vr,ES,AS,CS,pO,UO,$O,QO,gd,Gu],styles:[".mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}body[_ngcontent-%COMP%]{margin:0}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%) translateY(-50%)}.overlay[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#00000049;z-index:10;top:0;left:0;position:fixed}"]}),n})(),wT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[xC]}),n})(),TT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[xC]}),n})(),fP=(()=>{class n{constructor(t,r){Xn(r)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,r=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Ll,useValue:{...CC,...t}},{provide:AC,useValue:r,multi:!0},{provide:vy,useValue:!0}]:[{provide:Ll,useValue:{...CC,...t}},{provide:AC,useValue:r,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vy),f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[SS,wT,TT,SS,wT,TT]}),n})();class MT{}const md="*";function RT(n,e=null){return{type:2,steps:n,options:e}}function kT(n){return{type:6,styles:n,offset:null}}function OT(n){Promise.resolve(null).then(n)}class Pb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){OT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class FT{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const l=this.players.length;0==l?OT(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==l&&this._onFinish()}),c.onDestroy(()=>{++r==l&&this._onDestroy()}),c.onStart(()=>{++i==l&&this._onStart()})}),this.totalTime=this.players.reduce((c,g)=>Math.max(c,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function NT(n){return new f.vHH(3e3,!1)}function ZP(){return typeof window<"u"&&typeof window.document<"u"}function $C(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function tf(n){switch(n.length){case 0:return new Pb;case 1:return n[0];default:return new FT(n)}}function PT(n,e,t,r,i=new Map,l=new Map){const c=[],g=[];let v=-1,E=null;if(r.forEach(S=>{const R=S.get("offset"),V=R==v,K=V&&E||new Map;S.forEach((Q,ae)=>{let Te=ae,Be=Q;if("offset"!==ae)switch(Te=e.normalizePropertyName(Te,c),Be){case"!":Be=i.get(ae);break;case md:Be=l.get(ae);break;default:Be=e.normalizeStyleValue(ae,Te,Be,c)}K.set(Te,Be)}),V||g.push(K),E=K,v=R}),c.length)throw function LP(n){return new f.vHH(3502,!1)}();return g}function zC(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&qC(t,"start",n)));break;case"done":n.onDone(()=>r(t&&qC(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&qC(t,"destroy",n)))}}function qC(n,e,t){const l=WC(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(l._data=c),l}function WC(n,e,t,r,i="",l=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:l,disabled:!!c}}function Fo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function LT(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let KC=(n,e)=>!1,BT=(n,e,t)=>[],VT=null;function ZC(n){const e=n.parentNode||n.host;return e===VT?null:e}($C()||typeof Element<"u")&&(ZP()?(VT=(()=>document.documentElement)(),KC=(n,e)=>{for(;e;){if(e===n)return!0;e=ZC(e)}return!1}):KC=(n,e)=>n.contains(e),BT=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let jp=null,UT=!1;const jT=KC,HT=BT;let GT=(()=>{class n{validateStyleProperty(t){return function QP(n){jp||(jp=function XP(){return typeof document<"u"?document.body:null}()||{},UT=!!jp.style&&"WebkitAppearance"in jp.style);let e=!0;return jp.style&&!function YP(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in jp.style,!e&&UT&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in jp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return jT(t,r)}getParentElement(t){return ZC(t)}query(t,r,i){return HT(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,l,c,g=[],v){return new Pb(i,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),YC=(()=>{class n{}return n.NOOP=new GT,n})();const QC="ng-enter",aD="ng-leave",lD="ng-trigger",uD=".ng-trigger",zT="ng-animating",XC=".ng-animating";function nf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:JC(parseFloat(e[1]),e[2])}function JC(n,e){return"s"===e?1e3*n:n}function cD(n,e,t){return n.hasOwnProperty("duration")?n:function t1(n,e,t){let i,l=0,c="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(NT()),{duration:0,delay:0,easing:""};i=JC(parseFloat(g[1]),g[2]);const v=g[3];null!=v&&(l=JC(parseFloat(v),g[4]));const E=g[5];E&&(c=E)}else i=n;if(!t){let g=!1,v=e.length;i<0&&(e.push(function gP(){return new f.vHH(3100,!1)}()),g=!0),l<0&&(e.push(function mP(){return new f.vHH(3101,!1)}()),g=!0),g&&e.splice(v,0,NT())}return{duration:i,delay:l,easing:c}}(n,e,t)}function Lb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function qT(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function rf(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function KT(n,e,t){return t?e+":"+t+";":""}function ZT(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=KT(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=KT(0,o1(t),n.style[t]));n.setAttribute("style",e)}function Bu(n,e,t){n.style&&(e.forEach((r,i)=>{const l=tA(i);t&&!t.has(i)&&t.set(i,n.style[l]),n.style[l]=r}),$C()&&ZT(n))}function Hp(n,e){n.style&&(e.forEach((t,r)=>{const i=tA(r);n.style[i]=""}),$C()&&ZT(n))}function Bb(n){return Array.isArray(n)?1==n.length?n[0]:RT(n):n}const eA=new RegExp("{{\\s*(.+?)\\s*}}","g");function YT(n){let e=[];if("string"==typeof n){let t;for(;t=eA.exec(n);)e.push(t[1]);eA.lastIndex=0}return e}function dD(n,e,t){const r=n.toString(),i=r.replace(eA,(l,c)=>{let g=e[c];return null==g&&(t.push(function _P(n){return new f.vHH(3003,!1)}()),g=""),g.toString()});return i==r?n:i}function hD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const s1=/-+([a-z0-9])/g;function tA(n){return n.replace(s1,(...e)=>e[1].toUpperCase())}function o1(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function No(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function vP(n){return new f.vHH(3004,!1)}()}}function QT(n,e){return window.getComputedStyle(n)[e]}function h1(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function f1(n,e,t){if(":"==n[0]){const v=function p1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function OP(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function kP(n){return new f.vHH(3015,!1)}()),e;const i=r[1],l=r[2],c=r[3];e.push(XT(i,c));"<"==l[0]&&!("*"==i&&"*"==c)&&e.push(XT(c,i))}(r,t,e)):t.push(n),t}const mD=new Set(["true","1"]),yD=new Set(["false","0"]);function XT(n,e){const t=mD.has(n)||yD.has(n),r=mD.has(e)||yD.has(e);return(i,l)=>{let c="*"==n||n==i,g="*"==e||e==l;return!c&&t&&"boolean"==typeof i&&(c=i?mD.has(n):yD.has(n)),!g&&r&&"boolean"==typeof l&&(g=l?mD.has(e):yD.has(e)),c&&g}}const g1=new RegExp("s*:selfs*,?","g");function nA(n,e,t,r){return new m1(n).build(e,t,r)}class m1{constructor(e){this._driver=e}build(e,t,r){const i=new v1(t);return this._resetContextStyleTimingState(i),No(this,Bb(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const l=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function wP(){return new f.vHH(3006,!1)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const v=g,E=v.name;E.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,l.push(this.visitState(v,t))}),v.name=E}else if(1==g.type){const v=this.visitTransition(g,t);r+=v.queryCount,i+=v.depCount,c.push(v)}else t.errors.push(function EP(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:l,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const l=new Set,c=i||{};r.styles.forEach(g=>{g instanceof Map&&g.forEach(v=>{YT(v).forEach(E=>{c.hasOwnProperty(E)||l.add(E)})})}),l.size&&(hD(l.values()),t.errors.push(function DP(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=No(this,Bb(e.animation),t);return{type:1,matchers:h1(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Gp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>No(this,r,t)),options:Gp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const l=e.steps.map(c=>{t.currentTime=r;const g=No(this,c,t);return i=Math.max(i,t.currentTime),g});return t.currentTime=i,{type:3,steps:l,options:Gp(e.options)}}visitAnimate(e,t){const r=function w1(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return rA(cD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=rA(0,0,"");return l.dynamic=!0,l.strValue=t,l}const i=cD(t,e);return rA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,l=e.styles?e.styles:kT({});if(5==l.type)i=this.visitKeyframes(l,t);else{let c=e.styles,g=!1;if(!c){g=!0;const E={};r.easing&&(E.easing=r.easing),c=kT(E)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=g,i=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let g of i)"string"==typeof g?g===md?r.push(g):t.errors.push(new f.vHH(3002,!1)):r.push(qT(g));let l=!1,c=null;return r.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(c=g.get("easing"),g.delete("easing")),!l))for(let v of g.values())if(v.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((g,v)=>{const E=t.collectedStyles.get(t.currentQuerySelector),S=E.get(v);let R=!0;S&&(l!=i&&l>=S.startTime&&i<=S.endTime&&(t.errors.push(function xP(n,e,t,r,i){return new f.vHH(3010,!1)}()),R=!1),l=S.startTime),R&&E.set(v,{startTime:l,endTime:i}),t.options&&function r1(n,e,t){const r=e.params||{},i=YT(n);i.length&&i.forEach(l=>{r.hasOwnProperty(l)||t.push(function yP(n){return new f.vHH(3001,!1)}())})}(g,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function CP(){return new f.vHH(3011,!1)}()),r;let l=0;const c=[];let g=!1,v=!1,E=0;const S=e.steps.map(Be=>{const st=this._makeStyleAst(Be,t);let bt=null!=st.offset?st.offset:function b1(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(st.styles),lt=0;return null!=bt&&(l++,lt=st.offset=bt),v=v||lt<0||lt>1,g=g||lt<E,E=lt,c.push(lt),st});v&&t.errors.push(function AP(){return new f.vHH(3012,!1)}()),g&&t.errors.push(function SP(){return new f.vHH(3200,!1)}());const R=e.steps.length;let V=0;l>0&&l<R?t.errors.push(function TP(){return new f.vHH(3202,!1)}()):0==l&&(V=1/(R-1));const K=R-1,Q=t.currentTime,ae=t.currentAnimateTimings,Te=ae.duration;return S.forEach((Be,st)=>{const bt=V>0?st==K?1:V*st:c[st],lt=bt*Te;t.currentTime=Q+ae.delay+lt,ae.duration=lt,this._validateStyleAst(Be,t),Be.offset=bt,r.styles.push(Be)}),r}visitReference(e,t){return{type:8,animation:No(this,Bb(e.animation),t),options:Gp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Gp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Gp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[l,c]=function y1(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(g1,"")),n=n.replace(/@\*/g,uD).replace(/@\w+/g,t=>uD+"-"+t.slice(1)).replace(/:animating/g,XC),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+l:l,Fo(t.collectedStyles,t.currentQuerySelector,new Map);const g=No(this,Bb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:g,originalSelector:e.selector,options:Gp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function MP(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:cD(e.timings,t.errors,!0);return{type:12,animation:No(this,Bb(e.animation),t),timings:r,options:null}}}class v1{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Gp(n){return n?(n=Lb(n)).params&&(n.params=function _1(n){return n?Lb(n):null}(n.params)):n={},n}function rA(n,e,t){return{duration:n,delay:e,easing:t}}function iA(n,e,t,r,i,l,c=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:l,totalTime:i+l,easing:c,subTimeline:g}}class _D{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const I1=new RegExp(":enter","g"),C1=new RegExp(":leave","g");function sA(n,e,t,r,i,l=new Map,c=new Map,g,v,E=[]){return(new A1).buildKeyframes(n,e,t,r,i,l,c,g,v,E)}class A1{buildKeyframes(e,t,r,i,l,c,g,v,E,S=[]){E=E||new _D;const R=new oA(e,t,E,i,l,S,[]);R.options=v;const V=v.delay?nf(v.delay):0;R.currentTimeline.delayNextStep(V),R.currentTimeline.setStyles([c],null,R.errors,v),No(this,r,R);const K=R.timelines.filter(Q=>Q.containsAnimation());if(K.length&&g.size){let Q;for(let ae=K.length-1;ae>=0;ae--){const Te=K[ae];if(Te.element===t){Q=Te;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([g],null,R.errors,v)}return K.length?K.map(Q=>Q.buildKeyframes()):[iA(t,[],[],[],0,V,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),l=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);l!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let l=t.currentTimeline.currentTime;const c=null!=r.duration?nf(r.duration):null,g=null!=r.delay?nf(r.delay):null;return 0!==c&&e.forEach(v=>{const E=t.appendInstructionToTimeline(v,c,g);l=Math.max(l,E.duration+E.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),No(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const l=e.options;if(l&&(l.params||l.delay)&&(i=t.createSubContext(l),i.transformIntoNewTimeline(),null!=l.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=vD);const c=nf(l.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>No(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?nf(e.options.delay):0;e.steps.forEach(c=>{const g=t.createSubContext(e.options);l&&g.delayNextStep(l),No(this,c,g),i=Math.max(i,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return cD(t.params?dD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const l=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(l):r.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,l=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(v=>{g.forwardTime((v.offset||0)*l),g.setStyles(v.styles,v.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(i+l),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},l=i.delay?nf(i.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vD);let c=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=g.length;let v=null;g.forEach((E,S)=>{t.currentQueryIndex=S;const R=t.createSubContext(e.options,E);l&&R.delayNextStep(l),E===t.element&&(v=R.currentTimeline),No(this,e.animation,R),R.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,R.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,l=e.timings,c=Math.abs(l.duration),g=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":v=g-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const R=S.currentTime;No(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-R+(i.startTime-r.currentTimeline.startTime)}}const vD={};class oA{constructor(e,t,r,i,l,c,g,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=l,this.errors=c,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new bD(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=nf(r.duration)),null!=r.delay&&(i.delay=nf(r.delay));const l=r.params;if(l){let c=i.params;c||(c=this.options.params={}),Object.keys(l).forEach(g=>{(!t||!c.hasOwnProperty(g))&&(c[g]=dD(l[g],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,l=new oA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=vD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},l=new S1(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(l),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,l,c){let g=[];if(i&&g.push(this.element),e.length>0){e=(e=e.replace(I1,"."+this._enterClassName)).replace(C1,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),g.push(...E)}return!l&&0==g.length&&c.push(function RP(n){return new f.vHH(3014,!1)}()),g}}class bD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new bD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||md),this._currentKeyframe.set(t,md);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const l=i&&i.params||{},c=function T1(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let l of r)t.set(l,md)}else rf(i,t)}),t}(e,this._globalTimelineStyles);for(let[g,v]of c){const E=dD(v,l,r);this._pendingStyles.set(g,E),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??md),this._updateStyle(g,E)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((g,v)=>{const E=rf(g,new Map,this._backFill);E.forEach((S,R)=>{"!"===S?e.add(R):S===md&&t.add(R)}),r||E.set("offset",v/this.duration),i.push(E)});const l=e.size?hD(e.values()):[],c=t.size?hD(t.values()):[];if(r){const g=i[0],v=new Map(g);g.set("offset",0),v.set("offset",1),i=[g,v]}return iA(this.element,i,l,c,this.duration,this.startTime,this.easing,!1)}}class S1 extends bD{constructor(e,t,r,i,l,c,g=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=l,this._stretchStartingKeyframe=g,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],c=r+t,g=t/c,v=rf(e[0]);v.set("offset",0),l.push(v);const E=rf(e[0]);E.set("offset",tM(g)),l.push(E);const S=e.length-1;for(let R=1;R<=S;R++){let V=rf(e[R]);const K=V.get("offset");V.set("offset",tM((t+K*r)/c)),l.push(V)}r=c,t=0,i="",e=l}return iA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function tM(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class aA{}const M1=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class R1 extends aA{normalizePropertyName(e,t){return tA(e)}normalizeStyleValue(e,t,r,i){let l="";const c=r.toString().trim();if(M1.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&i.push(function bP(n,e){return new f.vHH(3005,!1)}())}return c+l}}function nM(n,e,t,r,i,l,c,g,v,E,S,R,V){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:l,toState:r,toStyles:c,timelines:g,queriedElements:v,preStyleProps:E,postStyleProps:S,totalTime:R,errors:V}}const lA={};class rM{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function k1(n,e,t,r,i){return n.some(l=>l(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,l,c,g,v,E,S){const R=[],V=this.ast.options&&this.ast.options.params||lA,Q=this.buildStyles(r,g&&g.params||lA,R),ae=v&&v.params||lA,Te=this.buildStyles(i,ae,R),Be=new Set,st=new Map,bt=new Map,lt="void"===i,Tt={params:O1(ae,V),delay:this.ast.options?.delay},Ot=S?[]:sA(e,t,this.ast.animation,l,c,Q,Te,Tt,E,R);let tn=0;if(Ot.forEach(yd=>{tn=Math.max(yd.duration+yd.delay,tn)}),R.length)return nM(t,this._triggerName,r,i,lt,Q,Te,[],[],st,bt,tn,R);Ot.forEach(yd=>{const _d=yd.element,xM=Fo(st,_d,new Set);yd.preStyleProps.forEach($p=>xM.add($p));const jb=Fo(bt,_d,new Set);yd.postStyleProps.forEach($p=>jb.add($p)),_d!==t&&Be.add(_d)});const Is=hD(Be.values());return nM(t,this._triggerName,r,i,lt,Q,Te,Ot,Is,st,bt,tn)}}function O1(n,e){const t=Lb(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class F1{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Lb(this.defaultParams);return Object.keys(e).forEach(l=>{const c=e[l];null!==c&&(i[l]=c)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((c,g)=>{c&&(c=dD(c,i,t));const v=this.normalizer.normalizePropertyName(g,t);c=this.normalizer.normalizeStyleValue(g,v,c,t),r.set(v,c)})}),r}}class P1{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new F1(i.style,i.options&&i.options.params||{},r))}),iM(this.states,"true","1"),iM(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new rM(e,i,this.states))}),this.fallbackTransition=function L1(n,e,t){return new rM(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function iM(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const B1=new _D;class V1{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],l=nA(this._driver,t,r,[]);if(r.length)throw function BP(n){return new f.vHH(3503,!1)}();this._animations.set(e,l)}_buildPlayer(e,t,r){const i=e.element,l=PT(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],l=this._animations.get(e);let c;const g=new Map;if(l?(c=sA(this._driver,t,l,QC,aD,new Map,new Map,r,B1,i),c.forEach(S=>{const R=Fo(g,S.element,new Map);S.postStyleProps.forEach(V=>R.set(V,null))})):(i.push(function VP(){return new f.vHH(3300,!1)}()),c=[]),i.length)throw function UP(n){return new f.vHH(3504,!1)}();g.forEach((S,R)=>{S.forEach((V,K)=>{S.set(K,this._driver.computeStyle(R,K,md))})});const E=tf(c.map(S=>{const R=g.get(S.element);return this._buildPlayer(S,new Map,R)}));return this._playersById.set(e,E),E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function jP(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const l=WC(t,"","","");return zC(this._getPlayer(e),r,l,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const l=this._getPlayer(e);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const sM="ng-animate-queued",uA="ng-animate-disabled",$1=[],oM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},z1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pa="__ng_removed";class cA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Z1(n){return n??null}(r?e.value:e),r){const l=Lb(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Vb="void",dA=new cA(Vb);class q1{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,La(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function HP(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function GP(n){return new f.vHH(3303,!1)}();if(!function Y1(n){return"start"==n||"done"==n}(r))throw function $P(n,e){return new f.vHH(3400,!1)}();const l=Fo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};l.push(c);const g=Fo(this._engine.statesByElement,e,new Map);return g.has(t)||(La(e,lD),La(e,lD+"-"+t),g.set(t,dA)),()=>{this._engine.afterFlush(()=>{const v=l.indexOf(c);v>=0&&l.splice(v,1),this._triggers.has(t)||g.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function zP(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const l=this._getTrigger(t),c=new hA(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(La(e,lD),La(e,lD+"-"+t),this._engine.statesByElement.set(e,g=new Map));let v=g.get(t);const E=new cA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&E.absorbOptions(v.options),g.set(t,E),v||(v=dA),E.value!==Vb&&v.value===E.value){if(!function J1(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const l=t[i];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(v.params,E.params)){const ae=[],Te=l.matchStyles(v.value,v.params,ae),Be=l.matchStyles(E.value,E.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{Hp(e,Te),Bu(e,Be)})}return}const V=Fo(this._engine.playersByElement,e,[]);V.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==t&&ae.queued&&ae.destroy()});let K=l.matchTransition(v.value,E.value,e,E.params),Q=!1;if(!K){if(!i)return;K=l.fallbackTransition,Q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:K,fromState:v,toState:E,player:c,isFallbackTransition:Q}),Q||(La(e,sM),c.onStart(()=>{Iy(e,sM)})),c.onDone(()=>{let ae=this.players.indexOf(c);ae>=0&&this.players.splice(ae,1);const Te=this._engine.playersByElement.get(e);if(Te){let Be=Te.indexOf(c);Be>=0&&Te.splice(Be,1)}}),this.players.push(c),V.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,uD,!0);r.forEach(i=>{if(i[Pa])return;const l=this._engine.fetchNamespacesByElement(i);l.size?l.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const l=this._engine.statesByElement.get(e),c=new Map;if(l){const g=[];if(l.forEach((v,E)=>{if(c.set(E,v.value),this._triggers.has(E)){const S=this.trigger(e,E,Vb,i);S&&g.push(S)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&tf(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(l=>{const c=l.name;if(i.has(c))return;i.add(c);const v=this._triggers.get(c).fallbackTransition,E=r.get(c)||dA,S=new cA(Vb),R=new hA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:E,toState:S,player:R,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(e):[];if(l&&l.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const l=e[Pa];(!l||l===oM)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){La(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const l=r.element,c=this._elementListeners.get(l);c&&c.forEach(g=>{if(g.name==r.triggerName){const v=WC(l,r.triggerName,r.fromState.value,r.toState.value);v._data=e,zC(r.player,g.phase,v,g.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const l=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==l||0==c?l-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class W1{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new q1(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,g=this.driver.getParentElement(t);for(;g;){const v=i.get(g);if(v){const E=r.indexOf(v);r.splice(E+1,0,e),c=!0;break}g=this.driver.getParentElement(g)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const l=this._fetchNamespace(i.namespaceId);l&&t.add(l)}return t}trigger(e,t,r,i){if(wD(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!wD(t))return;const l=t[Pa];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),La(e,uA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Iy(e,uA))}removeNode(e,t,r,i){if(wD(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,l){this.collectedLeaveElements.push(t),t[Pa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,r,i,l){return wD(t)?this._fetchNamespace(e).listen(t,r,i,l):()=>{}}_buildInstruction(e,t,r,i,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,uD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,XC,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return tf(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Pa];if(t&&t.setForRemoval){if(e[Pa]=oM,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(uA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)La(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?tf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function qP(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new _D,i=[],l=new Map,c=[],g=new Map,v=new Map,E=new Map,S=new Set;this.disabledNodes.forEach(dt=>{S.add(dt);const At=this.driver.query(dt,".ng-animate-queued",!0);for(let Ft=0;Ft<At.length;Ft++)S.add(At[Ft])});const R=this.bodyNode,V=Array.from(this.statesByElement.keys()),K=uM(V,this.collectedEnterElements),Q=new Map;let ae=0;K.forEach((dt,At)=>{const Ft=QC+ae++;Q.set(At,Ft),dt.forEach(un=>La(un,Ft))});const Te=[],Be=new Set,st=new Set;for(let dt=0;dt<this.collectedLeaveElements.length;dt++){const At=this.collectedLeaveElements[dt],Ft=At[Pa];Ft&&Ft.setForRemoval&&(Te.push(At),Be.add(At),Ft.hasAnimation?this.driver.query(At,".ng-star-inserted",!0).forEach(un=>Be.add(un)):st.add(At))}const bt=new Map,lt=uM(V,Array.from(Be));lt.forEach((dt,At)=>{const Ft=aD+ae++;bt.set(At,Ft),dt.forEach(un=>La(un,Ft))}),e.push(()=>{K.forEach((dt,At)=>{const Ft=Q.get(At);dt.forEach(un=>Iy(un,Ft))}),lt.forEach((dt,At)=>{const Ft=bt.get(At);dt.forEach(un=>Iy(un,Ft))}),Te.forEach(dt=>{this.processLeaveNode(dt)})});const Tt=[],Ot=[];for(let dt=this._namespaceList.length-1;dt>=0;dt--)this._namespaceList[dt].drainQueuedTransitions(t).forEach(Ft=>{const un=Ft.player,gi=Ft.element;if(Tt.push(un),this.collectedEnterElements.length){const Ki=gi[Pa];if(Ki&&Ki.setForMove){if(Ki.previousTriggersValues&&Ki.previousTriggersValues.has(Ft.triggerName)){const zp=Ki.previousTriggersValues.get(Ft.triggerName),Ba=this.statesByElement.get(Ft.element);if(Ba&&Ba.has(Ft.triggerName)){const CD=Ba.get(Ft.triggerName);CD.value=zp,Ba.set(Ft.triggerName,CD)}}return void un.destroy()}}const Vu=!R||!this.driver.containsElement(R,gi),Po=bt.get(gi),af=Q.get(gi),Ar=this._buildInstruction(Ft,r,af,Po,Vu);if(Ar.errors&&Ar.errors.length)return void Ot.push(Ar);if(Vu)return un.onStart(()=>Hp(gi,Ar.fromStyles)),un.onDestroy(()=>Bu(gi,Ar.toStyles)),void i.push(un);if(Ft.isFallbackTransition)return un.onStart(()=>Hp(gi,Ar.fromStyles)),un.onDestroy(()=>Bu(gi,Ar.toStyles)),void i.push(un);const SM=[];Ar.timelines.forEach(Ki=>{Ki.stretchStartingKeyframe=!0,this.disabledNodes.has(Ki.element)||SM.push(Ki)}),Ar.timelines=SM,r.append(gi,Ar.timelines),c.push({instruction:Ar,player:un,element:gi}),Ar.queriedElements.forEach(Ki=>Fo(g,Ki,[]).push(un)),Ar.preStyleProps.forEach((Ki,zp)=>{if(Ki.size){let Ba=v.get(zp);Ba||v.set(zp,Ba=new Set),Ki.forEach((CD,yA)=>Ba.add(yA))}}),Ar.postStyleProps.forEach((Ki,zp)=>{let Ba=E.get(zp);Ba||E.set(zp,Ba=new Set),Ki.forEach((CD,yA)=>Ba.add(yA))})});if(Ot.length){const dt=[];Ot.forEach(At=>{dt.push(function WP(n,e){return new f.vHH(3505,!1)}())}),Tt.forEach(At=>At.destroy()),this.reportError(dt)}const tn=new Map,Is=new Map;c.forEach(dt=>{const At=dt.element;r.has(At)&&(Is.set(At,At),this._beforeAnimationBuild(dt.player.namespaceId,dt.instruction,tn))}),i.forEach(dt=>{const At=dt.element;this._getPreviousPlayers(At,!1,dt.namespaceId,dt.triggerName,null).forEach(un=>{Fo(tn,At,[]).push(un),un.destroy()})});const yd=Te.filter(dt=>dM(dt,v,E)),_d=new Map;lM(_d,this.driver,st,E,md).forEach(dt=>{dM(dt,v,E)&&yd.push(dt)});const jb=new Map;K.forEach((dt,At)=>{lM(jb,this.driver,new Set(dt),v,"!")}),yd.forEach(dt=>{const At=_d.get(dt),Ft=jb.get(dt);_d.set(dt,new Map([...Array.from(At?.entries()??[]),...Array.from(Ft?.entries()??[])]))});const $p=[],CM=[],AM={};c.forEach(dt=>{const{element:At,player:Ft,instruction:un}=dt;if(r.has(At)){if(S.has(At))return Ft.onDestroy(()=>Bu(At,un.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(un.totalTime),void i.push(Ft);let gi=AM;if(Is.size>1){let Po=At;const af=[];for(;Po=Po.parentNode;){const Ar=Is.get(Po);if(Ar){gi=Ar;break}af.push(Po)}af.forEach(Ar=>Is.set(Ar,gi))}const Vu=this._buildAnimation(Ft.namespaceId,un,tn,l,jb,_d);if(Ft.setRealPlayer(Vu),gi===AM)$p.push(Ft);else{const Po=this.playersByElement.get(gi);Po&&Po.length&&(Ft.parentPlayer=tf(Po)),i.push(Ft)}}else Hp(At,un.fromStyles),Ft.onDestroy(()=>Bu(At,un.toStyles)),CM.push(Ft),S.has(At)&&i.push(Ft)}),CM.forEach(dt=>{const At=l.get(dt.element);if(At&&At.length){const Ft=tf(At);dt.setRealPlayer(Ft)}}),i.forEach(dt=>{dt.parentPlayer?dt.syncPlayerEvents(dt.parentPlayer):dt.destroy()});for(let dt=0;dt<Te.length;dt++){const At=Te[dt],Ft=At[Pa];if(Iy(At,aD),Ft&&Ft.hasAnimation)continue;let un=[];if(g.size){let Vu=g.get(At);Vu&&Vu.length&&un.push(...Vu);let Po=this.driver.query(At,XC,!0);for(let af=0;af<Po.length;af++){let Ar=g.get(Po[af]);Ar&&Ar.length&&un.push(...Ar)}}const gi=un.filter(Vu=>!Vu.destroyed);gi.length?Q1(this,At,gi):this.processLeaveNode(At)}return Te.length=0,$p.forEach(dt=>{this.players.push(dt),dt.onDone(()=>{dt.destroy();const At=this.players.indexOf(dt);this.players.splice(At,1)}),dt.play()}),$p}elementContainsData(e,t){let r=!1;const i=t[Pa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,l){let c=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(c=g)}else{const g=this.playersByElement.get(e);if(g){const v=!l||l==Vb;g.forEach(E=>{E.queued||!v&&E.triggerName!=i||c.push(E)})}}return(r||i)&&(c=c.filter(g=>!(r&&r!=g.namespaceId||i&&i!=g.triggerName))),c}_beforeAnimationBuild(e,t,r){const l=t.element,c=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const E=v.element,S=E!==l,R=Fo(r,E,[]);this._getPreviousPlayers(E,S,c,g,t.toState).forEach(K=>{const Q=K.getRealPlayer();Q.beforeDestroy&&Q.beforeDestroy(),K.destroy(),R.push(K)})}Hp(l,t.fromStyles)}_buildAnimation(e,t,r,i,l,c){const g=t.triggerName,v=t.element,E=[],S=new Set,R=new Set,V=t.timelines.map(Q=>{const ae=Q.element;S.add(ae);const Te=ae[Pa];if(Te&&Te.removedBeforeQueried)return new Pb(Q.duration,Q.delay);const Be=ae!==v,st=function X1(n){const e=[];return cM(n,e),e}((r.get(ae)||$1).map(tn=>tn.getRealPlayer())).filter(tn=>!!tn.element&&tn.element===ae),bt=l.get(ae),lt=c.get(ae),Tt=PT(0,this._normalizer,0,Q.keyframes,bt,lt),Ot=this._buildPlayer(Q,Tt,st);if(Q.subTimeline&&i&&R.add(ae),Be){const tn=new hA(e,g,ae);tn.setRealPlayer(Ot),E.push(tn)}return Ot});E.forEach(Q=>{Fo(this.playersByQueriedElement,Q.element,[]).push(Q),Q.onDone(()=>function K1(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Q.element,Q))}),S.forEach(Q=>La(Q,zT));const K=tf(V);return K.onDestroy(()=>{S.forEach(Q=>Iy(Q,zT)),Bu(v,t.toStyles)}),R.forEach(Q=>{Fo(i,Q,[]).push(K)}),K}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Pb(e.duration,e.delay)}}class hA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Pb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>zC(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Fo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function wD(n){return n&&1===n.nodeType}function aM(n,e){const t=n.style.display;return n.style.display=e??"none",t}function lM(n,e,t,r,i){const l=[];t.forEach(v=>l.push(aM(v)));const c=[];r.forEach((v,E)=>{const S=new Map;v.forEach(R=>{const V=e.computeStyle(E,R,i);S.set(R,V),(!V||0==V.length)&&(E[Pa]=z1,c.push(E))}),n.set(E,S)});let g=0;return t.forEach(v=>aM(v,l[g++])),c}function uM(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const i=new Set(e),l=new Map;function c(g){if(!g)return 1;let v=l.get(g);if(v)return v;const E=g.parentNode;return v=t.has(E)?E:i.has(E)?1:c(E),l.set(g,v),v}return e.forEach(g=>{const v=c(g);1!==v&&t.get(v).push(g)}),t}function La(n,e){n.classList?.add(e)}function Iy(n,e){n.classList?.remove(e)}function Q1(n,e,t){tf(t).onDone(()=>n.processLeaveNode(e))}function cM(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof FT?cM(r.players,e):e.push(r)}}function dM(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(l=>i.add(l)):e.set(n,r),t.delete(n),!0}class ED{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,l)=>{},this._transitionEngine=new W1(e,t,r),this._timelineEngine=new V1(e,t,r),this._transitionEngine.onRemovalComplete=(i,l)=>this.onRemovalComplete(i,l)}registerTrigger(e,t,r,i,l){const c=e+"-"+i;let g=this._triggerCache[c];if(!g){const v=[],S=nA(this._driver,l,v,[]);if(v.length)throw function PP(n,e){return new f.vHH(3404,!1)}();g=function N1(n,e,t){return new P1(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=g}this._transitionEngine.registerTrigger(t,i,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[l,c]=LT(r);this._timelineEngine.command(l,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,l){if("@"==r.charAt(0)){const[c,g]=LT(r);return this._timelineEngine.listen(c,t,g,l)}return this._transitionEngine.listen(e,t,r,i,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let tL=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Bu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Bu(this._element,this._initialStyles),this._endStyles&&(Bu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hp(this._element,this._endStyles),this._endStyles=null),Bu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function fA(n){let e=null;return n.forEach((t,r)=>{(function nL(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class hM{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:QT(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class rL{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return jT(e,t)}getParentElement(e){return ZC(e)}query(e,t,r){return HT(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,l,c=[]){const v={duration:r,delay:i,fill:0==i?"both":"forwards"};l&&(v.easing=l);const E=new Map,S=c.filter(K=>K instanceof hM);(function a1(n,e){return 0===n||0===e})(r,i)&&S.forEach(K=>{K.currentSnapshot.forEach((Q,ae)=>E.set(ae,Q))});let R=function n1(n){return n.length?n[0]instanceof Map?n:n.map(e=>qT(e)):[]}(t).map(K=>rf(K));R=function l1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((l,c)=>{r.has(c)||i.push(c),r.set(c,l)}),i.length)for(let l=1;l<e.length;l++){let c=e[l];i.forEach(g=>c.set(g,QT(n,g)))}}return e}(e,R,E);const V=function eL(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=fA(e[0]),e.length>1&&(r=fA(e[e.length-1]))):e instanceof Map&&(t=fA(e)),t||r?new tL(n,t,r):null}(e,R);return new hM(e,R,v,V)}}let iL=(()=>{class n extends MT{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?RT(t):t;return fM(this._renderer,null,r,"register",[i]),new sL(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class sL extends class pP{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new oL(this._id,e,t||{},this._renderer)}}class oL{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return fM(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function fM(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const pM="@.disabled";let aL=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(l,c)=>{const g=c?.parentNode(l);g&&c.removeChild(g,l)}}createRenderer(t,r){const l=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(l);return S||(S=new gM("",l,this.engine),this._rendererCache.set(l,S)),S}const c=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(c,g,t,S.name,S)};return r.data.animation.forEach(v),new lL(this,g,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[c,g]=l;c(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ED),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class gM{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==pM?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class lL extends gM{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==pM?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function uL(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.slice(1),c="";return"@"!=l.charAt(0)&&([l,c]=function cL(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(l)),this.engine.listen(this.namespaceId,i,l,c,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let dL=(()=>{class n extends ED{constructor(t,r,i,l){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue),f.LFG(YC),f.LFG(aA),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const mM=[{provide:MT,useClass:iL},{provide:aA,useFactory:function hL(){return new R1}},{provide:ED,useClass:dL},{provide:f.FYo,useFactory:function fL(n,e,t){return new aL(n,e,t)},deps:[ss,ED,f.R0b]}],pA=[{provide:YC,useFactory:()=>new rL},{provide:f.QbO,useValue:"BrowserAnimations"},...mM],yM=[{provide:YC,useClass:GT},{provide:f.QbO,useValue:"NoopAnimations"},...mM];let pL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?yM:pA}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:pA,imports:[vn]}),n})(),gL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Xk,Wi,Wi]}),n})(),mL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Wi,Wi]}),n})();const gA_firebase={projectId:"copa-b2abd",appId:"1:75383122449:web:a9b67f027fcf2c5929dfb0",storageBucket:"copa-b2abd.appspot.com",locationId:"us-central",apiKey:"AIzaSyAnt5IfH33ZBvde1L3bctlwjjpqHkDjEGY",authDomain:"copa-b2abd.firebaseapp.com",messagingSenderId:"75383122449"};function _M(n){return new ur.y(e=>{(0,dd.Xf)(n()).subscribe(e)})}var yL=F(1144);const _L=["addListener","removeListener"],vL=["addEventListener","removeEventListener"],bL=["on","off"];function ID(n,e,t,r){if((0,Es.m)(t)&&(r=t,t=void 0),r)return ID(n,e,t).pipe(NC(r));const[i,l]=function DL(n){return(0,Es.m)(n.addEventListener)&&(0,Es.m)(n.removeEventListener)}(n)?vL.map(c=>g=>n[c](e,g,t)):function wL(n){return(0,Es.m)(n.addListener)&&(0,Es.m)(n.removeListener)}(n)?_L.map(vM(n,e)):function EL(n){return(0,Es.m)(n.on)&&(0,Es.m)(n.off)}(n)?bL.map(vM(n,e)):[];if(!i&&(0,yL.z)(n))return(0,eD.z)(c=>ID(c,e,t))((0,dd.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new ur.y(c=>{const g=(...v)=>c.next(1<v.length?v:v[0]);return i(g),()=>l(g)})}function vM(n,e){return t=>r=>n[t](e,r)}const sf=new ur.y(MC.Z);class xL extends ur.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kb.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kb.w0.EMPTY)}return e}refCount(){return function IL(){return(0,cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,l=t;t=null,i&&(!l||i===l)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}()(this)}}const AL={connector:()=>new Xs.x};function bM(n,e=AL){const{connector:t}=e;return(0,cr.e)((r,i)=>{const l=t();(0,dd.Xf)(n(function CL(n){return new ur.y(e=>n.subscribe(e))}(l))).subscribe(i),i.add(r.subscribe(l))})}function wM(n,e){return e?t=>Ls(e.pipe(Js(1),function ML(){return(0,cr.e)((n,e)=>{n.subscribe((0,Gn.x)(e,MC.Z))})}()),t.pipe(wM(n))):(0,eD.z)((t,r)=>n(t,r).pipe(Js(1),function RL(n){return(0,$t.U)(()=>n)}(t)))}const Ub="Service workers are disabled or not supported by this browser";class xD{constructor(e){if(this.serviceWorker=e,e){const r=ID(e,"controllerchange").pipe((0,$t.U)(()=>e.controller)),l=Ls(_M(()=>In(e.controller)),r);this.worker=l.pipe(dr(S=>!!S)),this.registration=this.worker.pipe(Ro(()=>e.getRegistration()));const E=ID(e,"message").pipe((0,$t.U)(S=>S.data)).pipe(dr(S=>S&&S.type)).pipe(function TL(n){return n?e=>bM(n)(e):e=>function SL(n,e){const t=(0,Es.m)(n)?n:()=>n;return(0,Es.m)(e)?bM(e,{connector:t}):r=>new xL(r,t)}(new Xs.x)(e)}());E.connect(),this.events=E}else this.worker=this.events=this.registration=function OL(n){return _M(()=>JS(new Error(n)))}(Ub)}postMessage(e,t){return this.worker.pipe(Js(1),(0,Cb.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),l=this.postMessage(e,t);return Promise.all([l,i]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(dr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Js(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(dr(t=>t.nonce===e),Js(1),(0,$t.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let FL=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Xs.x,!t.isEnabled)return this.messages=sf,this.notificationClicks=sf,void(this.subscription=sf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,$t.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,$t.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,$t.U)(i=>i.pushManager));const r=this.pushManager.pipe(Ro(i=>i.getSubscription()));this.subscription=(0,iy.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Ub));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),l=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c++)l[c]=i.charCodeAt(c);return r.applicationServerKey=l,this.pushManager.pipe(Ro(c=>c.subscribe(r)),Js(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Js(1),Ro(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Ub))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xD))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),NL=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=sf,this.available=sf,this.activated=sf,void(this.unrecoverable=sf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(dr(r=>"VERSION_READY"===r.type),(0,$t.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ub));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ub));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xD))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class mA{}const EM=new f.OlP("NGSW_REGISTER_SCRIPT");function PL(n,e,t,r){return()=>{if(!vi(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let l;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)l=t.registrationStrategy();else{const[g,...v]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(g){case"registerImmediately":l=In(null);break;case"registerWithDelay":l=DM(+v[0]||0);break;case"registerWhenStable":l=v[0]?(0,iy.T)(IM(n),DM(+v[0])):IM(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(f.R0b).runOutsideAngular(()=>l.pipe(Js(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(g=>console.error("Service worker registration failed with:",g))))}}function DM(n){return In(null).pipe(function kL(n,e=oa.z){const t=gT(n,e);return wM(()=>t)}(n))}function IM(n){return n.get(f.z2F).isStable.pipe(dr(t=>t))}function LL(n,e){return new xD(vi(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let BL=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:EM,useValue:t},{provide:mA,useValue:r},{provide:xD,useFactory:LL,deps:[mA,f.Lbi]},{provide:f.ip1,useFactory:PL,deps:[f.zs3,EM,mA,f.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[FL,NL]}),n})(),VL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[AF]}),n.\u0275inj=f.cJS({imports:[vn,fP,pL,gO,jO,zO,gL,XO,mL,EF,hr.hO.initializeApp(gA_firebase),Db,BL.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),n})();(0,f.G48)(),df().bootstrapModule(VL).catch(n=>console.error(n))},5867:(ut,Ce,F)=>{F.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=F(9681);(0,f.registerVersion)("firebase","9.9.3","app")},127:(ut,Ce,F)=>{F.d(Ce,{Z:()=>f.Z});var f=F(3942);f.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(ut,Ce,F)=>{F.r(Ce);var f=F(5861),re=F(3942),N=F(2090),he=F(9681),le=F(655),pe=F(1877),ue=F(4859);const Me=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ye=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new pe.Yd("@firebase/auth");function tt(y,...h){Qe.logLevel<=pe.in.ERROR&&Qe.error(`Auth (${he.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw Ge(y,...h)}function we(y,...h){return Ge(y,...h)}function De(y,h,m){const b=Object.assign(Object.assign({},Ye()),{[h]:m});return new N.LL("auth","Firebase",b).create(h,{appName:y.name})}function He(y,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Ae(y,"argument-error"),De(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(y,...h){if("string"!=typeof y){const m=h[0],b=[...h.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(m,...b)}return ye.create(y,...h)}function U(y,h,...m){if(!y)throw Ge(h,...m)}function ve(y){const h="INTERNAL ASSERTION FAILED: "+y;throw tt(h),new Error(h)}function X(y,h){y||ve(h)}const te=new Map;function oe(y){X(y instanceof Function,"Expected a class definition");let h=te.get(y);return h?(X(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,te.set(y,h),h)}function Ne(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function pt(){return"http:"===qt()||"https:"===qt()}function qt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,m){this.shortDelay=h,this.longDelay=m,X(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pt()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ln(y,h){X(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class Zt{static initialize(h,m,b){this.fetchImpl=h,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zr=new sn(3e4,6e4);function Lt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function on(y,h,m,b){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y,h,m,b,T={}){return si(y,T,(0,f.Z)(function*(){let O={},W={};b&&("GET"===h?W=b:O={body:JSON.stringify(b)});const de=(0,N.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(Zi(y,y.config.apiHost,m,de),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function si(y,h,m){return Br.apply(this,arguments)}function Br(){return(Br=(0,f.Z)(function*(y,h,m){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},Yt),h);try{const T=new oi(y),O=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const W=yield O.json();if("needConfirmation"in W)throw Ri(y,"account-exists-with-different-credential",W);if(O.ok&&!("errorMessage"in W))return W;{const de=O.ok?W.errorMessage:W.error.message,[Ve,et]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Ri(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Ve)throw Ri(y,"email-already-in-use",W);if("USER_DISABLED"===Ve)throw Ri(y,"user-disabled",W);const _t=b[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw De(y,_t,et);Ae(y,_t)}}catch(T){if(T instanceof N.ZR)throw T;Ae(y,"network-request-failed")}})).apply(this,arguments)}function qr(y,h,m,b){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(y,h,m,b,T={}){const O=yield on(y,h,m,b,T);return"mfaPendingCredential"in O&&Ae(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Zi(y,h,m,b){const T=`${h}${m}?${b}`;return y.config.emulator?Ln(y.config,T):`${y.config.apiScheme}://${T}`}class oi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(we(this.auth,"network-request-failed")),zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(y,h,m){const b={appName:y.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const T=we(y,h,b);return T.customData._tokenResponse=m,T}function hn(){return(hn=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mi(y,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ki(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Vn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function fn(){return(fn=(0,f.Z)(function*(y,h=!1){const m=(0,N.m9)(y),b=yield m.getIdToken(h),T=Xe(b);U(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const O="object"==typeof T.firebase?T.firebase:void 0,W=O?.sign_in_provider;return{claims:T,token:b,authTime:Vn(ot(T.auth_time)),issuedAtTime:Vn(ot(T.iat)),expirationTime:Vn(ot(T.exp)),signInProvider:W||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function ot(y){return 1e3*Number(y)}function Xe(y){var h;const[m,b,T]=y.split(".");if(void 0===m||void 0===b||void 0===T)return tt("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,N.tV)(b);return O?JSON.parse(O):(tt("Failed to decode base64 JWT payload"),null)}catch(O){return tt("Caught error parsing JWT payload as JSON",null===(h=O)||void 0===h?void 0:h.toString()),null}}function yr(y,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(y,h,m=!1){if(m)return h;try{return yield h}catch(b){throw b instanceof N.ZR&&Bt(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function Bt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Qn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),b)}iteration(){var h=this;return(0,f.Z)(function*(){var m;try{yield h.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(m=b)||void 0===m?void 0:m.code)&&h.schedule(!0))}h.schedule()})()}}class xs{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vn(this.lastLoginAt),this.creationTime=Vn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qt(y){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(y){var h;const m=y.auth,b=yield y.getIdToken(),T=yield yr(y,ki(m,{idToken:b}));U(T?.users.length,m,"internal-error");const O=T.users[0];y._notifyReloadListener(O);const W=null!==(h=O.providerUserInfo)&&void 0!==h&&h.length?B(O.providerUserInfo):[],de=G(y.providerData,W),_t=!!y.isAnonymous&&!(y.email&&O.passwordHash||de?.length),ft={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:de,metadata:new xs(O.createdAt,O.lastLoginAt),isAnonymous:_t};Object.assign(y,ft)})).apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(y){const h=(0,N.m9)(y);yield Qt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function G(y,h){return[...y.filter(b=>!h.some(T=>T.providerId===b.providerId)),...h]}function B(y){return y.map(h=>{var{providerId:m}=h,b=(0,le._T)(h,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function q(){return(q=(0,f.Z)(function*(y,h){const m=yield si(y,{},(0,f.Z)(function*(){const b=(0,N.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:O}=y.config,W=Zi(y,T,"/v1/token",`key=${O}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(W,{method:"POST",headers:de,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(typeof h.idToken<"u","internal-error"),U(typeof h.refreshToken<"u","internal-error");const m="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Bo(y){const h=Xe(y);return U(h,"internal-error"),U(typeof h.exp<"u","internal-error"),U(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var b=this;return(0,f.Z)(function*(){return U(!b.accessToken||b.refreshToken,h,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(h,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var b=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:O,expiresIn:W}=yield function $(y,h){return q.apply(this,arguments)}(h,m);b.updateTokensAndExpiration(T,O,Number(W))})()}updateTokensAndExpiration(h,m,b){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(h,m){const{refreshToken:b,accessToken:T,expirationTime:O}=m,W=new xe;return b&&(U("string"==typeof b,"internal-error",{appName:h}),W.refreshToken=b),T&&(U("string"==typeof T,"internal-error",{appName:h}),W.accessToken=T),O&&(U("number"==typeof O,"internal-error",{appName:h}),W.expirationTime=O),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new xe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Ue(y,h){U("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class ct{constructor(h){var{uid:m,auth:b,stsTokenManager:T}=h,O=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new xs(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,f.Z)(function*(){const b=yield yr(m,m.stsTokenManager.getToken(m.auth,h));return U(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(h){return function to(y){return fn.apply(this,arguments)}(this,h)}reload(){return function Ht(y){return Y.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new ct(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var b=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(h),T=!0),m&&(yield Qt(b)),yield b.auth._persistUserIfCurrent(b),T&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var h=this;return(0,f.Z)(function*(){const m=yield h.getIdToken();return yield yr(h,function yt(y,h){return hn.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var b,T,O,W,de,Ve,et,_t;const ft=null!==(b=m.displayName)&&void 0!==b?b:void 0,Kn=null!==(T=m.email)&&void 0!==T?T:void 0,ji=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,_l=null!==(W=m.photoURL)&&void 0!==W?W:void 0,gu=null!==(de=m.tenantId)&&void 0!==de?de:void 0,bc=null!==(Ve=m._redirectEventId)&&void 0!==Ve?Ve:void 0,Uf=null!==(et=m.createdAt)&&void 0!==et?et:void 0,mu=null!==(_t=m.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:yu,emailVerified:mg,isAnonymous:jf,providerData:vl,stsTokenManager:yg}=m;U(yu&&yg,h,"internal-error");const Hf=xe.fromJSON(this.name,yg);U("string"==typeof yu,h,"internal-error"),Ue(ft,h.name),Ue(Kn,h.name),U("boolean"==typeof mg,h,"internal-error"),U("boolean"==typeof jf,h,"internal-error"),Ue(ji,h.name),Ue(_l,h.name),Ue(gu,h.name),Ue(bc,h.name),Ue(Uf,h.name),Ue(mu,h.name);const Gf=new ct({uid:yu,auth:h,email:Kn,emailVerified:mg,displayName:ft,isAnonymous:jf,photoURL:_l,phoneNumber:ji,tenantId:gu,stsTokenManager:Hf,createdAt:Uf,lastLoginAt:mu});return vl&&Array.isArray(vl)&&(Gf.providerData=vl.map(Uy=>Object.assign({},Uy))),bc&&(Gf._redirectEventId=bc),Gf}static _fromIdTokenResponse(h,m,b=!1){return(0,f.Z)(function*(){const T=new xe;T.updateFromServerResponse(m);const O=new ct({uid:m.localId,auth:h,stsTokenManager:T,isAnonymous:b});return yield Qt(O),O})()}}const Xt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,b){var T=this;return(0,f.Z)(function*(){T.storage[m]=b})()}_get(m){var b=this;return(0,f.Z)(function*(){const T=b.storage[m];return void 0===T?null:T})()}_remove(m){var b=this;return(0,f.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return y.type="NONE",y})();function sr(y,h,m){return`firebase:${y}:${h}:${m}`}class rt{constructor(h,m,b){this.persistence=h,this.auth=m,this.userKey=b;const{config:T,name:O}=this.auth;this.fullUserKey=sr(this.userKey,T.apiKey,O),this.fullPersistenceKey=sr("persistence",T.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?ct._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,f.Z)(function*(){if(m.persistence===h)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,b="authUser"){return(0,f.Z)(function*(){if(!m.length)return new rt(oe(Xt),h,b);const T=(yield Promise.all(m.map(function(){var et=(0,f.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return et.apply(this,arguments)}}()))).filter(et=>et);let O=T[0]||oe(Xt);const W=sr(b,h.config.apiKey,h.name);let de=null;for(const et of m)try{const _t=yield et._get(W);if(_t){const ft=ct._fromJSON(h,_t);et!==O&&(de=ft),O=et;break}}catch{}const Ve=T.filter(et=>et._shouldAllowMigration);return O._shouldAllowMigration&&Ve.length?(O=Ve[0],de&&(yield O._set(W,de.toJSON())),yield Promise.all(m.map(function(){var et=(0,f.Z)(function*(_t){if(_t!==O)try{yield _t._remove(W)}catch{}});return function(_t){return et.apply(this,arguments)}}())),new rt(O,h,b)):new rt(O,h,b)})()}}function dn(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ke(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(yn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(nn(h))return"Blackberry";if(Un(h))return"Webos";if(_r(h))return"Safari";if((h.includes("chrome/")||Sr(h))&&!h.includes("edge/"))return"Chrome";if(wt(h))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function yn(y=(0,N.z$)()){return/firefox\//i.test(y)}function _r(y=(0,N.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Sr(y=(0,N.z$)()){return/crios\//i.test(y)}function Ke(y=(0,N.z$)()){return/iemobile/i.test(y)}function wt(y=(0,N.z$)()){return/android/i.test(y)}function nn(y=(0,N.z$)()){return/blackberry/i.test(y)}function Un(y=(0,N.z$)()){return/webos/i.test(y)}function ai(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Va(y=(0,N.z$)()){return ai(y)||wt(y)||Un(y)||nn(y)||/windows phone/i.test(y)||Ke(y)}function kt(y,h=[]){let m;switch(y){case"Browser":m=dn((0,N.z$)());break;case"Worker":m=`${dn((0,N.z$)())}-${y}`;break;default:m=y}const b=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${he.SDK_VERSION}/${b}`}class Ua{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,m){const b=O=>new Promise((W,de)=>{try{W(h(O))}catch(Ve){de(Ve)}});b.onAbort=m,this.queue.push(b);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var m=this;return(0,f.Z)(function*(){var b;if(m.auth.currentUser===h)return;const T=[];try{for(const O of m.queue)yield O(h),O.onAbort&&T.push(O.onAbort)}catch(O){T.reverse();for(const W of T)try{W()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=O)||void 0===b?void 0:b.message})}})()}}class Vo{constructor(h,m,b){this.app=h,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new As(this),this.idTokenSubscription=new As(this),this.beforeStateQueue=new Ua(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(h,m){var b=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,O;if(!b._deleted&&(b.persistenceManager=yield rt.create(b,h),!b._deleted)){if(null!==(T=b._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m,!0)}})()}initializeCurrentUser(h){var m=this;return(0,f.Z)(function*(){var b;const T=yield m.assertedPersistence.getCurrentUser();let O=T,W=!1;if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const de=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Ve=O?._redirectEventId,et=yield m.tryRedirectSignIn(h);(!de||de===Ve)&&et?.user&&(O=et.user,W=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(W)try{yield m.beforeStateQueue.runMiddleware(O)}catch(de){O=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(de))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return U(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(h){var m=this;return(0,f.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,f.Z)(function*(){var b;try{yield Qt(h)}catch(T){if("auth/network-request-failed"!==(null===(b=T)||void 0===b?void 0:b.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,f.Z)(function*(){const b=h?(0,N.m9)(h):null;return b&&U(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(h,m=!1){var b=this;return(0,f.Z)(function*(){if(!b._deleted)return h&&U(b.tenantId===h.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(h)),b.queue((0,f.Z)(function*(){yield b.directlySetCurrentUser(h),b.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new N.LL("auth","Firebase",h())}onAuthStateChanged(h,m,b){return this.registerStateListener(this.authStateSubscription,h,m,b)}beforeAuthStateChanged(h,m){return this.beforeStateQueue.pushCallback(h,m)}onIdTokenChanged(h,m,b){return this.registerStateListener(this.idTokenSubscription,h,m,b)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var b=this;return(0,f.Z)(function*(){const T=yield b.getOrInitRedirectPersistenceManager(m);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const b=h&&oe(h)||m._popupRedirectResolver;U(b,m,"argument-error"),m.redirectPersistenceManager=yield rt.create(m,[oe(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,f.Z)(function*(){var b,T;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===h?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,f.Z)(function*(){if(h===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,b,T){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>O(this.currentUser)),"function"==typeof m?h.addObserver(m,b,T):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=kt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var m;const b={"X-Client-Version":h.clientVersion};h.app.options.appId&&(b["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(b["X-Firebase-Client"]=T),b})()}}function Dn(y){return(0,N.m9)(y)}class As{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,N.ne)(m=>this.observer=m)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ss(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Wr(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class no{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,m){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function Vt(y,h){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:resetPassword",Lt(y,h))})).apply(this,arguments)}function Vl(y,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ja(y,h){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:update",Lt(y,h))})).apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithPassword",Lt(y,h))})).apply(this,arguments)}function jn(y,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:sendOobCode",Lt(y,h))})).apply(this,arguments)}function Vr(y,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function Ho(y,h){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function Go(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function qp(y,h){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithEmailLink",Lt(y,h))})).apply(this,arguments)}function bd(){return(bd=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithEmailLink",Lt(y,h))})).apply(this,arguments)}class Hu extends no{constructor(h,m,b,T=null){super("password",b),this._email=h,this._password=m,this._tenantId=T}static _fromEmailAndPassword(h,m){return new Hu(h,m,"password")}static _fromEmailAndCode(h,m,b=null){return new Hu(h,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function jo(y,h){return Xi.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function lf(y,h){return ju.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,m){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return Vl(h,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function vd(y,h){return bd.apply(this,arguments)}(h,{idToken:m,email:b._email,oobCode:b._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function or(y,h){return wd.apply(this,arguments)}function wd(){return(wd=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithIdp",Lt(y,h))})).apply(this,arguments)}class Ji extends no{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new Ji(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:b,signInMethod:T}=m,O=(0,le._T)(m,["providerId","signInMethod"]);if(!b||!T)return null;const W=new Ji(b,T);return W.idToken=O.idToken||void 0,W.accessToken=O.accessToken||void 0,W.secret=O.secret,W.nonce=O.nonce,W.pendingToken=O.pendingToken||null,W}_getIdTokenResponse(h){return or(h,this.buildRequest())}_linkToIdToken(h,m){const b=this.buildRequest();return b.idToken=m,or(h,b)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,or(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,N.xO)(m)}return h}}function Kp(y,h){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:sendVerificationCode",Lt(y,h))})).apply(this,arguments)}function Rs(){return(Rs=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,h))})).apply(this,arguments)}function Ed(){return(Ed=(0,f.Z)(function*(y,h){const m=yield qr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,h));if(m.temporaryProof)throw Ri(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Yp={USER_NOT_FOUND:"user-not-found"};function Ga(){return(Ga=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Yp)})).apply(this,arguments)}class $o extends no{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new $o({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new $o({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function $u(y,h){return Rs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function Zp(y,h){return Ed.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Dd(y,h){return Ga.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:b,verificationCode:T}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:b,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:b,phoneNumber:T,temporaryProof:O}=h;return b||m||T||O?new $o({verificationId:m,verificationCode:b,phoneNumber:T,temporaryProof:O}):null}}class _i{constructor(h){var m,b,T,O,W,de;const Ve=(0,N.zd)((0,N.pd)(h)),et=null!==(m=Ve.apiKey)&&void 0!==m?m:null,_t=null!==(b=Ve.oobCode)&&void 0!==b?b:null,ft=function xy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ve.mode)&&void 0!==T?T:null);U(et&&_t&&ft,"argument-error"),this.apiKey=et,this.operation=ft,this.code=_t,this.continueUrl=null!==(O=Ve.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(W=Ve.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(de=Ve.tenantId)&&void 0!==de?de:null}static parseLink(h){const m=function Id(y){const h=(0,N.zd)((0,N.pd)(y)).link,m=h?(0,N.zd)((0,N.pd)(h)).deep_link_id:null,b=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(b?(0,N.zd)((0,N.pd)(b)).link:null)||b||m||h||y}(h);try{return new _i(m)}catch{return null}}}let zo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,b){return Hu._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const T=_i.parseLink(b);return U(T,"argument-error"),Hu._fromEmailAndCode(m,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Fi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class io extends Fi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qo extends io{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return U("providerId"in m&&"signInMethod"in m,"argument-error"),Ji._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:T,pendingToken:O,nonce:W,providerId:de}=h;if(!b&&!T&&!m&&!O||!de)return null;try{return new qo(de)._credential({idToken:m,accessToken:b,nonce:W,pendingToken:O})}catch{return null}}}let Wo=(()=>{class y extends io{constructor(){super("facebook.com")}static credential(m){return Ji._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),$a=(()=>{class y extends io{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Ji._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:T}=m;if(!b&&!T)return null;try{return y.credential(b,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Cd=(()=>{class y extends io{constructor(){super("github.com")}static credential(m){return Ji._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ko extends no{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return or(h,this.buildRequest())}_linkToIdToken(h,m){const b=this.buildRequest();return b.idToken=m,or(h,b)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,or(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:b,signInMethod:T,pendingToken:O}=m;return b&&T&&O&&b===T?new Ko(b,O):null}static _create(h,m){return new Ko(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends Fi{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Kr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Kr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=Ko.fromJSON(h);return U(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:b}=h;if(!m||!b)return null;try{return Ko._create(b,m)}catch{return null}}}let Sd=(()=>{class y extends io{constructor(){super("twitter.com")}static credential(m,b){return Ji._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:T}=m;if(!b||!T)return null;try{return y.credential(b,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Zo(y,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signUp",Lt(y,h))})).apply(this,arguments)}class Xn{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,b,T=!1){return(0,f.Z)(function*(){const O=yield ct._fromIdTokenResponse(h,b,T),W=Hn(b);return new Xn({user:O,providerId:W,_tokenResponse:b,operationType:m})})()}static _forOperation(h,m,b){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(b,!0);const T=Hn(b);return new Xn({user:h,providerId:T,_tokenResponse:b,operationType:m})})()}}function Hn(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function uf(){return(uf=(0,f.Z)(function*(y){var h;const m=Dn(y);if(yield m._initializationPromise,null!==(h=m.currentUser)&&void 0!==h&&h.isAnonymous)return new Xn({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield Zo(m,{returnSecureToken:!0}),T=yield Xn._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Yo extends N.ZR{constructor(h,m,b,T){var O;super(m.code,m.message),this.operationType=b,this.user=T,Object.setPrototypeOf(this,Yo.prototype),this.customData={appName:h.name,tenantId:null!==(O=h.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(h,m,b,T){return new Yo(h,m,b,T)}}function li(y,h,m,b){return("reauthenticate"===h?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Yo._fromErrorAndOperation(y,O,h,b):O})}function es(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function ts(){return(ts=(0,f.Z)(function*(y,h){const m=(0,N.m9)(y);yield bi(!0,m,h);const{providerUserInfo:b}=yield mi(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),T=es(b||[]);return m.providerData=m.providerData.filter(O=>T.has(O.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Mr(y,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(y,h,m=!1){const b=yield yr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),m);return Xn._forOperation(y,"link",b)})).apply(this,arguments)}function bi(y,h,m){return ns.apply(this,arguments)}function ns(){return(ns=(0,f.Z)(function*(y,h,m){yield Qt(h);const T=!1===y?"provider-already-linked":"no-such-provider";U(es(h.providerData).has(m)===y,h.auth,T)})).apply(this,arguments)}function rs(y,h){return is.apply(this,arguments)}function is(){return(is=(0,f.Z)(function*(y,h,m=!1){var b;const{auth:T}=y,O="reauthenticate";try{const W=yield yr(y,li(T,O,h,y),m);U(W.idToken,T,"internal-error");const de=Xe(W.idToken);U(de,T,"internal-error");const{sub:Ve}=de;return U(y.uid===Ve,T,"user-mismatch"),Xn._forOperation(y,O,W)}catch(W){throw"auth/user-not-found"===(null===(b=W)||void 0===b?void 0:b.code)&&Ae(T,"user-mismatch"),W}})).apply(this,arguments)}function Xo(y,h){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(y,h,m=!1){const b="signIn",T=yield li(y,b,h),O=yield Xn._fromIdTokenResponse(y,b,T);return m||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function kn(y,h){return Md.apply(this,arguments)}function Md(){return(Md=(0,f.Z)(function*(y,h){return Xo(Dn(y),h)})).apply(this,arguments)}function jl(y,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(y,h){const m=(0,N.m9)(y);return yield bi(!1,m,h.providerId),Mr(m,h)})).apply(this,arguments)}function so(y,h){return ks.apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(y,h){return rs((0,N.m9)(y),h)})).apply(this,arguments)}function Hl(y,h){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(y,h){return qr(y,"POST","/v1/accounts:signInWithCustomToken",Lt(y,h))})).apply(this,arguments)}function Ut(){return(Ut=(0,f.Z)(function*(y,h){const m=Dn(y),b=yield Hl(m,{token:h,returnSecureToken:!0}),T=yield Xn._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Os{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?ea._fromServerResponse(h,m):Ae(h,"internal-error")}}class ea extends Os{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new ea(m)}}function _n(y,h,m){var b;U((null===(b=m.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),U(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(U(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&(U(m.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function Fs(){return(Fs=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y),T={requestType:"PASSWORD_RESET",email:h};m&&_n(b,T,m),yield Ho(b,T)})).apply(this,arguments)}function Wa(){return(Wa=(0,f.Z)(function*(y,h,m){yield Vt((0,N.m9)(y),{oobCode:h,newPassword:m})})).apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(y,h){yield ja((0,N.m9)(y),{oobCode:h})})).apply(this,arguments)}function Za(y,h){return cf.apply(this,arguments)}function cf(){return(cf=(0,f.Z)(function*(y,h){const m=(0,N.m9)(y),b=yield Vt(m,{oobCode:h}),T=b.requestType;switch(U(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(b.mfaInfo,m,"internal-error");default:U(b.email,m,"internal-error")}let O=null;return b.mfaInfo&&(O=Os._fromServerResponse(Dn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:T}})).apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(y,h){const{data:m}=yield Za((0,N.m9)(y),h);return m.email})).apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(y,h,m){const b=Dn(y),T=yield Zo(b,{returnSecureToken:!0,email:h,password:m}),O=yield Xn._fromIdTokenResponse(b,"signIn",T);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function qu(){return(qu=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};U(m.handleCodeInApp,b,"argument-error"),m&&_n(b,T,m),yield Go(b,T)})).apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y),T=zo.credentialWithLink(h,m||Ne());return U(T._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),kn(b,T)})).apply(this,arguments)}function Ku(y,h){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:createAuthUri",Lt(y,h))})).apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(y,h){const b={identifier:h,continueUri:pt()?Ne():"http://localhost"},{signinMethods:T}=yield Ku((0,N.m9)(y),b);return T||[]})).apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(y,h){const m=(0,N.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&_n(m.auth,T,h);const{email:O}=yield Vr(m.auth,T);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function zl(){return(zl=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};m&&_n(b.auth,O,m);const{email:W}=yield qp(b.auth,O);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function ql(y,h){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,f.Z)(function*(y,h){return on(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(y,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const b=(0,N.m9)(y),O={idToken:yield b.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},W=yield yr(b,ql(b.auth,O));b.displayName=W.displayName||null,b.photoURL=W.photoUrl||null;const de=b.providerData.find(({providerId:Ve})=>"password"===Ve);de&&(de.displayName=b.displayName,de.photoURL=b.photoURL),yield b._updateTokensIfNecessary(W)})).apply(this,arguments)}function lr(y,h,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(y,h,m){const{auth:b}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(O.email=h),m&&(O.password=m);const W=yield yr(y,Vl(b,O));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class ia{constructor(h,m,b={}){this.isNewUser=h,this.providerId=m,this.profile=b}}class kd extends ia{constructor(h,m,b,T){super(h,m,b),this.username=T}}class hf extends ia{constructor(h,m){super(h,"facebook.com",m)}}class Od extends kd{constructor(h,m){super(h,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class ff extends ia{constructor(h,m){super(h,"google.com",m)}}class Yu extends kd{constructor(h,m,b){super(h,"twitter.com",m,b)}}function Yl(y){const{user:h,_tokenResponse:m}=y;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function vn(y){var h,m;if(!y)return null;const{providerId:b}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&y?.idToken){const W=null===(m=null===(h=Xe(y.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new ia(O,"anonymous"!==W&&"custom"!==W?W:null)}if(!b)return null;switch(b){case"facebook.com":return new hf(O,T);case"github.com":return new Od(O,T);case"google.com":return new ff(O,T);case"twitter.com":return new Yu(O,T,y.screenName||null);case"custom":case"anonymous":return new ia(O,null);default:return new ia(O,b,T)}}(m)}class Li{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new Li("enroll",h)}static _fromMfaPendingCredential(h){return new Li("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,b;if(h?.multiFactorSession){if(null!==(m=h.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Li._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(b=h.multiFactorSession)&&void 0!==b&&b.idToken)return Li._fromIdtoken(h.multiFactorSession.idToken)}return null}}class el{constructor(h,m,b){this.session=h,this.hints=m,this.signInResolver=b}static _fromError(h,m){const b=Dn(h),T=m.customData._serverResponse,O=(T.mfaInfo||[]).map(de=>Os._fromServerResponse(b,de));U(T.mfaPendingCredential,b,"internal-error");const W=Li._fromMfaPendingCredential(T.mfaPendingCredential);return new el(W,O,function(){var de=(0,f.Z)(function*(Ve){const et=yield Ve._process(b,W);delete T.mfaInfo,delete T.mfaPendingCredential;const _t=Object.assign(Object.assign({},T),{idToken:et.idToken,refreshToken:et.refreshToken});switch(m.operationType){case"signIn":const ft=yield Xn._fromIdTokenResponse(b,m.operationType,_t);return yield b._updateCurrentUser(ft.user),ft;case"reauthenticate":return U(m.user,b,"internal-error"),Xn._forOperation(m.user,m.operationType,_t);default:Ae(b,"internal-error")}});return function(Ve){return de.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,f.Z)(function*(){return m.signInResolver(h)})()}}function yf(y,h){return on(y,"POST","/v2/accounts/mfaEnrollment:start",Lt(y,h))}class tl{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Os._fromServerResponse(h.auth,b)))})}static _fromUser(h){return new tl(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Li._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var b=this;return(0,f.Z)(function*(){const T=h,O=yield b.getSession(),W=yield yr(b.user,T._process(b.user.auth,O,m));return yield b.user._updateTokensIfNecessary(W),b.user.reload()})()}unenroll(h){var m=this;return(0,f.Z)(function*(){var b;const T="string"==typeof h?h:h.uid,O=yield m.user.getIdToken(),W=yield yr(m.user,function Sy(y,h){return on(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(y,h))}(m.user.auth,{idToken:O,mfaEnrollmentId:T}));m.enrolledFactors=m.enrolledFactors.filter(({uid:de})=>de!==T),yield m.user._updateTokensIfNecessary(W);try{yield m.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(b=de)||void 0===b?void 0:b.code))throw de}})()}}const nl=new WeakMap,Ns="__sak";class Pd{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ns,"1"),this.storage.removeItem(Ns),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const as=(()=>{class y extends Pd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _f(){const y=(0,N.z$)();return _r(y)||ai(y)}()&&function Cs(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Va(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const T=this.storage.getItem(b),O=this.localCache[b];T!==O&&m(b,O,T)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((de,Ve,et)=>{this.notifyListeners(de,et)});const T=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(T);if(m.newValue!==de)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!b)return}const O=()=>{const de=this.storage.getItem(T);!b&&this.localCache[T]===de||this.notifyListeners(T,de)},W=this.storage.getItem(T);!function En(){return(0,N.w1)()&&10===document.documentMode}()||W===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,b){this.localCache[m]=b;const T=this.listeners[m];if(T)for(const O of Array.from(T))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var T=()=>super._set,O=this;return(0,f.Z)(function*(){yield T().call(O,m,b),O.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,T=this;return(0,f.Z)(function*(){const O=yield b().call(T,m);return T.localCache[m]=JSON.stringify(O),O})()}_remove(m){var b=()=>super._remove,T=this;return(0,f.Z)(function*(){yield b().call(T,m),delete T.localCache[m]})()}}return y.type="LOCAL",y})(),Ps=(()=>{class y extends Pd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return y.type="SESSION",y})();let oa=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(O=>O.isListeningto(m));if(b)return b;const T=new y(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,f.Z)(function*(){const T=m,{eventId:O,eventType:W,data:de}=T.data,Ve=b.handlersMap[W];if(!Ve?.size)return;T.ports[0].postMessage({status:"ack",eventId:O,eventType:W});const et=Array.from(Ve).map(function(){var ft=(0,f.Z)(function*(Kn){return Kn(T.origin,de)});return function(Kn){return ft.apply(this,arguments)}}()),_t=yield function Ld(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return h.apply(this,arguments)}}()))}(et);T.ports[0].postMessage({status:"done",eventId:O,eventType:W,response:_t})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ur(y="",h=10){let m="";for(let b=0;b<h;b++)m+=Math.floor(10*Math.random());return y+m}class On{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,b=50){var T=this;return(0,f.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let W,de;return new Promise((Ve,et)=>{const _t=ur("",20);O.port1.start();const ft=setTimeout(()=>{et(new Error("unsupported_event"))},b);de={messageChannel:O,onMessage(Kn){const ji=Kn;if(ji.data.eventId===_t)switch(ji.data.status){case"ack":clearTimeout(ft),W=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Ve(ji.data.response);break;default:clearTimeout(ft),clearTimeout(W),et(new Error("invalid_response"))}}},T.handlers.add(de),O.port1.addEventListener("message",de.onMessage),T.target.postMessage({eventType:h,eventId:_t,data:m},[O.port2])}).finally(()=>{de&&T.removeMessageHandler(de)})})()}}function pn(){return window}function xn(){return typeof pn().WorkerGlobalScope<"u"&&"function"==typeof pn().importScripts}function aa(){return(aa=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bs="firebaseLocalStorageDb",ls="firebaseLocalStorage",$t="fbase_key";class uo{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function us(y,h){return y.transaction([ls],h?"readwrite":"readonly").objectStore(ls)}function Ql(){const y=indexedDB.open(Bs,1);return new Promise((h,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(ls,{keyPath:$t})}catch(T){m(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const b=y.result;b.objectStoreNames.contains(ls)?h(b):(b.close(),yield function Bi(){const y=indexedDB.deleteDatabase(Bs);return new uo(y).toPromise()}(),h(yield Ql()))}))})}function sl(y,h,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(y,h,m){const b=us(y,!0).put({[$t]:h,value:m});return new uo(b).toPromise()})).apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(y,h){const m=us(y,!1).get(h),b=yield new uo(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Jl(y,h){const m=us(y,!0).delete(h);return new uo(m).toPromise()}const Ur=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Ql()),m.db})()}_withRetries(m){var b=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const O=yield b._openDb();return yield m(O)}catch(O){if(T++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return xn()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=oa._getInstance(function cr(){return xn()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(T,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(T,O){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(T,O){return["keyChanged"]});return function(T,O){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var b,T;if(m.activeServiceWorker=yield function il(){return aa.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new On(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(T=O[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Ls(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ql();return yield sl(m,Ns,"1"),yield Jl(m,Ns),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(O=>sl(O,m,b)),T.localCache[m]=b,T.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,f.Z)(function*(){const T=yield b._withRetries(O=>function hr(y,h){return Xl.apply(this,arguments)}(O,m));return b.localCache[m]=T,T})()}_remove(m){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(T=>Jl(T,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const b=yield m._withRetries(W=>{const de=us(W,!1).getAll();return new uo(de).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const T=[],O=new Set;for(const{fbase_key:W,value:de}of b)O.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(de)&&(m.notifyListeners(W,de),T.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!O.has(W)&&(m.notifyListeners(W,null),T.push(W));return T})()}notifyListeners(m,b){this.localCache[m]=b;const T=this.listeners[m];if(T)for(const O of Array.from(T))O(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Mt(y,h){return on(y,"POST","/v2/accounts/mfaSignIn:start",Lt(y,h))}function Je(){return(Je=(0,f.Z)(function*(y){return(yield on(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function gt(y){return new Promise((h,m)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=h,b.onerror=T=>{const O=we("internal-error");O.customData=T,m(O)},b.type="text/javascript",b.charset="UTF-8",function ca(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(b)})}function ol(y){return`__${y}${Math.floor(1e6*Math.random())}`}const al=1e12;class vf{constructor(h){this.auth=h,this.counter=al,this._widgets=new Map}render(h,m){const b=this.counter;return this._widgets.set(b,new Xp(h,this.auth.name,m||{})),this.counter++,b}reset(h){var m;const b=h||al;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(h){var m;return(null===(m=this._widgets.get(h||al))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,f.Z)(function*(){var b;return null===(b=m._widgets.get(h||al))||void 0===b||b.execute(),""})()}}class Xp{constructor(h,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;U(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jp(y){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const bf=ol("rcb"),kr=new sn(3e4,6e4);class bn{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=pn().grecaptcha)||void 0===h||!h.render)}load(h,m=""){return U(function da(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(pn().grecaptcha):new Promise((b,T)=>{const O=pn().setTimeout(()=>{T(we(h,"network-request-failed"))},kr.get());pn()[bf]=()=>{pn().clearTimeout(O),delete pn()[bf];const de=pn().grecaptcha;if(!de)return void T(we(h,"internal-error"));const Ve=de.render;de.render=(et,_t)=>{const ft=Ve(et,_t);return this.counter++,ft},this.hostLanguage=m,b(de)},gt(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:bf,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),T(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var m;return!(null===(m=pn().grecaptcha)||void 0===m||!m.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ty{load(h){return(0,f.Z)(function*(){return new vf(h)})()}clearedOneInstance(){}}const er="recaptcha",Ju={theme:"light",type:"image"};class ll{constructor(h,m=Object.assign({},Ju),b){this.parameters=m,this.type=er,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(b),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;U(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ty:new bn,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),b=h.getAssertedRecaptcha();return b.getResponse(m)||new Promise(O=>{const W=de=>{!de||(h.tokenChangeListeners.delete(W),O(de))};h.tokenChangeListeners.add(W),h.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof h)h(m);else if("string"==typeof h){const b=pn()[h];"function"==typeof b&&b(m)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){U(pt()&&!xn(),h.auth,"internal-error"),yield function eg(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Cn(y){return Je.apply(this,arguments)}(h.auth);U(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ec{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=$o._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function jr(){return(jr=(0,f.Z)(function*(y,h,m){const b=Dn(y),T=yield ul(b,h,(0,N.m9)(m));return new ec(T,O=>kn(b,O))})).apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y);yield bi(!1,b,"phone");const T=yield ul(b.auth,h,(0,N.m9)(m));return new ec(T,O=>jl(b,O))})).apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y),T=yield ul(b.auth,h,(0,N.m9)(m));return new ec(T,O=>so(b,O))})).apply(this,arguments)}function ul(y,h,m){return tu.apply(this,arguments)}function tu(){return(tu=(0,f.Z)(function*(y,h,m){var b;const T=yield m.verify();try{let O;if(U("string"==typeof T,y,"argument-error"),U(m.type===er,y,"argument-error"),O="string"==typeof h?{phoneNumber:h}:h,"session"in O){const W=O.session;if("phoneNumber"in O)return U("enroll"===W.type,y,"internal-error"),(yield yf(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,y,"internal-error");const de=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return U(de,y,"missing-multi-factor-info"),(yield Mt(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Kp(y,{phoneNumber:O.phoneNumber,recaptchaToken:T});return W}}finally{m._reset()}})).apply(this,arguments)}function nc(){return(nc=(0,f.Z)(function*(y,h){yield Mr((0,N.m9)(y),h)})).apply(this,arguments)}let fo=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Dn(m)}verifyPhoneNumber(m,b){return ul(this.auth,m,(0,N.m9)(b))}static credential(m,b){return $o._fromVerification(m,b)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:T}=m;return b&&T?$o._fromTokenResponse(b,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function zn(y,h){return h?oe(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class po extends no{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return or(h,this._buildIdpRequest())}_linkToIdToken(h,m){return or(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return or(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function ha(y){return Xo(y.auth,new po(y),y.bypassAuthState)}function Bd(y){const{auth:h,user:m}=y;return U(m,h,"internal-error"),rs(m,new po(y),y.bypassAuthState)}function cs(y){return fa.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y){const{auth:h,user:m}=y;return U(m,h,"internal-error"),Mr(m,new po(y),y.bypassAuthState)})).apply(this,arguments)}class pa{constructor(h,m,b,T,O=!1){this.auth=h,this.resolver=b,this.user=T,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,f.Z)(function*(b,T){h.pendingPromise={resolve:b,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(O){h.reject(O)}});return function(b,T){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:T,postBody:O,tenantId:W,error:de,type:Ve}=h;if(de)return void m.reject(de);const et={auth:m.auth,requestUri:b,sessionId:T,tenantId:W||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ve)(et))}catch(_t){m.reject(_t)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ha;case"linkViaPopup":case"linkViaRedirect":return cs;case"reauthViaPopup":case"reauthViaRedirect":return Bd;default:Ae(this.auth,"internal-error")}}resolve(h){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nu=new sn(2e3,1e4);function ga(){return(ga=(0,f.Z)(function*(y,h,m){const b=Dn(y);He(y,h,Fi);const T=zn(b,m);return new go(b,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y);He(b.auth,h,Fi);const T=zn(b.auth,m);return new go(b.auth,"reauthViaPopup",h,T,b).executeNotNull()})).apply(this,arguments)}function ru(){return(ru=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y);He(b.auth,h,Fi);const T=zn(b.auth,m);return new go(b.auth,"linkViaPopup",h,T,b).executeNotNull()})).apply(this,arguments)}let go=(()=>{class y extends pa{constructor(m,b,T,O,W){super(m,b,O,W),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const b=yield m.execute();return U(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,f.Z)(function*(){X(1===m.filter.length,"Popup operations only handle one event");const b=ur();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,T;this.pollId=null!==(T=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,nu.get())};m()}}return y.currentPopupAction=null,y})();const wi=new Map;class Vd extends pa{constructor(h,m,b=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,f.Z)(function*(){let b=wi.get(m.auth._key());if(!b){try{const O=(yield function Ef(y,h){return ds.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;b=()=>Promise.resolve(O)}catch(T){b=()=>Promise.reject(T)}wi.set(m.auth._key(),b)}return m.bypassAuthState||wi.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(b,h);if("unknown"!==h.type){if(h.eventId){const T=yield b.auth._redirectUserForId(h.eventId);if(T)return b.user=T,m().call(b,h);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ds(){return(ds=(0,f.Z)(function*(y,h){const m=sc(h),b=An(y);if(!(yield b._isAvailable()))return!1;const T="true"===(yield b._get(m));return yield b._remove(m),T})).apply(this,arguments)}function tr(y,h){return wr.apply(this,arguments)}function wr(){return(wr=(0,f.Z)(function*(y,h){return An(y)._set(sc(h),"true")})).apply(this,arguments)}function ya(y,h){wi.set(y._key(),h)}function An(y){return oe(y._redirectPersistence)}function sc(y){return sr("pendingRedirect",y.config.apiKey,y.name)}function I(){return(I=(0,f.Z)(function*(y,h,m){const b=Dn(y);He(y,h,Fi);const T=zn(b,m);return yield tr(T,b),T._openRedirect(b,h,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y);He(b.auth,h,Fi);const T=zn(b.auth,m);yield tr(T,b.auth);const O=yield ht(b);return T._openRedirect(b.auth,h,"reauthViaRedirect",O)})).apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(y,h,m){const b=(0,N.m9)(y);He(b.auth,h,Fi);const T=zn(b.auth,m);yield bi(!1,b,h.providerId),yield tr(T,b.auth);const O=yield ht(b);return T._openRedirect(b.auth,h,"linkViaRedirect",O)})).apply(this,arguments)}function mt(){return(mt=(0,f.Z)(function*(y,h){return yield Dn(y)._initializationPromise,xt(y,h,!1)})).apply(this,arguments)}function xt(y,h){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(y,h,m=!1){const b=Dn(y),T=zn(b,h),W=yield new Vd(b,T,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield b._persistUserIfCurrent(W.user),yield b._setRedirectUser(null,h)),W})).apply(this,arguments)}function ht(y){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(y){const h=ur(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class mo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(h,b)&&(m=!0,this.sendToConsumer(h,b),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function iu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return an(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var b;if(h.error&&!an(h)){const T=(null===(b=h.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(we(this.auth,T))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const b=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&b}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rn(h))}saveEventToCache(h){this.cachedEventUids.add(rn(h)),this.lastProcessedEventTime=Date.now()}}function rn(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function an({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function pl(y){return Us.apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(y,h={}){return on(y,"GET","/v1/projects",h)})).apply(this,arguments)}const yo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_a=/^https?/;function Df(){return(Df=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield pl(y);for(const m of h)try{if(If(m))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function If(y){const h=Ne(),{protocol:m,hostname:b}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===b?"chrome-extension:"===m&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===b}if(!_a.test(m))return!1;if(yo.test(y))return b===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(b)}const su=new sn(3e4,6e4);function xf(){const y=pn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let ou=null;function Hb(y){return ou=ou||function Cf(y){return new Promise((h,m)=>{var b,T,O;function W(){xf(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{xf(),m(we(y,"network-request-failed"))},timeout:su.get()})}if(null!==(T=null===(b=pn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(O=pn().gapi)||void 0===O||!O.load){const de=ol("iframefcb");return pn()[de]=()=>{gapi.load?W():m(we(y,"network-request-failed"))},gt(`https://apis.google.com/js/api.js?onload=${de}`).catch(Ve=>m(Ve))}W()}}).catch(h=>{throw ou=null,h})}(y),ou}const oc=new sn(5e3,15e3),ng={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const m=h.emulator?Ln(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:h.apiKey,appName:y.name,v:he.SDK_VERSION},T=rg.get(y.config.apiHost);T&&(b.eid=T);const O=y._getFrameworks();return O.length&&(b.fw=O.join(",")),`${m}?${(0,N.xO)(b).slice(1)}`}function _o(){return _o=(0,f.Z)(function*(y){const h=yield Hb(y),m=pn().gapi;return U(m,y,"internal-error"),h.open({where:document.body,url:va(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ng,dontclear:!0},b=>new Promise(function(){var T=(0,f.Z)(function*(O,W){yield b.restyle({setHideOnLeave:!1});const de=we(y,"network-request-failed"),Ve=pn().setTimeout(()=>{W(de)},oc.get());function et(){pn().clearTimeout(Ve),O(b)}b.ping(et).then(et,()=>{W(de)})});return function(O,W){return T.apply(this,arguments)}}()))}),_o.apply(this,arguments)}const ig={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Af{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zd(y,h,m,b,T,O){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:b,v:he.SDK_VERSION,eventId:T};if(h instanceof Fi){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,N.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,et]of Object.entries(O||{}))W[Ve]=et}if(h instanceof io){const Ve=h.getScopes().filter(et=>""!==et);Ve.length>0&&(W.scopes=Ve.join(","))}y.tenantId&&(W.tid=y.tenantId);const de=W;for(const Ve of Object.keys(de))void 0===de[Ve]&&delete de[Ve];return`${function lc({config:y}){return y.emulator?Ln(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(de).slice(1)}`}const qd="webStorageSupport";class au extends class js{constructor(h){this.factorId=h}_process(h,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,b);case"signin":return this._finalizeSignIn(h,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new au(h)}_finalizeEnroll(h,m,b){return function Ay(y,h){return on(y,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(y,h))}(h,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function ua(y,h){return on(y,"POST","/v2/accounts/mfaSignIn:finalize",Lt(y,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let og=(()=>{class y{constructor(){}static assertion(m){return au._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Wd="@firebase/auth";class ag{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(b=>{var T;h((null===(T=b)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vo(){return window}function Tf(){return(Tf=(0,f.Z)(function*(y,h,m){var b;const{BuildInfo:T}=vo();X(h.sessionId,"AuthEvent did not contain a session ID");const O=yield Rf(h.sessionId),W={};return ai()?W.ibi=T.packageName:wt()?W.apn=T.packageName:Ae(y,"operation-not-supported-in-this-environment"),T.displayName&&(W.appDisplayName=T.displayName),W.sessionId=O,zd(y,m,h.type,void 0,null!==(b=h.eventId)&&void 0!==b?b:void 0,W)})).apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(y){const{BuildInfo:h}=vo(),m={};ai()?m.iosBundleId=h.packageName:wt()?m.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield pl(y,m)})).apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(y,h,m){const{cordova:b}=vo();let T=()=>{};try{yield new Promise((O,W)=>{let de=null;function Ve(){var ft;O();const Kn=null===(ft=b.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Kn&&Kn(),"function"==typeof m?.close&&m.close()}function et(){de||(de=window.setTimeout(()=>{W(we(y,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===document?.visibilityState&&et()}h.addPassiveListener(Ve),document.addEventListener("resume",et,!1),wt()&&document.addEventListener("visibilitychange",_t,!1),T=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",_t,!1),de&&window.clearTimeout(de)}})}finally{T()}})).apply(this,arguments)}function Rf(y){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,f.Z)(function*(y){const h=Qd(y),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qd(y){if(X(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),m=new Uint8Array(h);for(let b=0;b<y.length;b++)m[b]=y.charCodeAt(b);return m}!function Kd(y){(0,he._registerComponent)(new ue.wA("auth",(h,{options:m})=>{const b=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:O,authDomain:W}=b.options;return((de,Ve)=>{U(O&&!O.includes(":"),"invalid-api-key",{appName:de.name}),U(!W?.includes(":"),"argument-error",{appName:de.name});const et={apiKey:O,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kt(y)},_t=new Vo(de,Ve,et);return function Le(y,h){const m=h?.persistence||[],b=(Array.isArray(m)?m:[m]).map(oe);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(b,h?.popupRedirectResolver)}(_t,m),_t})(b,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,b)=>{h.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new ue.wA("auth-internal",h=>{const m=Dn(h.getProvider("auth").getImmediate());return new ag(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Wd,"0.20.5",function uc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,he.registerVersion)(Wd,"0.20.5","esm2017")}("Browser");class kf extends mo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function lu(y){return ug.apply(this,arguments)}function ug(){return(ug=(0,f.Z)(function*(y){const h=yield hc()._get(Eo(y));return h&&(yield hc()._remove(Eo(y))),h})).apply(this,arguments)}function ml(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*h.length);y.push(h.charAt(b))}return y.join("")}function hc(){return oe(as)}function Eo(y){return sr("authEvent",y.config.apiKey,y.name)}function fs(y){if(!y?.includes("?"))return{};const[h,...m]=y.split("?");return(0,N.zd)(m.join("?"))}function pc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function cu(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function du(y=(0,N.z$)()){return!("file:"!==cu()&&"ionic:"!==cu()&&"capacitor:"!==cu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ny(){try{const y=self.localStorage,h=ur();if(y)return y.setItem(h,"1"),y.removeItem(h),!function $b(y=(0,N.z$)()){return function hg(){return(0,N.w1)()&&11===document?.documentMode}()||function Fy(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch{return yl()&&(0,N.hl)()}return!1}function yl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ia(){return(function gc(){return"http:"===cu()||"https:"===cu()}()||(0,N.ru)()||du())&&!function Oy(){return(0,N.b$)()||(0,N.UG)()}()&&Ny()&&!yl()}function Hs(){return du()&&typeof document<"u"}function mc(){return(mc=(0,f.Z)(function*(){return!!Hs()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Er={LOCAL:"local",NONE:"none",SESSION:"session"},hu=U,Jd="persistence";function Nf(y){return fu.apply(this,arguments)}function fu(){return(fu=(0,f.Z)(function*(y){yield y._initializationPromise;const h=yc(),m=sr(Jd,y.config.apiKey,y.name);h&&h.setItem(m,y._getPersistence())})).apply(this,arguments)}function yc(){var y;try{return(null===(y=function fg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Do=U;class Io{constructor(){this.browserResolver=oe(class ti{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ps,this._completeRedirectFn=xt,this._overrideRedirectResult=ya}_openPopup(h,m,b,T){var O=this;return(0,f.Z)(function*(){var W;X(null===(W=O.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const de=zd(h,m,b,Ne(),T);return function sg(y,h,m,b=500,T=600){const O=Math.max((window.screen.availHeight-T)/2,0).toString(),W=Math.max((window.screen.availWidth-b)/2,0).toString();let de="";const Ve=Object.assign(Object.assign({},ig),{width:b.toString(),height:T.toString(),top:O,left:W}),et=(0,N.z$)().toLowerCase();m&&(de=Sr(et)?"_blank":m),yn(et)&&(h=h||"http://localhost",Ve.scrollbars="yes");const _t=Object.entries(Ve).reduce((Kn,[ji,_l])=>`${Kn}${ji}=${_l},`,"");if(function yi(y=(0,N.z$)()){var h;return ai(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(et)&&"_self"!==de)return function wa(y,h){const m=document.createElement("a");m.href=y,m.target=h;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(h||"",de),new Af(null);const ft=window.open(h||"",de,_t);U(ft,y,"popup-blocked");try{ft.focus()}catch{}return new Af(ft)}(h,de,ur())})()}_openRedirect(h,m,b,T){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(h),function In(y){pn().location.href=y}(zd(h,m,b,Ne(),T)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:T,promise:O}=this.eventManagers[m];return T?Promise.resolve(T):(X(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(h);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(h){var m=this;return(0,f.Z)(function*(){const b=yield function jd(y){return _o.apply(this,arguments)}(h),T=new mo(h);return b.register("authEvent",O=>(U(O?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:T},m.iframes[h._key()]=b,T})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(qd,{type:qd},T=>{var O;const W=null===(O=T?.[0])||void 0===O?void 0:O[qd];void 0!==W&&m(!!W),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ud(y){return Df.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return Va()||_r()||ai()}}),this.cordovaResolver=oe(class fc{constructor(){this._redirectPersistence=Ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xt,this._overrideRedirectResult=ya}_initialize(h){var m=this;return(0,f.Z)(function*(){const b=h._key();let T=m.eventManagers.get(b);return T||(T=new kf(h),m.eventManagers.set(b,T),m.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,b,T){var O=this;return(0,f.Z)(function*(){!function Mf(y){var h,m,b,T,O,W,de,Ve,et,_t;const ft=vo();U("function"==typeof(null===(h=ft?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(m=ft?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(O=null===(T=null===(b=ft?.cordova)||void 0===b?void 0:b.plugins)||void 0===T?void 0:T.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ve=null===(de=null===(W=ft?.cordova)||void 0===W?void 0:W.plugins)||void 0===de?void 0:de.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(_t=null===(et=ft?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===_t?void 0:_t.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield O._initialize(h);yield W.initialized(),W.resetRedirect(),function dl(){wi.clear()}(),yield O._originValidation(h);const de=function gl(y,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:ml(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(h,b,T);yield function wo(y,h){return hc()._set(Eo(y),h)}(h,de);const Ve=yield function cc(y,h,m){return Tf.apply(this,arguments)}(h,de,m),et=yield function dc(y){const{cordova:h}=vo();return new Promise(m=>{h.plugins.browsertab.isAvailable(b=>{let T=null;b?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function vr(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(T)})})}(Ve);return function Vi(y,h,m){return Da.apply(this,arguments)}(h,W,et)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function My(y){return bo.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:b,handleOpenURL:T,BuildInfo:O}=vo(),W=setTimeout((0,f.Z)(function*(){yield lu(h),m.onEvent(pc())}),500),de=function(){var _t=(0,f.Z)(function*(ft){clearTimeout(W);const Kn=yield lu(h);let ji=null;Kn&&ft?.url&&(ji=function cg(y,h){var m,b;const T=function ky(y){const h=fs(y),m=h.link?decodeURIComponent(h.link):void 0,b=fs(m).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return fs(T).link||T||b||m||y}(h);if(T.includes("/__/auth/callback")){const O=fs(T),W=O.firebaseError?function dg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,de=null===(b=null===(m=W?.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Ve=de?we(de):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Kn,ft.url)),m.onEvent(ji||pc())});return function(Kn){return _t.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,de);const Ve=T,et=`${O.packageName.toLowerCase()}://`;vo().handleOpenURL=function(){var _t=(0,f.Z)(function*(ft){if(ft.toLowerCase().startsWith(et)&&de({url:ft}),"function"==typeof Ve)try{Ve(ft)}catch(Kn){console.error(Kn)}});return function(ft){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ps,this._completeRedirectFn=xt,this._overrideRedirectResult=ya}_initialize(h){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,b,T){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(h,m,b,T)})()}_openRedirect(h,m,b,T){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(h,m,b,T)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Hs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Do(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const m=yield function Ff(){return mc.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function _c(y){return y.unwrap()}function Ly(y){return vc(y)}function vc(y){const{_tokenResponse:h}=y instanceof N.ZR?y.customData:y;if(!h)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return fo.credentialFromResult(y);const m=h.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=$a;break;case"facebook.com":b=Wo;break;case"github.com":b=Cd;break;case"twitter.com":b=Sd;break;default:const{oauthIdToken:T,oauthAccessToken:O,oauthTokenSecret:W,pendingToken:de,nonce:Ve}=h;return O||W||T||de?de?m.startsWith("saml.")?Ko._create(m,de):Ji._fromParams({providerId:m,signInMethod:m,pendingToken:de,idToken:T,accessToken:O}):new qo(m).credential({idToken:T,accessToken:O,rawNonce:Ve}):null}return y instanceof N.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function Wn(y,h){return h.catch(m=>{throw m instanceof N.ZR&&function Lf(y,h){var m,b;const T=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=h)||void 0===b?void 0:b.code))h.resolver=new Bf(y,function br(y,h){var m;const b=(0,N.m9)(y),T=h;return U(h.customData.operationType,b,"argument-error"),U(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),el._fromError(b,T)}(y,h));else if(T){const O=vc(h),W=h;O&&(W.credential=O,W.tenantId=T.tenantId||void 0,W.email=T.email||void 0,W.phoneNumber=T.phoneNumber||void 0)}}(y,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:Ly(m),additionalUserInfo:Yl(m),user:Gs.getOrCreate(T)}})}function xa(y,h){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(y,h){const m=yield h;return{verificationId:m.verificationId,confirm:b=>Wn(y,m.confirm(b))}})).apply(this,arguments)}class Bf{constructor(h,m){this.resolver=m,this.auth=function pu(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Wn(_c(this.auth),this.resolver.resolveSignIn(h))}}class Gs{constructor(h){this._delegate=h,this.multiFactor=function Nd(y){const h=(0,N.m9)(y);return nl.has(h)||nl.set(h,tl._fromUser(h)),nl.get(h)}(h)}static getOrCreate(h){return Gs.USER_MAP.has(h)||Gs.USER_MAP.set(h,new Gs(h)),Gs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,f.Z)(function*(){return Wn(m.auth,jl(m._delegate,h))})()}linkWithPhoneNumber(h,m){var b=this;return(0,f.Z)(function*(){return xa(b.auth,function tc(y,h,m){return $n.apply(this,arguments)}(b._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,f.Z)(function*(){return Wn(m.auth,function cl(y,h,m){return ru.apply(this,arguments)}(m._delegate,h,Io))})()}linkWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Nf(Dn(m.auth)),function J(y,h,m){return function se(y,h,m){return Se.apply(this,arguments)}(y,h,m)}(m._delegate,h,Io)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,f.Z)(function*(){return Wn(m.auth,so(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return xa(this.auth,function ho(y,h,m){return fr.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return Wn(this.auth,function ic(y,h,m){return ma.apply(this,arguments)}(this._delegate,h,Io))}reauthenticateWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Nf(Dn(m.auth)),function x(y,h,m){return function M(y,h,m){return L.apply(this,arguments)}(y,h,m)}(m._delegate,h,Io)})()}sendEmailVerification(h){return function Zu(y,h){return na.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,f.Z)(function*(){return yield function za(y,h){return ts.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function df(y,h){return lr((0,N.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Zl(y,h){return lr((0,N.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function wf(y,h){return nc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Kl(y,h){return ra.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function $l(y,h,m){return zl.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Gs.USER_MAP=new WeakMap;const $s=U;let ps=(()=>{class y{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;$s(T,"invalid-api-key",{appName:m.name}),$s(T,"invalid-api-key",{appName:m.name});const O=typeof window<"u"?Io:void 0;this._delegate=b.initialize({options:{persistence:pr(T,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function Tr(y,h,m){const b=Dn(y);U(b._canInitEmulator,b,"emulator-config-failed"),U(/^https?:\/\//.test(h),b,"invalid-emulator-scheme");const T=!!m?.disableWarnings,O=Ss(h),{host:W,port:de}=function Qi(y){const h=Ss(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(b);if(T){const O=T[1];return{host:O,port:Wr(b.substr(O.length+1))}}{const[O,W]=b.split(":");return{host:O,port:Wr(W)}}}(h);b.config.emulator={url:`${O}//${W}${null===de?"":`:${de}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:W,port:de,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ts(){function y(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,b)}applyActionCode(m){return function Ka(y,h){return ta.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Za(this._delegate,m)}confirmPasswordReset(m,b){return function ui(y,h,m){return Wa.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var T=this;return(0,f.Z)(function*(){return Wn(T._delegate,function Ni(y,h,m){return Ya.apply(this,arguments)}(T._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Gl(y,h){return Xa.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Wu(y,h){return"EMAIL_SIGNIN"===_i.parseLink(h)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){$s(Ia(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function je(y,h){return mt.apply(this,arguments)}(m._delegate,Io);return b?Wn(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function qn(y,h){Dn(y)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,b,T){const{next:O,error:W,complete:de}=pg(m,b,T);return this._delegate.onAuthStateChanged(O,W,de)}onIdTokenChanged(m,b,T){const{next:O,error:W,complete:de}=pg(m,b,T);return this._delegate.onIdTokenChanged(O,W,de)}sendSignInLinkToEmail(m,b){return function os(y,h,m){return qu.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function qa(y,h,m){return Fs.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,f.Z)(function*(){let T;switch(function Py(y,h){hu(Object.values(Er).includes(h),y,"invalid-persistence-type"),(0,N.b$)()?hu(h!==Er.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?hu(h===Er.NONE,y,"unsupported-persistence-type"):yl()?hu(h===Er.NONE||h===Er.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):hu(h===Er.NONE||Ny(),y,"unsupported-persistence-type")}(b._delegate,m),m){case Er.SESSION:T=Ps;break;case Er.LOCAL:T=(yield oe(Ur)._isAvailable())?Ur:as;break;case Er.NONE:T=Xt;break;default:return Ae("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Wn(this._delegate,function Td(y){return uf.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Wn(this._delegate,kn(this._delegate,m))}signInWithCustomToken(m){return Wn(this._delegate,function Ie(y,h){return Ut.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return Wn(this._delegate,function oo(y,h,m){return kn((0,N.m9)(y),zo.credential(h,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return Wn(this._delegate,function Rd(y,h,m){return Qa.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return xa(this._delegate,function Or(y,h,m){return jr.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,f.Z)(function*(){return $s(Ia(),b._delegate,"operation-not-supported-in-this-environment"),Wn(b._delegate,function rc(y,h,m){return ga.apply(this,arguments)}(b._delegate,m,Io))})()}signInWithRedirect(m){var b=this;return(0,f.Z)(function*(){return $s(Ia(),b._delegate,"operation-not-supported-in-this-environment"),yield Nf(b._delegate),function hl(y,h,m){return function fl(y,h,m){return I.apply(this,arguments)}(y,h,m)}(b._delegate,m,Io)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function ss(y,h){return Jn.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Er,y})();function pg(y,h,m){let b=y;"function"!=typeof y&&({next:b,error:h,complete:m}=y);const T=b;return{next:W=>T(W&&Gs.getOrCreate(W)),error:h,complete:m}}function pr(y,h){const m=function Pf(y,h){const m=yc();if(!m)return[];const b=sr(Jd,y,h);switch(m.getItem(b)){case Er.NONE:return[Xt];case Er.LOCAL:return[Ur,Ps];case Er.SESSION:return[Ps];default:return[]}}(y,h);if(typeof self<"u"&&!m.includes(Ur)&&m.push(Ur),typeof window<"u")for(const b of[as,Ps])m.includes(b)||m.push(b);return m.includes(Xt)||m.push(Xt),m}class eh{constructor(){this.providerId="phone",this._delegate=new fo(_c(re.Z.auth()))}static credential(h,m){return fo.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}eh.PHONE_SIGN_IN_METHOD=fo.PHONE_SIGN_IN_METHOD,eh.PROVIDER_ID=fo.PROVIDER_ID;const By=U;class Vf{constructor(h,m,b=re.Z.app()){var T;By(null===(T=b.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new ll(h,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gg(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),b=h.getProvider("auth");return new ps(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zo,FacebookAuthProvider:Wo,GithubAuthProvider:Cd,GoogleAuthProvider:$a,OAuthProvider:qo,SAMLAuthProvider:Kr,PhoneAuthProvider:eh,PhoneMultiFactorGenerator:og,RecaptchaVerifier:Vf,TwitterAuthProvider:Sd,Auth:ps,AuthCredential:no,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(re.Z)},8306:(ut,Ce,F)=>{F.d(Ce,{y:()=>j});var f=F(930),re=F(727),N=F(8822),he=F(4671);var ue=F(2416),ge=F(576),me=F(2806);let j=(()=>{class Re{constructor(Ye){Ye&&(this._subscribe=Ye)}lift(Ye){const ye=new Re;return ye.source=this,ye.operator=Ye,ye}subscribe(Ye,ye,_e){const Qe=function $e(Re){return Re&&Re instanceof f.Lv||function ee(Re){return Re&&(0,ge.m)(Re.next)&&(0,ge.m)(Re.error)&&(0,ge.m)(Re.complete)}(Re)&&(0,re.Nn)(Re)}(Ye)?Ye:new f.Hp(Ye,ye,_e);return(0,me.x)(()=>{const{operator:tt,source:Ae}=this;Qe.add(tt?tt.call(Qe,Ae):Ae?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(Ye){try{return this._subscribe(Ye)}catch(ye){Ye.error(ye)}}forEach(Ye,ye){return new(ye=H(ye))((_e,Qe)=>{const tt=new f.Hp({next:Ae=>{try{Ye(Ae)}catch(we){Qe(we),tt.unsubscribe()}},error:Qe,complete:_e});this.subscribe(tt)})}_subscribe(Ye){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Ye)}[N.L](){return this}pipe(...Ye){return function pe(Re){return 0===Re.length?he.y:1===Re.length?Re[0]:function(Ye){return Re.reduce((ye,_e)=>_e(ye),Ye)}}(Ye)(this)}toPromise(Ye){return new(Ye=H(Ye))((ye,_e)=>{let Qe;this.subscribe(tt=>Qe=tt,tt=>_e(tt),()=>ye(Qe))})}}return Re.create=Me=>new Re(Me),Re})();function H(Re){var Me;return null!==(Me=Re??ue.v.Promise)&&void 0!==Me?Me:Promise}},7579:(ut,Ce,F)=>{F.d(Ce,{x:()=>ue});var f=F(8306),re=F(727);const he=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=F(8737),pe=F(2806);let ue=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ee=new ge(this,this);return ee.operator=H,ee}_throwIfClosed(){if(this.closed)throw new he}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ee}=this;for(;ee.length;)ee.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ee,isStopped:$e,observers:Re}=this;return ee||$e?re.Lc:(this.currentObservers=null,Re.push(H),new re.w0(()=>{this.currentObservers=null,(0,le.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:ee,thrownError:$e,isStopped:Re}=this;ee?H.error($e):Re&&H.complete()}asObservable(){const H=new f.y;return H.source=this,H}}return me.create=(j,H)=>new ge(j,H),me})();class ge extends ue{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,ee;null===(ee=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ee||ee.call(H,j)}error(j){var H,ee;null===(ee=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ee||ee.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,ee;return null!==(ee=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==ee?ee:re.Lc}}},930:(ut,Ce,F)=>{F.d(Ce,{Hp:()=>Ye,Lv:()=>ee});var f=F(576),re=F(727),N=F(2416),he=F(7849),le=F(5032);const pe=me("C",void 0,void 0);function me(Ae,we,De){return{kind:Ae,value:we,error:De}}var j=F(3410),H=F(2806);class ee extends re.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,re.Nn)(we)&&we.add(this)):this.destination=tt}static create(we,De,He){return new Ye(we,De,He)}next(we){this.isStopped?Qe(function ge(Ae){return me("N",Ae,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Qe(function ue(Ae){return me("E",void 0,Ae)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Qe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Re(Ae,we){return $e.call(Ae,we)}class Me{constructor(we){this.partialObserver=we}next(we){const{partialObserver:De}=this;if(De.next)try{De.next(we)}catch(He){ye(He)}}error(we){const{partialObserver:De}=this;if(De.error)try{De.error(we)}catch(He){ye(He)}else ye(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(De){ye(De)}}}class Ye extends ee{constructor(we,De,He){let Ge;if(super(),(0,f.m)(we)||!we)Ge={next:we??void 0,error:De??void 0,complete:He??void 0};else{let U;this&&N.v.useDeprecatedNextContext?(U=Object.create(we),U.unsubscribe=()=>this.unsubscribe(),Ge={next:we.next&&Re(we.next,U),error:we.error&&Re(we.error,U),complete:we.complete&&Re(we.complete,U)}):Ge=we}this.destination=new Me(Ge)}}function ye(Ae){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ae):(0,he.h)(Ae)}function Qe(Ae,we){const{onStoppedNotification:De}=N.v;De&&j.z.setTimeout(()=>De(Ae,we))}const tt={closed:!0,next:le.Z,error:function _e(Ae){throw Ae},complete:le.Z}},727:(ut,Ce,F)=>{F.d(Ce,{Lc:()=>pe,w0:()=>le,Nn:()=>ue});var f=F(576);const N=(0,F(3888).d)(me=>function(H){me(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ee,$e)=>`${$e+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var he=F(8737);class le{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:ee}=this;if((0,f.m)(ee))try{ee()}catch(Re){j=Re instanceof N?Re.errors:[Re]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Re of $e)try{ge(Re)}catch(Me){j=j??[],Me instanceof N?j=[...j,...Me.errors]:j.push(Me)}}if(j)throw new N(j)}}add(j){var H;if(j&&j!==this)if(this.closed)ge(j);else{if(j instanceof le){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,he.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,he.P)(H,j),j instanceof le&&j._removeParent(this)}}le.EMPTY=(()=>{const me=new le;return me.closed=!0,me})();const pe=le.EMPTY;function ue(me){return me instanceof le||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function ge(me){(0,f.m)(me)?me():me.unsubscribe()}},2416:(ut,Ce,F)=>{F.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ce,F)=>{F.d(Ce,{E:()=>re});const re=new(F(8306).y)(le=>le.complete())},8996:(ut,Ce,F)=>{F.d(Ce,{D:()=>we});var f=F(8421),re=F(5363),N=F(9468),pe=F(8306),ge=F(2202),me=F(576),j=F(9672);function ee(De,He){if(!De)throw new Error("Iterable cannot be null");return new pe.y(Ge=>{(0,j.f)(Ge,He,()=>{const U=De[Symbol.asyncIterator]();(0,j.f)(Ge,He,()=>{U.next().then(ve=>{ve.done?Ge.complete():Ge.next(ve.value)})},0,!0)})})}var $e=F(3670),Re=F(8239),Me=F(1144),Ye=F(6495),ye=F(2206),_e=F(4532),Qe=F(3260);function we(De,He){return He?function Ae(De,He){if(null!=De){if((0,$e.c)(De))return function he(De,He){return(0,f.Xf)(De).pipe((0,N.R)(He),(0,re.Q)(He))}(De,He);if((0,Me.z)(De))return function ue(De,He){return new pe.y(Ge=>{let U=0;return He.schedule(function(){U===De.length?Ge.complete():(Ge.next(De[U++]),Ge.closed||this.schedule())})})}(De,He);if((0,Re.t)(De))return function le(De,He){return(0,f.Xf)(De).pipe((0,N.R)(He),(0,re.Q)(He))}(De,He);if((0,ye.D)(De))return ee(De,He);if((0,Ye.T)(De))return function H(De,He){return new pe.y(Ge=>{let U;return(0,j.f)(Ge,He,()=>{U=De[ge.h](),(0,j.f)(Ge,He,()=>{let ve,X;try{({value:ve,done:X}=U.next())}catch(te){return void Ge.error(te)}X?Ge.complete():Ge.next(ve)},0,!0)}),()=>(0,me.m)(U?.return)&&U.return()})}(De,He);if((0,Qe.L)(De))return function tt(De,He){return ee((0,Qe.Q)(De),He)}(De,He)}throw(0,_e.z)(De)}(De,He):(0,f.Xf)(De)}},8421:(ut,Ce,F)=>{F.d(Ce,{Xf:()=>$e});var f=F(655),re=F(1144),N=F(8239),he=F(8306),le=F(3670),pe=F(2206),ue=F(4532),ge=F(6495),me=F(3260),j=F(576),H=F(7849),ee=F(8822);function $e(Ae){if(Ae instanceof he.y)return Ae;if(null!=Ae){if((0,le.c)(Ae))return function Re(Ae){return new he.y(we=>{const De=Ae[ee.L]();if((0,j.m)(De.subscribe))return De.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,re.z)(Ae))return function Me(Ae){return new he.y(we=>{for(let De=0;De<Ae.length&&!we.closed;De++)we.next(Ae[De]);we.complete()})}(Ae);if((0,N.t)(Ae))return function Ye(Ae){return new he.y(we=>{Ae.then(De=>{we.closed||(we.next(De),we.complete())},De=>we.error(De)).then(null,H.h)})}(Ae);if((0,pe.D)(Ae))return _e(Ae);if((0,ge.T)(Ae))return function ye(Ae){return new he.y(we=>{for(const De of Ae)if(we.next(De),we.closed)return;we.complete()})}(Ae);if((0,me.L)(Ae))return function Qe(Ae){return _e((0,me.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function _e(Ae){return new he.y(we=>{(function tt(Ae,we){var De,He,Ge,U;return(0,f.mG)(this,void 0,void 0,function*(){try{for(De=(0,f.KL)(Ae);!(He=yield De.next()).done;)if(we.next(He.value),we.closed)return}catch(ve){Ge={error:ve}}finally{try{He&&!He.done&&(U=De.return)&&(yield U.call(De))}finally{if(Ge)throw Ge.error}}we.complete()})})(Ae,we).catch(De=>we.error(De))})}},6451:(ut,Ce,F)=>{F.d(Ce,{T:()=>pe});var f=F(8189),re=F(8421),N=F(515),he=F(3269),le=F(8996);function pe(...ue){const ge=(0,he.yG)(ue),me=(0,he._6)(ue,1/0),j=ue;return j.length?1===j.length?(0,re.Xf)(j[0]):(0,f.J)(me)((0,le.D)(j,ge)):N.E}},5403:(ut,Ce,F)=>{F.d(Ce,{x:()=>re});var f=F(930);function re(he,le,pe,ue,ge){return new N(he,le,pe,ue,ge)}class N extends f.Lv{constructor(le,pe,ue,ge,me,j){super(le),this.onFinalize=me,this.shouldUnsubscribe=j,this._next=pe?function(H){try{pe(H)}catch(ee){le.error(ee)}}:super._next,this._error=ge?function(H){try{ge(H)}catch(ee){le.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(H){le.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(ut,Ce,F)=>{F.d(Ce,{U:()=>N});var f=F(4482),re=F(5403);function N(he,le){return(0,f.e)((pe,ue)=>{let ge=0;pe.subscribe((0,re.x)(ue,me=>{ue.next(he.call(le,me,ge++))}))})}},8189:(ut,Ce,F)=>{F.d(Ce,{J:()=>N});var f=F(5577),re=F(4671);function N(he=1/0){return(0,f.z)(re.y,he)}},5577:(ut,Ce,F)=>{F.d(Ce,{z:()=>ge});var f=F(4004),re=F(8421),N=F(4482),he=F(9672),le=F(5403),ue=F(576);function ge(me,j,H=1/0){return(0,ue.m)(j)?ge((ee,$e)=>(0,f.U)((Re,Me)=>j(ee,Re,$e,Me))((0,re.Xf)(me(ee,$e))),H):("number"==typeof j&&(H=j),(0,N.e)((ee,$e)=>function pe(me,j,H,ee,$e,Re,Me,Ye){const ye=[];let _e=0,Qe=0,tt=!1;const Ae=()=>{tt&&!ye.length&&!_e&&j.complete()},we=He=>_e<ee?De(He):ye.push(He),De=He=>{Re&&j.next(He),_e++;let Ge=!1;(0,re.Xf)(H(He,Qe++)).subscribe((0,le.x)(j,U=>{$e?.(U),Re?we(U):j.next(U)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(_e--;ye.length&&_e<ee;){const U=ye.shift();Me?(0,he.f)(j,Me,()=>De(U)):De(U)}Ae()}catch(U){j.error(U)}}))};return me.subscribe((0,le.x)(j,we,()=>{tt=!0,Ae()})),()=>{Ye?.()}}(ee,$e,me,H)))}},5363:(ut,Ce,F)=>{F.d(Ce,{Q:()=>he});var f=F(9672),re=F(4482),N=F(5403);function he(le,pe=0){return(0,re.e)((ue,ge)=>{ue.subscribe((0,N.x)(ge,me=>(0,f.f)(ge,le,()=>ge.next(me),pe),()=>(0,f.f)(ge,le,()=>ge.complete(),pe),me=>(0,f.f)(ge,le,()=>ge.error(me),pe)))})}},3099:(ut,Ce,F)=>{F.d(Ce,{B:()=>le});var f=F(8421),re=F(7579),N=F(930),he=F(4482);function le(ue={}){const{connector:ge=(()=>new re.x),resetOnError:me=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=ue;return ee=>{let $e,Re,Me,Ye=0,ye=!1,_e=!1;const Qe=()=>{Re?.unsubscribe(),Re=void 0},tt=()=>{Qe(),$e=Me=void 0,ye=_e=!1},Ae=()=>{const we=$e;tt(),we?.unsubscribe()};return(0,he.e)((we,De)=>{Ye++,!_e&&!ye&&Qe();const He=Me=Me??ge();De.add(()=>{Ye--,0===Ye&&!_e&&!ye&&(Re=pe(Ae,H))}),He.subscribe(De),!$e&&Ye>0&&($e=new N.Hp({next:Ge=>He.next(Ge),error:Ge=>{_e=!0,Qe(),Re=pe(tt,me,Ge),He.error(Ge)},complete:()=>{ye=!0,Qe(),Re=pe(tt,j),He.complete()}}),(0,f.Xf)(we).subscribe($e))})(ee)}}function pe(ue,ge,...me){if(!0===ge)return void ue();if(!1===ge)return;const j=new N.Hp({next:()=>{j.unsubscribe(),ue()}});return ge(...me).subscribe(j)}},9468:(ut,Ce,F)=>{F.d(Ce,{R:()=>re});var f=F(4482);function re(N,he=0){return(0,f.e)((le,pe)=>{pe.add(N.schedule(()=>le.subscribe(pe),he))})}},8505:(ut,Ce,F)=>{F.d(Ce,{b:()=>le});var f=F(576),re=F(4482),N=F(5403),he=F(4671);function le(pe,ue,ge){const me=(0,f.m)(pe)||ue||ge?{next:pe,error:ue,complete:ge}:pe;return me?(0,re.e)((j,H)=>{var ee;null===(ee=me.subscribe)||void 0===ee||ee.call(me);let $e=!0;j.subscribe((0,N.x)(H,Re=>{var Me;null===(Me=me.next)||void 0===Me||Me.call(me,Re),H.next(Re)},()=>{var Re;$e=!1,null===(Re=me.complete)||void 0===Re||Re.call(me),H.complete()},Re=>{var Me;$e=!1,null===(Me=me.error)||void 0===Me||Me.call(me,Re),H.error(Re)},()=>{var Re,Me;$e&&(null===(Re=me.unsubscribe)||void 0===Re||Re.call(me)),null===(Me=me.finalize)||void 0===Me||Me.call(me)}))}):he.y}},4408:(ut,Ce,F)=>{F.d(Ce,{o:()=>le});var f=F(727);class re extends f.w0{constructor(ue,ge){super()}schedule(ue,ge=0){return this}}const N={setInterval(pe,ue,...ge){const{delegate:me}=N;return me?.setInterval?me.setInterval(pe,ue,...ge):setInterval(pe,ue,...ge)},clearInterval(pe){const{delegate:ue}=N;return(ue?.clearInterval||clearInterval)(pe)},delegate:void 0};var he=F(8737);class le extends re{constructor(ue,ge){super(ue,ge),this.scheduler=ue,this.work=ge,this.pending=!1}schedule(ue,ge=0){if(this.closed)return this;this.state=ue;const me=this.id,j=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(j,me,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(j,this.id,ge),this}requestAsyncId(ue,ge,me=0){return N.setInterval(ue.flush.bind(ue,this),me)}recycleAsyncId(ue,ge,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return ge;N.clearInterval(ge)}execute(ue,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ue,ge);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ge){let j,me=!1;try{this.work(ue)}catch(H){me=!0,j=H||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ge}=this,{actions:me}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(me,this),null!=ue&&(this.id=this.recycleAsyncId(ge,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ce,F)=>{F.d(Ce,{v:()=>N});var f=F(6063);class re{constructor(le,pe=re.now){this.schedulerActionCtor=le,this.now=pe}schedule(le,pe=0,ue){return new this.schedulerActionCtor(this,le).schedule(ue,pe)}}re.now=f.l.now;class N extends re{constructor(le,pe=re.now){super(le,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:pe}=this;if(this._active)return void pe.push(le);let ue;this._active=!0;do{if(ue=le.execute(le.state,le.delay))break}while(le=pe.shift());if(this._active=!1,ue){for(;le=pe.shift();)le.unsubscribe();throw ue}}}},4986:(ut,Ce,F)=>{F.d(Ce,{P:()=>he,z:()=>N});var f=F(4408);const N=new(F(7565).v)(f.o),he=N},6063:(ut,Ce,F)=>{F.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(ut,Ce,F)=>{F.d(Ce,{z:()=>f});const f={setTimeout(re,N,...he){const{delegate:le}=f;return le?.setTimeout?le.setTimeout(re,N,...he):setTimeout(re,N,...he)},clearTimeout(re){const{delegate:N}=f;return(N?.clearTimeout||clearTimeout)(re)},delegate:void 0}},2202:(ut,Ce,F)=>{F.d(Ce,{h:()=>re});const re=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ce,F)=>{F.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ut,Ce,F)=>{F.d(Ce,{_6:()=>pe,jO:()=>he,yG:()=>le});var f=F(576),re=F(3532);function N(ue){return ue[ue.length-1]}function he(ue){return(0,f.m)(N(ue))?ue.pop():void 0}function le(ue){return(0,re.K)(N(ue))?ue.pop():void 0}function pe(ue,ge){return"number"==typeof N(ue)?ue.pop():ge}},8737:(ut,Ce,F)=>{function f(re,N){if(re){const he=re.indexOf(N);0<=he&&re.splice(he,1)}}F.d(Ce,{P:()=>f})},3888:(ut,Ce,F)=>{function f(re){const he=re(le=>{Error.call(le),le.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}F.d(Ce,{d:()=>f})},2806:(ut,Ce,F)=>{F.d(Ce,{O:()=>he,x:()=>N});var f=F(2416);let re=null;function N(le){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!re;if(pe&&(re={errorThrown:!1,error:null}),le(),pe){const{errorThrown:ue,error:ge}=re;if(re=null,ue)throw ge}}else le()}function he(le){f.v.useDeprecatedSynchronousErrorHandling&&re&&(re.errorThrown=!0,re.error=le)}},9672:(ut,Ce,F)=>{function f(re,N,he,le=0,pe=!1){const ue=N.schedule(function(){he(),pe?re.add(this.schedule(null,le)):this.unsubscribe()},le);if(re.add(ue),!pe)return ue}F.d(Ce,{f:()=>f})},4671:(ut,Ce,F)=>{function f(re){return re}F.d(Ce,{y:()=>f})},1144:(ut,Ce,F)=>{F.d(Ce,{z:()=>f});const f=re=>re&&"number"==typeof re.length&&"function"!=typeof re},2206:(ut,Ce,F)=>{F.d(Ce,{D:()=>re});var f=F(576);function re(N){return Symbol.asyncIterator&&(0,f.m)(N?.[Symbol.asyncIterator])}},576:(ut,Ce,F)=>{function f(re){return"function"==typeof re}F.d(Ce,{m:()=>f})},3670:(ut,Ce,F)=>{F.d(Ce,{c:()=>N});var f=F(8822),re=F(576);function N(he){return(0,re.m)(he[f.L])}},6495:(ut,Ce,F)=>{F.d(Ce,{T:()=>N});var f=F(2202),re=F(576);function N(he){return(0,re.m)(he?.[f.h])}},8239:(ut,Ce,F)=>{F.d(Ce,{t:()=>re});var f=F(576);function re(N){return(0,f.m)(N?.then)}},3260:(ut,Ce,F)=>{F.d(Ce,{L:()=>he,Q:()=>N});var f=F(655),re=F(576);function N(le){return(0,f.FC)(this,arguments,function*(){const ue=le.getReader();try{for(;;){const{value:ge,done:me}=yield(0,f.qq)(ue.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ge)}}finally{ue.releaseLock()}})}function he(le){return(0,re.m)(le?.getReader)}},3532:(ut,Ce,F)=>{F.d(Ce,{K:()=>re});var f=F(576);function re(N){return N&&(0,f.m)(N.schedule)}},4482:(ut,Ce,F)=>{F.d(Ce,{A:()=>re,e:()=>N});var f=F(576);function re(he){return(0,f.m)(he?.lift)}function N(he){return le=>{if(re(le))return le.lift(function(pe){try{return he(pe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,Ce,F)=>{function f(){}F.d(Ce,{Z:()=>f})},7849:(ut,Ce,F)=>{F.d(Ce,{h:()=>N});var f=F(2416),re=F(3410);function N(he){re.z.setTimeout(()=>{const{onUnhandledError:le}=f.v;if(!le)throw he;le(he)})}},4532:(ut,Ce,F)=>{function f(re){return new TypeError(`You provided ${null!==re&&"object"==typeof re?"an invalid object":`'${re}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ce,{z:()=>f})},655:(ut,Ce,F)=>{function he(X,te){var oe={};for(var ie in X)Object.prototype.hasOwnProperty.call(X,ie)&&te.indexOf(ie)<0&&(oe[ie]=X[ie]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(ie=Object.getOwnPropertySymbols(X);Le<ie.length;Le++)te.indexOf(ie[Le])<0&&Object.prototype.propertyIsEnumerable.call(X,ie[Le])&&(oe[ie[Le]]=X[ie[Le]])}return oe}function ge(X,te,oe,ie){return new(oe||(oe=Promise))(function(Ne,pt){function qt(sn){try{We(ie.next(sn))}catch(Ln){pt(Ln)}}function Gt(sn){try{We(ie.throw(sn))}catch(Ln){pt(Ln)}}function We(sn){sn.done?Ne(sn.value):function Le(Ne){return Ne instanceof oe?Ne:new oe(function(pt){pt(Ne)})}(sn.value).then(qt,Gt)}We((ie=ie.apply(X,te||[])).next())})}function ye(X){return this instanceof ye?(this.v=X,this):new ye(X)}function _e(X,te,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,ie=oe.apply(X,te||[]),Ne=[];return Le={},pt("next"),pt("throw"),pt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function pt(Zt){ie[Zt]&&(Le[Zt]=function(Yt){return new Promise(function(zr,Lt){Ne.push([Zt,Yt,zr,Lt])>1||qt(Zt,Yt)})})}function qt(Zt,Yt){try{!function Gt(Zt){Zt.value instanceof ye?Promise.resolve(Zt.value.v).then(We,sn):Ln(Ne[0][2],Zt)}(ie[Zt](Yt))}catch(zr){Ln(Ne[0][3],zr)}}function We(Zt){qt("next",Zt)}function sn(Zt){qt("throw",Zt)}function Ln(Zt,Yt){Zt(Yt),Ne.shift(),Ne.length&&qt(Ne[0][0],Ne[0][1])}}function tt(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,te=X[Symbol.asyncIterator];return te?te.call(X):(X=function ee(X){var te="function"==typeof Symbol&&Symbol.iterator,oe=te&&X[te],ie=0;if(oe)return oe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ie>=X.length&&(X=void 0),{value:X&&X[ie++],done:!X}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),oe={},ie("next"),ie("throw"),ie("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ie(Ne){oe[Ne]=X[Ne]&&function(pt){return new Promise(function(qt,Gt){!function Le(Ne,pt,qt,Gt){Promise.resolve(Gt).then(function(We){Ne({value:We,done:qt})},pt)}(qt,Gt,(pt=X[Ne](pt)).done,pt.value)})}}}F.d(Ce,{FC:()=>_e,KL:()=>tt,_T:()=>he,mG:()=>ge,qq:()=>ye})},4650:(ut,Ce,F)=>{F.d(Ce,{$8M:()=>Ur,AFp:()=>bE,ALo:()=>Y0,AaK:()=>ge,AsE:()=>q_,CHM:()=>Os,CRH:()=>Xm,CZH:()=>Op,EJc:()=>HA,EiD:()=>fc,EpF:()=>C_,F$t:()=>Jw,F4k:()=>fp,FYo:()=>_t,FiY:()=>se,G48:()=>lb,Gf:()=>Hv,GfV:()=>_l,Hsn:()=>T_,JOm:()=>Aa,JVY:()=>og,KtG:()=>ea,L6k:()=>Wd,LAX:()=>ag,LFG:()=>An,LSH:()=>Of,Lbi:()=>$x,Lck:()=>dx,MAs:()=>E_,NdJ:()=>pm,O4$:()=>ia,OlP:()=>jt,Q6J:()=>D_,QGY:()=>A_,QbO:()=>Jv,Qsj:()=>ft,R0b:()=>Ds,RDi:()=>ng,Rgc:()=>Ap,SBq:()=>de,Suo:()=>sE,TTD:()=>zo,TgZ:()=>fm,Udp:()=>U_,X6Q:()=>iC,Xpm:()=>B,Y36:()=>Tc,YNc:()=>Sh,Yjl:()=>sr,Yz7:()=>Yt,ZZ4:()=>GE,_UZ:()=>Nr,_c5:()=>vb,_uU:()=>z_,aQg:()=>_b,cJS:()=>Lt,cg1:()=>rv,dDg:()=>Xx,dqk:()=>Xe,eBb:()=>Sf,eFA:()=>rb,ekj:()=>j_,eoX:()=>SE,f3M:()=>hl,g9A:()=>wE,h0i:()=>Ci,hGG:()=>QA,hij:()=>Oh,iGM:()=>jv,ifc:()=>ot,ip1:()=>vE,kL8:()=>w0,lG2:()=>Xt,lcZ:()=>Nv,lri:()=>eb,mCW:()=>bo,n5z:()=>Jl,oAB:()=>Ue,oxw:()=>ym,pB0:()=>uc,q3G:()=>qn,q4F:()=>gu,qLn:()=>zf,qOj:()=>y_,qZA:()=>Th,qzn:()=>js,rWj:()=>AE,sBO:()=>aC,sIi:()=>Mu,s_b:()=>Mo,soG:()=>oy,tb:()=>Es,tp0:()=>je,uIk:()=>Ch,vHH:()=>Me,vpe:()=>ws,wAp:()=>Dt,xp6:()=>Yr,z2F:()=>Zh,z3N:()=>hs,zSh:()=>_c,zs3:()=>Cc});var f=F(7579),re=F(727),N=F(8306),he=F(6451),le=F(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=pe({__forward_ref__:pe});function H(s){return s.__forward_ref__=H,s.toString=function(){return ge(this())},s}function ee(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===H}class Me extends Error{constructor(o,a){super(function Ye(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s,o){throw new Me(-201,!1)}function Gt(s,o){null==s&&function We(s,o,a,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${a} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Lt(s){return{providers:s.providers||[],imports:s.imports||[]}}function on(s){return Lo(s,Mi)||Lo(s,oi)}function Lo(s,o){return s.hasOwnProperty(o)?s[o]:null}function qr(s){return s&&(s.hasOwnProperty(Zi)||s.hasOwnProperty(Ri))?s[Zi]:null}const Mi=pe({\u0275prov:pe}),Zi=pe({\u0275inj:pe}),oi=pe({ngInjectableDef:pe}),Ri=pe({ngInjectorDef:pe});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let hn;function Bn(s){const o=hn;return hn=s,o}function ki(s,o,a){const u=on(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&yt.Optional?null:void 0!==o?o:void we(ge(s))}function Vn(s){return{toString:s}.toString()}var gn=(()=>((gn=gn||{})[gn.OnPush=0]="OnPush",gn[gn.Default=1]="Default",gn))(),ot=(()=>{return(s=ot||(ot={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ot;var s})();const Xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),mn={},Bt=[],Qn=pe({\u0275cmp:pe}),xs=pe({\u0275dir:pe}),Qt=pe({\u0275pipe:pe}),Oi=pe({\u0275mod:pe}),Ht=pe({\u0275fac:pe}),Y=pe({__NG_ELEMENT_ID__:pe});let G=0;function B(s){return Vn(()=>{const a=!0===s.standalone,u={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===gn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ot.Emulated,id:"c"+G++,styles:s.styles||Bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,_=s.features;return d.inputs=cn(s.inputs,u),d.outputs=cn(s.outputs),_&&_.forEach(w=>w(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(q).filter(xe):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(yn).filter(xe):null,d})}function q(s){return rt(s)||dn(s)}function xe(s){return null!==s}function Ue(s){return Vn(()=>({type:s.type,bootstrap:s.bootstrap||Bt,declarations:s.declarations||Bt,imports:s.imports||Bt,exports:s.exports||Bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function cn(s,o){if(null==s)return mn;const a={};for(const u in s)if(s.hasOwnProperty(u)){let d=s[u],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=u,o&&(o[d]=p)}return a}const Xt=B;function sr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function rt(s){return s[Qn]||null}function dn(s){return s[xs]||null}function yn(s){return s[Qt]||null}function Vr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Jr(s){return Array.isArray(s)&&!0===s[1]}function Ho(s){return 0!=(8&s.flags)}function ro(s){return 2==(2&s.flags)}function Go(s){return 1==(1&s.flags)}function ei(s){return null!==s.template}function qp(s){return 0!=(256&s[2])}function _i(s,o){return s.hasOwnProperty(Ht)?s[Ht]:null}class xd{constructor(o,a,u){this.previousValue=o,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function zo(){return Fi}function Fi(s){return s.type.prototype.ngOnChanges&&(s.setInput=qo),io}function io(){const s=$a(this),o=s?.current;if(o){const a=s.previous;if(a===mn)s.previous=o;else for(let u in o)a[u]=o[u];s.current=null,this.ngOnChanges(o)}}function qo(s,o,a,u){const d=$a(s)||function Cd(s,o){return s[Wo]=o}(s,{previous:mn,current:null}),p=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],D=_[w];p[w]=new xd(D&&D.currentValue,o,_===mn),s[u]=o}zo.ngInherit=!0;const Wo="__ngSimpleChanges__";function $a(s){return s[Wo]||null}function Hn(s){for(;Array.isArray(s);)s=s[0];return s}function Yo(s,o){return Hn(o[s])}function li(s,o){return Hn(o[s.index])}function za(s,o){return s.data[o]}function ts(s,o){return s[o]}function Mr(s,o){const a=o[s];return Vr(a)?a:a[0]}function Qo(s){return 4==(4&s[2])}function bi(s){return 64==(64&s[2])}function rs(s,o){return null==o?null:s[o]}function is(s){s[18]=0}function Xo(s,o){s[5]+=o;let a=s,u=s[3];for(;null!==u&&(1===o&&1===a[5]||-1===o&&0===a[5]);)u[5]+=o,a=u,u=u[3]}const It={lFrame:ql(null),bindingsEnabled:!0};function ks(){return It.bindingsEnabled}function Ie(){return It.lFrame.lView}function Ut(){return It.lFrame.tView}function Os(s){return It.lFrame.contextLView=s,s[8]}function ea(s){return It.lFrame.contextLView=null,s}function _n(){let s=qa();for(;null!==s&&64===s.type;)s=s.parent;return s}function qa(){return It.lFrame.currentTNode}function ui(s,o){const a=It.lFrame;a.currentTNode=s,a.isParent=o}function Wa(){return It.lFrame.isParent}function Ka(){It.lFrame.isParent=!1}function oo(){return It.lFrame.bindingIndex++}function os(s){const o=It.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Rd(s,o){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=s,Ku(o)}function Ku(s){It.lFrame.currentDirectiveIndex=s}function Gl(){return It.lFrame.currentQueryIndex}function Xa(s){It.lFrame.currentQueryIndex=s}function Zu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function na(s,o,a){if(a&yt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&yt.Host||(d=Zu(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const u=It.lFrame=zl();return u.currentTNode=o,u.lView=s,!0}function $l(s){const o=zl(),a=s[1];It.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function zl(){const s=It.lFrame,o=null===s?null:s.child;return null===o?ql(s):o}function ql(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Wl(){const s=It.lFrame;return It.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Kl=Wl;function ra(){const s=Wl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function lr(){return It.lFrame.selectedIndex}function ci(s){It.lFrame.selectedIndex=s}function vn(){const s=It.lFrame;return za(s.tView,s.selectedIndex)}function ia(){It.lFrame.currentNamespace="svg"}function Yl(s,o){for(let a=o.directiveStart,u=o.directiveEnd;a<u;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:C,ngOnDestroy:k}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),C&&((s.viewHooks||(s.viewHooks=[])).push(a,C),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,C)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(a,k)}}function pf(s,o,a){lo(s,o,3,a)}function gf(s,o,a,u){(3&s[2])===a&&lo(s,o,a,u)}function Ja(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function lo(s,o,a,u){const p=u??-1,_=o.length-1;let w=0;for(let D=void 0!==u?65535&s[18]:0;D<_;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=u&&w>=u)break}else o[D]<0&&(s[18]+=65536),(w<p||-1==p)&&(Cy(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Cy(s,o,a,u){const d=a[u]<0,p=a[u+1],w=s[d?-a[u]:a[u]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class sa{constructor(o,a,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function tl(s,o,a){let u=0;for(;u<a.length;){const d=a[u];if("number"==typeof d){if(0!==d)break;u++;const p=a[u++],_=a[u++],w=a[u++];s.setAttribute(o,_,w,p)}else{const p=d,_=a[++u];Nd(p)?s.setProperty(o,p,_):s.setAttribute(o,p,_),u++}}return u}function nl(s){return 3===s||4===s||6===s}function Nd(s){return 64===s.charCodeAt(0)}function Ns(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let u=0;u<o.length;u++){const d=o[u];"number"==typeof d?a=d:0===a||Pd(s,a,d,null,-1===a||2===a?o[++u]:null)}}return s}function Pd(s,o,a,u,d){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){_=-1;break}if(w>o){_=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===a){if(null===u)return void(null!==d&&(s[p+1]=d));if(u===s[p+1])return void(s[p+2]=d)}p++,null!==u&&p++,null!==d&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,a),null!==u&&s.splice(p++,0,u),null!==d&&s.splice(p++,0,d)}function _f(s){return-1!==s}function rl(s){return 32767&s}function Rr(s,o){let a=function Qp(s){return s>>16}(s),u=o;for(;a>0;)u=u[15],a--;return u}let as=!0;function Qu(s){const o=as;return as=s,o}let ur=0;const On={};function In(s,o){const a=il(s,o);if(-1!==a)return a;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,xn(u.data,s),xn(o,null),xn(u.blueprint,null));const d=aa(s,o),p=s.injectorIndex;if(_f(d)){const _=rl(d),w=Rr(d,o),D=w[1].data;for(let C=0;C<8;C++)o[p+C]=w[_+C]|D[_+C]}return o[p+8]=d,p}function xn(s,o){s.push(0,0,0,0,0,0,0,0,o)}function il(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function aa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,u=null,d=o;for(;null!==d;){if(u=la(d),null===u)return-1;if(a++,d=d[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Ls(s,o,a){!function pn(s,o,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(Y)&&(u=a[Y]),null==u&&(u=a[Y]=ur++);const d=255&u;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Bs(s,o,a){if(a&yt.Optional)return s;we()}function Gn(s,o,a,u){if(a&yt.Optional&&void 0===u&&(u=null),0==(a&(yt.Self|yt.Host))){const d=s[9],p=Bn(void 0);try{return d?d.get(o,u,a&yt.Optional):ki(o,u,a&yt.Optional)}finally{Bn(p)}}return Bs(u,0,a)}function ls(s,o,a,u=yt.Default,d){if(null!==s){if(1024&o[2]){const _=function co(s,o,a,u,d){let p=s,_=o;for(;null!==p&&null!==_&&1024&_[2]&&!(256&_[2]);){const w=$t(p,_,a,u|yt.Self,On);if(w!==On)return w;let D=p.parent;if(!D){const C=_[21];if(C){const k=C.get(a,On,u);if(k!==On)return k}D=la(_),_=_[15]}p=D}return d}(s,o,a,u,On);if(_!==On)return _}const p=$t(s,o,a,u,On);if(p!==On)return p}return Gn(o,a,u,d)}function $t(s,o,a,u,d){const p=function Ql(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Y)?s[Y]:void 0;return"number"==typeof o?o>=0?255&o:Xl:o}(a);if("function"==typeof p){if(!na(o,s,u))return u&yt.Host?Bs(d,0,u):Gn(o,a,u,d);try{const _=p(u);if(null!=_||u&yt.Optional)return _;we()}finally{Kl()}}else if("number"==typeof p){let _=null,w=il(s,o),D=-1,C=u&yt.Host?o[16][6]:null;for((-1===w||u&yt.SkipSelf)&&(D=-1===w?aa(s,o):o[w+8],-1!==D&&dr(u,!1)?(_=o[1],w=rl(D),o=Rr(D,o)):w=-1);-1!==w;){const k=o[1];if(sl(p,w,k.data)){const P=uo(w,o,a,_,u,C);if(P!==On)return P}D=o[w+8],-1!==D&&dr(u,o[1].data[w+8]===C)&&sl(p,w,o)?(_=k,w=rl(D),o=Rr(D,o)):w=-1}}return d}function uo(s,o,a,u,d,p){const _=o[1],w=_.data[s+8],k=us(w,_,a,null==u?ro(w)&&as:u!=_&&0!=(3&w.type),d&yt.Host&&p===w);return null!==k?Bi(o,_,k,w):On}function us(s,o,a,u,d){const p=s.providerIndexes,_=o.data,w=1048575&p,D=s.directiveStart,k=p>>20,z=d?w+k:s.directiveEnd;for(let ne=u?w:w+k;ne<z;ne++){const Ee=_[ne];if(ne<D&&a===Ee||ne>=D&&Ee.type===a)return ne}if(d){const ne=_[D];if(ne&&ei(ne)&&ne.type===a)return D}return null}function Bi(s,o,a,u){let d=s[a];const p=o.data;if(function mf(s){return s instanceof sa}(d)){const _=d;_.resolving&&function Qe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Me(-200,`Circular dependency in DI detected for ${s}${a}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(p[a]));const w=Qu(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?Bn(_.injectImpl):null;na(s,u,yt.Default);try{d=s[a]=_.factory(void 0,p,s,u),o.firstCreatePass&&a>=u.directiveStart&&function Yu(s,o,a){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(u){const _=Fi(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==D&&Bn(D),Qu(w),_.resolving=!1,Kl()}}return d}function sl(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function dr(s,o){return!(s&yt.Self||s&yt.Host&&o)}class hr{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,u){return ls(this._tNode,this._lView,o,u,a)}}function Xl(){return new hr(_n(),Ie())}function Jl(s){return Vn(()=>{const o=s.prototype.constructor,a=o[Ht]||be(o),u=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==u;){const p=d[Ht]||be(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function be(s){return $e(s)?()=>{const o=be(ee(s));return o&&o()}:_i(s)}function la(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function Ur(s){return function cr(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const u=a.length;let d=0;for(;d<u;){const p=a[d];if(nl(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<u&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(_n(),s)}const ua="__parameters__";function gt(s,o,a){return Vn(()=>{const u=function ca(s){return function(...a){if(s){const u=s(...a);for(const d in u)this[d]=u[d]}}}(o);function d(...p){if(this instanceof d)return u.apply(this,p),this;const _=new d(...p);return w.annotation=_,w;function w(D,C,k){const P=D.hasOwnProperty(ua)?D[ua]:Object.defineProperty(D,ua,{value:[]})[ua];for(;P.length<=k;)P.push(null);return(P[k]=P[k]||[]).push(_),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class jt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Or(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let u=s[a];Array.isArray(u)?(o===s&&(o=s.slice(0,a)),Or(u,o)):o!==s&&o.push(u)}return o}function jr(s,o){s.forEach(a=>Array.isArray(a)?jr(a,o):o(a))}function tc(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function $n(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ho(s,o){const a=[];for(let u=0;u<s;u++)a.push(o);return a}function zn(s,o,a){let u=ha(s,o);return u>=0?s[1|u]=a:(u=~u,function tu(s,o,a,u){let d=s.length;if(d==o)s.push(a,u);else if(1===d)s.push(u,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=u}}(s,u,o,a)),u}function po(s,o){const a=ha(s,o);if(a>=0)return s[1|a]}function ha(s,o){return function cs(s,o,a){let u=0,d=s.length>>a;for(;d!==u;){const p=u+(d-u>>1),_=s[p<<a];if(o===_)return p<<a;_>o?d=p:u=p+1}return~(d<<a)}(s,o,1)}const go={},Vs="__NG_DI_FLAG__",wi="ngTempTokenPath",Ef=/\n/gm,tr="__source";let wr;function dl(s){const o=wr;return wr=s,o}function ya(s,o=yt.Default){if(void 0===wr)throw new Me(-203,!1);return null===wr?ki(s,void 0,o):wr.get(s,o&yt.Optional?null:void 0,o)}function An(s,o=yt.Default){return(function mi(){return hn}()||ya)(ee(s),o)}function hl(s,o=yt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),An(s,o)}function fl(s){const o=[];for(let a=0;a<s.length;a++){const u=ee(s[a]);if(Array.isArray(u)){if(0===u.length)throw new Me(900,!1);let d,p=yt.Default;for(let _=0;_<u.length;_++){const w=u[_],D=x(w);"number"==typeof D?-1===D?d=w.token:p|=D:d=w}o.push(An(d,p))}else o.push(An(u))}return o}function I(s,o){return s[Vs]=o,s.prototype[Vs]=o,s}function x(s){return s[Vs]}const se=I(gt("Optional"),8),je=I(gt("SkipSelf"),4);let ac,va;function ng(s){ac=s}function _o(s){return function jd(){if(void 0===va&&(va=null,Xe.trustedTypes))try{va=Xe.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return va}()?.createHTML(s)||s}class Ea{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class $d extends Ea{getTypeName(){return"HTML"}}class zd extends Ea{getTypeName(){return"Style"}}class lc extends Ea{getTypeName(){return"Script"}}class qd extends Ea{getTypeName(){return"URL"}}class ti extends Ea{getTypeName(){return"ResourceURL"}}function hs(s){return s instanceof Ea?s.changingThisBreaksApplicationSecurity:s}function js(s,o){const a=function au(s){return s instanceof Ea&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function og(s){return new $d(s)}function Wd(s){return new zd(s)}function Sf(s){return new lc(s)}function ag(s){return new qd(s)}function uc(s){return new ti(s)}class lg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(_o(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class vo{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=_o(o),a;const u=this.inertDocument.createElement("body");return u.innerHTML=_o(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const _=a.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const cc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,My=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bo(s){return(s=String(s)).match(cc)||s.match(My)?s:"unsafe:"+s}function Vi(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function Da(...s){const o={};for(const a of s)for(const u in a)a.hasOwnProperty(u)&&(o[u]=!0);return o}const Mf=Vi("area,br,col,hr,img,wbr"),Rf=Vi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yd=Vi("rp,rt"),gl=Da(Mf,Da(Rf,Vi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Da(Yd,Vi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Da(Yd,Rf)),wo=Vi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lu=Vi("srcset"),ml=Da(wo,lu,Vi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hc=Vi("script,style,template");class Eo{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!gl.hasOwnProperty(a))return this.sanitizedSomething=!0,!hc.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=o.attributes;for(let d=0;d<u.length;d++){const p=u.item(d),_=p.name,w=_.toLowerCase();if(!ml.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let D=p.value;wo[w]&&(D=bo(D)),lu[w]&&(s=D,D=(s=String(s)).split(",").map(o=>bo(o.trim())).join(", ")),this.buf.push(" ",_,'="',fs(D),'"')}var s;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();gl.hasOwnProperty(a)&&!Mf.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(fs(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const dg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ky=/([^\#-~ |!])/g;function fs(s){return s.replace(/&/g,"&amp;").replace(dg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(ky,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ui;function fc(s,o){let a=null;try{Ui=Ui||function Kd(s){const o=new vo(s);return function Zd(){try{return!!(new window.DOMParser).parseFromString(_o(""),"text/html")}catch{return!1}}()?new lg(o):o}(s);let u=o?String(o):"";a=Ui.getInertBodyElement(u);let d=5,p=u;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,u=p,p=a.innerHTML,a=Ui.getInertBodyElement(u)}while(u!==p);return _o((new Eo).sanitizeChildren(uu(a)||a))}finally{if(a){const u=uu(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function uu(s){return"content"in s&&function pc(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var qn=(()=>((qn=qn||{})[qn.NONE=0]="NONE",qn[qn.HTML=1]="HTML",qn[qn.STYLE=2]="STYLE",qn[qn.SCRIPT=3]="SCRIPT",qn[qn.URL=4]="URL",qn[qn.RESOURCE_URL=5]="RESOURCE_URL",qn))();function Of(s){const o=function yl(){const s=Ie();return s&&s[12]}();return o?o.sanitize(qn.URL,s)||"":js(s,"URL")?hs(s):bo(ye(s))}const Ia=new jt("ENVIRONMENT_INITIALIZER"),Hs=new jt("INJECTOR",-1),Ff=new jt("INJECTOR_DEF_TYPES");class mc{get(o,a=go){if(a===go){const u=new Error(`NullInjectorError: No provider for ${ge(o)}!`);throw u.name="NullInjectorError",u}return a}}function fg(...s){return{\u0275providers:Er(0,s)}}function Er(s,...o){const a=[],u=new Set;let d;return jr(o,p=>{const _=p;Jd(_,a,[],u)&&(d||(d=[]),d.push(_))}),void 0!==d&&hu(d,a),a}function hu(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];jr(d,p=>{o.push(p)})}}function Jd(s,o,a,u){if(!(s=ee(s)))return!1;let d=null,p=qr(s);const _=!p&&rt(s);if(p||_){if(_&&!_.standalone)return!1;d=s}else{const D=s.ngModule;if(p=qr(D),!p)return!1;d=D}const w=u.has(d);if(_){if(w)return!1;if(u.add(d),_.dependencies){const D="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const C of D)Jd(C,o,a,u)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let C;u.add(d);try{jr(p.imports,k=>{Jd(k,o,a,u)&&(C||(C=[]),C.push(k))})}finally{}void 0!==C&&hu(C,o)}if(!w){const C=_i(d)||(()=>new d);o.push({provide:d,useFactory:C,deps:Bt},{provide:Ff,useValue:d,multi:!0},{provide:Ia,useValue:()=>An(d),multi:!0})}const D=p.providers;null==D||w||jr(D,k=>{o.push(k)})}}return d!==s&&void 0!==s.providers}const Nf=pe({provide:String,useValue:pe});function fu(s){return null!==s&&"object"==typeof s&&Nf in s}function Do(s){return"function"==typeof s}const _c=new jt("Set Injector scope."),pu={},Ly={};let Lf;function vc(){return void 0===Lf&&(Lf=new mc),Lf}class Wn{}class xa extends Wn{constructor(o,a,u,d){super(),this.parent=a,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vf(o,_=>this.processProvider(_)),this.records.set(Hs,ps(void 0,this)),d.has("environment")&&this.records.set(Wn,ps(void 0,this));const p=this.records.get(_c);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Ff.multi,Bt,yt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=dl(this),u=Bn(void 0);try{return o()}finally{dl(a),Bn(u)}}get(o,a=go,u=yt.Default){this.assertNotDestroyed();const d=dl(this),p=Bn(void 0);try{if(!(u&yt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function eh(s){return"function"==typeof s||"object"==typeof s&&s instanceof jt}(o)&&on(o);w=D&&this.injectableDefInScope(D)?ps(Ca(o),pu):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(u&yt.Self?vc():this.parent).get(o,a=u&yt.Optional&&a===go?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[wi]=_[wi]||[]).unshift(ge(o)),d)throw _;return function M(s,o,a,u){const d=s[wi];throw o[tr]&&d.unshift(o[tr]),s.message=function L(s,o,a,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ge(o);if(Array.isArray(o))d=o.map(ge).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let w=o[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):ge(w)))}d=`{${p.join(", ")}}`}return`${a}${u?"("+u+")":""}[${d}]: ${s.replace(Ef,"\n  ")}`}("\n"+s.message,d,a,u),s.ngTokenPath=d,s[wi]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Bn(p),dl(d)}}resolveInjectorInitializers(){const o=dl(this),a=Bn(void 0);try{const u=this.get(Ia.multi,Bt,yt.Self);for(const d of u)d()}finally{dl(o),Bn(a)}}toString(){const o=[],a=this.records;for(const u of a.keys())o.push(ge(u));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(o){let a=Do(o=ee(o))?o:ee(o&&o.provide);const u=function Gs(s){return fu(s)?ps(void 0,s.useValue):ps(function $s(s,o,a){let u;if(Do(s)){const d=ee(s);return _i(d)||Ca(d)}if(fu(s))u=()=>ee(s.useValue);else if(function yc(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...fl(s.deps||[]));else if(function Pf(s){return!(!s||!s.useExisting)}(s))u=()=>An(ee(s.useExisting));else{const d=ee(s&&(s.useClass||s.provide));if(!function pg(s){return!!s.deps}(s))return _i(d)||Ca(d);u=()=>new d(...fl(s.deps))}return u}(s),pu)}(o);if(Do(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ps(void 0,pu,!0),d.factory=()=>fl(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,u)}hydrate(o,a){return a.value===pu&&(a.value=Ly,a.value=a.factory()),"object"==typeof a.value&&a.value&&function pr(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=ee(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ca(s){const o=on(s),a=null!==o?o.factory:_i(s);if(null!==a)return a;if(s instanceof jt)throw new Me(204,!1);if(s instanceof Function)return function Bf(s){const o=s.length;if(o>0)throw ho(o,"?"),new Me(204,!1);const a=function si(s){const o=s&&(s[Mi]||s[oi]);if(o){const a=function Br(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Me(204,!1)}function ps(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function By(s){return!!s.\u0275providers}function Vf(s,o){for(const a of s)Array.isArray(a)?Vf(a,o):By(a)?Vf(a.\u0275providers,o):o(a)}class gg{}class b{resolveComponentFactory(o){throw function y(s){const o=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let T=(()=>{class s{}return s.NULL=new b,s})();function O(){return W(_n(),Ie())}function W(s,o){return new de(li(s,o))}let de=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=O,s})();function Ve(s){return s instanceof de?s.nativeElement:s}class _t{}let ft=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Kn(){const s=Ie(),a=Mr(_n().index,s);return(Vr(a)?a:s)[11]}(),s})(),ji=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class _l{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const gu=new _l("14.1.3"),bc={};function _u(s){return s.ngOriginalError}class zf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&_u(o);for(;a&&_u(a);)a=_u(a);return a||null}}const wg=new Map;let Zr=0;const it="__ngContext__";function at(s,o){Vr(o)?(s[it]=o[20],function vu(s){wg.set(s[20],s)}(o)):s[it]=o}function qf(s){const o=s[it];return"number"==typeof o?function Eg(s){return wg.get(s)||null}(o):o||null}function Ze(s){const o=qf(s);return o?Vr(o)?o:o.lView:null}const Xb=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Xe))();var Aa=(()=>((Aa=Aa||{})[Aa.Important=1]="Important",Aa[Aa.DashCase=2]="DashCase",Aa))();function ze(s,o){return undefined(s,o)}function Wf(s){const o=s[3];return Jr(o)?o[3]:o}function Dc(s){return $y(s[13])}function Ag(s){return $y(s[4])}function $y(s){for(;null!==s&&!Jr(s);)s=s[4];return s}function bu(s,o,a,u,d){if(null!=u){let p,_=!1;Jr(u)?p=u:Vr(u)&&(_=!0,u=u[0]);const w=Hn(u);0===s&&null!==a?null==d?Ky(o,a,w):gs(o,a,w,d||null,!0):1===s&&null!==a?gs(o,a,w,d||null,!0):2===s?function Zy(s,o,a){const u=ln(s,o);u&&function Mg(s,o,a,u){s.removeChild(o,a,u)}(s,u,o,a)}(o,w,_):3===s&&o.destroyNode(w),null!=p&&function Jf(s,o,a,u,d){const p=a[7];p!==Hn(a)&&bu(o,s,u,p,d);for(let w=10;w<a.length;w++){const D=a[w];Xf(D[1],D,s,o,u,p)}}(o,s,p,a,d)}}function Kf(s,o,a){return s.createElement(o,a)}function tw(s,o){const a=s[9],u=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Xo(d,-1)),a.splice(u,1)}function wl(s,o){if(s.length<=10)return;const a=10+o,u=s[a];if(u){const d=u[17];null!==d&&d!==s&&tw(d,u),o>0&&(s[a-1][4]=u[4]);const p=$n(s,10+o);!function ce(s,o){Xf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const _=p[19];null!==_&&_.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function qy(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Xf(s,o,a,3,null,null),function LD(s){let o=s[13];if(!o)return Yf(s[1],s);for(;o;){let a=null;if(Vr(o))a=o[13];else{const u=o[10];u&&(a=u)}if(!a){for(;o&&!o[4]&&o!==s;)Vr(o)&&Yf(o[1],o),o=o[3];null===o&&(o=s),Vr(o)&&Yf(o[1],o),a=o&&o[4]}o=a}}(o)}}function Yf(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function VD(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let u=0;u<a.length;u+=2){const d=o[a[u]];if(!(d instanceof sa)){const p=a[u+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=d[p[_]],D=p[_+1];try{D.call(w)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function BD(s,o){const a=s.cleanup,u=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(o):Hn(o[_]),D=u[d=a[p+2]],C=a[p+3];"boolean"==typeof C?w.removeEventListener(a[p],D,C):C>=0?u[d=C]():u[d=-C].unsubscribe(),p+=2}else{const _=u[d=a[p+1]];a[p].call(_)}if(null!==u){for(let p=d+1;p<u.length;p++)(0,u[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Jr(o[3])){a!==o[3]&&tw(a,o);const u=o[19];null!==u&&u.detachView(s)}!function RD(s){wg.delete(s[20])}(o)}}function Ei(s,o,a){return function Wy(s,o,a){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return a[0];if(2&u.flags){const d=s.data[u.directiveStart].encapsulation;if(d===ot.None||d===ot.Emulated)return null}return li(u,a)}(s,o.parent,a)}function gs(s,o,a,u,d){s.insertBefore(o,a,u,d)}function Ky(s,o,a){s.appendChild(o,a)}function rr(s,o,a,u,d){null!==u?gs(s,o,a,u,d):Ky(s,o,a)}function ln(s,o){return s.parentNode(o)}function Ic(s,o,a){return rw(s,o,a)}let rw=function Gi(s,o,a){return 40&s.type?li(s,a):null};function Co(s,o,a,u){const d=Ei(s,u,o),p=o[11],w=Ic(u.parent||o[6],u,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)rr(p,d,a[D],w,!1);else rr(p,d,a,w,!1)}function Nn(s,o){if(null!==o){const a=o.type;if(3&a)return li(o,s);if(4&a)return Qf(-1,s[o.index]);if(8&a){const u=o.child;if(null!==u)return Nn(s,u);{const d=s[o.index];return Jr(d)?Qf(-1,d):Hn(d)}}if(32&a)return ze(o,s)()||Hn(s[o.index]);{const u=Du(s,o);return null!==u?Array.isArray(u)?u[0]:Nn(Wf(s[16]),u):Nn(s,o.next)}}return null}function Du(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Qf(s,o){const a=10+s+1;if(a<o.length){const u=o[a],d=u[1].firstChild;if(null!==d)return Nn(u,d)}return o[7]}function xc(s,o,a,u,d,p,_){for(;null!=a;){const w=u[a.index],D=a.type;if(_&&0===o&&(w&&at(Hn(w),u),a.flags|=4),64!=(64&a.flags))if(8&D)xc(s,o,a.child,u,d,p,!1),bu(o,s,d,w,p);else if(32&D){const C=ze(a,u);let k;for(;k=C();)bu(o,s,d,k,p);bu(o,s,d,w,p)}else 16&D?sh(s,o,u,a,d,p):bu(o,s,d,w,p);a=_?a.projectionNext:a.next}}function Xf(s,o,a,u,d,p){xc(a,u,s.firstChild,o,d,p,!1)}function sh(s,o,a,u,d,p){const _=a[16],D=_[6].projection[u.projection];if(Array.isArray(D))for(let C=0;C<D.length;C++)bu(o,s,d,D[C],p);else xc(s,o,D,_[3],d,p,!0)}function Dl(s,o,a){s.setAttribute(o,"style",a)}function oh(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function Iu(s,o,a){let u=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===u||s.charCodeAt(d+p)<=32)return d}a=d+1}}const ah="ng-template";function xu(s,o,a){let u=0;for(;u<s.length;){let d=s[u++];if(a&&"class"===d){if(d=s[u],-1!==Iu(d.toLowerCase(),o,0))return!0}else if(1===d){for(;u<s.length&&"string"==typeof(d=s[u++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Yy(s){return 4===s.type&&s.value!==ah}function lh(s,o,a){return o===(4!==s.type||a?s.value:ah)}function Qy(s,o,a){let u=4;const d=s.attrs||[],p=function aw(s){for(let o=0;o<s.length;o++)if(nl(s[o]))return o;return s.length}(d);let _=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!_)if(4&u){if(u=2|1&u,""!==D&&!lh(s,D,a)||""===D&&1===o.length){if(ni(u))return!1;_=!0}}else{const C=8&u?D:o[++w];if(8&u&&null!==s.attrs){if(!xu(s.attrs,C,a)){if(ni(u))return!1;_=!0}continue}const P=Xy(8&u?"class":D,d,Yy(s),a);if(-1===P){if(ni(u))return!1;_=!0;continue}if(""!==C){let z;z=P>p?"":d[P+1].toLowerCase();const ne=8&u?z:null;if(ne&&-1!==Iu(ne,C,0)||2&u&&C!==z){if(ni(u))return!1;_=!0}}}}else{if(!_&&!ni(u)&&!ni(D))return!1;if(_&&ni(D))continue;_=!1,u=D|1&u}}return ni(u)||_}function ni(s){return 0==(1&s)}function Xy(s,o,a,u){if(null===o)return-1;let d=0;if(u||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Rg(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const u=s[a];if("number"==typeof u)return-1;if(u===o)return a;a++}return-1}(o,s)}function uh(s,o,a=!1){for(let u=0;u<o.length;u++)if(Qy(s,o[u],a))return!0;return!1}function ep(s,o){e:for(let a=0;a<o.length;a++){const u=o[a];if(s.length===u.length){for(let d=0;d<s.length;d++)if(s[d]!==u[d])continue e;return!0}}return!1}function Jy(s,o){return s?":not("+o.trim()+")":o}function UD(s){let o=s[0],a=1,u=2,d="",p=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&u){const w=s[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?d+="."+_:4&u&&(d+=" "+_);else""!==d&&!ni(_)&&(o+=Jy(p,d),d=""),u=_,p=p||!ni(u);a++}return""!==d&&(o+=Jy(p,d)),o}const Nt={};function Yr(s){e_(Ut(),Ie(),lr()+s,!1)}function e_(s,o,a,u){if(!u)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&pf(o,p,a)}else{const p=s.preOrderHooks;null!==p&&gf(o,p,0,a)}ci(a)}function t_(s,o=null,a=null,u){const d=Qr(s,o,a,u);return d.resolveInjectorInitializers(),d}function Qr(s,o=null,a=null,u,d=new Set){const p=[a||Bt,fg(s)];return u=u||("object"==typeof s?void 0:ge(s)),new xa(p,o||vc(),u||null,d)}let Cc=(()=>{class s{static create(a,u){if(Array.isArray(a))return t_({name:""},u,a,"");{const d=a.name??"";return t_({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=go,s.NULL=new mc,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>An(Hs)}),s.__NG_ELEMENT_ID__=-1,s})();function Tc(s,o=yt.Default){const a=Ie();return null===a?An(s,o):ls(_n(),a,ee(s),o)}function jg(s,o){return s<<17|o<<2}function qs(s){return s>>17&32767}function Hg(s){return 2|s}function Di(s){return(131068&s)>>2}function Gg(s,o){return-131069&s|o<<2}function $g(s){return 1|s}function ww(s,o){const a=s.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const d=a[u],p=a[u+1];if(-1!==p){const _=s.data[p];Xa(d),_.contentQueries(2,o[p],p)}}}function Yg(s,o,a,u,d,p,_,w,D,C,k){const P=o.blueprint.slice();return P[0]=d,P[2]=76|u,(null!==k||s&&1024&s[2])&&(P[2]|=1024),is(P),P[3]=P[15]=s,P[8]=a,P[10]=_||s&&s[10],P[11]=w||s&&s[11],P[12]=D||s&&s[12]||null,P[9]=C||s&&s[9]||null,P[6]=p,P[20]=function nh(){return Zr++}(),P[21]=k,P[16]=2==o.type?s[16]:P,P}function _h(s,o,a,u,d){let p=s.data[o];if(null===p)p=function a_(s,o,a,u,d){const p=qa(),_=Wa(),D=s.data[o]=function oI(s,o,a,u,d,p){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,u,d);return null===s.firstChild&&(s.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(s,o,a,u,d),function qu(){return It.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=u,p.attrs=d;const _=function Fs(){const s=It.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ui(p,!0),p}function Ta(s,o,a,u){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(u),s.blueprint.push(u),s.data.push(null);return d}function ip(s,o,a){$l(o);try{const u=s.viewQuery;null!==u&&nm(1,u,a);const d=s.template;null!==d&&Qg(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ww(s,o),s.staticViewQueries&&nm(2,s.viewQuery,a);const p=s.components;null!==p&&function Dw(s,o){for(let a=0;a<o.length;a++)gI(s,o[a])}(o,p)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,ra()}}function sp(s,o,a,u){const d=o[2];if(128!=(128&d)){$l(o);try{is(o),function Ya(s){return It.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Qg(s,o,a,2,u);const _=3==(3&d);if(_){const C=s.preOrderCheckHooks;null!==C&&pf(o,C,null)}else{const C=s.preOrderHooks;null!==C&&gf(o,C,0,null),Ja(o,0)}if(function fI(s){for(let o=Dc(s);null!==o;o=Ag(o)){if(!o[2])continue;const a=o[9];for(let u=0;u<a.length;u++){const d=a[u],p=d[3];0==(512&d[2])&&Xo(p,1),d[2]|=512}}}(o),function hI(s){for(let o=Dc(s);null!==o;o=Ag(o))for(let a=10;a<o.length;a++){const u=o[a],d=u[1];bi(u)&&sp(d,u,d.template,u[8])}}(o),null!==s.contentQueries&&ww(s,o),_){const C=s.contentCheckHooks;null!==C&&pf(o,C)}else{const C=s.contentHooks;null!==C&&gf(o,C,1),Ja(o,1)}!function bw(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const d=a[u];if(d<0)ci(~d);else{const p=d,_=a[++u],w=a[++u];Rd(_,p),w(2,o[p])}}}finally{ci(-1)}}(s,o);const w=s.components;null!==w&&function Ew(s,o){for(let a=0;a<o.length;a++)pI(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&nm(2,D,u),_){const C=s.viewCheckHooks;null!==C&&pf(o,C)}else{const C=s.viewHooks;null!==C&&gf(o,C,2),Ja(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Xo(o[3],-1))}finally{ra()}}}function Xr(s,o,a,u){const d=o[10],_=Qo(o);try{!_&&d.begin&&d.begin(),_&&ip(s,o,u),sp(s,o,a,u)}finally{!_&&d.end&&d.end()}}function Qg(s,o,a,u,d){const p=lr(),_=2&u;try{ci(-1),_&&o.length>22&&e_(s,o,22,!1),a(u,d)}finally{ci(p)}}function Pc(s,o,a){!ks()||(function bh(s,o,a,u){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||In(a,o),at(u,o);const _=a.initialInputs;for(let w=d;w<p;w++){const D=s.data[w],C=ei(D);C&&Ma(o,a,D);const k=Bi(o,s,w,a);at(k,o),null!==_&&kw(0,w-d,k,D,0,_),C&&(Mr(a.index,o)[8]=k)}}(s,o,a,li(a,o)),128==(128&a.flags)&&function wh(s,o,a){const u=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Qa(){return It.lFrame.currentDirectiveIndex}();try{ci(p);for(let w=u;w<d;w++){const D=s.data[w],C=o[w];Ku(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Sw(D,C)}}finally{ci(-1),Ku(_)}}(s,o,a))}function Ks(s,o,a=li){const u=o.localNames;if(null!==u){let d=o.index+1;for(let p=0;p<u.length;p+=2){const _=u[p+1],w=-1===_?a(o,s):s[_];s[d++]=w}}}function Xg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Jg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Jg(s,o,a,u,d,p,_,w,D,C){const k=22+u,P=k+d,z=function op(s,o){const a=[];for(let u=0;u<o;u++)a.push(u<s?null:Nt);return a}(k,P),ne="function"==typeof C?C():C;return z[1]={type:s,blueprint:z,template:a,queries:null,viewQuery:w,declTNode:o,data:z.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:ne,incompleteFirstPass:!1}}function u_(s,o,a,u){const d=rm(o);null===a?d.push(u):(d.push(a),s.firstCreatePass&&$r(s).push(u,d.length-1))}function xw(s,o,a){for(let u in s)if(s.hasOwnProperty(u)){const d=s[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(o,d):a[u]=[o,d]}return a}function vh(s,o){const u=o.directiveEnd,d=s.data,p=o.attrs,_=[];let w=null,D=null;for(let C=o.directiveStart;C<u;C++){const k=d[C],P=k.inputs,z=null===p||Yy(o)?null:dI(P,p);_.push(z),w=xw(P,C,w),D=xw(k.outputs,C,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=w,o.outputs=D}function d_(s,o){const a=Mr(o,s);16&a[2]||(a[2]|=32)}function em(s,o,a,u){let d=!1;if(ks()){const p=function cI(s,o,a){const u=s.directiveRegistry;let d=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];uh(a,_.selectors,!1)&&(d||(d=[]),Ls(In(a,o),s,_.type),ei(_)?(Tw(s,a),d.unshift(_)):d.push(_))}return d}(s,o,a),_=null===u?null:{"":-1};if(null!==p){d=!0,Rw(a,s.data.length,p.length);for(let k=0;k<p.length;k++){const P=p[k];P.providersResolver&&P.providersResolver(P)}let w=!1,D=!1,C=Ta(s,o,p.length,null);for(let k=0;k<p.length;k++){const P=p[k];a.mergedAttrs=Ns(a.mergedAttrs,P.hostAttrs),h_(s,a,o,C,P),Ii(C,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const z=P.type.prototype;!w&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(z.ngOnChanges||z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),C++}vh(s,a)}_&&function Mw(s,o,a){if(o){const u=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Me(-301,!1);u.push(o[d],p)}}}(a,u,_)}return a.mergedAttrs=Ns(a.mergedAttrs,a.attrs),d}function Aw(s,o,a,u,d,p){const _=p.hostBindings;if(_){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function uI(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(u,d,_)}}function Sw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Tw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Ii(s,o,a){if(a){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)a[o.exportAs[u]]=s;ei(o)&&(a[""]=s)}}function Rw(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function h_(s,o,a,u,d){s.data[u]=d;const p=d.factory||(d.factory=_i(d.type)),_=new sa(p,ei(d),Tc);s.blueprint[u]=_,a[u]=_,Aw(s,o,0,u,Ta(s,a,d.hostVars,Nt),d)}function Ma(s,o,a){const u=li(o,s),d=Xg(a),p=s[10],_=tm(s,Yg(s,d,null,a.onPush?32:16,u,o,p,p.createRenderer(u,a),null,null,null));s[o.index]=_}function Ao(s,o,a,u,d,p){const _=li(s,o);!function Eh(s,o,a,u,d,p,_){if(null==p)s.removeAttribute(o,d,a);else{const w=null==_?ye(p):_(p,u||"",d);s.setAttribute(o,d,w,a)}}(o[11],_,p,s.value,a,u,d)}function kw(s,o,a,u,d,p){const _=p[o];if(null!==_){const w=u.setInput;for(let D=0;D<_.length;){const C=_[D++],k=_[D++],P=_[D++];null!==w?u.setInput(a,P,C,k):a[k]=P}}}function dI(s,o){let a=null,u=0;for(;u<o.length;){const d=o[u];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[u+1])),u+=2}else u+=2;else u+=4}return a}function Ow(s,o,a,u){return new Array(s,!0,!1,o,null,0,u,a,null,null)}function pI(s,o){const a=Mr(o,s);if(bi(a)){const u=a[1];48&a[2]?sp(u,a,u.template,a[8]):a[5]>0&&f_(a)}}function f_(s){for(let u=Dc(s);null!==u;u=Ag(u))for(let d=10;d<u.length;d++){const p=u[d];if(bi(p))if(512&p[2]){const _=p[1];sp(_,p,_.template,p[8])}else p[5]>0&&f_(p)}const a=s[1].components;if(null!==a)for(let u=0;u<a.length;u++){const d=Mr(a[u],s);bi(d)&&d[5]>0&&f_(d)}}function gI(s,o){const a=Mr(o,s),u=a[1];(function mI(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(u,a),ip(u,a,a[8])}function tm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function p_(s){for(;s;){s[2]|=32;const o=Wf(s);if(qp(s)&&!o)return s;s=o}return null}function Nw(s){!function Fw(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],u=Ze(a);if(null!==u){const d=u[1];Xr(d,u,d.template,a)}}}(s[8])}function nm(s,o,a){Xa(0),o(s,a)}const bI=(()=>Promise.resolve(null))();function rm(s){return s[7]||(s[7]=[])}function $r(s){return s.cleanup||(s.cleanup=[])}function sm(s,o){const a=s[9],u=a?a.get(zf,null):null;u&&u.handleError(o)}function ap(s,o,a,u,d){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],D=o[_],C=s.data[_];null!==C.setInput?C.setInput(D,d,u,w):D[w]=d}}function hi(s,o,a){const u=Yo(o,s);!function zy(s,o,a){s.setValue(o,a)}(s[11],u,a)}function lp(s,o,a){let u=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const w=o[_];"number"==typeof w?p=w:1==p?d=me(d,w):2==p&&(u=me(u,w+": "+o[++_]+";"))}a?s.styles=u:s.stylesWithoutHost=u,a?s.classes=d:s.classesWithoutHost=d}function om(s,o,a,u,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&u.push(Hn(p)),Jr(p))for(let w=10;w<p.length;w++){const D=p[w],C=D[1].firstChild;null!==C&&om(D[1],D,C,u)}const _=a.type;if(8&_)om(s,o,a.child,u);else if(32&_){const w=ze(a,o);let D;for(;D=w();)u.push(D)}else if(16&_){const w=Du(o,a);if(Array.isArray(w))u.push(...w);else{const D=Wf(o[16]);om(D[1],D,w,u,!0)}}a=d?a.projectionNext:a.next}return u}class Dh{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return om(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Jr(o)){const a=o[8],u=a?a.indexOf(this):-1;u>-1&&(wl(o,u),$n(a,u))}this._attachedToViewContainer=!1}qy(this._lView[1],this._lView)}onDestroy(o){u_(this._lView[1],this._lView,null,o)}markForCheck(){p_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function g_(s,o,a){const u=o[10];u.begin&&u.begin();try{sp(s,o,s.template,a)}catch(d){throw sm(o,d),d}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function xo(s,o){Xf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=o}}class am extends Dh{constructor(o){super(o),this._view=o}detectChanges(){Nw(this._view)}checkNoChanges(){}get context(){return null}}class Tl extends T{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=rt(o);return new Ih(a,this.ngModule)}}function Su(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class up{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,u){const d=this.injector.get(o,bc,u);return d!==bc||a===bc?d:this.parentInjector.get(o,a,u)}}class Ih extends gg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function jD(s){return s.map(UD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Su(this.componentDef.inputs)}get outputs(){return Su(this.componentDef.outputs)}create(o,a,u,d){let p=(d=d||this.ngModule)instanceof Wn?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new up(o,p):o,w=_.get(_t,null);if(null===w)throw new Me(407,!1);const D=_.get(ji,null),C=w.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",P=u?function Iw(s,o,a){return s.selectRootElement(o,a===ot.ShadowDom)}(C,u,this.componentDef.encapsulation):Kf(w.createRenderer(null,this.componentDef),k,function Lc(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(k)),z=this.componentDef.onPush?288:272,ne=function Vw(s,o){return{components:[],scheduler:s||Xb,clean:bI,playerHandler:o||null,flags:0}}(),Ee=Jg(0,null,null,1,0,null,null,null,null,null),Fe=Yg(null,Ee,ne,z,null,null,w,C,D,_,null);let qe,nt;$l(Fe);try{const Ct=function EI(s,o,a,u,d,p){const _=a[1];a[22]=s;const D=_h(_,22,2,"#host",null),C=D.mergedAttrs=o.hostAttrs;null!==C&&(lp(D,C,!0),null!==s&&(tl(d,s,C),null!==D.classes&&oh(d,s,D.classes),null!==D.styles&&Dl(d,s,D.styles)));const k=u.createRenderer(s,o),P=Yg(a,Xg(o),null,o.onPush?32:16,a[22],D,u,k,p||null,null,null);return _.firstCreatePass&&(Ls(In(D,a),_,o.type),Tw(_,D),Rw(D,a.length,1)),tm(a,P),a[22]=P}(P,this.componentDef,Fe,w,C);if(P)if(u)tl(C,P,["ng-version",gu.full]);else{const{attrs:ke,classes:vt}=function lw(s){const o=[],a=[];let u=1,d=2;for(;u<s.length;){let p=s[u];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++u]):8===d&&a.push(p);else{if(!ni(d))break;d=p}u++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);ke&&tl(C,P,ke),vt&&vt.length>0&&oh(C,P,vt.join(" "))}if(nt=za(Ee,22),void 0!==a){const ke=nt.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const zt=a[vt];ke.push(null!=zt?Array.from(zt):null)}}qe=function Bw(s,o,a,u,d){const p=a[1],_=function lI(s,o,a){const u=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),h_(s,u,o,Ta(s,o,1,null),a),vh(s,u));const d=Bi(o,s,u.directiveStart,u);at(d,o);const p=li(u,o);return p&&at(p,o),d}(p,a,o);if(u.components.push(_),s[8]=_,null!==d)for(const D of d)D(_,o);if(o.contentQueries){const D=_n();o.contentQueries(1,_,D.directiveStart)}const w=_n();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ci(w.index),Aw(a[1],w,0,w.directiveStart,w.directiveEnd,o),Sw(o,_)),_}(Ct,this.componentDef,Fe,ne,[lm]),ip(Ee,Fe,null)}finally{ra()}return new Lw(this.componentType,qe,W(nt,Fe),Fe,nt)}}class Lw extends class Vy{}{constructor(o,a,u,d,p){super(),this.location=u,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new am(d),this.componentType=o}setInput(o,a){const u=this._tNode.inputs;let d;if(null!==u&&(d=u[o])){const p=this._rootLView;ap(p[1],p,d,o,a),d_(p,this._tNode.index)}}get injector(){return new hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function lm(){const s=_n();Yl(Ie()[1],s)}function y_(s){let o=function Tu(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const u=[s];for(;o;){let d;if(ei(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Me(903,!1);d=o.\u0275dir}if(d){if(a){u.push(d);const _=s;_.inputs=__(s.inputs),_.declaredInputs=__(s.declaredInputs),_.outputs=__(s.outputs);const w=d.hostBindings;w&&cp(s,w);const D=d.viewQuery,C=d.contentQueries;if(D&&DI(s,D),C&&II(s,C),ue(s.inputs,d.inputs),ue(s.declaredInputs,d.declaredInputs),ue(s.outputs,d.outputs),ei(d)&&d.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(s),w===y_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Uw(s){let o=0,a=null;for(let u=s.length-1;u>=0;u--){const d=s[u];d.hostVars=o+=d.hostVars,d.hostAttrs=Ns(d.hostAttrs,a=Ns(a,d.hostAttrs))}}(u)}function __(s){return s===mn?{}:s===Bt?[]:s}function DI(s,o){const a=s.viewQuery;s.viewQuery=a?(u,d)=>{o(u,d),a(u,d)}:o}function II(s,o){const a=s.contentQueries;s.contentQueries=a?(u,d,p)=>{o(u,d,p),a(u,d,p)}:o}function cp(s,o){const a=s.hostBindings;s.hostBindings=a?(u,d)=>{o(u,d),a(u,d)}:o}let cm=null;function Uc(){if(!cm){const s=Xe.Symbol;if(s&&s.iterator)cm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const u=o[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(cm=u)}}}return cm}function Mu(s){return!!jc(s)&&(Array.isArray(s)||!(s instanceof Map)&&Uc()in s)}function jc(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ri(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Ch(s,o,a,u){const d=Ie();return ri(d,oo(),o)&&(Ut(),Ao(vn(),d,s,o,a,u)),Ch}function So(s,o,a,u,d,p){const w=function Fr(s,o,a,u){const d=ri(s,o,a);return ri(s,o+1,u)||d}(s,function Ni(){return It.lFrame.bindingIndex}(),a,d);return os(2),w?o+ye(a)+u+ye(d)+p:Nt}function Sh(s,o,a,u,d,p,_,w){const D=Ie(),C=Ut(),k=s+22,P=C.firstCreatePass?function zc(s,o,a,u,d,p,_,w,D){const C=o.consts,k=_h(o,s,4,_||null,rs(C,w));em(o,a,k,rs(C,D)),Yl(o,k);const P=k.tViews=Jg(2,k,u,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C);return null!==o.queries&&(o.queries.template(o,k),P.queries=o.queries.embeddedTView(k)),k}(k,C,D,o,a,u,d,p,_):C.data[k];ui(P,!1);const z=D[11].createComment("");Co(C,D,z,P),at(z,D),tm(D,D[k]=Ow(z,D,z,P)),Go(P)&&Pc(C,D,P),null!=_&&Ks(D,P,w)}function E_(s){return ts(function Za(){return It.lFrame.contextLView}(),22+s)}function D_(s,o,a){const u=Ie();return ri(u,oo(),o)&&function ys(s,o,a,u,d,p,_,w){const D=li(o,a);let k,C=o.inputs;!w&&null!=C&&(k=C[u])?(ap(s,a,k,u,d),ro(o)&&d_(a,o.index)):3&o.type&&(u=function c_(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),d=null!=_?_(d,o.value||"",u):d,p.setProperty(D,u,d))}(Ut(),vn(),u,s,o,u[11],a,!1),D_}function hm(s,o,a,u,d){const _=d?"class":"style";ap(s,a,o.inputs[_],_,u)}function fm(s,o,a,u){const d=Ie(),p=Ut(),_=22+s,w=d[11],D=d[_]=Kf(w,o,function ff(){return It.lFrame.currentNamespace}()),C=p.firstCreatePass?function AI(s,o,a,u,d,p,_){const w=o.consts,C=_h(o,s,2,d,rs(w,p));return em(o,a,C,rs(w,_)),null!==C.attrs&&lp(C,C.attrs,!1),null!==C.mergedAttrs&&lp(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(_,p,d,0,o,a,u):p.data[_];ui(C,!0);const k=C.mergedAttrs;null!==k&&tl(w,D,k);const P=C.classes;null!==P&&oh(w,D,P);const z=C.styles;return null!==z&&Dl(w,D,z),64!=(64&C.flags)&&Co(p,d,D,C),0===function jl(){return It.lFrame.elementDepthCount}()&&at(D,d),function zu(){It.lFrame.elementDepthCount++}(),Go(C)&&(Pc(p,d,C),function l_(s,o,a){if(Ho(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,C,d)),null!==u&&Ks(d,C),fm}function Th(){let s=_n();Wa()?Ka():(s=s.parent,ui(s,!1));const o=s;!function so(){It.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(Yl(a,s),Ho(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function br(s){return 0!=(16&s.flags)}(o)&&hm(a,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function yf(s){return 0!=(32&s.flags)}(o)&&hm(a,o,Ie(),o.stylesWithoutHost,!1),Th}function Nr(s,o,a,u){return fm(s,o,a,u),Th(),Nr}function C_(){return Ie()}function A_(s){return!!s&&"function"==typeof s.then}function fp(s){return!!s&&"function"==typeof s.subscribe}const TI=fp;function pm(s,o,a,u){const d=Ie(),p=Ut(),_=_n();return function Mh(s,o,a,u,d,p,_,w){const D=Go(u),k=s.firstCreatePass&&$r(s),P=o[8],z=rm(o);let ne=!0;if(3&u.type||w){const qe=li(u,o),nt=w?w(qe):qe,Ct=z.length,ke=w?zt=>w(Hn(zt[u.index])):u.index;let vt=null;if(!w&&D&&(vt=function S_(s,o,a,u){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===u){const w=o[7],D=d[p+2];return w.length>D?w[D]:null}"string"==typeof _&&(p+=2)}return null}(s,o,d,u.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=p,vt.__ngLastListenerFn__=p,ne=!1;else{p=mm(u,o,P,p,!1);const zt=a.listen(nt,d,p);z.push(p,zt),k&&k.push(d,ke,Ct,Ct+1)}}else p=mm(u,o,P,p,!1);const Ee=u.outputs;let Fe;if(ne&&null!==Ee&&(Fe=Ee[d])){const qe=Fe.length;if(qe)for(let nt=0;nt<qe;nt+=2){const Rn=o[Fe[nt]][Fe[nt+1]].subscribe(p),Lu=z.length;z.push(p,Rn),k&&k.push(d,u.index,Lu,-(Lu+1))}}}(p,d,d[11],_,s,o,0,u),pm}function pp(s,o,a,u){try{return!1!==a(u)}catch(d){return sm(s,d),!1}}function mm(s,o,a,u,d){return function p(_){if(_===Function)return u;p_(2&s.flags?Mr(s.index,o):o);let D=pp(o,0,u,_),C=p.__ngNextListenerFn__;for(;C;)D=pp(o,0,C,_)&&D,C=C.__ngNextListenerFn__;return d&&!1===D&&(_.preventDefault(),_.returnValue=!1),D}}function ym(s=1){return function df(s){return(It.lFrame.contextLView=function Zl(s,o){for(;s>0;)o=o[15],s--;return o}(s,It.lFrame.contextLView))[8]}(s)}function Xw(s,o){let a=null;const u=function ow(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===u?uh(s,p,!0):ep(u,p))return d}else a=d}return a}function Jw(s){const o=Ie()[16][6];if(!o.projection){const u=o.projection=ho(s?s.length:1,null),d=u.slice();let p=o.child;for(;null!==p;){const _=s?Xw(p,s):0;null!==_&&(d[_]?d[_].projectionNext=p:u[_]=p,d[_]=p),p=p.next}}}function T_(s,o=0,a){const u=Ie(),d=Ut(),p=_h(d,22+s,16,null,a||null);null===p.projection&&(p.projection=o),Ka(),64!=(64&p.flags)&&function El(s,o,a){sh(o[11],0,o,a,Ei(s,a,o),Ic(a.parent||o[6],a,o))}(d,u,p)}function F_(s,o,a,u,d){const p=s[a+1],_=null===o;let w=u?qs(p):Di(p),D=!1;for(;0!==w&&(!1===D||_);){const k=s[w+1];MI(s[w],o)&&(D=!0,s[w+1]=u?$g(k):Hg(k)),w=u?qs(k):Di(k)}D&&(s[a+1]=u?Hg(p):$g(p))}function MI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ha(s,o)>=0}function U_(s,o,a){return bs(s,o,a,!1),U_}function j_(s,o){return bs(s,o,null,!0),j_}function bs(s,o,a,u){const d=Ie(),p=Ut(),_=os(2);p.firstUpdatePass&&function h0(s,o,a,u){const d=s.data;if(null===d[a+1]){const p=d[lr()],_=function d0(s,o){return o>=s.expandoStartIndex}(s,a);(function Rl(s,o){return 0!=(s.flags&(o?16:32))})(p,u)&&null===o&&!_&&(o=!1),o=function kI(s,o,a,u){const d=function ao(s){const o=It.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=u?o.residualClasses:o.residualStyles;if(null===d)0===(u?o.classBindings:o.styleBindings)&&(a=ka(a=_p(null,s,o,a,u),o.attrs,u),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(a=_p(d,s,o,a,u),null===p){let D=function OI(s,o,a){const u=a?o.classBindings:o.styleBindings;if(0!==Di(u))return s[qs(u)]}(s,o,u);void 0!==D&&Array.isArray(D)&&(D=_p(null,s,o,D[1],u),D=ka(D,o.attrs,u),function FI(s,o,a,u){s[qs(a?o.classBindings:o.styleBindings)]=u}(s,o,u,D))}else p=function yp(s,o,a){let u;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)u=ka(u,s[p].hostAttrs,a);return ka(u,o.attrs,a)}(s,o,u)}return void 0!==p&&(u?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,u),function r0(s,o,a,u,d,p){let _=p?o.classBindings:o.styleBindings,w=qs(_),D=Di(_);s[u]=a;let k,C=!1;if(Array.isArray(a)){const P=a;k=P[1],(null===k||ha(P,k)>0)&&(C=!0)}else k=a;if(d)if(0!==D){const z=qs(s[w+1]);s[u+1]=jg(z,w),0!==z&&(s[z+1]=Gg(s[z+1],u)),s[w+1]=function Rc(s,o){return 131071&s|o<<17}(s[w+1],u)}else s[u+1]=jg(w,0),0!==w&&(s[w+1]=Gg(s[w+1],u)),w=u;else s[u+1]=jg(D,0),0===w?w=u:s[D+1]=Gg(s[D+1],u),D=u;C&&(s[u+1]=Hg(s[u+1])),F_(s,k,u,!0),F_(s,k,u,!1),function s0(s,o,a,u,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&ha(p,o)>=0&&(a[u+1]=$g(a[u+1]))}(o,k,s,u,p),_=jg(w,D),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,u)}}(p,s,_,u),o!==Nt&&ri(d,_,o)&&function wm(s,o,a,u,d,p,_,w){if(!(3&o.type))return;const D=s.data,C=D[w+1];kh(function kc(s){return 1==(1&s)}(C)?G_(D,o,a,d,Di(C),_):void 0)||(kh(p)||function Mc(s){return 2==(2&s)}(C)&&(p=G_(D,null,a,d,w,_)),function sw(s,o,a,u,d){if(o)d?s.addClass(a,u):s.removeClass(a,u);else{let p=-1===u.indexOf("-")?void 0:Aa.DashCase;null==d?s.removeStyle(a,u,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Aa.Important),s.setStyle(a,u,d,p))}}(u,_,Yo(lr(),a),d,p))}(p,p.data[lr()],d,d[11],s,d[_+1]=function $_(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ge(hs(s)))),s}(o,a),u,_)}function _p(s,o,a,u,d){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=o[w],u=ka(u,p.hostAttrs,d),p!==s);)w++;return null!==s&&(a.directiveStylingLast=w),u}function ka(s,o,a){const u=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),zn(s,_,!!a||o[++p]))}return void 0===s?null:s}function G_(s,o,a,u,d,p){const _=null===o;let w;for(;d>0;){const D=s[d],C=Array.isArray(D),k=C?D[1]:D,P=null===k;let z=a[d+1];z===Nt&&(z=P?Bt:void 0);let ne=P?po(z,u):k===u?z:void 0;if(C&&!kh(ne)&&(ne=po(D,u)),kh(ne)&&(w=ne,_))return w;const Ee=s[d+1];d=_?qs(Ee):Di(Ee)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(w=po(D,u))}return w}function kh(s){return void 0!==s}function z_(s,o=""){const a=Ie(),u=Ut(),d=s+22,p=u.firstCreatePass?_h(u,d,1,o,null):u.data[d],_=a[d]=function Sg(s,o){return s.createText(o)}(a[11],o);Co(u,a,_,p),ui(p,!1)}function Oh(s,o,a){const u=Ie(),d=function _s(s,o,a,u){return ri(s,oo(),a)?o+ye(a)+u:Nt}(u,s,o,a);return d!==Nt&&hi(u,lr(),d),Oh}function q_(s,o,a,u,d){const p=Ie(),_=So(p,s,o,a,u,d);return _!==Nt&&hi(p,lr(),_),q_}const Ol=void 0;var HI=["en",[["a","p"],["AM","PM"],Ol],[["AM","PM"],Ol,Ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ol,"{1} 'at' {0}",Ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jI(s){const a=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Ru={};function rv(s){const o=function E0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=iv(o);if(a)return a;const u=o.split("-")[0];if(a=iv(u),a)return a;if("en"===u)return HI;throw new Me(701,!1)}function w0(s){return rv(s)[Dt.PluralCase]}function iv(s){return s in Ru||(Ru[s]=Xe.ng&&Xe.ng.common&&Xe.ng.common.locales&&Xe.ng.common.locales[s]),Ru[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const Nh="en-US";let Tm=Nh;class Ci{}function dx(s,o){return new Rv(s,o??null)}class Rv extends Ci{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tl(this);const u=function _r(s,o){const a=s[Oi]||null;if(!a&&!0===o)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return a}(o);this._bootstrapComponents=function Et(s){return s instanceof Function?s():s}(u.bootstrap),this._r3Injector=Qr(o,a,[{provide:Ci,useValue:this},{provide:T,useValue:this.componentFactoryResolver}],ge(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Gm extends class H0{}{constructor(o){super(),this.moduleType=o}create(o){return new Rv(this.moduleType,o)}}function Hh(s,o,a,u,d,p){const _=o+a;return ri(s,_,d)?function zi(s,o,a){return s[o]=a}(s,_+1,p?u.call(p,d):u(d)):function ku(s,o){const a=s[o];return a===Nt?void 0:a}(s,_+1)}function Y0(s,o){const a=Ut();let u;const d=s+22;a.firstCreatePass?(u=function Fv(s,o){if(o)for(let a=o.length-1;a>=0;a--){const u=o[a];if(s===u.name)return u}}(o,a.pipeRegistry),a.data[d]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,u.onDestroy)):u=a.data[d];const p=u.factory||(u.factory=_i(u.type)),_=Bn(Tc);try{const w=Qu(!1),D=p();return Qu(w),function Yw(s,o,a,u){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=u}(a,Ie(),d,D),D}finally{Bn(_)}}function Nv(s,o,a){const u=s+22,d=Ie(),p=ts(d,u);return function id(s,o){return s[1].data[o].pure}(d,u)?Hh(d,function Jn(){const s=It.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function Gh(s){return o=>{setTimeout(s,void 0,o)}}const ws=class xx extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,u){let d=o,p=a||(()=>null),_=u;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),p=D.error?.bind(D),_=D.complete?.bind(D)}this.__isAsync&&(p=Gh(p),d&&(d=Gh(d)),_&&(_=Gh(_)));const w=super.subscribe({next:d,error:p,complete:_});return o instanceof re.w0&&o.add(w),w}};function eE(){return this._results[Uc()]()}class sd{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Uc(),u=sd.prototype;u[a]||(u[a]=eE)}get changes(){return this._changes||(this._changes=new ws)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const u=this;u.dirty=!1;const d=Or(o);(this._changesDetected=!function ec(s,o,a){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let d=s[u],p=o[u];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(u._results,d,a))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ap=(()=>{class s{}return s.__NG_ELEMENT_ID__=Pl,s})();const Km=Ap,od=class extends Km{constructor(o,a,u){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(o,a){const u=this._declarationTContainer.tViews,d=Yg(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(u)),ip(u,d,o),new Dh(d)}};function Pl(){return Ou(_n(),Ie())}function Ou(s,o){return 4&s.type?new od(o,s,W(s,o)):null}let Mo=(()=>{class s{}return s.__NG_ELEMENT_ID__=Cx,s})();function Cx(){return nE(_n(),Ie())}const tE=Mo,Lv=class extends tE{constructor(o,a,u){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=u}get element(){return W(this._hostTNode,this._hostLView)}get injector(){return new hr(this._hostTNode,this._hostLView)}get parentInjector(){const o=aa(this._hostTNode,this._hostLView);if(_f(o)){const a=Rr(o,this._hostLView),u=rl(o);return new hr(a[1].data[u+8],a)}return new hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=$h(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,u){let d,p;"number"==typeof u?d=u:null!=u&&(d=u.index,p=u.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,u,d,p){const _=o&&!function ll(s){return"function"==typeof s}(o);let w;if(_)w=a;else{const P=a||{};w=P.index,u=P.injector,d=P.projectableNodes,p=P.environmentInjector||P.ngModuleRef}const D=_?o:new Ih(rt(o)),C=u||this.parentInjector;if(!p&&null==D.ngModule){const z=(_?C:this.parentInjector).get(Wn,null);z&&(p=z)}const k=D.create(C,d,void 0,p);return this.insert(k.hostView,w),k}insert(o,a){const u=o._lView,d=u[1];if(function ns(s){return Jr(s[3])}(u)){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const P=u[3],z=new Lv(P,P[6],P[3]);z.detach(z.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Zf(s,o,a,u){const d=10+u,p=a.length;u>0&&(a[d-1][4]=o),u<p-10?(o[4]=a[d],tc(a,10+u,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Eu(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=64}(d,u,_,p);const w=Qf(p,_),D=u[11],C=ln(D,_[7]);return null!==C&&function Tg(s,o,a,u,d,p){u[0]=d,u[6]=o,Xf(s,u,a,1,d,p)}(d,_[6],D,u,C,w),o.attachToViewContainerRef(),tc(Fa(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=$h(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),u=wl(this._lContainer,a);u&&($n(Fa(this._lContainer),a),qy(u[1],u))}detach(o){const a=this._adjustIndex(o,-1),u=wl(this._lContainer,a);return u&&null!=$n(Fa(this._lContainer),a)?new Dh(u):null}_adjustIndex(o,a=0){return o??this.length+a}};function $h(s){return s[8]}function Fa(s){return s[8]||(s[8]=[])}function nE(s,o){let a;const u=o[s.index];if(Jr(u))a=u;else{let d;if(8&s.type)d=Hn(u);else{const p=o[11];d=p.createComment("");const _=li(s,o);gs(p,ln(p,_),d,function nw(s,o){return s.nextSibling(o)}(p,_),!1)}o[s.index]=a=Ow(u,o,d,s),tm(o,a)}return new Lv(a,s,o)}class Zm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Zm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Bv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const u=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<u;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Bv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==aE(o,a).matches&&this.queries[a].setDirty()}}class rE{constructor(o,a,u=null){this.predicate=o,this.flags=a,this.read=u}}class Ym{constructor(o=[]){this.queries=o}elementStart(o,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let u=0;u<this.length;u++){const d=null!==a?a.length:0,p=this.getByIndex(u).embeddedTView(o,d);p&&(p.indexInDeclarationView=u,null!==a?a.push(p):a=[p])}return null!==a?new Ym(a):null}template(o,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Vv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Vv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const p=u[d];this.matchTNodeWithReadOption(o,a,Tx(a,p)),this.matchTNodeWithReadOption(o,a,us(a,o,p,!1,!1))}else u===Ap?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,us(a,o,u,!1,!1))}matchTNodeWithReadOption(o,a,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===de||d===Mo||d===Ap&&4&a.type)this.addMatch(a.index,-2);else{const p=us(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,u)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Tx(s,o){const a=s.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===o)return a[u+1];return null}function Mx(s,o,a,u){return-1===a?function iE(s,o){return 11&s.type?W(s,o):4&s.type?Ou(s,o):null}(o,s):-2===a?function Rx(s,o,a){return a===de?W(o,s):a===Ap?Ou(o,s):a===Mo?nE(o,s):void 0}(s,o,u):Bi(s,s[1],a,o)}function Uv(s,o,a,u){const d=o[19].queries[u];if(null===d.matches){const p=s.data,_=a.matches,w=[];for(let D=0;D<_.length;D+=2){const C=_[D];w.push(C<0?null:Mx(o,p[C],_[D+1],a.metadata.read))}d.matches=w}return d.matches}function Qm(s,o,a,u){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const _=Uv(s,o,d,a);for(let w=0;w<p.length;w+=2){const D=p[w];if(D>0)u.push(_[w/2]);else{const C=p[w+1],k=o[-D];for(let P=10;P<k.length;P++){const z=k[P];z[17]===z[3]&&Qm(z[1],z,C,u)}if(null!==k[9]){const P=k[9];for(let z=0;z<P.length;z++){const ne=P[z];Qm(ne[1],ne,C,u)}}}}}return u}function jv(s){const o=Ie(),a=Ut(),u=Gl();Xa(u+1);const d=aE(a,u);if(s.dirty&&Qo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Qm(a,o,u,[]):Uv(a,o,d,u);s.reset(p,Ve),s.notifyOnChanges()}return!0}return!1}function Hv(s,o,a){const u=Ut();u.firstCreatePass&&(Gv(u,new rE(s,o,a),-1),2==(2&o)&&(u.staticViewQueries=!0)),oE(u,Ie(),o)}function sE(s,o,a,u){const d=Ut();if(d.firstCreatePass){const p=_n();Gv(d,new rE(o,a,u),p.index),function Fu(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}oE(d,Ie(),a)}function Xm(){return function Jm(s,o){return s[19].queries[o].queryList}(Ie(),Gl())}function oE(s,o,a){const u=new sd(4==(4&a));u_(s,o,u,u.destroy),null===o[19]&&(o[19]=new Bv),o[19].queries.push(new Zm(u))}function Gv(s,o,a){null===s.queries&&(s.queries=new Ym),s.queries.track(new Vv(o,a))}function aE(s,o){return s.queries.getByIndex(o)}function kp(...s){}const vE=new jt("Application Initializer");let Op=(()=>{class s{constructor(a){this.appInits=a,this.resolve=kp,this.reject=kp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(A_(p))a.push(p);else if(TI(p)){const _=new Promise((w,D)=>{p.subscribe({complete:w,error:D})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(d=>{this.reject(d)}),0===a.length&&u(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(An(vE,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bE=new jt("AppId",{providedIn:"root",factory:function Js(){return`${Xv()}${Xv()}${Xv()}`}});function Xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wE=new jt("Platform Initializer"),$x=new jt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Es=new jt("appBootstrapListener"),Jv=new jt("AnimationModuleType"),oy=new jt("LocaleId",{providedIn:"root",factory:()=>hl(oy,yt.Optional|yt.SkipSelf)||function sy(){return typeof $localize<"u"&&$localize.locale||Nh}()}),HA=new jt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),WA=(()=>Promise.resolve(0))();function DE(s){typeof Zone>"u"?WA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ds{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&a,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function IE(){let s=Xe.requestAnimationFrame,o=Xe.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ay(s){const o=()=>{!function ko(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Xe,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Fp(s),s.isCheckStableRunning=!0,Pr(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Fp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,d,p,_,w)=>{try{return xE(s),a.invokeTask(d,p,_,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),CE(s)}},onInvoke:(a,u,d,p,_,w,D)=>{try{return xE(s),a.invoke(d,p,_,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),CE(s)}},onHasTask:(a,u,d,p)=>{a.hasTask(d,p),u===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Fp(s),Pr(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,u,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ds.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Ds.isInAngularZone())throw new Me(909,!1)}run(o,a,u){return this._inner.run(o,a,u)}runTask(o,a,u,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,Yx,kp,kp);try{return p.runTask(_,a,u)}finally{p.cancelTask(_)}}runGuarded(o,a,u){return this._inner.runGuarded(o,a,u)}runOutsideAngular(o){return this._outer.run(o)}}const Yx={};function Pr(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Fp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function xE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function CE(s){s._nesting--,Pr(s)}class Qx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}run(o,a,u){return o.apply(a,u)}runGuarded(o,a,u){return o.apply(a,u)}runOutsideAngular(o){return o()}runTask(o,a,u,d){return o.apply(a,u)}}const eb=new jt(""),AE=new jt("");let ii,Xx=(()=>{class s{constructor(a,u,d){this._ngZone=a,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ii||(function Jx(s){ii=s}(d),d.addToWindow(u)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ds.assertNotInAngularZone(),DE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())DE(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,d){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,u,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(An(Ds),An(SE),An(AE))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),SE=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return ii?.findTestabilityInTree(this,a,u)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Oo=null;const tb=new jt("AllowMultipleToken"),Np=new jt("PlatformDestroyListeners");function rb(s,o,a=[]){const u=`Platform: ${o}`,d=new jt(u);return(p=[])=>{let _=sb();if(!_||_.injector.get(tb,!1)){const w=[...a,...p,{provide:d,useValue:!0}];s?s(w):function tC(s){if(Oo&&!Oo.get(tb,!1))throw new Me(400,!1);Oo=s;const o=s.get(RE);(function ME(s){const o=s.get(wE,null);o&&o.forEach(a=>a())})(s)}(function ib(s=[],o){return Cc.create({name:o,providers:[{provide:_c,useValue:"platform"},{provide:Np,useValue:new Set([()=>Oo=null])},...s]})}(w,u))}return function uy(s){const o=sb();if(!o)throw new Me(401,!1);return o}()}}function sb(){return Oo?.get(RE)??null}let RE=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const d=function OE(s,o){let a;return a="noop"===s?new Qx:("zone.js"===s?void 0:s)||new Ds(o),a}(u?.ngZone,function kE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),p=[{provide:Ds,useValue:d}];return d.run(()=>{const _=Cc.create({providers:p,parent:this.injector,name:a.moduleType.name}),w=a.create(_),D=w.injector.get(zf,null);if(!D)throw new Me(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:k=>{D.handleError(k)}});w.onDestroy(()=>{Pp(this._modules,w),C.unsubscribe()})}),function cy(s,o,a){try{const u=a();return A_(u)?u.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(D,d,()=>{const C=w.injector.get(Op);return C.runInitializers(),C.donePromise.then(()=>(function D0(s){Gt(s,"Expected localeId to be defined"),"string"==typeof s&&(Tm=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(oy,Nh)||Nh),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,u=[]){const d=ob({},u);return function nb(s,o,a){const u=new Gm(a);return Promise.resolve(u)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const u=a.injector.get(Zh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Me(403,!1);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get(Np,null);a&&(a.forEach(u=>u()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(An(Cc))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ob(s,o){return Array.isArray(o)?o.reduce(ob,s):{...s,...o}}let Zh=(()=>{class s{constructor(a,u,d){this._zone=a,this._injector=u,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),_=new N.y(w=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ds.assertNotInAngularZone(),DE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{D.unsubscribe(),C.unsubscribe()}});this.isStable=(0,he.T)(p,_.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,u){const d=a instanceof gg;if(!this._injector.get(Op).done)throw!d&&function Tp(s){const o=rt(s)||dn(s)||yn(s);return null!==o&&o.standalone}(a),new Me(405,false);let _;_=d?a:this._injector.get(T).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const w=function eC(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Ci),C=_.create(Cc.NULL,[],u||_.selector,w),k=C.location.nativeElement,P=C.injector.get(eb,null);return P?.registerApplication(k),C.onDestroy(()=>{this.detachView(C.hostView),Pp(this.components,C),P?.unregisterApplication(k)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Pp(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Es,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Pp(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Me(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(An(Ds),An(Wn),An(zf))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pp(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let dy=!0,ab=!1;function iC(){return ab=!0,dy}function lb(){if(ab)throw new Error("Cannot enable prod mode after platform setup.");dy=!1}let aC=(()=>{class s{}return s.__NG_ELEMENT_ID__=lC,s})();function lC(s){return function uC(s,o,a){if(ro(s)&&!a){const u=Mr(s.index,o);return new Dh(u,u)}return 47&s.type?new Dh(o[16],o):null}(_n(),Ie(),16==(16&s))}class UE{constructor(){}supports(o){return Mu(o)}create(o){return new yC(o)}}const mC=(s,o)=>o;class yC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||mC}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,u=this._removalsHead,d=0,p=null;for(;a||u;){const _=!u||a&&a.currentIndex<mb(u,d,p)?a:u,w=mb(_,d,p),D=_.currentIndex;if(_===u)d--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const C=w-d,k=D-d;if(C!=k){for(let z=0;z<C;z++){const ne=z<p.length?p[z]:p[z]=0,Ee=ne+z;k<=Ee&&Ee<C&&(p[z]=ne+1)}p[_.previousIndex]=k-C}}w!==D&&o(_,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Mu(o))throw new Me(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),u=!0),a=a._next}else d=0,function Gw(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Uc()]();let u;for(;!(u=a.next()).done;)o(u.value)}}(o,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),u=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,u,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new jE(a,u),p,d),o}_verifyReinsertion(o,a,u,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,u),this._addToMoves(o,u),o}_moveAfter(o,a,u){return this._unlink(o),this._insertAfter(o,a,u),this._addToMoves(o,u),o}_addAfter(o,a,u){return this._insertAfter(o,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,u){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new gb),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,u=o._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class jE{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const a=o._prevDup,u=o._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class gb{constructor(){this.map=new Map}put(o){const a=o.trackById;let u=this.map.get(a);u||(u=new HE,this.map.set(a,u)),u.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mb(s,o,a){const u=s.previousIndex;if(null===u)return u;let d=0;return a&&u<a.length&&(d=a[u]),u+o+d}class yb{constructor(){}supports(o){return o instanceof Map||jc(o)}create(){return new YA}}class YA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||jc(o)))throw new Me(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,u);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const u=o._prev;return a._next=o,a._prev=u,o._prev=a,u&&(u._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const u=new _C(o);return this._records.set(o,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(u=>a(o[u],u))}}class _C{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vC(){return new GE([new UE])}let GE=(()=>{class s{constructor(a){this.factories=a}static create(a,u){if(null!=u){const d=u.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:u=>s.create(a,u||vC()),deps:[[s,new je,new se]]}}find(a){const u=this.factories.find(d=>d.supports(a));if(null!=u)return u;throw new Me(901,!1)}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:vC}),s})();function bC(){return new _b([new yb])}let _b=(()=>{class s{constructor(a){this.factories=a}static create(a,u){if(u){const d=u.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:u=>s.create(a,u||bC()),deps:[[s,new je,new se]]}}find(a){const u=this.factories.find(d=>d.supports(a));if(u)return u;throw new Me(901,!1)}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:bC}),s})();const vb=rb(null,"core",[]);let QA=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(An(Zh))},s.\u0275mod=Ue({type:s}),s.\u0275inj=Lt({}),s})()},3942:(ut,Ce,F)=>{F.d(Ce,{Z:()=>Me});var f=F(2090),re=F(4859),N=F(9681),he=F(1877);class le{constructor(ye,_e){this._delegate=ye,this.firebase=_e,(0,N._addComponent)(ye,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ye,_e=N._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(ye);return!tt.isInitialized()&&"EXPLICIT"===(null===(Qe=tt.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:_e})}_removeServiceInstance(ye,_e=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(_e)}_addComponent(ye){(0,N._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,N._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function me(){const Ye=function ge(Ye){const ye={},_e={__esModule:!0,initializeApp:function Ae(Ge,U={}){const ve=N.initializeApp(Ge,U);if((0,f.r3)(ye,ve.name))return ye[ve.name];const X=new Ye(ve,_e);return ye[ve.name]=X,X},app:tt,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function De(Ge){const U=Ge.name,ve=U.replace("-compat","");if(N._registerComponent(Ge)&&"PUBLIC"===Ge.type){const X=(te=tt())=>{if("function"!=typeof te[ve])throw ue.create("invalid-app-argument",{appName:U});return te[ve]()};void 0!==Ge.serviceProps&&(0,f.ZB)(X,Ge.serviceProps),_e[ve]=X,Ye.prototype[ve]=function(...te){return this._getService.bind(this,U).apply(this,Ge.multipleInstances?te:[])}}return"PUBLIC"===Ge.type?_e[ve]:null},removeApp:function Qe(Ge){delete ye[Ge]},useAsService:function He(Ge,U){return"serverAuth"===U?null:U},modularAPIs:N}};function tt(Ge){if(!(0,f.r3)(ye,Ge=Ge||N._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Ge});return ye[Ge]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function we(){return Object.keys(ye).map(Ge=>ye[Ge])}}),tt.App=Ye,_e}(le);return Ye.INTERNAL=Object.assign(Object.assign({},Ye.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ye(_e){(0,f.ZB)(Ye,_e)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ye}(),H=new he.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ye=self.firebase.SDK_VERSION;Ye&&Ye.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=j;!function Re(Ye){(0,N.registerVersion)("@firebase/app-compat","0.1.32",Ye)}()},9681:(ut,Ce,F)=>{F.r(Ce),F.d(Ce,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>Mi,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Yt,_apps:()=>sn,_clearComponents:()=>Lo,_components:()=>Ln,_getProvider:()=>Lt,_registerComponent:()=>zr,_removeServiceInstance:()=>on,deleteApp:()=>yt,getApp:()=>oi,getApps:()=>Ri,initializeApp:()=>Zi,onLog:()=>Bn,registerVersion:()=>mi,setLogLevel:()=>ki});var f=F(5861),re=F(4859),N=F(1877),he=F(2090),le=F(8766);class pe{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function ue(B){return"VERSION"===B.getComponent()?.type}(q)){const xe=q.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(q=>q).join(" ")}}const ge="@firebase/app",j=new N.Yd("@firebase/app"),Gt="[DEFAULT]",We={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,Ln=new Map;function Zt(B,$){try{B.container.addComponent($)}catch(q){j.debug(`Component ${$.name} failed to register with FirebaseApp ${B.name}`,q)}}function Yt(B,$){B.container.addOrOverwriteComponent($)}function zr(B){const $=B.name;if(Ln.has($))return j.debug(`There were multiple attempts to register component ${$}.`),!1;Ln.set($,B);for(const q of sn.values())Zt(q,B);return!0}function Lt(B,$){const q=B.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),B.container.getProvider($)}function on(B,$,q=Gt){Lt(B,$).clearInstance(q)}function Lo(){Ln.clear()}const Br=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qr{constructor($,q,xe){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}const Mi="9.9.3";function Zi(B,$={}){"object"!=typeof $&&($={name:$});const q=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},$),xe=q.name;if("string"!=typeof xe||!xe)throw Br.create("bad-app-name",{appName:String(xe)});const Ue=sn.get(xe);if(Ue){if((0,he.vZ)(B,Ue.options)&&(0,he.vZ)(q,Ue.config))return Ue;throw Br.create("duplicate-app",{appName:xe})}const ct=new re.H0(xe);for(const Xt of Ln.values())ct.addComponent(Xt);const cn=new qr(B,q,ct);return sn.set(xe,cn),cn}function oi(B=Gt){const $=sn.get(B);if(!$)throw Br.create("no-app",{appName:B});return $}function Ri(){return Array.from(sn.values())}function yt(B){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(B){const $=B.name;sn.has($)&&(sn.delete($),yield Promise.all(B.container.getProviders().map(q=>q.delete())),B.isDeleted=!0)})).apply(this,arguments)}function mi(B,$,q){var xe;let Ue=null!==(xe=We[B])&&void 0!==xe?xe:B;q&&(Ue+=`-${q}`);const ct=Ue.match(/\s|\//),cn=$.match(/\s|\//);if(ct||cn){const Xt=[`Unable to register library "${Ue}" with version "${$}":`];return ct&&Xt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),ct&&cn&&Xt.push("and"),cn&&Xt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void j.warn(Xt.join(" "))}zr(new re.wA(`${Ue}-version`,()=>({library:Ue,version:$}),"VERSION"))}function Bn(B,$){if(null!==B&&"function"!=typeof B)throw Br.create("invalid-log-argument");(0,N.Am)(B,$)}function ki(B){(0,N.Ub)(B)}const gn="firebase-heartbeat-store";let to=null;function fn(){return to||(to=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(B,$)=>{0===$&&B.createObjectStore(gn)}}).catch(B=>{throw Br.create("idb-open",{originalErrorMessage:B.message})})),to}function Xe(){return(Xe=(0,f.Z)(function*(B){var $;try{return(yield fn()).transaction(gn).objectStore(gn).get(mn(B))}catch(q){if(q instanceof he.ZR)j.warn(q.message);else{const xe=Br.create("idb-get",{originalErrorMessage:null===($=q)||void 0===$?void 0:$.message});j.warn(xe.message)}}})).apply(this,arguments)}function Bo(B,$){return yr.apply(this,arguments)}function yr(){return(yr=(0,f.Z)(function*(B,$){var q;try{const Ue=(yield fn()).transaction(gn,"readwrite");return yield Ue.objectStore(gn).put($,mn(B)),Ue.done}catch(xe){if(xe instanceof he.ZR)j.warn(xe.message);else{const Ue=Br.create("idb-set",{originalErrorMessage:null===(q=xe)||void 0===q?void 0:q.message});j.warn(Ue.message)}}})).apply(this,arguments)}function mn(B){return`${B.name}!${B.options.appId}`}class xs{constructor($){this.container=$,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Ht(q),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var $=this;return(0,f.Z)(function*(){const xe=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Qt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!$._heartbeatsCache.heartbeats.some(ct=>ct.date===Ue))return $._heartbeatsCache.heartbeats.push({date:Ue,agent:xe}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(ct=>{const cn=new Date(ct.date).valueOf();return Date.now()-cn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,f.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const q=Qt(),{heartbeatsToSend:xe,unsentEntries:Ue}=function Oi(B,$=1024){const q=[];let xe=B.slice();for(const Ue of B){const ct=q.find(cn=>cn.agent===Ue.agent);if(ct){if(ct.dates.push(Ue.date),Y(q)>$){ct.dates.pop();break}}else if(q.push({agent:Ue.agent,dates:[Ue.date]}),Y(q)>$){q.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:q,unsentEntries:xe}}($._heartbeatsCache.heartbeats),ct=(0,he.L)(JSON.stringify({version:2,heartbeats:xe}));return $._heartbeatsCache.lastSentHeartbeatDate=q,Ue.length>0?($._heartbeatsCache.heartbeats=Ue,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),ct})()}}function Qt(){return(new Date).toISOString().substring(0,10)}class Ht{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,f.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function ot(B){return Xe.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var q=this;return(0,f.Z)(function*(){var xe;if(yield q._canUseIndexedDBPromise){const ct=yield q.read();return Bo(q.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:ct.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var q=this;return(0,f.Z)(function*(){var xe;if(yield q._canUseIndexedDBPromise){const ct=yield q.read();return Bo(q.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...$.heartbeats]})}})()}}function Y(B){return(0,he.L)(JSON.stringify({version:2,heartbeats:B})).length}!function G(B){zr(new re.wA("platform-logger",$=>new pe($),"PRIVATE")),zr(new re.wA("heartbeat",$=>new xs($),"PRIVATE")),mi(ge,"0.7.31",B),mi(ge,"0.7.31","esm2017"),mi("fire-js","")}("")},4859:(ut,Ce,F)=>{F.d(Ce,{H0:()=>ge,wA:()=>N});var f=F(5861),re=F(2090);class N{constructor(j,H,ee){this.name=j,this.instanceFactory=H,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const he="[DEFAULT]";class le{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const ee=new re.BH;if(this.instancesDeferred.set(H,ee),this.isInitialized(H)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:H});$e&&ee.resolve($e)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const ee=this.normalizeInstanceIdentifier(j?.identifier),$e=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Re){if($e)return null;throw Re}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ue(me){return"EAGER"===me.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[H,ee]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:$e});ee.resolve(Re)}catch{}}}}clearInstance(j=he){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...H.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=he){return this.instances.has(j)}getOptions(j=he){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,ee=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:ee,options:H});for(const[Re,Me]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Re)&&Me.resolve($e);return $e}onInit(j,H){var ee;const $e=this.normalizeInstanceIdentifier(H),Re=null!==(ee=this.onInitCallbacks.get($e))&&void 0!==ee?ee:new Set;Re.add(j),this.onInitCallbacks.set($e,Re);const Me=this.instances.get($e);return Me&&j(Me,$e),()=>{Re.delete(j)}}invokeOnInitCallbacks(j,H){const ee=this.onInitCallbacks.get(H);if(ee)for(const $e of ee)try{$e(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let ee=this.instances.get(j);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(me=j,me===he?void 0:me),options:H}),this.instances.set(j,ee),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(ee,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,ee)}catch{}var me;return ee||null}normalizeInstanceIdentifier(j=he){return this.component?this.component.multipleInstances?j:he:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new le(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ce,F)=>{F.d(Ce,{Am:()=>me,Ub:()=>ge,Yd:()=>ue,in:()=>re});const f=[];var re=(()=>{return(j=re||(re={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",re;var j})();const N={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},he=re.INFO,le={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},pe=(j,H,...ee)=>{if(H<j.logLevel)return;const $e=(new Date).toISOString(),Re=le[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${$e}]  ${j.name}:`,...ee)};class ue{constructor(H){this.name=H,this._logLevel=he,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in re))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...H),this._logHandler(this,re.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...H),this._logHandler(this,re.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,re.INFO,...H),this._logHandler(this,re.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,re.WARN,...H),this._logHandler(this,re.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...H),this._logHandler(this,re.ERROR,...H)}}function ge(j){f.forEach(H=>{H.setLogLevel(j)})}function me(j,H){for(const ee of f){let $e=null;H&&H.level&&($e=N[H.level]),ee.userLogHandler=null===j?null:(Re,Me,...Ye)=>{const ye=Ye.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Me>=($e??Re.logLevel)&&j({level:re[Me].toLowerCase(),message:ye,args:Ye,type:Re.name})}}}},8766:(ut,Ce,F)=>{F.d(Ce,{Lj:()=>Ae,X3:()=>tt});var f=F(5861);let N,he;const ue=new WeakMap,ge=new WeakMap,me=new WeakMap,j=new WeakMap,H=new WeakMap;let Re={get(U,ve,X){if(U instanceof IDBTransaction){if("done"===ve)return ge.get(U);if("objectStoreNames"===ve)return U.objectStoreNames||me.get(U);if("store"===ve)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return _e(U[ve])},set:(U,ve,X)=>(U[ve]=X,!0),has:(U,ve)=>U instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in U};function ye(U){return"function"==typeof U?function Ye(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ve){return U.apply(Qe(this),ve),_e(ue.get(this))}:function(...ve){return _e(U.apply(Qe(this),ve))}:function(ve,...X){const te=U.call(Qe(this),ve,...X);return me.set(te,ve.sort?ve.sort():[ve]),_e(te)}}(U):(U instanceof IDBTransaction&&function $e(U){if(ge.has(U))return;const ve=new Promise((X,te)=>{const oe=()=>{U.removeEventListener("complete",ie),U.removeEventListener("error",Le),U.removeEventListener("abort",Le)},ie=()=>{X(),oe()},Le=()=>{te(U.error||new DOMException("AbortError","AbortError")),oe()};U.addEventListener("complete",ie),U.addEventListener("error",Le),U.addEventListener("abort",Le)});ge.set(U,ve)}(U),((U,ve)=>ve.some(X=>U instanceof X))(U,function le(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Re):U)}function _e(U){if(U instanceof IDBRequest)return function ee(U){const ve=new Promise((X,te)=>{const oe=()=>{U.removeEventListener("success",ie),U.removeEventListener("error",Le)},ie=()=>{X(_e(U.result)),oe()},Le=()=>{te(U.error),oe()};U.addEventListener("success",ie),U.addEventListener("error",Le)});return ve.then(X=>{X instanceof IDBCursor&&ue.set(X,U)}).catch(()=>{}),H.set(ve,U),ve}(U);if(j.has(U))return j.get(U);const ve=ye(U);return ve!==U&&(j.set(U,ve),H.set(ve,U)),ve}const Qe=U=>H.get(U);function tt(U,ve,{blocked:X,upgrade:te,blocking:oe,terminated:ie}={}){const Le=indexedDB.open(U,ve),Ne=_e(Le);return te&&Le.addEventListener("upgradeneeded",pt=>{te(_e(Le.result),pt.oldVersion,pt.newVersion,_e(Le.transaction))}),X&&Le.addEventListener("blocked",()=>X()),Ne.then(pt=>{ie&&pt.addEventListener("close",()=>ie()),oe&&pt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ne}function Ae(U,{blocked:ve}={}){const X=indexedDB.deleteDatabase(U);return ve&&X.addEventListener("blocked",()=>ve()),_e(X).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],He=new Map;function Ge(U,ve){if(!(U instanceof IDBDatabase)||ve in U||"string"!=typeof ve)return;if(He.get(ve))return He.get(ve);const X=ve.replace(/FromIndex$/,""),te=ve!==X,oe=De.includes(X);if(!(X in(te?IDBIndex:IDBObjectStore).prototype)||!oe&&!we.includes(X))return;const ie=function(){var Le=(0,f.Z)(function*(Ne,...pt){const qt=this.transaction(Ne,oe?"readwrite":"readonly");let Gt=qt.store;return te&&(Gt=Gt.index(pt.shift())),(yield Promise.all([Gt[X](...pt),oe&&qt.done]))[0]});return function(pt){return Le.apply(this,arguments)}}();return He.set(ve,ie),ie}!function Me(U){Re=U(Re)}(U=>({...U,get:(ve,X,te)=>Ge(ve,X)||U.get(ve,X,te),has:(ve,X)=>!!Ge(ve,X)||U.has(ve,X)}))},5861:(ut,Ce,F)=>{function f(N,he,le,pe,ue,ge,me){try{var j=N[ge](me),H=j.value}catch(ee){return void le(ee)}j.done?he(H):Promise.resolve(H).then(pe,ue)}function re(N){return function(){var he=this,le=arguments;return new Promise(function(pe,ue){var ge=N.apply(he,le);function me(H){f(ge,pe,ue,me,j,"next",H)}function j(H){f(ge,pe,ue,me,j,"throw",H)}me(void 0)})}}F.d(Ce,{Z:()=>re})}},ut=>{ut(ut.s=6593)}]);